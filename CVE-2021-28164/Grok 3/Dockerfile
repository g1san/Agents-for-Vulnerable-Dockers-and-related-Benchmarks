FROM eclipse-temurin:11-jre-focal

# Install Jetty 9.4.38.v20210224
RUN apt-get update && apt-get install -y wget && \
    wget -q https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/9.4.38.v20210224/jetty-distribution-9.4.38.v20210224.tar.gz -O /tmp/jetty.tar.gz && \
    tar -xzf /tmp/jetty.tar.gz -C /opt && \
    mv /opt/jetty-distribution-9.4.38.v20210224 /opt/jetty && \
    rm /tmp/jetty.tar.gz && \
    apt-get remove -y wget && apt-get autoremove -y && apt-get clean

# Set working directory
WORKDIR /opt/jetty

# Expose port
EXPOSE 8080

# Start Jetty
CMD ["java", "-jar", "start.jar"]