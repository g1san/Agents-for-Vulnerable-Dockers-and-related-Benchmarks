FROM php:7.4-apache

RUN apt-get update && \
    apt-get install -y librrd-dev libpng-dev libjpeg-dev libxml2-dev && \
    docker-php-ext-install mysqli && \
    docker-php-ext-install gd && \
    a2enmod rewrite

COPY config.php /var/www/html/config.php
COPY remote_agent.php /var/www/html/remote_agent.php

# Simulate vulnerable Cacti version
RUN echo "Cacti 1.2.22" > /var/www/html/version.txt

EXPOSE 80
