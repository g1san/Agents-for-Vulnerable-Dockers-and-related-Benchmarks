FROM debian:bullseye-slim

RUN apt-get update \
    && apt-get install -y wget build-essential \
    && wget https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs924/ghostscript-9.24.tar.gz \
    && tar -xzf ghostscript-9.24.tar.gz \
    && cd ghostscript-9.24 \
    && ./configure \
    && make \
    && make install \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /ghostscript-9.24 /ghostscript-9.24.tar.gz

COPY test.eps /test.eps
CMD ["gs", "-dSAFER", "-dNOPAUSE", "-dBATCH", "-sDEVICE=pngalpha", "-sOutputFile=/output/output.png", "/test.eps"]