# Use a stable version of OpenJDK 8 as the base image
FROM openjdk:8-jdk-stretch

# Install necessary packages and set up Elasticsearch
RUN apt-get update && \
    apt-get install -y wget && \
    wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-1.1.1.tar.gz && \
    tar -xzf elasticsearch-1.1.1.tar.gz && \
    mv elasticsearch-1.1.1 /usr/share/elasticsearch && \
    rm elasticsearch-1.1.1.tar.gz && \
    apt-get clean

# Copy custom configuration
COPY elasticsearch.yml /usr/share/elasticsearch/config/elasticsearch.yml

# Set environment variables
ENV PATH /usr/share/elasticsearch/bin:$PATH

# Expose ports
EXPOSE 9200 9300

# Set the entrypoint
ENTRYPOINT ["elasticsearch"]
