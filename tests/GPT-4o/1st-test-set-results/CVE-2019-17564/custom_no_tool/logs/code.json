{
    "files": [
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/docker-compose.yml",
            "content": "services:\n  zookeeper:\n    image: zookeeper:3.5.8\n    ports:\n      - \"2181:2181\"\n    environment:\n      ZOO_MY_ID: 1\n      ZOO_SERVERS: server.1=zookeeper:2888:3888\n    networks:\n      - dubbo-network\n    healthcheck:\n      test: [\"CMD\", \"echo ruok | nc localhost 2181 | grep imok\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  dubbo-provider:\n    build: ./dubbo-provider\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      zookeeper:\n        condition: service_healthy\n    environment:\n      ZOOKEEPER_ADDRESS: zookeeper:2181\n      DUBBO_PROTOCOL: dubbo\n      DUBBO_PORT: 20880\n    networks:\n      - dubbo-network\n\nnetworks:\n  dubbo-network:\n    driver: bridge\n    name: dubbo-network\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/Dockerfile",
            "content": "FROM maven:3.6.3-jdk-8\n\nWORKDIR /app\n\nCOPY . /app\n\nRUN mvn clean package\n\nCMD [\"java\", \"-jar\", \"target/dubbo-provider-1.0-SNAPSHOT-jar-with-dependencies.jar\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/pom.xml",
            "content": "<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example</groupId>\n    <artifactId>dubbo-provider</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo</artifactId>\n            <version>2.7.5</version> <!-- Upgraded to a version that fixes CVE-2019-17564 -->\n        </dependency>\n        <dependency>\n            <groupId>org.apache.zookeeper</groupId>\n            <artifactId>zookeeper</artifactId>\n            <version>3.5.8</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.1</version>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-assembly-plugin</artifactId>\n                <version>3.1.1</version>\n                <configuration>\n                    <archive>\n                        <manifest>\n                            <mainClass>com.example.dubbo.ProviderApplication</mainClass>\n                        </manifest>\n                    </archive>\n                    <descriptorRefs>\n                        <descriptorRef>jar-with-dependencies</descriptorRef>\n                    </descriptorRefs>\n                </configuration>\n                <executions>\n                    <execution>\n                        <id>make-assembly</id>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>single</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/src/main/java/com/example/dubbo/ProviderApplication.java",
            "content": "package com.example.dubbo;\n\nimport org.apache.dubbo.config.ApplicationConfig;\nimport org.apache.dubbo.config.ProtocolConfig;\nimport org.apache.dubbo.config.RegistryConfig;\nimport org.apache.dubbo.config.ServiceConfig;\n\nimport java.util.concurrent.CountDownLatch;\n\npublic class ProviderApplication {\n    public static void main(String[] args) throws InterruptedException {\n        ApplicationConfig application = new ApplicationConfig();\n        application.setName(\"dubbo-provider\");\n\n        RegistryConfig registry = new RegistryConfig();\n        registry.setAddress(System.getenv(\"ZOOKEEPER_ADDRESS\"));\n\n        ProtocolConfig protocol = new ProtocolConfig();\n        protocol.setName(System.getenv(\"DUBBO_PROTOCOL\"));\n        protocol.setPort(Integer.parseInt(System.getenv(\"DUBBO_PORT\")));\n\n        ServiceConfig<DemoService> service = new ServiceConfig<>();\n        service.setApplication(application);\n        service.setRegistry(registry);\n        service.setProtocol(protocol);\n        service.setInterface(DemoService.class);\n        service.setRef(new DemoServiceImpl());\n\n        service.export();\n\n        System.out.println(\"Dubbo service started.\");\n\n        new CountDownLatch(1).await();\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/src/main/java/com/example/dubbo/DemoService.java",
            "content": "package com.example.dubbo;\n\npublic interface DemoService {\n    String sayHello(String name);\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/src/main/java/com/example/dubbo/DemoServiceImpl.java",
            "content": "package com.example.dubbo;\n\npublic class DemoServiceImpl implements DemoService {\n    @Override\n    public String sayHello(String name) {\n        return \"Hello, \" + name;\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2019-17564/custom_no_tool/dubbo-provider/src/main/resources/log4j.properties",
            "content": "log4j.rootLogger=INFO, console\n\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.ConversionPattern=%d{ISO8601} [%t] %-5p %c %x - %m%n\n"
        }
    ],
    "directory_tree": "CVE-2019-17564/\n\u2514\u2500\u2500 custom_no_tool/\n    \u251c\u2500\u2500 docker-compose.yml\n    \u2514\u2500\u2500 dubbo-provider/\n        \u251c\u2500\u2500 Dockerfile\n        \u251c\u2500\u2500 pom.xml\n        \u2514\u2500\u2500 src/\n            \u251c\u2500\u2500 main/\n            \u2502   \u251c\u2500\u2500 java/\n            \u2502   \u2502   \u2514\u2500\u2500 com/\n            \u2502   \u2502       \u2514\u2500\u2500 example/\n            \u2502   \u2502           \u2514\u2500\u2500 dubbo/\n            \u2502   \u2502               \u251c\u2500\u2500 DemoService.java\n            \u2502   \u2502               \u251c\u2500\u2500 DemoServiceImpl.java\n            \u2502   \u2502               \u2514\u2500\u2500 ProviderApplication.java\n            \u2502   \u2514\u2500\u2500 resources/\n            \u2502       \u2514\u2500\u2500 log4j.properties\n            \u2514\u2500\u2500 test/\n                \u2514\u2500\u2500 java/\n                    \u2514\u2500\u2500 com/\n                        \u2514\u2500\u2500 example/\n                            \u2514\u2500\u2500 dubbo/"
}