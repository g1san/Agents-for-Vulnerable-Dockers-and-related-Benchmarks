# This Dockerfile is used to build a custom Elasticsearch container based on 1.6.0
FROM adoptopenjdk:8-jdk-hotspot

# Set environment variables
ENV ELASTICSEARCH_VERSION=1.6.0

# Copy the Elasticsearch tarball into the image
COPY elasticsearch-$ELASTICSEARCH_VERSION.tar.gz /tmp/elasticsearch.tar.gz

# Install Elasticsearch
RUN apt-get update \
    && apt-get install -y tar \
    && tar -xzf /tmp/elasticsearch.tar.gz -C /usr/share \
    && mv /usr/share/elasticsearch-$ELASTICSEARCH_VERSION /usr/share/elasticsearch \
    && rm /tmp/elasticsearch.tar.gz \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Set the working directory
WORKDIR /usr/share/elasticsearch

# Expose ports
EXPOSE 9200 9300

# Run Elasticsearch
CMD ["/usr/share/elasticsearch/bin/elasticsearch"]
