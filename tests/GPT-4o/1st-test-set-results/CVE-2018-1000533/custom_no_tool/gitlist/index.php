<?php
// Simple index file to simulate GitList vulnerable version
// This is a placeholder for a vulnerable version of GitList

function searchTree($query) {
    // Vulnerable code: unsanitized input leads to command injection
    system("git grep -l " . escapeshellarg($query));
}

if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['query'])) {
    searchTree($_POST['query']);
}
?>

<!DOCTYPE html>
<html>
<head>
    <title>GitList Vulnerable Search</title>
</head>
<body>
    <h1>Search in Git Repositories</h1>
    <form method="POST">
        <input type="text" name="query" placeholder="Search..." />
        <button type="submit">Search</button>
    </form>
</body>
</html>
