{
    "files": [
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/docker-compose.yml",
            "content": "version: '3.7'\n\nservices:\n  web:\n    build: ./web\n    ports:\n      - \"8000:8000\"\n    depends_on:\n      - db\n    command: [\"./wait-for-it.sh\", \"db:5432\", \"--\", \"python\", \"manage.py\", \"runserver\", \"0.0.0.0:8000\"]\n\n  db:\n    image: postgres:9.6\n    environment:\n      POSTGRES_DB: myapp\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: password\n    volumes:\n      - db_data:/var/lib/postgresql/data\n      - ./db-init-scripts:/docker-entrypoint-initdb.d\n    ports:\n      - \"5432:5432\"\n\nvolumes:\n  db_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/Dockerfile",
            "content": "FROM python:3.6\n\n# Set environment variables\nENV PYTHONDONTWRITEBYTECODE 1\nENV PYTHONUNBUFFERED 1\n\n# Set work directory\nWORKDIR /usr/src/app\n\n# Install dependencies\nCOPY requirements.txt /usr/src/app/\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy project\nCOPY . /usr/src/app/\n\n# Expose port\nEXPOSE 8000\n\n# Copy wait-for-it script\nCOPY wait-for-it.sh /usr/src/app/\nRUN chmod +x /usr/src/app/wait-for-it.sh\n\n# Run the application\nCMD [\"./wait-for-it.sh\", \"db:5432\", \"--\", \"python\", \"manage.py\", \"runserver\", \"0.0.0.0:8000\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/requirements.txt",
            "content": "Django==1.11.5\npsycopg2==2.7.3.2\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/manage.py",
            "content": "#!/usr/bin/env python\nimport os\nimport sys\n\ndef main():\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)\n\nif __name__ == '__main__':\n    main()\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myproject/settings.py",
            "content": "import os\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = 'your-secret-key'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = False\n\nALLOWED_HOSTS = ['*']\n\n# Application definition\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'myapp',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'myproject.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'myproject.wsgi.application'\n\n# Database\n# https://docs.djangoproject.com/en/1.11/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': 'myapp',\n        'USER': 'user',\n        'PASSWORD': 'password',\n        'HOST': 'db',\n        'PORT': 5432,\n    }\n}\n\n# Password validation\n# https://docs.djangoproject.com/en/1.11/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n# Internationalization\n# https://docs.djangoproject.com/en/1.11/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/1.11/howto/static-files/\n\nSTATIC_URL = '/static/'\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myproject/urls.py",
            "content": "from django.conf.urls import url\nfrom django.contrib import admin\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n]\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myproject/wsgi.py",
            "content": "import os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"myproject.settings\")\n\napplication = get_wsgi_application()\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/models.py",
            "content": "from django.db import models\n\nclass TestModel(models.Model):\n    name = models.CharField(max_length=255)\n    description = models.TextField()\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/__init__.py",
            "content": ""
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/admin.py",
            "content": "from django.contrib import admin\nfrom .models import TestModel\n\nadmin.site.register(TestModel)\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/apps.py",
            "content": "from django.apps import AppConfig\n\nclass MyAppConfig(AppConfig):\n    name = 'myapp'\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/migrations/0001_initial.py",
            "content": "# -*- coding: utf-8 -*-\n# Generated by Django 1.11.4 on 2023-10-01\nfrom __future__ import unicode_literals\n\nfrom django.db import migrations, models\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = []\n\n    operations = [\n        migrations.CreateModel(\n            name='TestModel',\n            fields=[\n                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=255)),\n                ('description', models.TextField()),\n            ],\n        ),\n    ]\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/myapp/migrations/__init__.py",
            "content": ""
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/web/wait-for-it.sh",
            "content": "#!/usr/bin/env bash\n#   Use this script to test if a given TCP host/port are available\n\n# The MIT License (MIT)\n#\n# Copyright (c) 2016 Olivier Poitrey <rs@dailymotion.com>\n#\n# Permission is hereby granted, free of charge, to any person obtaining a copy\n# of this software and associated documentation files (the \"Software\"), to deal\n# in the Software without restriction, including without limitation the rights\n# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n# copies of the Software, and to permit persons to whom the Software is\n# furnished to do so, subject to the following conditions:\n#\n# The above copyright notice and this permission notice shall be included in\n# all copies or substantial portions of the Software.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n# THE SOFTWARE.\n\nset -e\n\nTIMEOUT=15\nQUIET=0\n\nfunction usage()\n{\n    echo \"Usage: $0 host:port [-s] [-t timeout] [-- command args]\"\n    echo \"-h HOST | --host=HOST       Host or IP under test\"\n    echo \"-p PORT | --port=PORT       TCP port under test\"\n    echo \"-s | --strict               Only execute subcommand if the test succeeds\"\n    echo \"-q | --quiet                Don't output any status messages\"\n    echo \"-t TIMEOUT | --timeout=TIMEOUT\"\n    echo \"                            Timeout in seconds, zero for no timeout\"\n    echo \"-- COMMAND ARGS             Execute command with args after the test finishes\"\n    exit 1\n}\n\nwhile [[ $# -gt 0 ]]\ndo\n    case \"$1\" in\n        *:*)\n        HOST=$(printf \"%s\" \"$1\" | cut -d : -f 1)\n        PORT=$(printf \"%s\" \"$1\" | cut -d : -f 2)\n        shift 1\n        ;;\n        -h)\n        HOST=\"$2\"\n        if [[ \"$HOST\" == \"\" ]]; then break; fi\n        shift 2\n        ;;\n        --host=*)\n        HOST=\"${1#*=}\"\n        shift 1\n        ;;\n        -p)\n        PORT=\"$2\"\n        if [[ \"$PORT\" == \"\" ]]; then break; fi\n        shift 2\n        ;;\n        --port=*)\n        PORT=\"${1#*=}\"\n        shift 1\n        ;;\n        -t)\n        TIMEOUT=\"$2\"\n        if [[ \"$TIMEOUT\" == \"\" ]]; then break; fi\n        shift 2\n        ;;\n        --timeout=*)\n        TIMEOUT=\"${1#*=}\"\n        shift 1\n        ;;\n        -q | --quiet)\n        QUIET=1\n        shift 1\n        ;;\n        -s | --strict)\n        STRICT=1\n        shift 1\n        ;;\n        --)\n        shift\n        CMD=\"$@\"\n        break\n        ;;\n        --help)\n        usage\n        ;;\n        *)\n        echo \"Unknown argument: $1\"\n        usage\n        ;;\n    esac\n\ndone\n\nif [[ \"$HOST\" == \"\" || \"$PORT\" == \"\" ]]; then\n    echo \"Error: you need to provide a host and port to test.\"\n    usage\nfi\n\nfor i in $(seq $TIMEOUT) ; do\n    nc -z \"$HOST\" \"$PORT\" > /dev/null 2>&1\n    result=$?\n    if [[ $result -eq 0 ]] ; then\n        if [[ $QUIET -ne 1 ]] ; then echo \"Success: $HOST:$PORT is available\"; fi\n        if [[ \"$CMD\" != \"\" ]] ; then\n            exec $CMD\n        fi\n        exit 0\n    fi\n    sleep 1\n\ndone\nif [[ $STRICT -eq 1 ]] ; then\n    echo \"Error: $HOST:$PORT is not available after $TIMEOUT seconds\"\n    exit 1\nfi\nif [[ $QUIET -ne 1 ]] ; then echo \"Timeout occurred\"; fi\nif [[ \"$CMD\" != \"\" ]] ; then\n    exec $CMD\nfi\nexit 0\n"
        },
        {
            "location": "./../../dockers/CVE-2017-12794/custom_no_tool/db-init-scripts/init-db.sh",
            "content": "#!/bin/bash\nset -e\n\npsql -v ON_ERROR_STOP=1 --username \"$POSTGRES_USER\" --dbname \"$POSTGRES_DB\" <<-EOSQL\n    CREATE TABLE IF NOT EXISTS test_table (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        description TEXT\n    );\n    INSERT INTO test_table (name, description) VALUES ('Test Name', 'Test Description');\nEOSQL\n"
        }
    ],
    "directory_tree": "CVE-2017-12794/\n\u251c\u2500\u2500 custom_no_tool\n\u2502   \u251c\u2500\u2500 db-init-scripts\n\u2502   \u2502   \u2514\u2500\u2500 init-db.sh\n\u2502   \u251c\u2500\u2500 docker-compose.yml\n\u2502   \u2514\u2500\u2500 web\n\u2502       \u251c\u2500\u2500 Dockerfile\n\u2502       \u251c\u2500\u2500 manage.py\n\u2502       \u251c\u2500\u2500 myapp\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py\n\u2502       \u2502   \u251c\u2500\u2500 admin.py\n\u2502       \u2502   \u251c\u2500\u2500 apps.py\n\u2502       \u2502   \u251c\u2500\u2500 migrations\n\u2502       \u2502   \u2502   \u251c\u2500\u2500 0001_initial.py\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502       \u2502   \u2514\u2500\u2500 models.py\n\u2502       \u251c\u2500\u2500 myproject\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py\n\u2502       \u2502   \u251c\u2500\u2500 settings.py\n\u2502       \u2502   \u251c\u2500\u2500 urls.py\n\u2502       \u2502   \u2514\u2500\u2500 wsgi.py\n\u2502       \u251c\u2500\u2500 requirements.txt\n\u2502       \u2514\u2500\u2500 wait-for-it.sh\n"
}