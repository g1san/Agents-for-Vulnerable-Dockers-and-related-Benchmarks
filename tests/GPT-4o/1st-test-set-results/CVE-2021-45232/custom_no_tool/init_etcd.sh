#!/bin/sh

# Initialize etcd with some test data required by Apache APISIX
ETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \
    "/apisix/routes/1" '{"uri":"/hello","upstream":{"type":"roundrobin","nodes":{"127.0.0.1:1980":1}}}'

ETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \
    "/apisix/upstreams/1" '{"nodes":{"127.0.0.1:1980":1},"type":"roundrobin"}'

ETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \
    "/apisix/services/1" '{"upstream_id":"1"}'
