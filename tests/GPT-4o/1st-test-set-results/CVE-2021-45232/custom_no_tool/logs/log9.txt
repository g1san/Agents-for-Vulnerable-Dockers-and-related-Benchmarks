#1 [internal] load local bake definitions
#1 reading from stdin 781B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 722B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/golang:1.17
#3 ...

#4 [internal] load metadata for docker.io/library/nginx:alpine
#4 DONE 0.2s

#3 [internal] load metadata for docker.io/library/golang:1.17
#3 DONE 0.2s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [stage-1 1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
#6 resolve docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14 0.0s done
#6 CACHED

#7 [builder 1/7] FROM docker.io/library/golang:1.17@sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18
#7 resolve docker.io/library/golang:1.17@sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18 0.0s done
#7 DONE 0.0s

#8 [builder 4/7] RUN git checkout v2.10.1
#8 CACHED

#9 [builder 2/7] WORKDIR /go/src/github.com/apache/apisix-dashboard
#9 CACHED

#10 [builder 3/7] RUN git clone https://github.com/apache/apisix-dashboard.git .
#10 CACHED

#11 [builder 5/7] RUN curl -fsSL https://deb.nodesource.com/setup_14.x | bash -     && apt-get install -y nodejs
#11 CACHED

#12 [builder 6/7] RUN npm install -g yarn
#12 1.952 
#12 1.952 > yarn@1.22.22 preinstall /usr/lib/node_modules/yarn
#12 1.952 > :; (node ./preinstall.js > /dev/null 2>&1 || true)
#12 1.952 
#12 2.173 /usr/bin/yarn -> /usr/lib/node_modules/yarn/bin/yarn.js
#12 2.173 /usr/bin/yarnpkg -> /usr/lib/node_modules/yarn/bin/yarn.js
#12 2.176 + yarn@1.22.22
#12 2.176 added 1 package in 1.728s
#12 DONE 2.2s

#13 [builder 7/7] RUN make build
#13 0.226 api/build.sh && cd ./web && export CYPRESS_INSTALL_BINARY=0  && yarn install --ignore-scripts && yarn build  && mkdir -p ../output/logs
#13 0.234 + export ENV=local
#13 0.234 + ENV=local
#13 0.234 ++ pwd
#13 0.235 + pwd=/go/src/github.com/apache/apisix-dashboard
#13 0.235 + rm -rf output
#13 0.236 + mkdir -p output/conf
#13 0.238 + mkdir -p output/dag-to-lua
#13 0.240 + [[ ! -f dag-to-lua-1.1/lib/dag-to-lua.lua ]]
#13 0.240 + wget https://github.com/api7/dag-to-lua/archive/v1.1.tar.gz -P /tmp
#13 0.243 --2025-11-10 20:31:37--  https://github.com/api7/dag-to-lua/archive/v1.1.tar.gz
#13 0.249 Resolving github.com (github.com)... 140.82.121.3
#13 0.306 Connecting to github.com (github.com)|140.82.121.3|:443... connected.
#13 1.413 HTTP request sent, awaiting response... 302 Found
#13 1.624 Location: https://codeload.github.com/api7/dag-to-lua/tar.gz/refs/tags/v1.1 [following]
#13 1.624 --2025-11-10 20:31:39--  https://codeload.github.com/api7/dag-to-lua/tar.gz/refs/tags/v1.1
#13 1.624 Resolving codeload.github.com (codeload.github.com)... 140.82.121.10
#13 1.701 Connecting to codeload.github.com (codeload.github.com)|140.82.121.10|:443... connected.
#13 1.834 HTTP request sent, awaiting response... 200 OK
#13 2.205 Length: unspecified [application/x-gzip]
#13 2.205 Saving to: '/tmp/v1.1.tar.gz'
#13 2.205 
#13 2.205      0K .......... ...                                         57.4M=0s
#13 2.206 
#13 2.206 2025-11-10 20:31:39 (57.4 MB/s) - '/tmp/v1.1.tar.gz' saved [13999]
#13 2.206 
#13 2.207 + tar -zxvf /tmp/v1.1.tar.gz -C /tmp
#13 2.210 dag-to-lua-1.1/
#13 2.210 dag-to-lua-1.1/.github/
#13 2.211 dag-to-lua-1.1/.github/workflows/
#13 2.211 dag-to-lua-1.1/.github/workflows/unit-test.yaml
#13 2.211 dag-to-lua-1.1/.gitignore
#13 2.211 dag-to-lua-1.1/.luacheckrc
#13 2.211 dag-to-lua-1.1/LICENSE
#13 2.211 dag-to-lua-1.1/Makefile
#13 2.211 dag-to-lua-1.1/README.md
#13 2.212 dag-to-lua-1.1/lib/
#13 2.212 dag-to-lua-1.1/lib/cli.lua
#13 2.212 dag-to-lua-1.1/lib/dag-to-lua.lua
#13 2.212 dag-to-lua-1.1/lib/json.lua
#13 2.212 dag-to-lua-1.1/rockspec/
#13 2.212 dag-to-lua-1.1/rockspec/dag-to-lua-1.0-0.rockspec
#13 2.212 dag-to-lua-1.1/rockspec/dag-to-lua-master-0.rockspec
#13 2.213 dag-to-lua-1.1/t/
#13 2.213 dag-to-lua-1.1/t/conf-err.lua
#13 2.213 dag-to-lua-1.1/t/default.lua
#13 2.213 dag-to-lua-1.1/t/empty-child.lua
#13 2.213 dag-to-lua-1.1/t/example.lua
#13 2.213 dag-to-lua-1.1/t/missing-config.lua
#13 2.213 dag-to-lua-1.1/t/multi-condition-children.lua
#13 2.213 dag-to-lua-1.1/t/multi-no-condition-children.lua
#13 2.213 dag-to-lua-1.1/t/no-child.lua
#13 2.214 dag-to-lua-1.1/t/no-root.lua
#13 2.214 dag-to-lua-1.1/t/single-child.lua
#13 2.214 dag-to-lua-1.1/utils/
#13 2.214 dag-to-lua-1.1/utils/check-lua-code-style.sh
#13 2.215 + cp -r /tmp/dag-to-lua-1.1/lib/cli.lua /tmp/dag-to-lua-1.1/lib/dag-to-lua.lua /tmp/dag-to-lua-1.1/lib/json.lua ./output/dag-to-lua
#13 2.216 + cd ./api
#13 2.216 + go build -o ../output/manager-api -ldflags '-X github.com/apisix/manager-api/internal/utils.version=2.10.1 -X github.com/apisix/manager-api/internal/utils.gitHash=2094ced' ./main.go
#13 7.457 go: downloading github.com/spf13/cobra v0.0.3
#13 7.457 go: downloading github.com/spf13/viper v1.8.1
#13 7.457 go: downloading github.com/tidwall/gjson v1.6.7
#13 7.462 go: downloading go.uber.org/zap v1.17.0
#13 7.464 go: downloading github.com/shiningrush/droplet v0.2.6-0.20210127040147-53817015cd1b
#13 7.473 go: downloading github.com/evanphx/json-patch/v5 v5.1.0
#13 7.473 go: downloading github.com/sony/sonyflake v1.0.0
#13 7.506 go: downloading github.com/yuin/gopher-lua v0.0.0-20200816102855-ee81675732da
#13 7.583 go: downloading github.com/gin-contrib/gzip v0.0.3
#13 7.584 go: downloading github.com/gin-contrib/pprof v1.3.0
#13 7.650 go: downloading github.com/gin-contrib/static v0.0.0-20200916080430-d45d9a37d28e
#13 7.650 go: downloading github.com/gin-gonic/gin v1.6.3
#13 7.668 go: downloading github.com/stretchr/testify v1.7.0
#13 7.668 go: downloading go.etcd.io/etcd v3.3.25+incompatible
#13 7.701 go: downloading github.com/xeipuuv/gojsonschema v1.2.0
#13 7.708 go: downloading github.com/tidwall/match v1.0.3
#13 7.708 go: downloading github.com/tidwall/pretty v1.0.2
#13 7.721 go: downloading github.com/fsnotify/fsnotify v1.4.9
#13 7.727 go: downloading github.com/hashicorp/hcl v1.0.0
#13 7.775 go: downloading github.com/mitchellh/mapstructure v1.4.1
#13 7.775 go: downloading github.com/magiconair/properties v1.8.5
#13 7.783 go: downloading github.com/pelletier/go-toml v1.9.3
#13 7.800 go: downloading github.com/spf13/afero v1.6.0
#13 7.810 go: downloading github.com/spf13/cast v1.3.1
#13 7.810 go: downloading github.com/spf13/jwalterweatherman v1.1.0
#13 7.815 go: downloading github.com/spf13/pflag v1.0.5
#13 7.817 go: downloading github.com/subosito/gotenv v1.2.0
#13 7.912 go: downloading gopkg.in/ini.v1 v1.62.0
#13 7.913 go: downloading gopkg.in/yaml.v2 v2.4.0
#13 7.921 go: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible
#13 7.923 go: downloading github.com/shiningrush/droplet/wrapper/gin v0.2.1
#13 7.986 go: downloading github.com/satori/go.uuid v1.2.0
#13 8.006 go: downloading github.com/getkin/kin-openapi v0.33.0
#13 11.16 go: downloading github.com/pkg/errors v0.9.1
#13 11.16 go: downloading go.uber.org/atomic v1.7.0
#13 11.27 go: downloading go.uber.org/multierr v1.6.0
#13 11.32 go: downloading github.com/go-playground/validator/v10 v10.3.0
#13 11.32 go: downloading github.com/gin-contrib/sse v0.1.0
#13 11.34 go: downloading github.com/mattn/go-isatty v0.0.12
#13 11.35 go: downloading github.com/davecgh/go-spew v1.1.1
#13 11.37 go: downloading github.com/pmezard/go-difflib v1.0.0
#13 11.37 go: downloading github.com/stretchr/objx v0.1.1
#13 11.42 go: downloading golang.org/x/sys v0.0.0-20210514084401-e8d321eab015
#13 11.42 go: downloading github.com/xeipuuv/gojsonreference v0.0.0-20180127040603-bd5ef7bd5415
#13 11.42 go: downloading golang.org/x/text v0.3.6
#13 11.43 go: downloading github.com/golang/protobuf v1.5.2
#13 11.44 go: downloading github.com/ugorji/go/codec v1.1.7
#13 11.44 go: downloading github.com/ghodss/yaml v1.0.0
#13 11.59 go: downloading github.com/go-openapi/jsonpointer v0.19.5
#13 11.59 go: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b
#13 11.93 go: downloading github.com/xeipuuv/gojsonpointer v0.0.0-20180127040702-4e3ac2762d5f
#13 12.13 go: downloading github.com/go-playground/universal-translator v0.17.0
#13 12.15 go: downloading github.com/ugorji/go v1.1.7
#13 12.93 go: downloading github.com/leodido/go-urn v1.2.0
#13 13.57 go: downloading github.com/coreos/etcd v3.3.25+incompatible
#13 31.94 go: downloading github.com/coreos/pkg v0.0.0-20180928190104-399ea9e2e55f
#13 31.94 go: downloading github.com/google/uuid v1.2.0
#13 31.94 go: downloading google.golang.org/grpc v1.26.0
#13 36.46 go: downloading google.golang.org/protobuf v1.26.0
#13 36.85 go: downloading github.com/go-openapi/swag v0.19.5
#13 36.85 go: downloading github.com/go-playground/locales v0.13.0
#13 36.85 go: downloading github.com/gogo/protobuf v1.3.2
#13 36.85 go: downloading github.com/coreos/go-semver v0.3.0
#13 36.85 go: downloading google.golang.org/genproto v0.0.0-20210602131652-f16073e35f0c
#13 36.85 go: downloading github.com/coreos/go-systemd v0.0.0-20191104093116-d3cd4ed1dbcf
#13 36.85 go: downloading golang.org/x/net v0.0.0-20210510120150-4163338589ed
#13 36.94 go: downloading github.com/mailru/easyjson v0.0.0-20190626092158-b2ccc519800e
#13 79.38 + cd ..
#13 79.38 + cp ./api/conf/schema.json ./output/conf/schema.json
#13 79.38 + cp ./api/conf/conf.yaml ./output/conf/conf.yaml
#13 79.38 Build the Manager API successfully
#13 79.38 + echo 'Build the Manager API successfully'
#13 79.58 yarn install v1.22.22
#13 79.67 [1/5] Validating package.json...
#13 79.68 [2/5] Resolving packages...
#13 80.22 [3/5] Fetching packages...
#13 89.50 info There appears to be trouble with your network connection. Retrying...
#13 89.63 error Error: certificate has expired
#13 89.63     at TLSSocket.onConnectSecure (_tls_wrap.js:1515:34)
#13 89.63     at TLSSocket.emit (events.js:400:28)
#13 89.63     at TLSSocket._finishInit (_tls_wrap.js:937:8)
#13 89.63     at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:709:12)
#13 89.63 info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
#13 92.50 info There appears to be trouble with your network connection. Retrying...
#13 95.53 info There appears to be trouble with your network connection. Retrying...
#13 98.53 info There appears to be trouble with your network connection. Retrying...
#13 213.8 info There appears to be trouble with your network connection. Retrying...
#13 216.8 info There appears to be trouble with your network connection. Retrying...
#13 219.8 info There appears to be trouble with your network connection. Retrying...
#13 222.8 info There appears to be trouble with your network connection. Retrying...
#13 226.0 make: *** [Makefile:39: build] Error 1
#13 ERROR: process "/bin/sh -c make build" did not complete successfully: exit code: 2
------
 > [builder 7/7] RUN make build:
89.63     at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:709:12)
89.63 info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
92.50 info There appears to be trouble with your network connection. Retrying...
95.53 info There appears to be trouble with your network connection. Retrying...
98.53 info There appears to be trouble with your network connection. Retrying...
213.8 info There appears to be trouble with your network connection. Retrying...
216.8 info There appears to be trouble with your network connection. Retrying...
219.8 info There appears to be trouble with your network connection. Retrying...
222.8 info There appears to be trouble with your network connection. Retrying...
226.0 make: *** [Makefile:39: build] Error 1
------
Dockerfile:20

--------------------

  18 |     

  19 |     # Build the dashboard

  20 | >>> RUN make build

  21 |     

  22 |     FROM nginx:alpine

--------------------

failed to solve: process "/bin/sh -c make build" did not complete successfully: exit code: 2

