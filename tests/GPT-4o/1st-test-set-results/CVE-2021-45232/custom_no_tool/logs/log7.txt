#1 [internal] load local bake definitions
#1 reading from stdin 781B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 858B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/golang:1.17
#3 ...

#4 [internal] load metadata for docker.io/library/nginx:alpine
#4 DONE 1.3s

#3 [internal] load metadata for docker.io/library/golang:1.17
#3 DONE 1.5s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [stage-1 1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
#6 resolve docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14 0.0s done
#6 CACHED

#7 [builder 1/7] FROM docker.io/library/golang:1.17@sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18
#7 resolve docker.io/library/golang:1.17@sha256:87262e4a4c7db56158a80a18fefdc4fee5accc41b59cde821e691d05541bbb18 0.0s done
#7 DONE 0.0s

#8 [builder 3/7] RUN git clone https://github.com/apache/apisix-dashboard.git .
#8 CACHED

#9 [builder 2/7] WORKDIR /go/src/github.com/apache/apisix-dashboard
#9 CACHED

#10 [builder 4/7] RUN git checkout v2.10.1
#10 CACHED

#11 [builder 5/7] RUN curl -fsSL https://deb.nodesource.com/setup_14.x | bash -     && apt-get install -y nodejs
#11 0.327 
#11 0.327 ================================================================================
#11 0.327 ================================================================================
#11 0.327 
#11 0.327                               DEPRECATION WARNING                            
#11 0.327 
#11 0.327   Node.js 14.x is no longer actively supported!
#11 0.327 
#11 0.327   You will not receive security or critical stability updates for this version.
#11 0.327 
#11 0.327   You should migrate to a supported version of Node.js as soon as possible.
#11 0.327   Use the installation script that corresponds to the version of Node.js you
#11 0.327   wish to install. e.g.
#11 0.327 
#11 0.327    * https://deb.nodesource.com/setup_16.x â€” Node.js 16 "Gallium"
#11 0.327    * https://deb.nodesource.com/setup_18.x â€” Node.js 18 LTS "Hydrogen" (recommended)
#11 0.327    * https://deb.nodesource.com/setup_19.x â€” Node.js 19 "Nineteen"
#11 0.327    * https://deb.nodesource.com/setup_20.x â€” Node.js 20 "Iron" (current)
#11 0.327 
#11 0.327   Please see https://github.com/nodejs/Release for details about which
#11 0.327   version may be appropriate for you.
#11 0.327 
#11 0.327   The NodeSource Node.js distributions repository contains
#11 0.327   information both about supported versions of Node.js and supported Linux
#11 0.327   distributions. To learn more about usage, see the repository:
#11 0.327     https://github.com/nodesource/distributions
#11 0.327 
#11 0.327 ================================================================================
#11 0.327 ================================================================================
#11 0.327 
#11 0.327 Continuing in 20 seconds ...
#11 0.327 
#11 23.10 
#11 23.10 ================================================================================
#11 23.10 â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
#11 23.10 ================================================================================
#11 23.10 
#11 23.10                            SCRIPT DEPRECATION WARNING                    
#11 23.10 
#11 23.10   
#11 23.10   This script, located at https://deb.nodesource.com/setup_X, used to
#11 23.10   install Node.js is deprecated now and will eventually be made inactive.
#11 23.10 
#11 23.10   Please visit the NodeSource distributions Github and follow the
#11 23.10   instructions to migrate your repo.
#11 23.10   https://github.com/nodesource/distributions
#11 23.10 
#11 23.10   The NodeSource Node.js Linux distributions GitHub repository contains
#11 23.10   information about which versions of Node.js and which Linux distributions
#11 23.10   are supported and how to install it.
#11 23.10   https://github.com/nodesource/distributions
#11 23.10 
#11 23.10 
#11 23.10                           SCRIPT DEPRECATION WARNING
#11 23.10 
#11 23.10 ================================================================================
#11 23.10 â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
#11 23.10 ================================================================================
#11 23.10 
#11 23.10 TO AVOID THIS WAIT MIGRATE THE SCRIPT
#11 23.10 Continuing in 60 seconds (press Ctrl-C to abort) ...
#11 23.10 
#11 88.73 
#11 88.73 ## Installing the NodeSource Node.js 14.x repo...
#11 88.73 
#11 88.73 
#11 88.73 ## Populating apt-get cache...
#11 88.73 
#11 88.73 + apt-get update
#11 89.15 Get:1 http://deb.debian.org/debian bullseye InRelease [75.1 kB]
#11 89.20 Get:2 http://deb.debian.org/debian-security bullseye-security InRelease [27.2 kB]
#11 89.25 Get:3 http://deb.debian.org/debian bullseye-updates InRelease [44.0 kB]
#11 89.34 Get:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8066 kB]
#11 114.8 Get:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [422 kB]
#11 114.9 Get:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [18.8 kB]
#11 118.5 Fetched 8653 kB in 27s (323 kB/s)
#11 118.5 Reading package lists...
#11 118.8 
#11 118.8 ## Installing packages required for setup: lsb-release...
#11 118.8 
#11 118.8 + apt-get install -y lsb-release > /dev/null 2>&1
#11 120.9 
#11 120.9 ## Confirming "bullseye" is supported...
#11 120.9 
#11 120.9 + curl -sLf -o /dev/null 'https://deb.nodesource.com/node_14.x/dists/bullseye/Release'
#11 121.2 
#11 121.2 ## Adding the NodeSource signing key to your keyring...
#11 121.2 
#11 121.2 + curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg --dearmor | tee /usr/share/keyrings/nodesource.gpg >/dev/null
#11 121.4 
#11 121.4 ## Creating apt sources list file for the NodeSource Node.js 14.x repo...
#11 121.4 
#11 121.4 + echo 'deb [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' > /etc/apt/sources.list.d/nodesource.list
#11 121.4 + echo 'deb-src [signed-by=/usr/share/keyrings/nodesource.gpg] https://deb.nodesource.com/node_14.x bullseye main' >> /etc/apt/sources.list.d/nodesource.list
#11 121.4 
#11 121.4 ## Running `apt-get update` for you...
#11 121.4 
#11 121.4 + apt-get update
#11 121.5 Hit:1 http://deb.debian.org/debian bullseye InRelease
#11 121.5 Hit:2 http://deb.debian.org/debian-security bullseye-security InRelease
#11 121.5 Hit:3 http://deb.debian.org/debian bullseye-updates InRelease
#11 121.6 Get:4 https://deb.nodesource.com/node_14.x bullseye InRelease [4586 B]
#11 122.3 Get:5 https://deb.nodesource.com/node_14.x bullseye/main amd64 Packages [776 B]
#11 122.3 Fetched 5362 B in 1s (5862 B/s)
#11 122.3 Reading package lists...
#11 122.7 
#11 122.7 ## Run `sudo apt-get install -y nodejs` to install Node.js 14.x and npm
#11 122.7 ## You may also need development tools to build native addons:
#11 122.7      sudo apt-get install gcc g++ make
#11 122.7 ## To install the Yarn package manager, run:
#11 122.7      curl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg >/dev/null
#11 122.7      echo "deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
#11 122.7      sudo apt-get update && sudo apt-get install yarn
#11 122.7 
#11 122.7 
#11 122.7 Reading package lists...
#11 123.1 Building dependency tree...
#11 123.2 Reading state information...
#11 123.3 The following NEW packages will be installed:
#11 123.3   nodejs
#11 124.0 0 upgraded, 1 newly installed, 0 to remove and 81 not upgraded.
#11 124.0 Need to get 25.4 MB of archives.
#11 124.0 After this operation, 121 MB of additional disk space will be used.
#11 124.0 Get:1 https://deb.nodesource.com/node_14.x bullseye/main amd64 nodejs amd64 14.21.3-deb-1nodesource1 [25.4 MB]
#11 126.9 debconf: delaying package configuration, since apt-utils is not installed
#11 126.9 Fetched 25.4 MB in 3s (7284 kB/s)
#11 126.9 Selecting previously unselected package nodejs.
#11 126.9 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 15737 files and directories currently installed.)
#11 127.0 Preparing to unpack .../nodejs_14.21.3-deb-1nodesource1_amd64.deb ...
#11 127.0 Unpacking nodejs (14.21.3-deb-1nodesource1) ...
#11 129.2 Setting up nodejs (14.21.3-deb-1nodesource1) ...
#11 DONE 129.5s

#12 [builder 6/7] RUN curl -o- -L https://yarnpkg.com/install.sh | bash
#12 0.222   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
#12 0.222                                  Dload  Upload   Total   Spent    Left  Speed
#12 0.222 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100    54  100    54    0     0    219      0 --:--:-- --:--:-- --:--:--   219
#12 0.638 
100  7152  100  7152    0     0  17233      0 --:--:-- --:--:-- --:--:-- 17233
#12 0.641 [37mInstalling Yarn![0m
#12 0.641 [36m> Downloading tarball...[0m
#12 0.648 
#12 0.648 [1/2]: https://yarnpkg.com/latest.tar.gz --> /tmp/yarn.tar.gz.8HOtwm2Bz5
#12 0.648   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
#12 0.648                                  Dload  Upload   Total   Spent    Left  Speed
#12 0.648 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100    57  100    57    0     0    320      0 --:--:-- --:--:-- --:--:--   320
#12 1.305 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100    95  100    95    0     0    144      0 --:--:-- --:--:-- --:--:-- 95000
#12 1.682 
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
#12 2.639 
  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0
 27 1218k   27  336k    0     0   133k      0  0:00:09  0:00:02  0:00:07  641k
 34 1218k   34  415k    0     0   118k      0  0:00:10  0:00:03  0:00:07  272k
 48 1218k   48  592k    0     0   131k      0  0:00:09  0:00:04  0:00:05  236k
100 1218k  100 1218k    0     0   231k      0  0:00:05  0:00:05 --:--:--  373k
#12 5.904 
#12 5.904 [2/2]: https://yarnpkg.com/latest.tar.gz.asc --> /tmp/yarn.tar.gz.8HOtwm2Bz5.asc
#12 5.904   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
#12 5.904                                  Dload  Upload   Total   Spent    Left  Speed
#12 5.904 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100    60  100    60    0     0    845      0 --:--:-- --:--:-- --:--:--   845
#12 6.000 
100    99  100    99    0     0   1042      0 --:--:-- --:--:-- --:--:--  1042
#12 6.165 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
#12 6.184 
100   847  100   847    0     0   3035      0 --:--:-- --:--:-- --:--:--  3035
#12 6.189 [36m> Verifying integrity...[0m
#12 6.381 gpg: key 1646B01B86E50310: public key "Yarn Packaging <yarn@dan.cx>" imported
#12 6.386 gpg: Total number processed: 1
#12 6.386 gpg:               imported: 1
#12 6.392 gpg: Signature made Fri May 24 21:16:26 2024 UTC
#12 6.392 gpg:                using RSA key 72ECF46A56B4AD39C907BBB71646B01B86E50310
#12 6.394 gpg: Good signature from "Yarn Packaging <yarn@dan.cx>" [unknown]
#12 6.395 gpg: WARNING: This key is not certified with a trusted signature!
#12 6.395 gpg:          There is no indication that the signature belongs to the owner.
#12 6.395 Primary key fingerprint: 72EC F46A 56B4 AD39 C907  BBB7 1646 B01B 86E5 0310
#12 6.396 [32m> GPG signature looks good[0m
#12 6.396 [36m> Extracting to ~/.yarn...[0m
#12 6.429 [36m> Adding to $PATH...[0m
#12 6.434 [36m> We've added the following to your /root/.bashrc
#12 6.434 > If this isn't the profile of your current shell then please add the following to your correct profile:
#12 6.434    
#12 6.434 export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
#12 6.434 [0m
#12 6.620 [32m> Successfully installed Yarn 1.22.22! Please open another terminal where the `yarn` command will now be available.[0m
#12 DONE 6.7s

#13 [builder 7/7] RUN make build
#13 0.202 ERROR: Need to install yarn first
#13 0.202 exit 1
#13 0.204 make: *** [Makefile:46: web-default] Error 1
#13 ERROR: process "/bin/sh -c make build" did not complete successfully: exit code: 2
------
 > [builder 7/7] RUN make build:
0.202 ERROR: Need to install yarn first
0.202 exit 1
0.204 make: *** [Makefile:46: web-default] Error 1
------
Dockerfile:21

--------------------

  19 |     

  20 |     # Build the dashboard

  21 | >>> RUN make build

  22 |     

  23 |     FROM nginx:alpine

--------------------

failed to solve: process "/bin/sh -c make build" did not complete successfully: exit code: 2

