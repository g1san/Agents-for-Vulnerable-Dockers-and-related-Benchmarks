#1 [internal] load local bake definitions
#1 reading from stdin 781B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 796B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/nginx:alpine
#3 ...

#4 [internal] load metadata for docker.io/library/golang:1.16
#4 DONE 0.4s

#3 [internal] load metadata for docker.io/library/nginx:alpine
#3 DONE 0.4s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [stage-1 1/2] FROM docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14
#6 resolve docker.io/library/nginx:alpine@sha256:b3c656d55d7ad751196f21b7fd2e8d4da9cb430e32f646adcf92441b72f82b14 0.0s done
#6 CACHED

#7 [builder 1/6] FROM docker.io/library/golang:1.16@sha256:5f6a4662de3efc6d6bb812d02e9de3d8698eea16b8eb7281f03e6f3e8383018e
#7 resolve docker.io/library/golang:1.16@sha256:5f6a4662de3efc6d6bb812d02e9de3d8698eea16b8eb7281f03e6f3e8383018e 0.0s done
#7 DONE 0.0s

#8 [builder 2/6] WORKDIR /go/src/github.com/apache/apisix-dashboard
#8 CACHED

#9 [builder 3/6] RUN git clone https://github.com/apache/apisix-dashboard.git .
#9 CACHED

#10 [builder 4/6] RUN git checkout v2.10.1
#10 CACHED

#11 [builder 5/6] RUN curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -     && echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list     && apt-get update && apt-get install -y yarn
#11 0.241 Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
#11 1.158 OK
#11 1.166 deb https://dl.yarnpkg.com/debian/ stable main
#11 1.348 Get:1 https://dl.yarnpkg.com/debian stable InRelease
#11 1.390 Get:2 http://security.debian.org/debian-security bullseye-security InRelease [27.2 kB]
#11 1.397 Get:3 http://deb.debian.org/debian bullseye InRelease [75.1 kB]
#11 1.453 Get:4 http://deb.debian.org/debian bullseye-updates InRelease [44.0 kB]
#11 1.518 Get:5 https://dl.yarnpkg.com/debian stable/main all Packages [10.9 kB]
#11 1.546 Get:6 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [422 kB]
#11 1.575 Get:7 https://dl.yarnpkg.com/debian stable/main amd64 Packages [10.9 kB]
#11 1.627 Get:8 http://deb.debian.org/debian bullseye/main amd64 Packages [8066 kB]
#11 8.639 Get:9 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [18.8 kB]
#11 9.316 Fetched 8692 kB in 8s (1070 kB/s)
#11 9.316 Reading package lists...
#11 9.700 Reading package lists...
#11 10.08 Building dependency tree...
#11 10.17 Reading state information...
#11 10.27 The following additional packages will be installed:
#11 10.27   javascript-common libc-ares2 libicu67 libjs-highlight.js libnode72 libuv1
#11 10.27   nodejs nodejs-doc
#11 10.28 Suggested packages:
#11 10.28   apache2 | lighttpd | httpd npm
#11 10.31 The following NEW packages will be installed:
#11 10.31   javascript-common libc-ares2 libicu67 libjs-highlight.js libnode72 libuv1
#11 10.31   nodejs nodejs-doc yarn
#11 10.37 0 upgraded, 9 newly installed, 0 to remove and 97 not upgraded.
#11 10.37 Need to get 21.2 MB of archives.
#11 10.37 After this operation, 90.3 MB of additional disk space will be used.
#11 10.37 Get:1 http://deb.debian.org/debian bullseye/main amd64 javascript-common all 11+nmu1 [6260 B]
#11 10.37 Get:2 http://security.debian.org/debian-security bullseye-security/main amd64 libicu67 amd64 67.1-7+deb11u1 [8624 kB]
#11 10.39 Get:3 http://deb.debian.org/debian bullseye/main amd64 libc-ares2 amd64 1.17.1-1+deb11u3 [102 kB]
#11 10.44 Get:4 http://deb.debian.org/debian bullseye/main amd64 libjs-highlight.js all 9.18.5+dfsg1-1 [397 kB]
#11 10.62 Get:5 http://deb.debian.org/debian bullseye/main amd64 libuv1 amd64 1.40.0-2+deb11u1 [132 kB]
#11 11.00 Get:6 https://dl.yarnpkg.com/debian stable/main amd64 yarn all 1.22.22-1 [896 kB]
#11 22.07 Get:7 http://security.debian.org/debian-security bullseye-security/main amd64 libnode72 amd64 12.22.12~dfsg-1~deb11u7 [8337 kB]
#11 37.64 Get:8 http://security.debian.org/debian-security bullseye-security/main amd64 nodejs amd64 12.22.12~dfsg-1~deb11u7 [149 kB]
#11 37.70 Get:9 http://security.debian.org/debian-security bullseye-security/main amd64 nodejs-doc all 12.22.12~dfsg-1~deb11u7 [2550 kB]
#11 38.34 debconf: delaying package configuration, since apt-utils is not installed
#11 38.37 Fetched 21.2 MB in 25s (844 kB/s)
#11 38.42 Selecting previously unselected package javascript-common.
#11 38.42 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 15709 files and directories currently installed.)
#11 38.43 Preparing to unpack .../0-javascript-common_11+nmu1_all.deb ...
#11 38.45 Unpacking javascript-common (11+nmu1) ...
#11 38.47 Selecting previously unselected package libc-ares2:amd64.
#11 38.48 Preparing to unpack .../1-libc-ares2_1.17.1-1+deb11u3_amd64.deb ...
#11 38.48 Unpacking libc-ares2:amd64 (1.17.1-1+deb11u3) ...
#11 38.51 Selecting previously unselected package libicu67:amd64.
#11 38.51 Preparing to unpack .../2-libicu67_67.1-7+deb11u1_amd64.deb ...
#11 38.52 Unpacking libicu67:amd64 (67.1-7+deb11u1) ...
#11 39.13 Selecting previously unselected package libjs-highlight.js.
#11 39.14 Preparing to unpack .../3-libjs-highlight.js_9.18.5+dfsg1-1_all.deb ...
#11 39.14 Unpacking libjs-highlight.js (9.18.5+dfsg1-1) ...
#11 39.20 Selecting previously unselected package libuv1:amd64.
#11 39.20 Preparing to unpack .../4-libuv1_1.40.0-2+deb11u1_amd64.deb ...
#11 39.21 Unpacking libuv1:amd64 (1.40.0-2+deb11u1) ...
#11 39.25 Selecting previously unselected package libnode72:amd64.
#11 39.25 Preparing to unpack .../5-libnode72_12.22.12~dfsg-1~deb11u7_amd64.deb ...
#11 39.25 Unpacking libnode72:amd64 (12.22.12~dfsg-1~deb11u7) ...
#11 39.87 Selecting previously unselected package nodejs.
#11 39.87 Preparing to unpack .../6-nodejs_12.22.12~dfsg-1~deb11u7_amd64.deb ...
#11 39.88 Unpacking nodejs (12.22.12~dfsg-1~deb11u7) ...
#11 39.91 Selecting previously unselected package nodejs-doc.
#11 39.91 Preparing to unpack .../7-nodejs-doc_12.22.12~dfsg-1~deb11u7_all.deb ...
#11 39.92 Unpacking nodejs-doc (12.22.12~dfsg-1~deb11u7) ...
#11 40.07 Selecting previously unselected package yarn.
#11 40.07 Preparing to unpack .../8-yarn_1.22.22-1_all.deb ...
#11 40.08 Unpacking yarn (1.22.22-1) ...
#11 40.18 Setting up javascript-common (11+nmu1) ...
#11 40.21 Setting up libicu67:amd64 (67.1-7+deb11u1) ...
#11 40.23 Setting up libc-ares2:amd64 (1.17.1-1+deb11u3) ...
#11 40.24 Setting up libuv1:amd64 (1.40.0-2+deb11u1) ...
#11 40.25 Setting up libjs-highlight.js (9.18.5+dfsg1-1) ...
#11 40.26 Setting up yarn (1.22.22-1) ...
#11 40.27 Setting up libnode72:amd64 (12.22.12~dfsg-1~deb11u7) ...
#11 40.27 Setting up nodejs-doc (12.22.12~dfsg-1~deb11u7) ...
#11 40.28 Setting up nodejs (12.22.12~dfsg-1~deb11u7) ...
#11 40.29 update-alternatives: using /usr/bin/nodejs to provide /usr/bin/js (js) in auto mode
#11 40.30 Processing triggers for libc-bin (2.31-13+deb11u2) ...
#11 DONE 40.5s

#12 [builder 6/6] RUN make build
#12 0.201 api/build.sh && cd ./web && export CYPRESS_INSTALL_BINARY=0  && yarn install --ignore-scripts && yarn build  && mkdir -p ../output/logs
#12 0.209 + export ENV=local
#12 0.209 + ENV=local
#12 0.209 ++ pwd
#12 0.210 + pwd=/go/src/github.com/apache/apisix-dashboard
#12 0.210 + rm -rf output
#12 0.211 + mkdir -p output/conf
#12 0.213 + mkdir -p output/dag-to-lua
#12 0.215 + [[ ! -f dag-to-lua-1.1/lib/dag-to-lua.lua ]]
#12 0.215 + wget https://github.com/api7/dag-to-lua/archive/v1.1.tar.gz -P /tmp
#12 0.218 --2025-11-10 20:23:18--  https://github.com/api7/dag-to-lua/archive/v1.1.tar.gz
#12 0.224 Resolving github.com (github.com)... 140.82.121.3
#12 0.264 Connecting to github.com (github.com)|140.82.121.3|:443... connected.
#12 0.335 HTTP request sent, awaiting response... 302 Found
#12 0.602 Location: https://codeload.github.com/api7/dag-to-lua/tar.gz/refs/tags/v1.1 [following]
#12 0.602 --2025-11-10 20:23:18--  https://codeload.github.com/api7/dag-to-lua/tar.gz/refs/tags/v1.1
#12 0.602 Resolving codeload.github.com (codeload.github.com)... 140.82.121.10
#12 0.642 Connecting to codeload.github.com (codeload.github.com)|140.82.121.10|:443... connected.
#12 0.714 HTTP request sent, awaiting response... 200 OK
#12 0.903 Length: unspecified [application/x-gzip]
#12 0.904 Saving to: '/tmp/v1.1.tar.gz'
#12 0.904 
#12 0.904      0K .......... ...                                          688K=0.02s
#12 0.924 
#12 0.924 2025-11-10 20:23:19 (688 KB/s) - '/tmp/v1.1.tar.gz' saved [13999]
#12 0.924 
#12 0.926 + tar -zxvf /tmp/v1.1.tar.gz -C /tmp
#12 0.929 dag-to-lua-1.1/
#12 0.929 dag-to-lua-1.1/.github/
#12 0.930 dag-to-lua-1.1/.github/workflows/
#12 0.930 dag-to-lua-1.1/.github/workflows/unit-test.yaml
#12 0.930 dag-to-lua-1.1/.gitignore
#12 0.930 dag-to-lua-1.1/.luacheckrc
#12 0.930 dag-to-lua-1.1/LICENSE
#12 0.931 dag-to-lua-1.1/Makefile
#12 0.931 dag-to-lua-1.1/README.md
#12 0.931 dag-to-lua-1.1/lib/
#12 0.931 dag-to-lua-1.1/lib/cli.lua
#12 0.931 dag-to-lua-1.1/lib/dag-to-lua.lua
#12 0.931 dag-to-lua-1.1/lib/json.lua
#12 0.931 dag-to-lua-1.1/rockspec/
#12 0.932 dag-to-lua-1.1/rockspec/dag-to-lua-1.0-0.rockspec
#12 0.932 dag-to-lua-1.1/rockspec/dag-to-lua-master-0.rockspec
#12 0.932 dag-to-lua-1.1/t/
#12 0.932 dag-to-lua-1.1/t/conf-err.lua
#12 0.932 dag-to-lua-1.1/t/default.lua
#12 0.932 dag-to-lua-1.1/t/empty-child.lua
#12 0.932 dag-to-lua-1.1/t/example.lua
#12 0.932 dag-to-lua-1.1/t/missing-config.lua
#12 0.932 dag-to-lua-1.1/t/multi-condition-children.lua
#12 0.932 dag-to-lua-1.1/t/multi-no-condition-children.lua
#12 0.933 dag-to-lua-1.1/t/no-child.lua
#12 0.933 dag-to-lua-1.1/t/no-root.lua
#12 0.933 dag-to-lua-1.1/t/single-child.lua
#12 0.933 dag-to-lua-1.1/utils/
#12 0.933 dag-to-lua-1.1/utils/check-lua-code-style.sh
#12 0.934 + cp -r /tmp/dag-to-lua-1.1/lib/cli.lua /tmp/dag-to-lua-1.1/lib/dag-to-lua.lua /tmp/dag-to-lua-1.1/lib/json.lua ./output/dag-to-lua
#12 0.936 + cd ./api
#12 0.936 + go build -o ../output/manager-api -ldflags '-X github.com/apisix/manager-api/internal/utils.version=2.10.1 -X github.com/apisix/manager-api/internal/utils.gitHash=2094ced' ./main.go
#12 3.733 go: downloading github.com/spf13/cobra v0.0.3
#12 3.733 go: downloading github.com/spf13/viper v1.8.1
#12 3.734 go: downloading github.com/tidwall/gjson v1.6.7
#12 3.734 go: downloading go.uber.org/zap v1.17.0
#12 3.737 go: downloading github.com/evanphx/json-patch/v5 v5.1.0
#12 3.737 go: downloading github.com/sony/sonyflake v1.0.0
#12 3.742 go: downloading github.com/yuin/gopher-lua v0.0.0-20200816102855-ee81675732da
#12 3.792 go: downloading github.com/shiningrush/droplet v0.2.6-0.20210127040147-53817015cd1b
#12 3.859 go: downloading github.com/fsnotify/fsnotify v1.4.9
#12 3.859 go: downloading github.com/hashicorp/hcl v1.0.0
#12 3.877 go: downloading github.com/magiconair/properties v1.8.5
#12 3.877 go: downloading github.com/mitchellh/mapstructure v1.4.1
#12 3.890 go: downloading github.com/pelletier/go-toml v1.9.3
#12 3.893 go: downloading github.com/spf13/afero v1.6.0
#12 3.916 go: downloading github.com/spf13/cast v1.3.1
#12 3.928 go: downloading github.com/spf13/jwalterweatherman v1.1.0
#12 3.931 go: downloading github.com/spf13/pflag v1.0.5
#12 3.933 go: downloading github.com/subosito/gotenv v1.2.0
#12 3.954 go: downloading gopkg.in/ini.v1 v1.62.0
#12 3.954 go: downloading gopkg.in/yaml.v2 v2.4.0
#12 3.965 go: downloading github.com/gin-contrib/pprof v1.3.0
#12 3.965 go: downloading github.com/gin-contrib/gzip v0.0.3
#12 3.978 go: downloading github.com/gin-contrib/static v0.0.0-20200916080430-d45d9a37d28e
#12 3.980 go: downloading github.com/gin-gonic/gin v1.6.3
#12 4.017 go: downloading github.com/stretchr/testify v1.7.0
#12 4.036 go: downloading go.etcd.io/etcd v3.3.25+incompatible
#12 4.050 go: downloading github.com/xeipuuv/gojsonschema v1.2.0
#12 4.052 go: downloading github.com/pkg/errors v0.9.1
#12 4.052 go: downloading github.com/tidwall/match v1.0.3
#12 4.055 go: downloading github.com/tidwall/pretty v1.0.2
#12 4.071 go: downloading go.uber.org/atomic v1.7.0
#12 4.086 go: downloading go.uber.org/multierr v1.6.0
#12 4.097 go: downloading golang.org/x/sys v0.0.0-20210514084401-e8d321eab015
#12 4.100 go: downloading golang.org/x/text v0.3.6
#12 4.111 go: downloading github.com/dgrijalva/jwt-go v3.2.0+incompatible
#12 4.111 go: downloading github.com/satori/go.uuid v1.2.0
#12 4.115 go: downloading github.com/shiningrush/droplet/wrapper/gin v0.2.1
#12 4.421 go: downloading github.com/getkin/kin-openapi v0.33.0
#12 4.432 go: downloading github.com/go-playground/validator/v10 v10.3.0
#12 4.510 go: downloading github.com/gin-contrib/sse v0.1.0
#12 4.703 go: downloading github.com/mattn/go-isatty v0.0.12
#12 4.758 go: downloading github.com/davecgh/go-spew v1.1.1
#12 4.787 go: downloading github.com/pmezard/go-difflib v1.0.0
#12 4.928 go: downloading github.com/stretchr/objx v0.1.1
#12 5.066 go: downloading github.com/xeipuuv/gojsonreference v0.0.0-20180127040603-bd5ef7bd5415
#12 5.088 go: downloading github.com/golang/protobuf v1.5.2
#12 5.310 go: downloading github.com/ugorji/go v1.1.7
#12 5.350 go: downloading github.com/go-playground/universal-translator v0.17.0
#12 5.361 go: downloading github.com/leodido/go-urn v1.2.0
#12 5.408 go: downloading github.com/ghodss/yaml v1.0.0
#12 5.583 go: downloading github.com/go-openapi/jsonpointer v0.19.5
#12 5.602 go: downloading github.com/ugorji/go/codec v1.1.7
#12 5.741 go: downloading gopkg.in/yaml.v3 v3.0.0-20210107192922-496545a6307b
#12 5.746 go: downloading github.com/xeipuuv/gojsonpointer v0.0.0-20180127040702-4e3ac2762d5f
#12 5.778 go: downloading google.golang.org/protobuf v1.26.0
#12 6.124 go: downloading github.com/go-openapi/swag v0.19.5
#12 6.124 go: downloading github.com/go-playground/locales v0.13.0
#12 6.125 go: downloading github.com/coreos/etcd v3.3.25+incompatible
#12 7.485 go: downloading github.com/coreos/pkg v0.0.0-20180928190104-399ea9e2e55f
#12 7.485 go: downloading google.golang.org/grpc v1.26.0
#12 7.485 go: downloading github.com/google/uuid v1.2.0
#12 7.615 go: downloading github.com/mailru/easyjson v0.0.0-20190626092158-b2ccc519800e
#12 7.693 go: downloading github.com/gogo/protobuf v1.3.2
#12 8.498 go: downloading github.com/coreos/go-semver v0.3.0
#12 8.498 go: downloading google.golang.org/genproto v0.0.0-20210602131652-f16073e35f0c
#12 8.499 go: downloading github.com/coreos/go-systemd v0.0.0-20191104093116-d3cd4ed1dbcf
#12 8.502 go: downloading golang.org/x/net v0.0.0-20210510120150-4163338589ed
#12 24.81 + cd ..
#12 24.81 + cp ./api/conf/schema.json ./output/conf/schema.json
#12 24.81 + cp ./api/conf/conf.yaml ./output/conf/conf.yaml
#12 24.82 Build the Manager API successfully
#12 24.82 + echo 'Build the Manager API successfully'
#12 25.06 yarn install v1.22.22
#12 25.15 [1/5] Validating package.json...
#12 25.15 [2/5] Resolving packages...
#12 25.80 [3/5] Fetching packages...
#12 32.33 info There appears to be trouble with your network connection. Retrying...
#12 32.49 error Error: certificate has expired
#12 32.49     at TLSSocket.onConnectSecure (_tls_wrap.js:1502:34)
#12 32.49     at TLSSocket.emit (events.js:314:20)
#12 32.49     at TLSSocket._finishInit (_tls_wrap.js:937:8)
#12 32.49     at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:711:12)
#12 32.49 info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
#12 35.33 info There appears to be trouble with your network connection. Retrying...
#12 38.40 info There appears to be trouble with your network connection. Retrying...
#12 41.41 info There appears to be trouble with your network connection. Retrying...
#12 130.9 info There appears to be trouble with your network connection. Retrying...
#12 133.9 info There appears to be trouble with your network connection. Retrying...
#12 136.9 info There appears to be trouble with your network connection. Retrying...
#12 139.9 info There appears to be trouble with your network connection. Retrying...
#12 143.0 make: *** [Makefile:39: build] Error 1
#12 ERROR: process "/bin/sh -c make build" did not complete successfully: exit code: 2
------
 > [builder 6/6] RUN make build:
32.49     at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:711:12)
32.49 info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.
35.33 info There appears to be trouble with your network connection. Retrying...
38.40 info There appears to be trouble with your network connection. Retrying...
41.41 info There appears to be trouble with your network connection. Retrying...
130.9 info There appears to be trouble with your network connection. Retrying...
133.9 info There appears to be trouble with your network connection. Retrying...
136.9 info There appears to be trouble with your network connection. Retrying...
139.9 info There appears to be trouble with your network connection. Retrying...
143.0 make: *** [Makefile:39: build] Error 1
------
Dockerfile:18

--------------------

  16 |     

  17 |     # Build the dashboard

  18 | >>> RUN make build

  19 |     

  20 |     FROM nginx:alpine

--------------------

failed to solve: process "/bin/sh -c make build" did not complete successfully: exit code: 2

