{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-45232/custom_no_tool/docker-compose.yml",
            "content": "services:\n  etcd:\n    image: gcr.io/etcd-development/etcd:v3.5.0\n    environment:\n      - ALLOW_NONE_AUTHENTICATION=yes\n      - ETCD_ADVERTISE_CLIENT_URLS=http://0.0.0.0:2379\n      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\n    ports:\n      - \"2379:2379\"\n    networks:\n      - apisix-net\n\n  apisix-dashboard:\n    build:\n      context: ./apisix-dashboard\n      dockerfile: Dockerfile\n    depends_on:\n      - etcd\n    environment:\n      - CONF_ETCD_ENDPOINTS=http://etcd:2379\n    ports:\n      - \"9000:9000\"\n    networks:\n      - apisix-net\n\nnetworks:\n  apisix-net:\n    driver: bridge\n"
        },
        {
            "location": "./../../dockers/CVE-2021-45232/custom_no_tool/init_etcd.sh",
            "content": "#!/bin/sh\n\n# Initialize etcd with some test data required by Apache APISIX\nETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \\\n    \"/apisix/routes/1\" '{\"uri\":\"/hello\",\"upstream\":{\"type\":\"roundrobin\",\"nodes\":{\"127.0.0.1:1980\":1}}}'\n\nETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \\\n    \"/apisix/upstreams/1\" '{\"nodes\":{\"127.0.0.1:1980\":1},\"type\":\"roundrobin\"}'\n\nETCDCTL_API=3 etcdctl --endpoints=http://etcd:2379 put \\\n    \"/apisix/services/1\" '{\"upstream_id\":\"1\"}'\n"
        },
        {
            "location": "./../../dockers/CVE-2021-45232/custom_no_tool/Dockerfile",
            "content": "# This Dockerfile is used to create a custom image for initializing etcd with test data\nFROM gcr.io/etcd-development/etcd:v3.5.0\n\nCOPY init_etcd.sh /init_etcd.sh\nRUN chmod +x /init_etcd.sh\n\nCMD [\"/bin/sh\", \"/init_etcd.sh\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2021-45232/custom_no_tool/apisix-dashboard/Dockerfile",
            "content": "# Dockerfile for building Apache APISIX Dashboard from source\nFROM golang:1.17 AS builder\n\nWORKDIR /go/src/github.com/apache/apisix-dashboard\n\n# Clone the APISIX Dashboard repository\nRUN git clone https://github.com/apache/apisix-dashboard.git .\n\n# Checkout the specific version\nRUN git checkout v2.10.1\n\n# Install Node.js\nRUN curl -fsSL https://deb.nodesource.com/setup_14.x | bash - \\\n    && apt-get install -y nodejs\n\n# Install Yarn using npm\nRUN npm install -g yarn\n\n# Build the dashboard\nRUN make build\n\nFROM nginx:alpine\n\n# Copy the built dashboard\nCOPY --from=builder /go/src/github.com/apache/apisix-dashboard/output /usr/share/nginx/html\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n"
        }
    ],
    "directory_tree": "CVE-2021-45232/\n\u2514\u2500\u2500 custom_no_tool\n    \u251c\u2500\u2500 apisix-dashboard\n    \u2502   \u2514\u2500\u2500 Dockerfile\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 Dockerfile\n    \u2514\u2500\u2500 init_etcd.sh"
}