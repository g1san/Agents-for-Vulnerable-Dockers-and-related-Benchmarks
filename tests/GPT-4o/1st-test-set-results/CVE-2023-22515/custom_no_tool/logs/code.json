{
    "files": [
        {
            "location": "./../../dockers/CVE-2023-22515/custom_no_tool/docker-compose.yml",
            "content": "services:\n  confluence:\n    image: atlassian/confluence-server:8.5.2\n    build:\n      context: .\n      dockerfile: Dockerfile\n    environment:\n      - ATL_JDBC_URL=jdbc:postgresql://db:5432/confluence\n      - ATL_JDBC_USER=confluenceuser\n      - ATL_JDBC_PASSWORD=confluencepass\n      - ATL_DB_DRIVER=org.postgresql.Driver\n      - ATL_DB_TYPE=postgresql\n    ports:\n      - \"8090:8090\"\n    depends_on:\n      - db\n\n  db:\n    image: postgres:13.4\n    environment:\n      POSTGRES_DB: confluence\n      POSTGRES_USER: confluenceuser\n      POSTGRES_PASSWORD: confluencepass\n    command: [\"postgres\", \"-c\", \"log_statement=all\"]\n    healthcheck:\n      test: [\"CMD\", \"pg_isready\", \"-U\", \"confluenceuser\"]\n      interval: 10s\n      retries: 5\n    volumes:\n      - db_data:/var/lib/postgresql/data\n      - ./init.sql:/docker-entrypoint-initdb.d/init.sql\n\nvolumes:\n  db_data:\n    driver: local\n"
        },
        {
            "location": "./../../dockers/CVE-2023-22515/custom_no_tool/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    password VARCHAR(50) NOT NULL\n);\n\nINSERT INTO users (username, password) VALUES ('admin', 'adminpass');\n"
        },
        {
            "location": "./../../dockers/CVE-2023-22515/custom_no_tool/Dockerfile",
            "content": "FROM atlassian/confluence-server:8.5.2\n\n# Ensure necessary SLF4J binding is included and remove others\nRUN apt-get update && apt-get install -y \\\n    wget \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Add SLF4J binding for logging\nADD https://repo1.maven.org/maven2/org/slf4j/slf4j-log4j12/1.7.30/slf4j-log4j12-1.7.30.jar /opt/atlassian/confluence/confluence/WEB-INF/lib/\n\n# Use an available version of confluence-logging\nADD https://repo1.maven.org/maven2/com/atlassian/confluence/confluence-logging/7.10.0/confluence-logging-7.10.0.jar /opt/atlassian/confluence/confluence/WEB-INF/lib/\n\n# CMD is already set in the base image\nCMD [\"/opt/atlassian/confluence/bin/start-confluence.sh\", \"-fg\"]\n"
        }
    ],
    "directory_tree": "CVE-2023-22515/\n\u2514\u2500\u2500 custom_no_tool/\n    \u251c\u2500\u2500 Dockerfile\n    \u251c\u2500\u2500 docker-compose.yml\n    \u2514\u2500\u2500 init.sql\n"
}