services:
  h2database:
    build: .
    container_name: h2database
    ports:
      - "8082:8082"  # Web console port
      - "1521:1521"  # TCP port for database connections
    volumes:
      - h2-data:/opt/h2-data
    entrypoint: ["/bin/sh", "-c", "java -cp /opt/h2/h2.jar org.h2.tools.Server -web -webAllowOthers=false -tcp -tcpAllowOthers=false -webPort 8082 -tcpPort 1521 & sleep 5 && java -cp /opt/h2/h2.jar org.h2.tools.RunScript -url jdbc:h2:tcp://localhost:1521/~/test -script /docker-entrypoint-initdb.d/init.sql"]

volumes:
  h2-data:
