# Use AdoptOpenJDK 8 base image
FROM adoptopenjdk:8-jdk-hotspot

# Set environment variables
ENV ELASTICSEARCH_VERSION=1.3.7
ENV ES_HOME=/usr/share/elasticsearch

# Install necessary packages and download Elasticsearch
RUN apt-get update && \
    apt-get install -y wget && \
    wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-$ELASTICSEARCH_VERSION.tar.gz && \
    mkdir -p $ES_HOME && \
    tar -xzf elasticsearch-$ELASTICSEARCH_VERSION.tar.gz -C $ES_HOME --strip-components=1 && \
    rm elasticsearch-$ELASTICSEARCH_VERSION.tar.gz && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Copy configuration files
COPY elasticsearch.yml $ES_HOME/config/elasticsearch.yml

# Set the default command to run Elasticsearch
CMD ["/usr/share/elasticsearch/bin/elasticsearch"]
