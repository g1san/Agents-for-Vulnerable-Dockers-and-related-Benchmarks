#!/bin/bash

# Wait for Cassandra to be ready
until echo "exit" | cqlsh cassandra_db 9042; do
  echo "Waiting for Cassandra to start..."
  sleep 5
done

# Initialize HugeGraph
curl -X POST -H "Content-Type: application/json" \
     -d '{"name": "hugegraph", "replication": {"class": "SimpleStrategy", "replication_factor": 1}}' \
     http://hugegraph_server:8080/graphs

# Load some test data
curl -X POST -H "Content-Type: application/json" \
     -d '{"gremlin": "graph.addVertex(T.label, 'person', 'name', 'John Doe');"}' \
     http://hugegraph_server:8080/gremlin
