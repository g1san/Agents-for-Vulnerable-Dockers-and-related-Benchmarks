#!/bin/bash

# Start SSH service
service ssh start

# Start Hadoop services
echo "Starting Hadoop services..."

if [[ "$HOSTNAME" == "hadoop" ]]; then
    $HADOOP_HOME/bin/hdfs namenode -format -force
    $HADOOP_HOME/sbin/start-dfs.sh
fi

if [[ "$HOSTNAME" == "resourcemanager" ]]; then
    $HADOOP_HOME/sbin/start-yarn.sh
fi

if [[ "$HOSTNAME" == "historyserver" ]]; then
    $HADOOP_HOME/bin/mapred --daemon start historyserver
fi

# Keep the container running
tail -f /dev/null
