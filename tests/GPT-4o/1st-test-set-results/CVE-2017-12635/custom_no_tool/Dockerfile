FROM ubuntu:18.04

# Install dependencies
RUN apt-get update && \
    apt-get install -y erlang curl && \
    rm -rf /var/lib/apt/lists/*

# Download and install CouchDB 2.0.0
RUN curl -sSL https://archive.apache.org/dist/couchdb/source/2.0.0/apache-couchdb-2.0.0.tar.gz | tar xz -C /usr/src && \
    cd /usr/src/apache-couchdb-2.0.0 && \
    ./configure && \
    make && \
    make install

# Expose CouchDB port
EXPOSE 5984

# Start CouchDB
CMD ["couchdb"]