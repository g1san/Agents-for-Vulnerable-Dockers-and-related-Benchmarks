{
    "files": [
        {
            "location": "./../../dockers/CVE-2024-42323/custom_no_tool/docker-compose.yml",
            "content": "services:\n  hertzbeat:\n    build:\n      context: ./hertzbeat\n      dockerfile: Dockerfile\n    container_name: hertzbeat\n    ports:\n      - \"1158:1158\"\n    environment:\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/hertzbeat\n      - SPRING_DATASOURCE_USERNAME=hertzbeat\n      - SPRING_DATASOURCE_PASSWORD=hertzbeat\n    depends_on:\n      - db\n\n  db:\n    image: postgres:14\n    container_name: hertzbeat-db\n    environment:\n      POSTGRES_DB: hertzbeat\n      POSTGRES_USER: hertzbeat\n      POSTGRES_PASSWORD: hertzbeat\n    volumes:\n      - db-data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD\", \"pg_isready\", \"-U\", \"hertzbeat\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  nginx:\n    image: nginx:1.21\n    container_name: hertzbeat-nginx\n    ports:\n      - \"8080:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n    depends_on:\n      - hertzbeat\n\nvolumes:\n  db-data:\n    driver: local\n"
        },
        {
            "location": "./../../dockers/CVE-2024-42323/custom_no_tool/nginx.conf",
            "content": "events {}\n\nhttp {\n    server {\n        listen 80;\n\n        location / {\n            proxy_pass http://hertzbeat:1158;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2024-42323/custom_no_tool/hertzbeat/Dockerfile",
            "content": "# Use the Eclipse Temurin OpenJDK 17 JDK image as the base image\nFROM eclipse-temurin:17-jdk\n\n# Set the working directory\nWORKDIR /app\n\n# Copy the HertzBeat application JAR file into the container\nCOPY hertzbeat-1.6.0.jar /app/hertzbeat.jar\n\n# Expose the HertzBeat port\nEXPOSE 1158\n\n# Run the HertzBeat application\nCMD [\"java\", \"-jar\", \"/app/hertzbeat.jar\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2024-42323/custom_no_tool/hertzbeat/init-db.sh",
            "content": "#!/bin/bash\n\n# Wait for PostgreSQL to be ready\nuntil pg_isready -h db -U hertzbeat; do\n  echo \"Waiting for PostgreSQL...\"\n  sleep 2\ndone\n\n# Initialize the database with test data\npsql -h db -U hertzbeat -d hertzbeat << EOF\nBEGIN;\n-- Create a sample table\nCREATE TABLE IF NOT EXISTS monitor_data (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    value VARCHAR(255) NOT NULL\n);\n\n-- Insert sample data\nINSERT INTO monitor_data (name, value) VALUES ('CPU Usage', '20%');\nINSERT INTO monitor_data (name, value) VALUES ('Memory Usage', '50%');\nCOMMIT;\nEOF\n"
        }
    ],
    "directory_tree": "CVE-2024-42323/\n\u2514\u2500\u2500 custom_no_tool\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 nginx.conf\n    \u2514\u2500\u2500 hertzbeat\n        \u251c\u2500\u2500 Dockerfile\n        \u2514\u2500\u2500 init-db.sh"
}