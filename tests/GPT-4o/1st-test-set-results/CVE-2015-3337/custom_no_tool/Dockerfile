FROM eclipse-temurin:8-jdk-focal

# Set environment variables
ENV ELASTICSEARCH_VERSION=1.5.0

# Install Elasticsearch
RUN wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-$ELASTICSEARCH_VERSION.tar.gz \
    && tar -xzf elasticsearch-$ELASTICSEARCH_VERSION.tar.gz \
    && rm elasticsearch-$ELASTICSEARCH_VERSION.tar.gz \
    && mv elasticsearch-$ELASTICSEARCH_VERSION /usr/share/elasticsearch \
    && cd /usr/share/elasticsearch \
    && bin/plugin -install mobz/elasticsearch-head

# Set the working directory
WORKDIR /usr/share/elasticsearch

# Expose ports
EXPOSE 9200 9300

# Command to run Elasticsearch
CMD ["/usr/share/elasticsearch/bin/elasticsearch"]
