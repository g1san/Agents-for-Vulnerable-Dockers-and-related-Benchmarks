services:
  hugegraph-server:
    image: hugegraph/hugegraph:1.3.0
    container_name: hugegraph-server
    environment:
      - HUGEGRAPH_SERVER_TOKEN_SECRET=secret
    ports:
      - "8080:8080"
    depends_on:
      - hugegraph-db

  hugegraph-db:
    image: eclipse-temurin:8-jdk
    container_name: hugegraph-db
    volumes:
      - hugegraph-data:/var/lib/hugegraph/data
    ports:
      - "8081:8081"
    command: ["/bin/sh", "-c", "echo 'Setting up HugeGraph DB' && sleep infinity"]

volumes:
  hugegraph-data:
    driver: local
