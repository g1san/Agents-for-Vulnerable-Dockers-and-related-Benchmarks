FROM adoptopenjdk:11-jdk-hotspot

# Set environment variables
ENV ACCEPT_EULA=Y \
    ADMIN_PASSWORD=admin123

# Download the ColdFusion installer
RUN apt-get update && apt-get install -y wget unzip && \
    wget -O /tmp/coldfusion.zip "https://www.adobe.com/go/trycoldfusion" && \
    unzip /tmp/coldfusion.zip -d /opt/coldfusion && \
    rm /tmp/coldfusion.zip

# Expose port
EXPOSE 8500

# Set ColdFusion home
ENV CF_HOME=/opt/coldfusion

# Run ColdFusion
CMD ["/opt/coldfusion/cfusion/bin/coldfusion", "start"]
