services:
  activemq:
    image: rmohr/activemq:5.16.6
    container_name: activemq-broker
    ports:
      - "61616:61616"  # OpenWire port
      - "8161:8161"    # Admin console
    environment:
      - ACTIVEMQ_ADMIN_LOGIN=admin
      - ACTIVEMQ_ADMIN_PASSWORD=admin

  web:
    image: nginx:1.21.3
    container_name: nginx-server
    ports:
      - "8080:80"
    volumes:
      - ./nginx/html:/usr/share/nginx/html

  openjdk:
    image: openjdk:11-jdk-slim
    container_name: openjdk-client
    command: tail -f /dev/null  # Keeps the container running
    depends_on:
      - activemq
      - web
    volumes:
      - ./client:/client
    working_dir: /client
