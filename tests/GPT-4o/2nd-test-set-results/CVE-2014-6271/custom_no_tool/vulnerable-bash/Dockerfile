FROM ubuntu:trusty

RUN apt-get update && \
    apt-get install -y wget build-essential && \
    wget http://ftp.gnu.org/gnu/bash/bash-4.2.tar.gz && \
    tar xzf bash-4.2.tar.gz && \
    cd bash-4.2 && \
    ./configure && \
    make && \
    make install && \
    cd .. && rm -rf bash-4.2 bash-4.2.tar.gz

# Ensure the new bash is used by default
RUN ln -sf /usr/local/bin/bash /bin/bash

# Set entrypoint to expose the vulnerability
ENTRYPOINT ["/bin/bash", "-c", "while true; do sleep 1000; done"]
