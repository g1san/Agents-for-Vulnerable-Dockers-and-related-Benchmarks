version: '3.1'

services:
  drupal:
    image: drupal:8.5.8
    ports:
      - "8080:80"
    volumes:
      - drupal-data:/var/www/html
    depends_on:
      - db

  db:
    image: nouchka/sqlite3
    volumes:
      - db-data:/data
      - ./init.sql:/data/init.sql
    entrypoint: ["/bin/sh", "-c", "sqlite3 /data/drupal.sqlite < /data/init.sql && tail -f /dev/null"]
    working_dir: /data

volumes:
  drupal-data:
  db-data:
