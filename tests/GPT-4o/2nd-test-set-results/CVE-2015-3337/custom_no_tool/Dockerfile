# Use AdoptOpenJDK 8 as the base image
FROM adoptopenjdk:8-jdk-hotspot

# Set environment variables
ENV ES_VERSION=1.4.5

# Install Elasticsearch
RUN apt-get update && apt-get install -y wget \
    && wget https://github.com/elastic/elasticsearch/archive/v$ES_VERSION.tar.gz \
    && tar -xzf v$ES_VERSION.tar.gz \
    && mv elasticsearch-$ES_VERSION /elasticsearch \
    && rm v$ES_VERSION.tar.gz

# Copy the site plugin
COPY site_plugin /elasticsearch/plugins/site

# Expose ports
EXPOSE 9200 9300

# Set the entrypoint
ENTRYPOINT ["/elasticsearch/bin/elasticsearch"]
