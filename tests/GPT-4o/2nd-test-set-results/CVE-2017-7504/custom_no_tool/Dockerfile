FROM eclipse-temurin:8-jdk-focal

# Set environment variables
ENV JBOSS_VERSION=4.0.5
ENV JBOSS_HOME=/usr/local/jboss

# Install necessary packages
RUN apt-get update && apt-get install -y wget unzip && rm -rf /var/lib/apt/lists/*

# Download and install JBoss
RUN wget https://downloads.jboss.org/jbossas/$JBOSS_VERSION/jboss-$JBOSS_VERSION.zip \
    && unzip jboss-$JBOSS_VERSION.zip -d /usr/local/ \
    && mv /usr/local/jboss-$JBOSS_VERSION $JBOSS_HOME \
    && rm jboss-$JBOSS_VERSION.zip

# Set JBoss home
WORKDIR $JBOSS_HOME

# Expose necessary ports
EXPOSE 8080

# Start JBoss
CMD ["/usr/local/jboss/bin/run.sh"]
