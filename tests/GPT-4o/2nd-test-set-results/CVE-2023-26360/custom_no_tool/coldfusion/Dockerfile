FROM adoptium/temurin:11-jdk-slim

# Install necessary packages
RUN apt-get update && \
    apt-get install -y wget unzip && \
    rm -rf /var/lib/apt/lists/*

# Download and install ColdFusion
RUN wget http://example.com/coldfusion-2023-26360.zip -O /tmp/coldfusion.zip && \
    unzip /tmp/coldfusion.zip -d /opt/coldfusion && \
    rm /tmp/coldfusion.zip

# Copy ColdFusion configuration files
COPY server.xml /opt/coldfusion/cfusion/runtime/conf/server.xml

# Set ColdFusion home
ENV CF_HOME=/opt/coldfusion/cfusion

# Expose ColdFusion port
EXPOSE 8500

# Start ColdFusion
CMD ["/opt/coldfusion/cfusion/bin/coldfusion", "start"]
