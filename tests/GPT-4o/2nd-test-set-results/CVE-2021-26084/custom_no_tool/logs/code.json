{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-26084/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\nservices:\n  confluence:\n    image: atlassian/confluence-server:7.4.11\n    container_name: confluence\n    ports:\n      - \"8090:8090\"\n    environment:\n      - ATL_JDBC_URL=jdbc:postgresql://postgres:5432/confluence\n      - ATL_JDBC_USER=confluence\n      - ATL_JDBC_PASSWORD=confluence\n      - ATL_DB_TYPE=postgres\n    depends_on:\n      - postgres\n    volumes:\n      - confluence_data:/var/atlassian/application-data/confluence\n\n  postgres:\n    image: postgres:13.3\n    container_name: postgres\n    environment:\n      POSTGRES_USER: confluence\n      POSTGRES_PASSWORD: confluence\n      POSTGRES_DB: confluence\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    command: [\"postgres\", \"-c\", \"listen_addresses='*'\"]\n\nvolumes:\n  postgres_data:\n  confluence_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2021-26084/custom_no_tool/Dockerfile",
            "content": "# Use OpenJDK 8 as the base image\nFROM openjdk:8-jdk\n\n# Set the working directory\nWORKDIR /app\n\n# Copy the Confluence setup files\nCOPY . /app\n\n# Expose the default Confluence port\nEXPOSE 8090\n\n# Copy the entrypoint script\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\n# Use the entrypoint script to start Confluence\nENTRYPOINT [\"/entrypoint.sh\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2021-26084/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/bash\n\n# Start Confluence\necho \"Starting Confluence...\"\n\n# Define the databases dictionary\ncat << EOF > /entrypoint_helpers.py\n\nATL_DB_TYPE = 'postgres'\n\ndatabases = {\n    'postgres': ['org.postgresql.Driver', 'jdbc:postgresql://postgres:5432/confluence']\n}\n\nEOF\n\n# Execute the original command\nexec \"$@\"\n"
        },
        {
            "location": "./../../dockers/CVE-2021-26084/custom_no_tool/init.sql",
            "content": "-- Initialize PostgreSQL database with test data\nCREATE TABLE IF NOT EXISTS test_data (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL\n);\n\nINSERT INTO test_data (name) VALUES ('Test Entry 1');\nINSERT INTO test_data (name) VALUES ('Test Entry 2');\n"
        }
    ],
    "directory_tree": "CVE-2021-26084/\n    \u2514\u2500\u2500 custom_no_tool/\n        \u251c\u2500\u2500 Dockerfile\n        \u251c\u2500\u2500 docker-compose.yml\n        \u251c\u2500\u2500 entrypoint.sh\n        \u2514\u2500\u2500 init.sql"
}