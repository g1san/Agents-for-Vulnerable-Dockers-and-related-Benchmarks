{
    "files": [
        {
            "location": "./../../dockers/CVE-2023-26031/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  hadoop:\n    build: ./hadoop\n    container_name: hadoop\n    user: \"root\" # Start container as root to set up environment\n    volumes:\n      - hadoop_data:/hadoop_data\n    ports:\n      - \"9870:9870\"\n      - \"8088:8088\"\n    environment:\n      - HADOOP_HOME=/hadoop\n      - HADOOP_CONF_DIR=/hadoop/etc/hadoop\n      - HDFS_NAMENODE_USER=hadoop\n      - HDFS_DATANODE_USER=hadoop\n      - HDFS_SECONDARYNAMENODE_USER=hadoop\n    command: [\"/bin/bash\", \"-c\", \"mkdir -p /run/sshd && chown root:root /run/sshd && chmod 0755 /run/sshd && service ssh start && su hadoop -c 'start-dfs.sh && start-yarn.sh' && tail -f /dev/null\"]\n\nvolumes:\n  hadoop_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2023-26031/custom_no_tool/hadoop/Dockerfile",
            "content": "FROM ubuntu:20.04\n\nRUN apt-get update \\\n    && DEBIAN_FRONTEND=noninteractive apt-get install -y \\\n    openjdk-8-jdk \\\n    wget \\\n    openssh-client \\\n    openssh-server \\\n    && apt-get clean;\n\n# Create a 'hadoop' user and group with a home directory\nRUN groupadd -r hadoop && useradd -r -g hadoop -m hadoop\n\n# Set up SSH for the 'hadoop' user\nRUN mkdir /home/hadoop/.ssh \\\n    && (test -f /etc/ssh/ssh_host_rsa_key || ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key -N '') \\\n    && (test -f /etc/ssh/ssh_host_dsa_key || ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key -N '') \\\n    && ssh-keygen -t rsa -b 4096 -f /home/hadoop/.ssh/id_rsa -N '' \\\n    && cp /home/hadoop/.ssh/id_rsa.pub /home/hadoop/.ssh/authorized_keys \\\n    && chown -R hadoop:hadoop /home/hadoop/.ssh \\\n    && chmod 700 /home/hadoop/.ssh \\\n    && chmod 600 /home/hadoop/.ssh/authorized_keys\n\n# Install Hadoop\nRUN wget https://downloads.apache.org/hadoop/common/hadoop-3.3.5/hadoop-3.3.5.tar.gz \\\n    && tar -xzvf hadoop-3.3.5.tar.gz \\\n    && mv hadoop-3.3.5 /hadoop \\\n    && rm hadoop-3.3.5.tar.gz\n\n# Configure Hadoop environment\nENV JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\nENV PATH=$PATH:/hadoop/bin:/hadoop/sbin\n\n# Copy configuration files\nCOPY core-site.xml /hadoop/etc/hadoop/core-site.xml\nCOPY yarn-site.xml /hadoop/etc/hadoop/yarn-site.xml\nCOPY hdfs-site.xml /hadoop/etc/hadoop/hdfs-site.xml\n\n# Set up Hadoop directories\nRUN mkdir -p /hadoop_data/hdfs/namenode \\\n    && mkdir -p /hadoop_data/hdfs/datanode \\\n    && mkdir -p /hadoop/logs \\\n    && chown -R hadoop:hadoop /hadoop_data /hadoop/logs /hadoop\n\n# Format HDFS\nUSER hadoop\nRUN /hadoop/bin/hdfs namenode -format\n\n# Expose ports\nEXPOSE 9870 8088\n"
        },
        {
            "location": "./../../dockers/CVE-2023-26031/custom_no_tool/hadoop/core-site.xml",
            "content": "<configuration>\n  <property>\n    <name>fs.defaultFS</name>\n    <value>hdfs://localhost:9000</value>\n  </property>\n</configuration>\n"
        },
        {
            "location": "./../../dockers/CVE-2023-26031/custom_no_tool/hadoop/yarn-site.xml",
            "content": "<configuration>\n  <property>\n    <name>yarn.resourcemanager.hostname</name>\n    <value>localhost</value>\n  </property>\n  <property>\n    <name>yarn.nodemanager.aux-services</name>\n    <value>mapreduce_shuffle</value>\n  </property>\n  <property>\n    <name>yarn.nodemanager.aux-services.mapreduce.shuffle.class</name>\n    <value>org.apache.hadoop.mapred.ShuffleHandler</value>\n  </property>\n</configuration>\n"
        },
        {
            "location": "./../../dockers/CVE-2023-26031/custom_no_tool/hadoop/hdfs-site.xml",
            "content": "<configuration>\n  <property>\n    <name>dfs.replication</name>\n    <value>1</value>\n  </property>\n  <property>\n    <name>dfs.namenode.name.dir</name>\n    <value>file:///hadoop_data/hdfs/namenode</value>\n  </property>\n  <property>\n    <name>dfs.datanode.data.dir</name>\n    <value>file:///hadoop_data/hdfs/datanode</value>\n  </property>\n</configuration>\n"
        }
    ],
    "directory_tree": "CVE-2023-26031/\n\u2514\u2500\u2500 custom_no_tool/\n    \u251c\u2500\u2500 docker-compose.yml\n    \u2514\u2500\u2500 hadoop/\n        \u251c\u2500\u2500 Dockerfile\n        \u251c\u2500\u2500 core-site.xml\n        \u251c\u2500\u2500 yarn-site.xml\n        \u2514\u2500\u2500 hdfs-site.xml\n"
}