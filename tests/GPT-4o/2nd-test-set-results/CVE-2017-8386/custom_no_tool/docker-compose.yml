version: '3.7'
services:
  git:
    build: ./git
    ports:
      - "22:22"  # Use default port 22 for Git service
    networks:
      - gitnet

  ssh:
    image: "rastasheep/ubuntu-sshd:18.04"
    container_name: "openssh-server"
    ports:
      - "22:22"  # Use default port 22 for SSH service
    volumes:
      - ./ssh/sshd_config:/etc/ssh/sshd_config
      - ./ssh/authorized_keys:/root/.ssh/authorized_keys
    command: /usr/sbin/sshd -D
    depends_on:
      - git
    networks:
      - gitnet

networks:
  gitnet:
    driver: bridge
