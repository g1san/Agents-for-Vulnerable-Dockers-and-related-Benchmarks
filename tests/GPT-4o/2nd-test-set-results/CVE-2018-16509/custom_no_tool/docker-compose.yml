version: '3.7'

services:
  ghostscript:
    build: ./ghostscript
    container_name: ghostscript_vulnerable
    networks:
      - gs_network
    ports:
      - "4711:4711"
    command: ["gs", "-q", "-dNOPAUSE", "-dBATCH", "-dSAFER", "-c", "quit"]

  python_app:
    build: ./python_app
    container_name: python_app
    depends_on:
      - ghostscript
    volumes:
      - ./scripts:/scripts
    command: python /scripts/exploit.py
    networks:
      - gs_network

networks:
  gs_network:
    driver: bridge
