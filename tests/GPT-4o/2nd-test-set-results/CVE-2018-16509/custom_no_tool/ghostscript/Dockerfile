FROM debian:stretch-slim

RUN echo "deb http://archive.debian.org/debian stretch main" > /etc/apt/sources.list \
    && echo "deb http://archive.debian.org/debian-security stretch/updates main" >> /etc/apt/sources.list \
    && apt-get update -o Acquire::Check-Valid-Until=false \
    && apt-get install -y \
    wget \
    build-essential \
    libjpeg-dev \
    libpng-dev \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /usr/src/ghostscript

RUN wget https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs922/ghostscript-9.22.tar.gz \
    && tar -xzf ghostscript-9.22.tar.gz \
    && cd ghostscript-9.22 \
    && ./configure \
    && make \
    && make install

CMD ["gs", "-q", "-dNOPAUSE", "-dBATCH", "-dSAFER", "-c", "quit"]
