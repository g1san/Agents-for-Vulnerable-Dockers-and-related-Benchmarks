{
    "files": [
        {
            "location": "./../../dockers/CVE-2016-9086/custom_no_tool/docker-compose.yml",
            "content": "services:\n  gitlab:\n    build:\n      context: ./gitlab\n      dockerfile: Dockerfile\n    hostname: 'gitlab.example.com'\n    restart: always\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://gitlab.example.com'\n        gitlab_rails['gitlab_shell_ssh_port'] = 2222\n        redis['enable'] = true\n        redis['unixsocket'] = '/var/opt/gitlab/redis/redis.socket'\n    ports:\n      - '80:80'\n      - '443:443'\n      - '2222:22'\n    volumes:\n      - './gitlab/config:/etc/gitlab'\n      - './gitlab/logs:/var/log/gitlab'\n      - './gitlab/data:/var/opt/gitlab'\n      - '/sys/fs/cgroup:/sys/fs/cgroup:ro'\n\n  redis:\n    image: redis:3.2\n    restart: always\n    volumes:\n      - './redis/data:/data'\n\n  postgres:\n    image: postgres:9.6\n    restart: always\n    environment:\n      POSTGRES_USER: gitlab\n      POSTGRES_PASSWORD: gitlabpass\n    volumes:\n      - './postgres/data:/var/lib/postgresql/data'\n\n  nginx:\n    image: nginx:1.10\n    restart: always\n    ports:\n      - '8080:80'\n    volumes:\n      - './nginx/conf.d:/etc/nginx/conf.d'\n      - './nginx/logs:/var/log/nginx'\n    depends_on:\n      - gitlab\n\n"
        },
        {
            "location": "./../../dockers/CVE-2016-9086/custom_no_tool/gitlab/Dockerfile",
            "content": "# Use a multi-stage build to create a new image using a newer base\nFROM gitlab/gitlab-ce:8.13.2-ce.0 AS base\n\n# Stage to copy and rebuild the image\nFROM ubuntu:20.04\n\n# Set environment variable to avoid interactive prompts\nENV DEBIAN_FRONTEND=noninteractive\n\n# Install necessary packages\nRUN apt-get update && \\\n    apt-get install -y curl openssh-server ca-certificates tzdata perl && \\\n    curl -sL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | bash && \\\n    apt-get install -y gitlab-ce=8.13.2-ce.0\n\n# Copy configuration files\nCOPY config/gitlab.rb /etc/gitlab/gitlab.rb\nCOPY config/database.yml /var/opt/gitlab/gitlab-rails/etc/database.yml\n\n# Expose necessary ports\nEXPOSE 80 443 2222\n\nCMD [\"/assets/wrapper\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2016-9086/custom_no_tool/nginx/conf.d/default.conf",
            "content": "server {\n    listen 80;\n    server_name gitlab.example.com;\n\n    location / {\n        proxy_pass http://gitlab:80;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2016-9086/custom_no_tool/gitlab/config/gitlab.rb",
            "content": "external_url 'http://gitlab.example.com'\ngitlab_rails['gitlab_shell_ssh_port'] = 2222\npostgresql['enable'] = false\nredis['enable'] = true\nredis['unixsocket'] = '/var/opt/gitlab/redis/redis.socket'\n"
        },
        {
            "location": "./../../dockers/CVE-2016-9086/custom_no_tool/gitlab/config/database.yml",
            "content": "production:\n  adapter: postgresql\n  encoding: unicode\n  database: gitlabhq_production\n  pool: 10\n  username: gitlab\n  password: gitlabpass\n  host: postgres\n"
        }
    ],
    "directory_tree": "CVE-2016-9086/\n\u251c\u2500\u2500 custom_no_tool\n\u2502   \u251c\u2500\u2500 docker-compose.yml\n\u2502   \u251c\u2500\u2500 gitlab\n\u2502   \u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u2502   \u2514\u2500\u2500 config\n\u2502   \u2502       \u251c\u2500\u2500 database.yml\n\u2502   \u2502       \u2514\u2500\u2500 gitlab.rb\n\u2502   \u251c\u2500\u2500 nginx\n\u2502   \u2502   \u2514\u2500\u2500 conf.d\n\u2502   \u2502       \u2514\u2500\u2500 default.conf\n\u2502   \u251c\u2500\u2500 postgres\n\u2502   \u2502   \u2514\u2500\u2500 data\n\u2502   \u2514\u2500\u2500 redis\n\u2502       \u2514\u2500\u2500 data\n"
}