FROM php:5.6-apache

RUN apt-get update && apt-get install -y git unzip && rm -rf /var/lib/apt/lists/*

# Download GitList 0.6.0
RUN curl -L https://github.com/klaussilveira/gitlist/archive/refs/tags/0.6.0.zip -o gitlist.zip \
    && unzip gitlist.zip \
    && mv gitlist-0.6.0/* /var/www/html/ \
    && rm -rf gitlist-0.6.0 gitlist.zip

COPY config.ini /var/www/html/config.ini

# Set permissions
RUN chown -R www-data:www-data /var/www/html \
    && chmod -R 755 /var/www/html

EXPOSE 80
CMD ["apache2-foreground"]