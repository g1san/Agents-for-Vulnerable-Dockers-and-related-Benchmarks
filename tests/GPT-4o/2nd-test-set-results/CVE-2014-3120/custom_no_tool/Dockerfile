# Use OpenJDK 7u181 as base image
FROM openjdk:7u181-jdk

# Set the working directory
WORKDIR /usr/share/elasticsearch

# Download and extract Elasticsearch 1.1.1
RUN wget https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.1.1.tar.gz \
    && tar -xzf elasticsearch-1.1.1.tar.gz \
    && mv elasticsearch-1.1.1/* . \
    && rm -rf elasticsearch-1.1.1.tar.gz elasticsearch-1.1.1

# Copy the vulnerable Elasticsearch config
COPY elasticsearch.yml /usr/share/elasticsearch/config/elasticsearch.yml

# Expose the necessary ports
EXPOSE 9200 9300

# Start Elasticsearch
CMD ["bin/elasticsearch"]
