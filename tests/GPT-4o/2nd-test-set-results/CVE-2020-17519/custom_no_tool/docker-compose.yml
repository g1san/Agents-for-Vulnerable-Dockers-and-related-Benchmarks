services:
  flink-jobmanager:
    image: apache/flink:1.11.2
    environment:
      - JOB_MANAGER_RPC_ADDRESS=flink-jobmanager
    ports:
      - "8081:8081"
    command: jobmanager

  flink-taskmanager:
    image: apache/flink:1.11.2
    depends_on:
      - flink-jobmanager
    environment:
      - JOB_MANAGER_RPC_ADDRESS=flink-jobmanager
    command: taskmanager

  zookeeper:
    image: zookeeper:3.6.3
    ports:
      - "2181:2181"

  openjdk:
    image: adoptopenjdk:8-jdk-hotspot
    command: sleep infinity
    depends_on:
      - flink-jobmanager
      - flink-taskmanager
      - zookeeper
    volumes:
      - ./data:/data
