services:
  geoserver:
    build: .
    environment:
      - GEOSERVER_JAVA_OPTS=-Dorg.geotools.coverage.jaiext.enabled=true
    volumes:
      - geoserver_data:/var/local/geoserver
    ports:
      - "8080:8080"

  nginx:
    image: "nginx:1.21"
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - geoserver

volumes:
  geoserver_data:
    driver: local
