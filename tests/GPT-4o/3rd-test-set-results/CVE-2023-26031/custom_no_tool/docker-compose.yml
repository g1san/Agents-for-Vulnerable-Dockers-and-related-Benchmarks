services:
  hadoop:
    build: ./hadoop
    container_name: hadoop_vulnerable
    environment:
      - HADOOP_HOME=/opt/hadoop
      - HADOOP_CONF_DIR=/opt/hadoop/etc/hadoop
      - HDFS_NAMENODE_USER=hadoop
      - HDFS_DATANODE_USER=hadoop
      - HDFS_SECONDARYNAMENODE_USER=hadoop
      - JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64
    volumes:
      - ./hadoop-config:/opt/hadoop/etc/hadoop
    command: ["/bin/bash", "-c", "/opt/hadoop/sbin/start-dfs.sh && /opt/hadoop/sbin/start-yarn.sh && tail -f /dev/null"]
    networks:
      - hadoop-net

networks:
  hadoop-net:
    driver: bridge
