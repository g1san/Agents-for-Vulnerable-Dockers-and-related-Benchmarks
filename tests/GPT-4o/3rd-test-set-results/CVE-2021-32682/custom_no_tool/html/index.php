<?php
// Simple PHP page to demonstrate elFinder usage
require 'elFinder/php/elFinderConnector.class.php';
require 'elFinder/php/elFinder.class.php';
require 'elFinder/php/elFinderVolumeDriver.class.php';
require 'elFinder/php/elFinderVolumeLocalFileSystem.class.php';

$opts = array(
    'roots' => array(
        array(
            'driver'        => 'LocalFileSystem',
            'path'          => '/var/www/html/files/',
            'URL'           => '/files/',
            'uploadDeny'    => array('all'),
            'uploadAllow'   => array('image', 'text/plain'),
            'uploadOrder'   => array('deny', 'allow'),
            'accessControl' => 'access'
        )
    )
);

$connector = new elFinderConnector(new elFinder($opts));
$connector->run();

function access($attr, $path, $data, $volume) {
    return strpos(basename($path), '.') === 0   // if file/folder begins with '.' (dot)
        ? !($attr == 'read' || $attr == 'write')    // set read+write to false, other (locked+hidden) set to true
        :  null;                                    // else elFinder decide it itself
}

?>
