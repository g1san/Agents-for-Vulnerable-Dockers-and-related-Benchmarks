FROM alpine:3.8

RUN apk add --no-cache \
    build-base \
    zlib-dev \
    openssl-dev \
    pcre-dev \
    git \
    wget

# Clone and build vulnerable AppWeb version 6.2.0 using a specific commit
RUN git clone https://github.com/embedthis/appweb.git /appweb && \
    cd /appweb && \
    git checkout 9c8b6f1 && \
    make && \
    make install

WORKDIR /appweb

CMD ["/usr/local/bin/appweb", "--config", "/appweb/appweb.conf"]

EXPOSE 80
