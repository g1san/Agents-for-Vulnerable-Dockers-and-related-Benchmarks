{
    "files": [
        {
            "location": "./../../dockers/CVE-2016-1897/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  nginx:\n    image: nginx:1.19.10\n    ports:\n      - \"8080:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./media:/usr/share/nginx/html/media\n    networks:\n      - cve-network\n\n  ffmpeg:\n    build:\n      context: ./ffmpeg\n    volumes:\n      - ./media:/media\n    networks:\n      - cve-network\n\nnetworks:\n  cve-network:\n    driver: bridge\n"
        },
        {
            "location": "./../../dockers/CVE-2016-1897/custom_no_tool/nginx.conf",
            "content": "events {}\n\nhttp {\n    server {\n        listen 80;\n\n        location / {\n            root /usr/share/nginx/html;\n            autoindex on;\n        }\n\n        location /upload {\n            client_max_body_size 100M;\n            root /usr/share/nginx/html;\n            autoindex on;\n        }\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2016-1897/custom_no_tool/ffmpeg/Dockerfile",
            "content": "FROM jrottenberg/ffmpeg:2.8\n\nCOPY process.sh /process.sh\nRUN chmod +x /process.sh\n\nCMD [\"/process.sh\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2016-1897/custom_no_tool/ffmpeg/process.sh",
            "content": "#!/bin/bash\n\n# Watch the /media directory for new files and process them with ffmpeg\ninotifywait -m /media -e create -e moved_to |\n    while read path action file; do\n        echo \"The file '$file' appeared in directory '$path' via '$action'\"\n        # Check if the file is accessible and process it with ffmpeg\n        if [[ \"$file\" == *.m3u8 ]]; then\n            if [[ -f \"/media/$file\" ]]; then\n                ffmpeg -i \"/media/$file\" -c:v libx264 -c:a aac -f mp4 \"/media/processed_${file%.*}.mp4\"\n            else\n                echo \"File not found: /media/$file\"\n            fi\n        else\n            echo \"Unsupported file format: $file\"\n        fi\n    done\n"
        },
        {
            "location": "./../../dockers/CVE-2016-1897/custom_no_tool/media/sample.m3u8",
            "content": "#EXTM3U\n#EXT-X-VERSION:3\n#EXT-X-STREAM-INF:BANDWIDTH=1280000\nhttp://localhost:80/media/stream.m3u8\n"
        }
    ],
    "directory_tree": "CVE-2016-1897/\n\u2514\u2500\u2500 custom_no_tool\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 ffmpeg\n    \u2502   \u251c\u2500\u2500 Dockerfile\n    \u2502   \u2514\u2500\u2500 process.sh\n    \u251c\u2500\u2500 media\n    \u2502   \u2514\u2500\u2500 sample.m3u8\n    \u2514\u2500\u2500 nginx.conf\n"
}