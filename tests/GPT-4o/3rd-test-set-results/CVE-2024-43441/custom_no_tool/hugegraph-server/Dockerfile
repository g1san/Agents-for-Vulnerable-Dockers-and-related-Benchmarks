FROM openjdk:8-jdk

# Install necessary tools
RUN apt-get update && apt-get install -y git maven

# Clone the HugeGraph-Server source code
RUN git clone --branch v1.5.0 https://github.com/hugegraph/hugegraph.git /opt/hugegraph

# Build HugeGraph-Server
WORKDIR /opt/hugegraph
RUN mvn clean package -DskipTests

# Expose the necessary port
EXPOSE 8080

# Start the HugeGraph-Server
CMD ["/bin/bash", "-c", "java -Xms1g -Xmx1g -jar hugegraph-server/target/hugegraph-server-1.5.0.jar"]
