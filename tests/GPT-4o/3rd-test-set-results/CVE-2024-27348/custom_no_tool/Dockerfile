FROM eclipse-temurin:11-jdk

WORKDIR /app

# Install dependencies
RUN apt-get update && apt-get install -y wget tar curl && rm -rf /var/lib/apt/lists/*

# Download and setup HugeGraph Server
RUN wget https://github.com/hugegraph/hugegraph/releases/download/v1.3.0/hugegraph-1.3.0.tar.gz && \
    tar -xzf hugegraph-1.3.0.tar.gz && \
    mv hugegraph-1.3.0 hugegraph && \
    rm hugegraph-1.3.0.tar.gz

COPY init-cassandra.cql /app/hugegraph/init-cassandra.cql

CMD ["/app/hugegraph/bin/start-hugegraph.sh"]
