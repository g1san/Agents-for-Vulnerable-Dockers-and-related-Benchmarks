FROM httpd:2.4.29-alpine

# Ensure Apache runs as the correct user
RUN mkdir -p /usr/local/apache2/logs \
    && chown -R 1001:1001 /usr/local/apache2/logs \
    && chmod -R 755 /usr/local/apache2/logs

COPY conf/httpd.conf /usr/local/apache2/conf/httpd.conf
COPY htdocs/ /usr/local/apache2/htdocs/

# Expose the default Apache port
EXPOSE 80

# Start Apache in the foreground
CMD ["httpd-foreground"]