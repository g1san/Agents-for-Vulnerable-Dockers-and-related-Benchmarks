FROM adoptopenjdk:8-jdk-hotspot

# Install necessary packages
RUN apt-get update && apt-get install -y bash wget curl && rm -rf /var/lib/apt/lists/*

# Set Elasticsearch version
ENV ELASTICSEARCH_VERSION=1.4.2

# Download and install Elasticsearch
RUN mkdir /elasticsearch && \
    cd /elasticsearch && \
    wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-$ELASTICSEARCH_VERSION.tar.gz && \
    tar -xzf elasticsearch-$ELASTICSEARCH_VERSION.tar.gz && \
    rm elasticsearch-$ELASTICSEARCH_VERSION.tar.gz

# Copy configuration file
COPY elasticsearch.yml /elasticsearch/elasticsearch-$ELASTICSEARCH_VERSION/config/elasticsearch.yml

# Set working directory
WORKDIR /elasticsearch/elasticsearch-$ELASTICSEARCH_VERSION

# Set entrypoint
CMD ["bin/elasticsearch"]

# Expose ports
EXPOSE 9200 9300
