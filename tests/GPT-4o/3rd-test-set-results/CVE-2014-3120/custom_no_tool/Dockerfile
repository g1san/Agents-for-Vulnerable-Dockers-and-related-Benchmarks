# Use AdoptOpenJDK 8 as the base image
FROM adoptopenjdk:8-jdk-hotspot-bionic

# Install Elasticsearch 1.1.1
RUN apt-get update \
    && apt-get install -y wget \
    && wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.1.1.tar.gz \
    && tar -xzf elasticsearch-1.1.1.tar.gz \
    && mv elasticsearch-1.1.1 /usr/share/elasticsearch \
    && rm elasticsearch-1.1.1.tar.gz \
    && apt-get remove --purge -y wget \
    && apt-get autoremove -y \
    && apt-get clean

# Set environment variables
ENV PATH /usr/share/elasticsearch/bin:$PATH

# Expose ports
EXPOSE 9200 9300

# Run Elasticsearch
CMD ["elasticsearch"]
