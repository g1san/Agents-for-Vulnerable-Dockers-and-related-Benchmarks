#1 [internal] load local bake definitions
#1 reading from stdin 711B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile:
#2 transferring dockerfile: 1.11kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/erlang:20
#3 DONE 0.5s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/7] FROM docker.io/library/erlang:20@sha256:6c6105634f8fa31ae9e2f680468f3a1124e29c8a233c1068ac16dd93250902dd
#5 resolve docker.io/library/erlang:20@sha256:6c6105634f8fa31ae9e2f680468f3a1124e29c8a233c1068ac16dd93250902dd 0.0s done
#5 DONE 0.0s

#6 [2/7] RUN echo 'deb http://archive.debian.org/debian buster main' > /etc/apt/sources.list &&     echo 'deb-src http://archive.debian.org/debian buster main' >> /etc/apt/sources.list &&     echo 'Acquire::Check-Valid-Until "false";' > /etc/apt/apt.conf.d/99no-check-valid-until
#6 CACHED

#7 [internal] load build context
#7 transferring context: 639B done
#7 DONE 0.0s

#8 [3/7] RUN apt-get update &&     apt-get install -y --no-install-recommends     build-essential     libicu-dev     libcurl4-openssl-dev     curl     libmozjs-52-dev     && rm -rf /var/lib/apt/lists/*
#8 0.266 Get:1 http://archive.debian.org/debian buster InRelease [122 kB]
#8 0.429 Get:2 http://archive.debian.org/debian buster/main Sources [7852 kB]
#8 1.986 Get:3 http://archive.debian.org/debian buster/main amd64 Packages [7909 kB]
#8 4.074 Fetched 15.9 MB in 4s (4111 kB/s)
#8 4.074 Reading package lists...
#8 4.540 Reading package lists...
#8 4.994 Building dependency tree...
#8 5.090 Reading state information...
#8 5.187 libicu-dev is already the newest version (63.1-6+deb10u3).
#8 5.187 libicu-dev set to manually installed.
#8 5.187 curl is already the newest version (7.64.0-4+deb10u9).
#8 5.187 libcurl4-openssl-dev is already the newest version (7.64.0-4+deb10u9).
#8 5.187 The following additional packages will be installed:
#8 5.188   libmozjs-52-0
#8 5.214 The following NEW packages will be installed:
#8 5.215   build-essential libmozjs-52-0 libmozjs-52-dev
#8 5.335 0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.
#8 5.335 Need to get 12.5 MB of archives.
#8 5.335 After this operation, 54.7 MB of additional disk space will be used.
#8 5.335 Get:1 http://archive.debian.org/debian buster/main amd64 build-essential amd64 12.6 [7576 B]
#8 5.365 Get:2 http://archive.debian.org/debian buster/main amd64 libmozjs-52-0 amd64 52.9.1-1 [5869 kB]
#8 5.801 Get:3 http://archive.debian.org/debian buster/main amd64 libmozjs-52-dev amd64 52.9.1-1 [6633 kB]
#8 6.411 debconf: delaying package configuration, since apt-utils is not installed
#8 6.437 Fetched 12.5 MB in 1s (11.8 MB/s)
#8 6.458 Selecting previously unselected package build-essential.
#8 6.458 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 33881 files and directories currently installed.)
#8 6.479 Preparing to unpack .../build-essential_12.6_amd64.deb ...
#8 6.483 Unpacking build-essential (12.6) ...
#8 6.516 Selecting previously unselected package libmozjs-52-0:amd64.
#8 6.518 Preparing to unpack .../libmozjs-52-0_52.9.1-1_amd64.deb ...
#8 6.527 Unpacking libmozjs-52-0:amd64 (52.9.1-1) ...
#8 7.023 Selecting previously unselected package libmozjs-52-dev.
#8 7.025 Preparing to unpack .../libmozjs-52-dev_52.9.1-1_amd64.deb ...
#8 7.029 Unpacking libmozjs-52-dev (52.9.1-1) ...
#8 7.586 Setting up libmozjs-52-0:amd64 (52.9.1-1) ...
#8 7.596 Setting up build-essential (12.6) ...
#8 7.607 Setting up libmozjs-52-dev (52.9.1-1) ...
#8 7.617 Processing triggers for libc-bin (2.28-10+deb10u3) ...
#8 DONE 7.8s

#9 [4/7] RUN curl -L https://archive.apache.org/dist/couchdb/source/1.7.0/apache-couchdb-1.7.0.tar.gz | tar xz &&     cd apache-couchdb-1.7.0 &&     ./configure &&     make &&     make install
#9 0.224   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
#9 0.224                                  Dload  Upload   Total   Spent    Left  Speed
#9 0.224 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0 9730k    0 87943    0     0  65094      0  0:02:33  0:00:01  0:02:32 65046
  2 9730k    2  226k    0     0  98280      0  0:01:41  0:00:02  0:01:39 98239
  3 9730k    3  359k    0     0   106k      0  0:01:30  0:00:03  0:01:27  106k
  5 9730k    5  507k    0     0   115k      0  0:01:24  0:00:04  0:01:20  115k
  6 9730k    6  640k    0     0   119k      0  0:01:21  0:00:05  0:01:16  130k
  7 9730k    7  773k    0     0   121k      0  0:01:20  0:00:06  0:01:14  137k
  9 9730k    9  937k    0     0   126k      0  0:01:16  0:00:07  0:01:09  141k
 11 9730k   11 1085k    0     0   129k      0  0:01:14  0:00:08  0:01:06  145k
 13 9730k   13 1273k    0     0   136k      0  0:01:11  0:00:09  0:01:02  154k
 15 9730k   15 1460k    0     0   141k      0  0:01:08  0:00:10  0:00:58  164k
 17 9730k   17 1671k    0     0   147k      0  0:01:06  0:00:11  0:00:55  179k
 19 9730k   19 1859k    0     0   150k      0  0:01:04  0:00:12  0:00:52  185k
 20 9730k   20 2039k    0     0   152k      0  0:01:03  0:00:13  0:00:50  190k
 22 9730k   22 2226k    0     0   154k      0  0:01:02  0:00:14  0:00:48  189k
 24 9730k   24 2398k    0     0   156k      0  0:01:02  0:00:15  0:00:47  187k
 26 9730k   26 2546k    0     0   155k      0  0:01:02  0:00:16  0:00:46  175k
 27 9730k   27 2671k    0     0   153k      0  0:01:03  0:00:17  0:00:46  162k
 28 9730k   28 2757k    0     0   150k      0  0:01:04  0:00:18  0:00:46  143k
 29 9730k   29 2890k    0     0   148k      0  0:01:05  0:00:19  0:00:46  132k
 31 9730k   31 3062k    0     0   150k      0  0:01:04  0:00:20  0:00:44  133k
 32 9730k   32 3210k    0     0   150k      0  0:01:04  0:00:21  0:00:43  132k
 34 9730k   34 3343k    0     0   149k      0  0:01:05  0:00:22  0:00:43  134k
 35 9730k   35 3484k    0     0   149k      0  0:01:05  0:00:23  0:00:42  145k
 37 9730k   37 3617k    0     0   148k      0  0:01:05  0:00:24  0:00:41  146k
 38 9730k   38 3789k    0     0   149k      0  0:01:05  0:00:25  0:00:40  144k
 40 9730k   40 3976k    0     0   150k      0  0:01:04  0:00:26  0:00:38  152k
 42 9730k   42 4164k    0     0   152k      0  0:01:03  0:00:27  0:00:36  163k
 44 9730k   44 4312k    0     0   152k      0  0:01:03  0:00:28  0:00:35  165k
 46 9730k   46 4492k    0     0   153k      0  0:01:03  0:00:29  0:00:34  174k
 48 9730k   48 4671k    0     0   153k      0  0:01:03  0:00:30  0:00:33  177k
 49 9730k   49 4851k    0     0   154k      0  0:01:02  0:00:31  0:00:31  175k
 51 9730k   51 5031k    0     0   155k      0  0:01:02  0:00:32  0:00:30  173k
 53 9730k   53 5234k    0     0   156k      0  0:01:02  0:00:33  0:00:29  182k
 55 9730k   55 5421k    0     0   157k      0  0:01:01  0:00:34  0:00:27  185k
 57 9730k   57 5601k    0     0   158k      0  0:01:01  0:00:35  0:00:26  185k
 59 9730k   59 5765k    0     0   158k      0  0:01:01  0:00:36  0:00:25  183k
 61 9730k   61 5953k    0     0   159k      0  0:01:01  0:00:37  0:00:24  184k
 62 9730k   62 6124k    0     0   159k      0  0:01:01  0:00:38  0:00:23  178k
 63 9730k   63 6171k    0     0   156k      0  0:01:02  0:00:39  0:00:23  149k
 65 9730k   65 6367k    0     0   157k      0  0:01:01  0:00:40  0:00:21  153k
 67 9730k   67 6539k    0     0   158k      0  0:01:01  0:00:41  0:00:20  154k
 69 9730k   69 6718k    0     0   158k      0  0:01:01  0:00:42  0:00:19  153k
 70 9730k   70 6882k    0     0   158k      0  0:01:01  0:00:43  0:00:18  152k
 72 9730k   72 7039k    0     0   158k      0  0:01:01  0:00:44  0:00:17  174k
 73 9730k   73 7179k    0     0   158k      0  0:01:01  0:00:45  0:00:16  162k
 75 9730k   75 7304k    0     0   157k      0  0:01:01  0:00:46  0:00:15  153k
 76 9730k   76 7414k    0     0   156k      0  0:01:02  0:00:47  0:00:15  138k
 77 9730k   77 7531k    0     0   155k      0  0:01:02  0:00:48  0:00:14  129k
 79 9730k   79 7687k    0     0   155k      0  0:01:02  0:00:49  0:00:13  127k
 80 9730k   80 7843k    0     0   155k      0  0:01:02  0:00:50  0:00:12  132k
 82 9730k   82 7984k    0     0   155k      0  0:01:02  0:00:51  0:00:11  135k
 83 9730k   83 8148k    0     0   155k      0  0:01:02  0:00:52  0:00:10  146k
 84 9730k   84 8257k    0     0   154k      0  0:01:02  0:00:53  0:00:09  144k
 86 9730k   86 8398k    0     0   154k      0  0:01:03  0:00:54  0:00:09  144k
 87 9730k   87 8546k    0     0   154k      0  0:01:03  0:00:55  0:00:08  140k
 89 9730k   89 8718k    0     0   154k      0  0:01:02  0:00:56  0:00:06  146k
 91 9730k   91 8906k    0     0   155k      0  0:01:02  0:00:57  0:00:05  152k
 93 9730k   93 9085k    0     0   155k      0  0:01:02  0:00:58  0:00:04  166k
 95 9730k   95 9265k    0     0   156k      0  0:01:02  0:00:59  0:00:03  174k
 96 9730k   96 9421k    0     0   156k      0  0:01:02  0:01:00  0:00:02  174k
 98 9730k   98 9570k    0     0   155k      0  0:01:02  0:01:01  0:00:01  169k
 99 9730k   99 9671k    0     0   155k      0  0:01:02  0:01:02 --:--:--  152k
100 9730k  100 9730k    0     0   154k      0  0:01:02  0:01:02 --:--:--  143k
#9 63.25 checking for a BSD-compatible install... /usr/bin/install -c
#9 63.26 checking whether build environment is sane... yes
#9 63.27 checking for a thread-safe mkdir -p... /bin/mkdir -p
#9 63.28 checking for gawk... no
#9 63.28 checking for mawk... mawk
#9 63.28 checking whether make sets $(MAKE)... yes
#9 63.29 checking whether make supports nested variables... yes
#9 63.30 checking whether UID '0' is supported by ustar format... yes
#9 63.30 checking whether GID '0' is supported by ustar format... yes
#9 63.31 checking how to create a ustar tar archive... gnutar
#9 63.33 checking for style of include used by make... GNU
#9 63.33 checking for gcc... gcc
#9 63.35 checking whether the C compiler works... yes
#9 63.38 checking for C compiler default output file name... a.out
#9 63.39 checking for suffix of executables... 
#9 63.42 checking whether we are cross compiling... no
#9 63.45 checking for suffix of object files... o
#9 63.47 checking whether we are using the GNU C compiler... yes
#9 63.49 checking whether gcc accepts -g... yes
#9 63.50 checking for gcc option to accept ISO C89... none needed
#9 63.53 checking whether gcc understands -c and -o together... yes
#9 63.56 checking dependency style of gcc... gcc3
#9 63.60 checking how to run the C preprocessor... gcc -E
#9 63.64 checking for grep that handles long lines and -e... /bin/grep
#9 63.64 checking for egrep... /bin/grep -E
#9 63.64 checking for ANSI C header files... yes
#9 63.73 checking for sys/types.h... yes
#9 63.76 checking for sys/stat.h... yes
#9 63.79 checking for stdlib.h... yes
#9 63.82 checking for string.h... yes
#9 63.86 checking for memory.h... yes
#9 63.89 checking for strings.h... yes
#9 63.92 checking for inttypes.h... yes
#9 63.95 checking for stdint.h... yes
#9 63.98 checking for unistd.h... yes
#9 64.01 checking minix/config.h usability... no
#9 64.04 checking minix/config.h presence... no
#9 64.05 checking for minix/config.h... no
#9 64.05 checking whether it is safe to define __EXTENSIONS__... yes
#9 64.08 checking for gcc... (cached) gcc
#9 64.10 checking whether we are using the GNU C compiler... (cached) yes
#9 64.10 checking whether gcc accepts -g... (cached) yes
#9 64.10 checking for gcc option to accept ISO C89... (cached) none needed
#9 64.10 checking whether gcc understands -c and -o together... (cached) yes
#9 64.10 checking dependency style of gcc... (cached) gcc3
#9 64.11 checking build system type... x86_64-pc-linux-gnu
#9 64.15 checking host system type... x86_64-pc-linux-gnu
#9 64.15 checking how to print strings... printf
#9 64.18 checking for a sed that does not truncate output... /bin/sed
#9 64.19 checking for fgrep... /bin/grep -F
#9 64.19 checking for ld used by gcc... /usr/bin/ld
#9 64.19 checking if the linker (/usr/bin/ld) is GNU ld... yes
#9 64.20 checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
#9 64.20 checking the name lister (/usr/bin/nm -B) interface... BSD nm
#9 64.22 checking whether ln -s works... yes
#9 64.22 checking the maximum length of command line arguments... 1572864
#9 64.23 checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop
#9 64.23 checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
#9 64.23 checking for /usr/bin/ld option to reload object files... -r
#9 64.23 checking for objdump... objdump
#9 64.23 checking how to recognize dependent libraries... pass_all
#9 64.23 checking for dlltool... no
#9 64.23 checking how to associate runtime and link libraries... printf %s\n
#9 64.23 checking for ar... ar
#9 64.23 checking for archiver @FILE support... @
#9 64.26 checking for strip... strip
#9 64.26 checking for ranlib... ranlib
#9 64.26 checking command to parse /usr/bin/nm -B output from gcc object... ok
#9 64.32 checking for sysroot... no
#9 64.32 checking for a working dd... /bin/dd
#9 64.33 checking how to truncate binary pipes... /bin/dd bs=4096 count=1
#9 64.34 checking for mt... no
#9 64.34 checking if : is a manifest tool... no
#9 64.35 checking for dlfcn.h... yes
#9 64.38 checking for objdir... .libs
#9 64.44 checking if gcc supports -fno-rtti -fno-exceptions... no
#9 64.46 checking for gcc option to produce PIC... -fPIC -DPIC
#9 64.46 checking if gcc PIC flag -fPIC -DPIC works... yes
#9 64.48 checking if gcc static flag -static works... yes
#9 64.53 checking if gcc supports -c -o file.o... yes
#9 64.56 checking if gcc supports -c -o file.o... (cached) yes
#9 64.56 checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
#9 64.57 checking whether -lc should be explicitly linked in... no
#9 64.59 checking dynamic linker characteristics... GNU/Linux ld.so
#9 64.64 checking how to hardcode library paths into programs... immediate
#9 64.64 checking whether stripping libraries is possible... yes
#9 64.64 checking if libtool supports shared libraries... yes
#9 64.64 checking whether to build shared libraries... yes
#9 64.64 checking whether to build static libraries... no
#9 64.64 checking whether ln -s works... yes
#9 64.65 checking for pkg-config... /usr/bin/pkg-config
#9 64.65 checking pkg-config is at least version 0.9.0... yes
#9 64.65 checking for g++... g++
#9 64.67 checking whether we are using the GNU C++ compiler... yes
#9 64.69 checking whether g++ accepts -g... yes
#9 64.71 checking dependency style of g++... gcc3
#9 64.75 checking how to run the C++ preprocessor... g++ -E
#9 64.87 checking for ld used by g++... /usr/bin/ld -m elf_x86_64
#9 64.88 checking if the linker (/usr/bin/ld -m elf_x86_64) is GNU ld... yes
#9 64.88 checking whether the g++ linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
#9 64.97 checking for g++ option to produce PIC... -fPIC -DPIC
#9 64.97 checking if g++ PIC flag -fPIC -DPIC works... yes
#9 64.99 checking if g++ static flag -static works... yes
#9 65.04 checking if g++ supports -c -o file.o... yes
#9 65.07 checking if g++ supports -c -o file.o... (cached) yes
#9 65.07 checking whether the g++ linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
#9 65.07 checking dynamic linker characteristics... (cached) GNU/Linux ld.so
#9 65.08 checking how to hardcode library paths into programs... immediate
#9 65.14 checking whether byte ordering is bigendian... no
#9 65.21 checking for stdint.h... (cached) yes
#9 65.22 checking stddef.h usability... yes
#9 65.25 checking stddef.h presence... yes
#9 65.26 checking for stddef.h... yes
#9 65.27 checking sys/mman.h usability... yes
#9 65.30 checking sys/mman.h presence... yes
#9 65.31 checking for sys/mman.h... yes
#9 65.32 checking sys/resource.h usability... yes
#9 65.35 checking sys/resource.h presence... yes
#9 65.36 checking for sys/resource.h... yes
#9 65.37 checking for mmap... yes
#9 65.44 checking if the compiler supports __builtin_expect... yes
#9 65.46 checking if the compiler supports __builtin_ctzll... yes
#9 65.48 checking for pthread_create in -lpthread... no
#9 65.50 checking for erl... /usr/local/bin/erl
#9 65.50 checking for escript... /usr/local/bin/escript
#9 65.51 checking for mozjs185... no
#9 65.52 checking for mozilla-js >= 1.7... no
#9 65.53 checking jsapi.h usability... no
#9 65.56 checking jsapi.h presence... no
#9 65.57 checking for jsapi.h... no
#9 65.57 checking js/jsapi.h usability... no
#9 65.60 checking js/jsapi.h presence... no
#9 65.61 checking for js/jsapi.h... no
#9 65.61 configure: error: Could not find the jsapi header.
#9 65.61 
#9 65.61 Are the Mozilla SpiderMonkey headers installed?
#9 ERROR: process "/bin/sh -c curl -L https://archive.apache.org/dist/couchdb/source/1.7.0/apache-couchdb-1.7.0.tar.gz | tar xz &&     cd apache-couchdb-1.7.0 &&     ./configure &&     make &&     make install" did not complete successfully: exit code: 1
------
 > [4/7] RUN curl -L https://archive.apache.org/dist/couchdb/source/1.7.0/apache-couchdb-1.7.0.tar.gz | tar xz &&     cd apache-couchdb-1.7.0 &&     ./configure &&     make &&     make install:
65.36 checking for sys/resource.h... yes
65.37 checking for mmap... yes
65.44 checking if the compiler supports __builtin_expect... yes
no
65.57 checking js/jsapi.h usability... no
65.60 checking js/jsapi.h presence... no
65.61 checking for js/jsapi.h... no
65.61 configure: error: Could not find the jsapi header.
65.61 
65.61 Are the Mozilla SpiderMonkey headers installed?
------
Dockerfile:19

--------------------

  18 |     # Download and build CouchDB 1.7.0

  19 | >>> RUN curl -L https://archive.apache.org/dist/couchdb/source/1.7.0/apache-couchdb-1.7.0.tar.gz | tar xz && \

  20 | >>>     cd apache-couchdb-1.7.0 && \

  21 | >>>     ./configure && \

  22 | >>>     make && \

  23 | >>>     make install

  24 |     

--------------------

failed to solve: process "/bin/sh -c curl -L https://archive.apache.org/dist/couchdb/source/1.7.0/apache-couchdb-1.7.0.tar.gz | tar xz &&     cd apache-couchdb-1.7.0 &&     ./configure &&     make &&     make install" did not complete successfully: exit code: 1

