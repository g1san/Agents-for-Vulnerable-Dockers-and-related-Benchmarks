# Use the official Flink image
FROM flink:1.11.2

# Install OpenJDK
RUN apt-get update && \
    apt-get install -y openjdk-8-jdk && \
    apt-get clean;

# Copy the vulnerable FileUploadHandler.java for testing purposes
COPY FileUploadHandler.java /opt/flink/src/FileUploadHandler.java

# Set the working directory
WORKDIR /opt/flink

# Expose necessary ports
EXPOSE 8081 6123 6124

# Start Flink JobManager by default
CMD ["/docker-entrypoint.sh", "jobmanager"]