services:
  flink:
    image: apache/flink:1.11.2
    container_name: flink-jobmanager
    ports:
      - "8081:8081"
    environment:
      - JOB_MANAGER_RPC_ADDRESS=flink-jobmanager
    command: jobmanager

  taskmanager:
    image: apache/flink:1.11.2
    container_name: flink-taskmanager
    depends_on:
      - flink
    environment:
      - JOB_MANAGER_RPC_ADDRESS=flink-jobmanager
    command: taskmanager

  zookeeper:
    image: zookeeper:3.5.9
    container_name: zookeeper
    ports:
      - "2181:2181"
    environment:
      ZOO_MY_ID: 1
      ZOO_SERVERS: server.1=zookeeper:2888:3888

  openjdk:
    image: openjdk:8u312-jdk
    container_name: openjdk
    command: sleep infinity
    depends_on:
      - flink
      - taskmanager
      - zookeeper
