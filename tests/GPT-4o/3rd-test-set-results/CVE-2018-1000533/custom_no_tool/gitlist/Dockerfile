FROM php:7.2-apache

RUN apt-get update && \
    apt-get install -y git && \
    docker-php-ext-install mysqli

COPY . /var/www/html/

RUN chmod -R 777 /var/www/html/cache

WORKDIR /var/www/html

# Download GitList version 0.6.0
RUN git clone https://github.com/klaussilveira/gitlist.git . && \
    git checkout 0.6.0

EXPOSE 80
CMD ["apache2-foreground"]
