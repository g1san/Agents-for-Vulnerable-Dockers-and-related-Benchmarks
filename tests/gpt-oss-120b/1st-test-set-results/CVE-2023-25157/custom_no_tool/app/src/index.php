<?php
$host = $_ENV['DB_HOST'] ?? 'db';
$user = $_ENV['DB_USER'] ?? 'example';
$pass = $_ENV['DB_PASSWORD'] ?? 'examplepass';
$dbname = $_ENV['DB_NAME'] ?? 'exampledb';
$dsn = "pgsql:host=$host;dbname=$dbname";
try {
    $pdo = new PDO($dsn, $user, $pass, [PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION]);
} catch (PDOException $e) {
    die('Connection failed: ' . $e->getMessage());
}
$id = $_GET['id'] ?? '';
if (!ctype_digit($id)) {
    die('Invalid ID');
}
$stmt = $pdo->prepare('SELECT username FROM users WHERE id = :id');
$stmt->execute(['id' => $id]);
$row = $stmt->fetch(PDO::FETCH_ASSOC);
if ($row) {
    echo 'User: ' . htmlspecialchars($row['username']);
} else {
    echo 'User not found';
}
?>