FROM php:8.2-apache

# Install required packages, compile and enable the PostgreSQL PDO driver, enable Apache rewrite module, then clean up
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
        gnupg2 \
        ca-certificates \
        apt-transport-https \
        libpq-dev \
        postgresql-client \
        build-essential && \
    docker-php-ext-install pdo_pgsql && \
    docker-php-ext-enable pdo_pgsql && \
    a2enmod rewrite && \
    rm -rf /var/lib/apt/lists/*

COPY src/ /var/www/html/

EXPOSE 80