{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-42392/custom_no_tool/Dockerfile",
            "content": "FROM openjdk:11-jre-slim\n\nENV H2_VERSION=2.0.204\n\n# Install wget and CA certificates in one layer and clean apt cache\nRUN apt-get update && apt-get install -y --no-install-recommends wget ca-certificates && rm -rf /var/lib/apt/lists/*\n\n# Create directory for the database files\nRUN mkdir -p /opt/db\n\n# Download the H2 database jar (vulnerable version)\nRUN wget -O /opt/h2.jar https://repo1.maven.org/maven2/com/h2database/h2/${H2_VERSION}/h2-${H2_VERSION}.jar\n\n# Copy initialization script, entrypoint and sample data\nCOPY init.sql /opt/init.sql\nCOPY entrypoint.sh /opt/entrypoint.sh\nRUN chmod +x /opt/entrypoint.sh\n\n# Expose default H2 TCP and web console ports\nEXPOSE 1521 8082\n\nENTRYPOINT [\"/opt/entrypoint.sh\"]"
        },
        {
            "location": "./../../dockers/CVE-2021-42392/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/sh\nset -e\n\n# Ensure the database directory exists (also created at build time)\nmkdir -p /opt/db\n\n# Initialize the database with test data if it does not exist yet\nif [ ! -f /opt/db/test.mv.db ]; then\n    java -cp /opt/h2.jar org.h2.tools.RunScript \\\n        -url jdbc:h2:/opt/db/test \\\n        -user sa \\\n        -script /opt/init.sql\nfi\n\n# Start H2 server as the container's main process\nexec java -cp /opt/h2.jar org.h2.tools.Server \\\n    -tcp -tcpPort 1521 -tcpAllowOthers \\\n    -web -webPort 8082 -webAllowOthers \\\n    -baseDir /opt/db \\\n    -ifNotExists"
        },
        {
            "location": "./../../dockers/CVE-2021-42392/custom_no_tool/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS sample (\n    id INT PRIMARY KEY,\n    name VARCHAR(255)\n);\n\nINSERT INTO sample (id, name) VALUES (1, 'Alice');\nINSERT INTO sample (id, name) VALUES (2, 'Bob');\nINSERT INTO sample (id, name) VALUES (3, 'Charlie');"
        },
        {
            "location": "./../../dockers/CVE-2021-42392/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  h2:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"1521:1521\"\n      - \"8082:8082\"\n    volumes:\n      - h2-data:/opt/db\n\nvolumes:\n  h2-data:"
        }
    ],
    "directory_tree": "CVE-2021-42392/custom_no_tool"
}