services:
  dind:
    image: docker:24.0.2-dind
    privileged: true
    environment:
      - DOCKER_TLS_CERTDIR=
    ports:
      - "2375:2375"
    volumes:
      - dind-data:/var/lib/docker
  activemq:
    image: rmohr/activemq:5.18.3
    depends_on:
      - dind
    ports:
      - "61616:61616"
      - "8161:8161"
    environment:
      - ACTIVEMQ_ADMIN_LOGIN=admin
      - ACTIVEMQ_ADMIN_PASSWORD=admin
    volumes:
      - activemq-data:/opt/activemq/data
volumes:
  dind-data:
    driver: local
  activemq-data:
    driver: local
