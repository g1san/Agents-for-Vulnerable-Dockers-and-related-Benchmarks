services:
  vulnerable_app:
    build: ./app
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    restart: unless-stopped
    networks:
      - vulnnet

  git:
    image: alpine/git:2.11
    restart: unless-stopped
    networks:
      - vulnnet

  ssh:
    image: linuxserver/openssh-server:8.2_p1-r0
    ports:
      - "2222:22"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - USER=git
      - PASSWORD=gitpass
      - PUBLIC_KEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCexamplekeygeneratedforsshuser
    restart: unless-stopped
    networks:
      - vulnnet

networks:
  vulnnet:
    driver: bridge