{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-25646/custom_no_tool/docker-compose.yml",
            "content": "services:\n  druid:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: druid\n    ports:\n      - \"8081:8081\"   # Coordinator (exposes /druid/indexer/v1/sampler)\n      - \"8082:8082\"   # Overlord\n      - \"8083:8083\"   # Historical\n      - \"8080:8080\"   # Broker\n      - \"8888:8888\"   # Router\n    environment:\n      - DRUID_HOST=0.0.0.0\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD-SHELL\", \"curl -f -s http://localhost:8081/druid/indexer/v1/sampler || exit 1\"]\n      interval: 30s\n      timeout: 5s\n      retries: 5\n      start_period: 30s\n  curl:\n    image: curlimages/curl:7.88.1\n    container_name: curl\n    depends_on:\n      druid:\n        condition: service_healthy\n    entrypoint: [\"sh\", \"-c\", \"until [ \\\"$(curl -s -o /dev/null -w '%{http_code}' http://druid:8081/druid/indexer/v1/sampler)\\\" -eq 200 ]; do echo 'Waiting for Druid sampler endpoint...'; sleep 5; done; echo 'Druid sampler is ready'; tail -f /dev/null\"]\n    restart: unless-stopped"
        },
        {
            "location": "./../../dockers/CVE-2021-25646/custom_no_tool/Dockerfile",
            "content": "FROM apache/druid:0.20.0\nUSER root\nRUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*\nUSER druid"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2021-25646/custom_no_tool"
}