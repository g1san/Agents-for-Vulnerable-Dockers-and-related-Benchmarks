time="2025-10-29T18:08:33+01:00" level=warning msg="/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 722B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 563B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/atlassian/confluence-server:8.5.3
#3 DONE 0.8s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/4] FROM docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b
#5 resolve docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b 0.0s done
#5 DONE 0.0s

#6 [2/4] RUN apt-get update &&     apt-get install -y --no-install-recommends         ca-certificates         wget         unzip &&     rm -rf /var/lib/apt/lists/*
#6 CACHED

#7 [internal] load build context
#7 transferring context: 246B done
#7 DONE 0.0s

#8 [3/4] COPY wait-for-it.sh /usr/local/bin/wait-for-it.sh
#8 DONE 0.0s

#9 [4/4] RUN chmod +x /usr/local/bin/wait-for-it.sh
#9 DONE 0.2s

#10 exporting to image
#10 exporting layers 0.1s done
#10 exporting manifest sha256:7ae6345031d64aeba43d4cb79fcf262ea99d3f0c7e9e3ec321e73f8532d16672 0.0s done
#10 exporting config sha256:3a5d2d0c709641d91cd5273717815df458c49d143d1d68b6551a8f0ebc0e935f 0.0s done
#10 exporting attestation manifest sha256:085f4d93830a53bbea1082c975692944825e59a378cd633838ff0a34d08699fc 0.0s done
#10 exporting manifest list sha256:300f379f87e567dd40ede585c42366fef5aa28a1a4d77c74258e7c1573594db8 0.0s done
#10 naming to docker.io/library/custom-confluence:latest done
#10 unpacking to docker.io/library/custom-confluence:latest 0.1s done
#10 DONE 0.4s

#11 resolving provenance for metadata file
#11 DONE 0.0s
 custom-confluence:latest  Built
 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_db_data  Creating
 Volume custom_no_tool_db_data  Created
 Container postgres  Creating
 Container postgres  Created
 Container confluence  Creating
 Container confluence  Created
 Container nginx  Creating
 Container nginx  Created
 Container postgres  Starting
 Container postgres  Started
 Container postgres  Waiting
 Container postgres  Healthy
 Container confluence  Starting
 Container confluence  Started
 Container nginx  Starting
 Container nginx  Started


sudo docker logs a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04 --details
STDOUT:  Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...
 Waiting for db:5432...

STDERR:  /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found
 /usr/local/bin/wait-for-it.sh: line 7: nc: command not found




sudo docker inspect a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04[
    {
        "Id": "a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04",
        "Created": "2025-10-29T17:08:35.987337047Z",
        "Path": "/usr/local/bin/wait-for-it.sh",
        "Args": [
            "db",
            "5432",
            "--",
            "/entrypoint.sh"
        ],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 113115,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-10-29T17:08:42.048289229Z",
            "FinishedAt": "0001-01-01T00:00:00Z"
        },
        "Image": "sha256:300f379f87e567dd40ede585c42366fef5aa28a1a4d77c74258e7c1573594db8",
        "ResolvConfPath": "/var/lib/docker/containers/a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04/hostname",
        "HostsPath": "/var/lib/docker/containers/a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04/hosts",
        "LogPath": "/var/lib/docker/containers/a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04/a7589b5f69568684e361c70bdc5ca7411258402de07aafd37066627d2d0e7b04-json.log",
        "Name": "/confluence",
        "RestartCount": 0,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "8090/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8090"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "unless-stopped",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": null,
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "volume",
                "Name": "a3e1b8ca5f4e55f34ae901f377815cd0cdd2173c2d975e03c6d9bc961fdca408",
                "Source": "/var/lib/docker/volumes/a3e1b8ca5f4e55f34ae901f377815cd0cdd2173c2d975e03c6d9bc961fdca408/_data",
                "Destination": "/var/atlassian/application-data/confluence",
                "Driver": "local",
                "Mode": "",
                "RW": true,
                "Propagation": ""
            }
        ],
        "Config": {
            "Hostname": "a7589b5f6956",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "8090/tcp": {},
                "8091/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "ATL_JDBC_URL=jdbc:postgresql://db:5432/confluence",
                "ATL_JDBC_USER=confluence_user",
                "ATL_JDBC_PASSWORD=confluence_pass",
                "ATL_DB_TYPE=postgres",
                "PATH=/opt/java/openjdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "JAVA_HOME=/opt/java/openjdk",
                "LANG=en_US.UTF-8",
                "LANGUAGE=en_US:en",
                "LC_ALL=en_US.UTF-8",
                "JAVA_VERSION=jdk-11.0.21+9",
                "APP_NAME=confluence",
                "RUN_USER=confluence",
                "RUN_GROUP=confluence",
                "RUN_UID=2002",
                "RUN_GID=2002",
                "CONFLUENCE_HOME=/var/atlassian/application-data/confluence",
                "CONFLUENCE_INSTALL_DIR=/opt/atlassian/confluence",
                "CONFLUENCE_LOG_STDOUT=false",
                "CONFLUENCE_VERSION=8.5.3"
            ],
            "Cmd": null,
            "Image": "custom-confluence:latest",
            "Volumes": {
                "/var/atlassian/application-data/confluence": {}
            },
            "WorkingDir": "/var/atlassian/application-data/confluence",
            "Entrypoint": [
                "/usr/local/bin/wait-for-it.sh",
                "db",
                "5432",
                "--",
                "/entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "6112c18fac8448073f344be4232674bbe66624e8533c597dea46b19c933c06e9",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "db:service_healthy:false",
                "com.docker.compose.image": "sha256:300f379f87e567dd40ede585c42366fef5aa28a1a4d77c74258e7c1573594db8",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool",
                "com.docker.compose.service": "confluence",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu",
                "maintainer": "dc-deployments@atlassian.com",
                "org.opencontainers.image.ref.name": "ubuntu",
                "org.opencontainers.image.version": "22.04",
                "securitytxt": "https://www.atlassian.com/.well-known/security.txt"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "5918bcdc2efb9d02c99ebafa2ada818b21a46fac3bf7eb5e138dd1038baa1509",
            "SandboxKey": "/var/run/docker/netns/5918bcdc2efb",
            "Ports": {
                "8090/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "8090"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "8090"
                    }
                ]
            },
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "confluence",
                        "confluence"
                    ],
                    "MacAddress": "42:f4:9f:7e:11:51",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "0f495de56bf127ca3d4141c44e76b61359f593c722940806741210a97d0da91e",
                    "EndpointID": "ec314f7947b7a574c6b1e24fe02ec429f9b9ac11438c7d4e79524a3e0999b9df",
                    "Gateway": "172.18.0.1",
                    "IPAddress": "172.18.0.3",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "confluence",
                        "a7589b5f6956"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.oci.image.manifest.v1+json",
            "digest": "sha256:7ae6345031d64aeba43d4cb79fcf262ea99d3f0c7e9e3ec321e73f8532d16672",
            "size": 4492,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]