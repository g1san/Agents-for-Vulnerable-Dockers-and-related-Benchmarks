time="2025-10-29T18:12:39+01:00" level=warning msg="/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 722B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 751B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/atlassian/confluence-server:8.5.3
#3 DONE 0.4s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/5] FROM docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b
#5 resolve docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b 0.0s done
#5 DONE 0.0s

#6 [internal] load build context
#6 transferring context: 245B done
#6 DONE 0.0s

#7 [2/5] RUN apt-get update &&     apt-get install -y --no-install-recommends         ca-certificates         wget         unzip         netcat-openbsd &&     rm -rf /var/lib/apt/lists/*
#7 CACHED

#8 [3/5] RUN chmod +x /opt/atlassian/confluence/bin/start-confluence.sh || true
#8 CACHED

#9 [4/5] COPY wait-for-it.sh /usr/local/bin/wait-for-it.sh
#9 DONE 0.0s

#10 [5/5] RUN chmod +x /usr/local/bin/wait-for-it.sh
#10 DONE 0.2s

#11 exporting to image
#11 exporting layers 0.1s done
#11 exporting manifest sha256:851b8a5e75e39ed684f4aa4ffdd09cdae977b6a9f952b9dba1a1a2c7f2e4db88 0.0s done
#11 exporting config sha256:4213cf6a7aa49d2311f4d489f8881bed8be3a6378ff39016b5b698cbd6638422 0.0s done
#11 exporting attestation manifest sha256:33bc46593b23a6aa1f6518d09a63cd2ac8b0a4468e98d18667a0010dd30f91b1 0.0s done
#11 exporting manifest list sha256:5089351827ad15f9c6e5416a95aa244fa15999d7c20ad35dc38b2a0e182270b1 0.0s done
#11 naming to docker.io/library/custom-confluence:latest done
#11 unpacking to docker.io/library/custom-confluence:latest 0.1s done
#11 DONE 0.3s

#12 resolving provenance for metadata file
#12 DONE 0.0s
 custom-confluence:latest  Built
 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_db_data  Creating
 Volume custom_no_tool_db_data  Created
 Container postgres  Creating
 Container postgres  Created
 Container confluence  Creating
 Container confluence  Created
 Container nginx  Creating
 Container nginx  Created
 Container postgres  Starting
 Container postgres  Started
 Container postgres  Waiting
 Container postgres  Healthy
 Container confluence  Starting
 Container confluence  Started
 Container nginx  Starting
 Container nginx  Started


sudo docker logs cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1 --details
STDOUT:  
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:48,645 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Tomcat started.
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:49,780 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:50,975 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:52,449 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:54,198 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:12:56,805 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:13:01,015 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD
 
 To run Confluence in the foreground, start the server with start-confluence.sh -fg
 executing as current user
 If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide
 
 Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
 ---------------------------------------------------------------------------
 Using Java: /opt/java/openjdk/bin/java
 2025-10-29 17:13:08,356 INFO [main] [atlassian.confluence.bootstrap.SynchronyProxyWatchdog] A Context element for ${confluence.context.path}/synchrony-proxy is found in /opt/atlassian/confluence/conf/server.xml. No further action is required
 ---------------------------------------------------------------------------
 Existing PID file found during start.
 Tomcat appears to still be running with PID 61. Start aborted.
 If the following process is not a Tomcat process, remove the PID file and try again:
 UID          PID    PPID  C STIME TTY          TIME CMD

STDERR: 



sudo docker inspect cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1[
    {
        "Id": "cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1",
        "Created": "2025-10-29T17:12:41.622346004Z",
        "Path": "/usr/local/bin/wait-for-it.sh",
        "Args": [
            "db",
            "5432",
            "/opt/atlassian/confluence/bin/start-confluence.sh"
        ],
        "State": {
            "Status": "restarting",
            "Running": true,
            "Paused": false,
            "Restarting": true,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 0,
            "ExitCode": 1,
            "Error": "",
            "StartedAt": "2025-10-29T17:13:07.497126945Z",
            "FinishedAt": "2025-10-29T17:13:08.704335986Z"
        },
        "Image": "sha256:5089351827ad15f9c6e5416a95aa244fa15999d7c20ad35dc38b2a0e182270b1",
        "ResolvConfPath": "/var/lib/docker/containers/cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1/hostname",
        "HostsPath": "/var/lib/docker/containers/cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1/hosts",
        "LogPath": "/var/lib/docker/containers/cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1/cb9c30ac86067a69545b9e054e2ff771b251b71610b6caa9d4f9b25bb2cc62d1-json.log",
        "Name": "/confluence",
        "RestartCount": 8,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "8090/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8090"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "unless-stopped",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": null,
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "volume",
                "Name": "e8e0b2a69174070da5ee47859c32eecb22764f5a99142bec44dd6ebad2763762",
                "Source": "/var/lib/docker/volumes/e8e0b2a69174070da5ee47859c32eecb22764f5a99142bec44dd6ebad2763762/_data",
                "Destination": "/var/atlassian/application-data/confluence",
                "Driver": "local",
                "Mode": "",
                "RW": true,
                "Propagation": ""
            }
        ],
        "Config": {
            "Hostname": "cb9c30ac8606",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "8090/tcp": {},
                "8091/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "ATL_DB_TYPE=postgres",
                "ATL_JDBC_URL=jdbc:postgresql://db:5432/confluence",
                "ATL_JDBC_USER=confluence_user",
                "ATL_JDBC_PASSWORD=confluence_pass",
                "PATH=/opt/java/openjdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "JAVA_HOME=/opt/java/openjdk",
                "LANG=en_US.UTF-8",
                "LANGUAGE=en_US:en",
                "LC_ALL=en_US.UTF-8",
                "JAVA_VERSION=jdk-11.0.21+9",
                "APP_NAME=confluence",
                "RUN_USER=confluence",
                "RUN_GROUP=confluence",
                "RUN_UID=2002",
                "RUN_GID=2002",
                "CONFLUENCE_HOME=/var/atlassian/application-data/confluence",
                "CONFLUENCE_INSTALL_DIR=/opt/atlassian/confluence",
                "CONFLUENCE_LOG_STDOUT=false",
                "CONFLUENCE_VERSION=8.5.3"
            ],
            "Cmd": null,
            "Image": "custom-confluence:latest",
            "Volumes": {
                "/var/atlassian/application-data/confluence": {}
            },
            "WorkingDir": "/var/atlassian/application-data/confluence",
            "Entrypoint": [
                "/usr/local/bin/wait-for-it.sh",
                "db",
                "5432",
                "/opt/atlassian/confluence/bin/start-confluence.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "e66059e717742c09b98825293f3a6541dbf7d9899377125e6c91f0047ae4c04a",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "db:service_healthy:false",
                "com.docker.compose.image": "sha256:5089351827ad15f9c6e5416a95aa244fa15999d7c20ad35dc38b2a0e182270b1",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool",
                "com.docker.compose.service": "confluence",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu",
                "maintainer": "dc-deployments@atlassian.com",
                "org.opencontainers.image.ref.name": "ubuntu",
                "org.opencontainers.image.version": "22.04",
                "securitytxt": "https://www.atlassian.com/.well-known/security.txt"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "",
            "SandboxKey": "",
            "Ports": {},
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "confluence",
                        "confluence"
                    ],
                    "MacAddress": "",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "d87de3a41c169d2d5678fa270062bfb90c2b6aa2841da7d068c62b7097c3beae",
                    "EndpointID": "",
                    "Gateway": "",
                    "IPAddress": "",
                    "IPPrefixLen": 0,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "confluence",
                        "cb9c30ac8606"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.oci.image.manifest.v1+json",
            "digest": "sha256:851b8a5e75e39ed684f4aa4ffdd09cdae977b6a9f952b9dba1a1a2c7f2e4db88",
            "size": 4680,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]