time="2025-10-29T18:09:53+01:00" level=warning msg="/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 722B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 587B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/atlassian/confluence-server:8.5.3
#3 DONE 0.5s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/4] FROM docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b
#5 resolve docker.io/atlassian/confluence-server:8.5.3@sha256:12141c1cb9f5d295a5d15860db3e2e0075520040f9c064cb5f7986d98c6ae81b 0.0s done
#5 CACHED

#6 [internal] load build context
#6 transferring context: 245B done
#6 DONE 0.0s

#7 [2/4] RUN apt-get update &&     apt-get install -y --no-install-recommends         ca-certificates         wget         unzip         netcat-openbsd &&     rm -rf /var/lib/apt/lists/*
#7 0.356 Get:1 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
#7 0.393 Get:2 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]
#7 0.596 Get:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
#7 0.620 Get:4 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [3,479 kB]
#7 0.644 Get:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
#7 0.712 Get:6 http://archive.ubuntu.com/ubuntu jammy/restricted amd64 Packages [164 kB]
#7 0.782 Get:7 http://archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [17.5 MB]
#7 0.956 Get:8 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [5,878 kB]
#7 1.505 Get:9 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [1,288 kB]
#7 1.629 Get:10 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [60.9 kB]
#7 2.063 Get:11 http://archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [266 kB]
#7 2.072 Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 Packages [1,792 kB]
#7 2.121 Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1,594 kB]
#7 2.183 Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [6,070 kB]
#7 2.408 Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [69.2 kB]
#7 2.410 Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [3,807 kB]
#7 2.559 Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [35.2 kB]
#7 2.560 Get:18 http://archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [83.9 kB]
#7 3.420 Fetched 42.7 MB in 3s (13.6 MB/s)
#7 3.420 Reading package lists...
#7 4.351 Reading package lists...
#7 5.250 Building dependency tree...
#7 5.445 Reading state information...
#7 5.646 The following additional packages will be installed:
#7 5.648   libbsd0 libmd0
#7 5.650 Suggested packages:
#7 5.650   zip
#7 5.688 The following NEW packages will be installed:
#7 5.691   libbsd0 libmd0 netcat-openbsd unzip
#7 5.692 The following packages will be upgraded:
#7 5.694   ca-certificates wget
#7 5.792 2 upgraded, 4 newly installed, 0 to remove and 62 not upgraded.
#7 5.792 Need to get 782 kB of archives.
#7 5.792 After this operation, 658 kB of additional disk space will be used.
#7 5.792 Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 ca-certificates all 20240203~22.04.1 [162 kB]
#7 5.999 Get:2 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmd0 amd64 1.0.4-1build1 [23.0 kB]
#7 6.003 Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 libbsd0 amd64 0.11.5-1 [44.8 kB]
#7 6.012 Get:4 http://archive.ubuntu.com/ubuntu jammy/main amd64 netcat-openbsd amd64 1.218-4ubuntu1 [39.4 kB]
#7 6.020 Get:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 wget amd64 1.21.2-2ubuntu1.1 [339 kB]
#7 6.102 Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 unzip amd64 6.0-26ubuntu3.2 [175 kB]
#7 6.269 debconf: delaying package configuration, since apt-utils is not installed
#7 6.303 Fetched 782 kB in 0s (1,831 kB/s)
#7 6.335 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 9632 files and directories currently installed.)
#7 6.343 Preparing to unpack .../0-ca-certificates_20240203~22.04.1_all.deb ...
#7 6.354 Unpacking ca-certificates (20240203~22.04.1) over (20230311ubuntu0.22.04.1) ...
#7 6.740 Selecting previously unselected package libmd0:amd64.
#7 6.741 Preparing to unpack .../1-libmd0_1.0.4-1build1_amd64.deb ...
#7 6.749 Unpacking libmd0:amd64 (1.0.4-1build1) ...
#7 6.781 Selecting previously unselected package libbsd0:amd64.
#7 6.782 Preparing to unpack .../2-libbsd0_0.11.5-1_amd64.deb ...
#7 6.787 Unpacking libbsd0:amd64 (0.11.5-1) ...
#7 6.819 Selecting previously unselected package netcat-openbsd.
#7 6.820 Preparing to unpack .../3-netcat-openbsd_1.218-4ubuntu1_amd64.deb ...
#7 6.826 Unpacking netcat-openbsd (1.218-4ubuntu1) ...
#7 6.858 Preparing to unpack .../4-wget_1.21.2-2ubuntu1.1_amd64.deb ...
#7 6.869 Unpacking wget (1.21.2-2ubuntu1.1) over (1.21.2-2ubuntu1) ...
#7 6.915 Selecting previously unselected package unzip.
#7 6.916 Preparing to unpack .../5-unzip_6.0-26ubuntu3.2_amd64.deb ...
#7 6.921 Unpacking unzip (6.0-26ubuntu3.2) ...
#7 6.955 Setting up wget (1.21.2-2ubuntu1.1) ...
#7 6.970 Setting up unzip (6.0-26ubuntu3.2) ...
#7 6.982 Setting up ca-certificates (20240203~22.04.1) ...
#7 7.063 debconf: unable to initialize frontend: Dialog
#7 7.063 debconf: (TERM is not set, so the dialog frontend is not usable.)
#7 7.063 debconf: falling back to frontend: Readline
#7 7.063 debconf: unable to initialize frontend: Readline
#7 7.063 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.34.0 /usr/local/share/perl/5.34.0 /usr/lib/x86_64-linux-gnu/perl5/5.34 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.34 /usr/share/perl/5.34 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#7 7.063 debconf: falling back to frontend: Teletype
#7 8.439 Updating certificates in /etc/ssl/certs...
#7 9.224 rehash: warning: skipping ca-certificates.crt,it does not contain exactly one certificate or CRL
#7 9.274 14 added, 5 removed; done.
#7 9.302 Setting up libmd0:amd64 (1.0.4-1build1) ...
#7 9.312 Setting up libbsd0:amd64 (0.11.5-1) ...
#7 9.322 Setting up netcat-openbsd (1.218-4ubuntu1) ...
#7 9.335 update-alternatives: using /bin/nc.openbsd to provide /bin/nc (nc) in auto mode
#7 9.335 update-alternatives: warning: skip creation of /usr/share/man/man1/nc.1.gz because associated file /usr/share/man/man1/nc_openbsd.1.gz (of link group nc) doesn't exist
#7 9.335 update-alternatives: warning: skip creation of /usr/share/man/man1/netcat.1.gz because associated file /usr/share/man/man1/nc_openbsd.1.gz (of link group nc) doesn't exist
#7 9.342 Processing triggers for libc-bin (2.35-0ubuntu3.6) ...
#7 9.465 Processing triggers for ca-certificates (20240203~22.04.1) ...
#7 9.472 Updating certificates in /etc/ssl/certs...
#7 9.941 0 added, 0 removed; done.
#7 9.941 Running hooks in /etc/ca-certificates/update.d...
#7 9.943 done.
#7 DONE 10.0s

#8 [3/4] COPY wait-for-it.sh /usr/local/bin/wait-for-it.sh
#8 DONE 0.0s

#9 [4/4] RUN chmod +x /usr/local/bin/wait-for-it.sh
#9 DONE 0.3s

#10 exporting to image
#10 exporting layers
#10 exporting layers 0.2s done
#10 exporting manifest sha256:f64dc3c1f5b954f7201f0054382535a52e9c3955f5fdafd5fa6bf987973ffe6e 0.0s done
#10 exporting config sha256:8709e831f317eb72f39ebc3507b78eebb07102a53ec34f24ab8999397bfe99a4 0.0s done
#10 exporting attestation manifest sha256:5089add894b86aa13f806c38dc8af20f62a8ae4d793d4b53ec050d6d620c962a 0.0s done
#10 exporting manifest list sha256:65e6ad2477a4480630d00e8672366be95f96ec4eba6d84205943b6051042a899 0.0s done
#10 naming to docker.io/library/custom-confluence:latest done
#10 unpacking to docker.io/library/custom-confluence:latest 0.1s done
#10 DONE 0.4s

#11 resolving provenance for metadata file
#11 DONE 0.0s
 custom-confluence:latest  Built
 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_db_data  Creating
 Volume custom_no_tool_db_data  Created
 Container postgres  Creating
 Container postgres  Created
 Container confluence  Creating
 Container confluence  Created
 Container nginx  Creating
 Container nginx  Created
 Container postgres  Starting
 Container postgres  Started
 Container postgres  Waiting
 Container postgres  Healthy
 Container confluence  Starting
 Container confluence  Started
 Container nginx  Starting
 Container nginx  Started


sudo docker logs 2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786 --details
STDOUT: 
STDERR:  /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory
 /usr/local/bin/wait-for-it.sh: line 11: /entrypoint.sh: No such file or directory




sudo docker inspect 2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786[
    {
        "Id": "2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786",
        "Created": "2025-10-29T17:10:05.448790764Z",
        "Path": "/usr/local/bin/wait-for-it.sh",
        "Args": [
            "db",
            "5432",
            "--",
            "/entrypoint.sh"
        ],
        "State": {
            "Status": "restarting",
            "Running": true,
            "Paused": false,
            "Restarting": true,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 0,
            "ExitCode": 127,
            "Error": "",
            "StartedAt": "2025-10-29T17:10:39.166148104Z",
            "FinishedAt": "2025-10-29T17:10:39.537914928Z"
        },
        "Image": "sha256:65e6ad2477a4480630d00e8672366be95f96ec4eba6d84205943b6051042a899",
        "ResolvConfPath": "/var/lib/docker/containers/2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786/hostname",
        "HostsPath": "/var/lib/docker/containers/2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786/hosts",
        "LogPath": "/var/lib/docker/containers/2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786/2cdfc871e9f9e9d948bbe76236dd4b490c4562c2cce3c3610b5089395fda5786-json.log",
        "Name": "/confluence",
        "RestartCount": 9,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "8090/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8090"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "unless-stopped",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": null,
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "volume",
                "Name": "b5ea565251cf95192eb4d9fa17278d14a44f221f9fda9b3046bef63bf040ff2b",
                "Source": "/var/lib/docker/volumes/b5ea565251cf95192eb4d9fa17278d14a44f221f9fda9b3046bef63bf040ff2b/_data",
                "Destination": "/var/atlassian/application-data/confluence",
                "Driver": "local",
                "Mode": "",
                "RW": true,
                "Propagation": ""
            }
        ],
        "Config": {
            "Hostname": "2cdfc871e9f9",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "8090/tcp": {},
                "8091/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "ATL_JDBC_URL=jdbc:postgresql://db:5432/confluence",
                "ATL_JDBC_USER=confluence_user",
                "ATL_JDBC_PASSWORD=confluence_pass",
                "ATL_DB_TYPE=postgres",
                "PATH=/opt/java/openjdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "JAVA_HOME=/opt/java/openjdk",
                "LANG=en_US.UTF-8",
                "LANGUAGE=en_US:en",
                "LC_ALL=en_US.UTF-8",
                "JAVA_VERSION=jdk-11.0.21+9",
                "APP_NAME=confluence",
                "RUN_USER=confluence",
                "RUN_GROUP=confluence",
                "RUN_UID=2002",
                "RUN_GID=2002",
                "CONFLUENCE_HOME=/var/atlassian/application-data/confluence",
                "CONFLUENCE_INSTALL_DIR=/opt/atlassian/confluence",
                "CONFLUENCE_LOG_STDOUT=false",
                "CONFLUENCE_VERSION=8.5.3"
            ],
            "Cmd": null,
            "Image": "custom-confluence:latest",
            "Volumes": {
                "/var/atlassian/application-data/confluence": {}
            },
            "WorkingDir": "/var/atlassian/application-data/confluence",
            "Entrypoint": [
                "/usr/local/bin/wait-for-it.sh",
                "db",
                "5432",
                "--",
                "/entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "6112c18fac8448073f344be4232674bbe66624e8533c597dea46b19c933c06e9",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "db:service_healthy:false",
                "com.docker.compose.image": "sha256:65e6ad2477a4480630d00e8672366be95f96ec4eba6d84205943b6051042a899",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2023-22527/custom_no_tool",
                "com.docker.compose.service": "confluence",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu",
                "maintainer": "dc-deployments@atlassian.com",
                "org.opencontainers.image.ref.name": "ubuntu",
                "org.opencontainers.image.version": "22.04",
                "securitytxt": "https://www.atlassian.com/.well-known/security.txt"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "",
            "SandboxKey": "",
            "Ports": {},
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "confluence",
                        "confluence"
                    ],
                    "MacAddress": "",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "35f24918f7358782a462275ffcfc1efda95bad3a576d134df3b05c71e302b398",
                    "EndpointID": "",
                    "Gateway": "",
                    "IPAddress": "",
                    "IPPrefixLen": 0,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "confluence",
                        "2cdfc871e9f9"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.oci.image.manifest.v1+json",
            "digest": "sha256:f64dc3c1f5b954f7201f0054382535a52e9c3955f5fdafd5fa6bf987973ffe6e",
            "size": 4492,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]