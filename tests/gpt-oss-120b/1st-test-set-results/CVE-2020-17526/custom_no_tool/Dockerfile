FROM python:3.10-slim
WORKDIR /app

# Install only the required packages without extra recommendations and clean the apt cache
RUN apt-get update && \
    apt-get install -y --no-install-recommends ca-certificates curl && \
    rm -rf /var/lib/apt/lists/*

# Upgrade pip to the latest version and install the Docker Python SDK
RUN python -m pip install --upgrade pip && \
    pip install --no-cache-dir docker

# Copy the exploit script into the image
COPY ./exploit.py /app/

ENTRYPOINT ["python", "exploit.py"]