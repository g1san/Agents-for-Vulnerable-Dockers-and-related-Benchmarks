{
    "files": [
        {
            "location": "./../../dockers/CVE-2017-7525/custom_no_tool/docker-compose.yml",
            "content": "services:\n  web:\n    build: ./app\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      - db\n    environment:\n      DB_HOST: db\n      DB_USER: victim\n      DB_PASSWORD: secret\n      DB_NAME: vuln_db\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: vuln_db\n      MYSQL_USER: victim\n      MYSQL_PASSWORD: secret\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2017-7525/custom_no_tool/app/Dockerfile",
            "content": "## ---------- Multi\u2011stage build ---------- ##\n# Stage 1: Build the Java application using Maven\nFROM maven:3.6.3-openjdk-8 AS build\nWORKDIR /app\n# Copy Maven descriptor and source code\nCOPY pom.xml .\nCOPY src ./src\n# Resolve dependencies and package the application\nRUN mvn clean package -DskipTests\n\n# Stage 2: Runtime image with only OpenJDK 8\nFROM openjdk:8-jre-slim\nWORKDIR /app\n# Copy the assembled jar from the build stage\nCOPY --from=build /app/target/vulnapp-1.0-SNAPSHOT-jar-with-dependencies.jar ./vulnapp.jar\n# Expose application port (default 8080 as used by the app)\nEXPOSE 8080\n# Run the application\nCMD [\"java\", \"-jar\", \"vulnapp.jar\"]"
        },
        {
            "location": "./../../dockers/CVE-2017-7525/custom_no_tool/app/pom.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.example</groupId>\n    <artifactId>vulnapp</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <properties>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n    </properties>\n    <dependencies>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-databind</artifactId>\n            <version>2.6.7</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-core</artifactId>\n            <version>2.6.7</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-annotations</artifactId>\n            <version>2.6.7</version>\n        </dependency>\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.1</version>\n                <configuration>\n                    <source>1.8</source>\n                    <target>1.8</target>\n                </configuration>\n            </plugin>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-assembly-plugin</artifactId>\n                <version>3.3.0</version>\n                <configuration>\n                    <descriptorRefs>\n                        <descriptorRef>jar-with-dependencies</descriptorRef>\n                    </descriptorRefs>\n                    <archive>\n                        <manifest>\n                            <mainClass>com.example.VulnApp</mainClass>\n                        </manifest>\n                    </archive>\n                </configuration>\n                <executions>\n                    <execution>\n                        <id>make-assembly</id>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>single</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>"
        },
        {
            "location": "./../../dockers/CVE-2017-7525/custom_no_tool/db/init.sql",
            "content": "-- Initialize the MySQL database for the vulnerable application\nCREATE DATABASE IF NOT EXISTS vuln_db;\nUSE vuln_db;\n\nCREATE TABLE IF NOT EXISTS users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    username VARCHAR(50) NOT NULL,\n    password_hash VARCHAR(255) NOT NULL,\n    role VARCHAR(20) NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\nINSERT INTO users (username, password_hash, role) VALUES\n('alice', SHA2('alicepwd', 256), 'user'),\n('bob',   SHA2('bobpwd', 256),   'admin');\n"
        }
    ],
    "directory_tree": "CVE-2017-7525"
}