 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_postgres-data  Creating
 Volume custom_no_tool_postgres-data  Created
 Volume custom_no_tool_redis-data  Creating
 Volume custom_no_tool_redis-data  Created
 Container postgres  Creating
 Container redis  Creating
 Container redis  Created
 Container postgres  Created
 Container gitlab  Creating
 Container gitlab  Created
 Container redis  Starting
 Container postgres  Starting
 Container redis  Started
 Container postgres  Started
 Container postgres  Waiting
 Container redis  Waiting
 Container postgres  Healthy
 Container redis  Healthy
 Container gitlab  Starting
 Container gitlab  Started


sudo docker logs 716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb --details
STDOUT:  Thank you for using GitLab Docker Image!
 Current version: gitlab-ce=13.10.2-ce.0
 
 Configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
 And restart this container to reload settings.
 To do it use docker exec:
 
   docker exec -it gitlab vim /etc/gitlab/gitlab.rb
   docker restart gitlab
 
 For a comprehensive list of configuration options please see the Omnibus GitLab readme
 https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
 
 If this container fails to start due to permission problems try to fix it by executing:
 
   docker exec -it gitlab update-permissions
   docker restart gitlab
 
 Cleaning stale PIDs & sockets
 Preparing services...
 Starting services...
 Configuring GitLab...
 Starting Chef Infra Client, version 15.14.0[0m
 resolving cookbooks for run list: ["gitlab"][0m
 Synchronizing Cookbooks:[0m
   - gitlab (0.0.1)[0m
   - package (0.1.0)[0m
   - logrotate (0.1.0)[0m
   - postgresql (0.1.0)[0m
   - redis (0.1.0)[0m
   - monitoring (0.1.0)[0m
   - registry (0.1.0)[0m
   - mattermost (0.1.0)[0m
   - consul (0.1.0)[0m
   - gitaly (0.1.0)[0m
   - praefect (0.1.0)[0m
   - gitlab-kas (0.1.0)[0m
   - gitlab-pages (0.1.0)[0m
   - letsencrypt (0.1.0)[0m
   - nginx (0.1.0)[0m
   - runit (5.1.3)[0m
   - acme (4.1.1)[0m
   - crond (0.1.0)[0m
 Installing Cookbook Gems:[0m
 Compiling Cookbooks...[0m
 Recipe: gitlab::default[0m
   * directory[/etc/gitlab] action create (up to date)
   Converging 279 resources[0m
   * directory[/etc/gitlab] action create (up to date)
   * directory[Create /var/opt/gitlab] action create (up to date)
   * directory[Create /var/log/gitlab] action create (up to date)
   * directory[/opt/gitlab/embedded/etc] action create
     [32m- create new directory /opt/gitlab/embedded/etc[0m
     [32m- change mode from '' to '0755'[0m
     [32m- change owner from '' to 'root'[0m
     [32m- change group from '' to 'root'[0m
 [0m  * template[/opt/gitlab/embedded/etc/gitconfig] action create
     [32m- create new file /opt/gitlab/embedded/etc/gitconfig[0m
     [32m- update content in file /opt/gitlab/embedded/etc/gitconfig from none to 5a725a[0m
     [37m--- /opt/gitlab/embedded/etc/gitconfig	2025-10-30 10:57:03.192244317 +0000[0m
     [37m+++ /opt/gitlab/embedded/etc/.chef-gitconfig20251030-28-1l9cwlh	2025-10-30 10:57:03.192244317 +0000[0m
     [37m@@ -1,16 +1,32 @@[0m
     [37m+[pack][0m
     [37m+  threads = 1[0m
     [37m+[receive][0m
     [37m+  fsckObjects = true[0m
     [37m+advertisePushOptions = true[0m
     [37m+[repack][0m
     [37m+  writeBitmaps = true[0m
     [37m+[transfer][0m
     [37m+  hideRefs=^refs/tmp/[0m
     [37m+hideRefs=^refs/keep-around/[0m
     [37m+hideRefs=^refs/remotes/[0m
     [37m+[core][0m
     [37m+  alternateRefsCommand="exit 0 #"[0m
     [37m+fsyncObjectFiles = true[0m
     [37m+[fetch][0m
     [37m+  writeCommitGraph = true[0m
     [32m- change mode from '' to '0755'[0m
 [0mRecipe: gitlab::web-server[0m
   * account[Webserver user and group] action create (up to date)
 Recipe: gitlab::users[0m
   * directory[/var/opt/gitlab] action create (up to date)
   * account[GitLab user and group] action create (up to date)
   * template[/var/opt/gitlab/.gitconfig] action create (up to date)
   * directory[/var/opt/gitlab/.bundle] action create (up to date)
 Recipe: gitlab::gitlab-shell[0m
   * storage_directory[/var/opt/gitlab/.ssh] action create
     * ruby_block[directory resource: /var/opt/gitlab/.ssh] action run (skipped due to not_if)
      (up to date)
   * directory[/var/log/gitlab/gitlab-shell/] action create (up to date)
   * directory[/var/opt/gitlab/gitlab-shell] action create (up to date)
   * templatesymlink[Create a config.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-shell/config.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-shell/config.yml to /var/opt/gitlab/gitlab-shell/config.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-shell/config.yml to /var/opt/gitlab/gitlab-shell/config.yml[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-shell/.gitlab_shell_secret] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-shell/.gitlab_shell_secret to /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret[0m
 [0m  * file[/var/opt/gitlab/.ssh/authorized_keys] action create_if_missing (up to date)
 Recipe: gitlab::gitlab-rails[0m
   * storage_directory[/var/opt/gitlab/git-data] action create
     * ruby_block[directory resource: /var/opt/gitlab/git-data] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/git-data/repositories] action create
     * ruby_block[directory resource: /var/opt/gitlab/git-data/repositories] action run (skipped due to not_if)
      (up to date)
 Recipe: gitlab::rails_pages_shared_path[0m
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/pages] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/pages] action run (skipped due to not_if)
      (up to date)
 Recipe: gitlab::gitlab-rails[0m
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/artifacts] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/artifacts] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/external-diffs] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/external-diffs] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/lfs-objects] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/lfs-objects] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/packages] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/packages] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/dependency_proxy] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/dependency_proxy] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/terraform_state] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/terraform_state] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/encrypted_settings] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/encrypted_settings] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/uploads] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/uploads] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-ci/builds] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-ci/builds] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/cache] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/cache] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/tmp] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/tmp] action run (skipped due to not_if)
      (up to date)
   * storage_directory[/opt/gitlab/embedded/service/gitlab-rails/public] action create (skipped due to only_if)
   * directory[create /var/opt/gitlab/gitlab-rails/etc] action create (up to date)
   * directory[create /opt/gitlab/etc/gitlab-rails] action create
     [32m- create new directory /opt/gitlab/etc/gitlab-rails[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /var/opt/gitlab/gitlab-rails/working] action create (up to date)
   * directory[create /var/opt/gitlab/gitlab-rails/tmp] action create (up to date)
   * directory[create /var/opt/gitlab/gitlab-rails/upgrade-status] action create (up to date)
   * directory[create /var/log/gitlab/gitlab-rails] action create (up to date)
   * storage_directory[/var/opt/gitlab/backups] action create
     * ruby_block[directory resource: /var/opt/gitlab/backups] action run (skipped due to not_if)
      (up to date)
   * directory[/var/opt/gitlab/gitlab-rails] action create (up to date)
   * directory[/var/opt/gitlab/gitlab-ci] action create (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/gitlab-registry.key] action create (skipped due to only_if)
   * template[/opt/gitlab/etc/gitlab-rails/gitlab-rails-rc] action create
     [32m- create new file /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc[0m
     [32m- update content in file /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc from none to 7b16c8[0m
     [37m--- /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc	2025-10-30 10:57:03.894244317 +0000[0m
     [37m+++ /opt/gitlab/etc/gitlab-rails/.chef-gitlab-rails-rc20251030-28-1f6e4jg	2025-10-30 10:57:03.894244317 +0000[0m
     [37m@@ -1,5 +1,10 @@[0m
     [37m+gitlab_user='git'[0m
     [37m+gitlab_group='git'[0m
     [37m+registry_dir=''[0m
     [37m+registry_user='registry'[0m
     [37m+registry_group='registry'[0m
 [0m  * file[/opt/gitlab/embedded/service/gitlab-rails/.secret] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/secret] action delete (up to date)
   * templatesymlink[Create a database.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/database.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/database.yml to /var/opt/gitlab/gitlab-rails/etc/database.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/database.yml to /var/opt/gitlab/gitlab-rails/etc/database.yml[0m
 [0m  
 [0m  * templatesymlink[Create a secrets.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/secrets.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml to /var/opt/gitlab/gitlab-rails/etc/secrets.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml to /var/opt/gitlab/gitlab-rails/etc/secrets.yml[0m
 [0m  
 [0m  * templatesymlink[Create a resque.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/resque.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/resque.yml to /var/opt/gitlab/gitlab-rails/etc/resque.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/resque.yml to /var/opt/gitlab/gitlab-rails/etc/resque.yml[0m
 [0m  
 [0m  * templatesymlink[Create a cable.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/cable.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/cable.yml to /var/opt/gitlab/gitlab-rails/etc/cable.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/cable.yml to /var/opt/gitlab/gitlab-rails/etc/cable.yml[0m
 [0m  
 [0m  * templatesymlink[Create a redis.cache.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.cache.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.cache.yml] action delete (up to date)
   * templatesymlink[Create a redis.queues.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.queues.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.queues.yml] action delete (up to date)
   * templatesymlink[Create a redis.shared_state.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.shared_state.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.shared_state.yml] action delete (up to date)
   * templatesymlink[Create a smtp_settings.rb and create a symlink to Rails root] action delete
     * file[/var/opt/gitlab/gitlab-rails/etc/smtp_settings.rb] action delete (up to date)
     * link[/opt/gitlab/embedded/service/gitlab-rails/config/initializers/smtp_settings.rb] action delete (up to date)
      (up to date)
   * templatesymlink[Create a gitlab.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab.yml] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml to /var/opt/gitlab/gitlab-rails/etc/gitlab.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml to /var/opt/gitlab/gitlab-rails/etc/gitlab.yml[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_workhorse_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_shell_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_pages_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_pages_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_pages_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_kas_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret] action create (up to date)
     * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret] action create
       [32m- unlink existing symlink to file at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret[0m
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/config/initializers/relative_url.rb] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/relative_url.rb] action delete (up to date)
   * env_dir[/opt/gitlab/etc/gitlab-rails/env] action create
     * directory[/opt/gitlab/etc/gitlab-rails/env] action create
       [32m- create new directory /opt/gitlab/etc/gitlab-rails/env[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/HOME] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/HOME[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/HOME from none to 205bb9[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/RAILS_ENV] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/RAILS_ENV[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/RAILS_ENV from none to ab8e18[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD from none to f79114[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS from none to dd80d7[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE from none to 28d586[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/PATH] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/PATH[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/PATH from none to d5dc07[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/ICU_DATA] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/ICU_DATA[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/ICU_DATA from none to a04260[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/PYTHONPATH] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/PYTHONPATH[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/PYTHONPATH from none to 83b536[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME from none to 75081b[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/TZ] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/TZ[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/TZ from none to 983a95[0m
       [32m- suppressed sensitive resource[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/tmp] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/tmp to /var/opt/gitlab/gitlab-rails/tmp[0m
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/public/uploads] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/public/uploads to /var/opt/gitlab/gitlab-rails/uploads[0m
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/log] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/log to /var/log/gitlab/gitlab-rails[0m
 [0m  * link[/var/log/gitlab/gitlab-rails/sidekiq.log] action delete (skipped due to only_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/db/structure.sql] action create
     [32m- change owner from 'root' to 'git'[0m
 [0m  * remote_file[/var/opt/gitlab/gitlab-rails/VERSION] action create (up to date)
   * remote_file[/var/opt/gitlab/gitlab-rails/REVISION] action create (up to date)
   * version_file[Create version file for Rails] action create
     * file[/var/opt/gitlab/gitlab-rails/RUBY_VERSION] action create (up to date)
      (up to date)
   * execute[clear the gitlab-rails cache] action nothing (skipped due to action :nothing)
   * file[/var/opt/gitlab/gitlab-rails/config.ru] action delete (up to date)
 Recipe: gitlab::selinux[0m
   * bash[Set proper security context on ssh files for selinux] action nothing (skipped due to action :nothing)
 Recipe: gitlab::add_trusted_certs[0m
   * directory[/etc/gitlab/trusted-certs] action create (up to date)
   * directory[/opt/gitlab/embedded/ssl/certs] action create (up to date)
   * file[/opt/gitlab/embedded/ssl/certs/README] action create
     [32m- create new file /opt/gitlab/embedded/ssl/certs/README[0m
     [32m- update content in file /opt/gitlab/embedded/ssl/certs/README from none to 623059[0m
     [37m--- /opt/gitlab/embedded/ssl/certs/README	2025-10-30 10:57:04.214644317 +0000[0m
     [37m+++ /opt/gitlab/embedded/ssl/certs/.chef-README20251030-28-3zo2hg	2025-10-30 10:57:04.214644317 +0000[0m
     [37m@@ -1,3 +1,6 @@[0m
     [37m+This directory is managed by omnibus-gitlab.[0m
     [37m+ Any file placed in this directory will be ignored[0m
     [37m+. Place certificates in /etc/gitlab/trusted-certs.[0m
     [32m- change mode from '' to '0644'[0m
 [0m  * ruby_block[Move existing certs and link to /opt/gitlab/embedded/ssl/certs] action run
 
   * Moving existing certificates found in /opt/gitlab/embedded/ssl/certs
 
   * Symlinking existing certificates found in /etc/gitlab/trusted-certs
 
     [32m- execute the ruby block Move existing certs and link to /opt/gitlab/embedded/ssl/certs[0m
 [0mRecipe: gitlab::default[0m
   * service[create a temporary unicorn service] action nothing (skipped due to action :nothing)
   * service[create a temporary puma service] action nothing (skipped due to action :nothing)
   * service[create a temporary actioncable service] action nothing (skipped due to action :nothing)
   * service[create a temporary sidekiq service] action nothing (skipped due to action :nothing)
   * service[create a temporary mailroom service] action nothing (skipped due to action :nothing)
 Recipe: package::sysctl[0m
   * execute[reload all sysctl conf] action nothing (skipped due to action :nothing)
 Recipe: postgresql::bin[0m
   * ruby_block[check_postgresql_version] action run (skipped due to not_if)
   * ruby_block[check_postgresql_version_is_deprecated] action run (skipped due to not_if)
   * ruby_block[Link postgresql bin files to the correct version] action run
     [32m- execute the ruby block Link postgresql bin files to the correct version[0m
 [0mRecipe: redis::enable[0m
   * redis_service[redis] action create
     * account[user and group for redis] action create (up to date)
     * group[Socket group] action create (up to date)
     * directory[/var/opt/gitlab/redis] action create
       [32m- create new directory /var/opt/gitlab/redis[0m
       [32m- change mode from '' to '0750'[0m
       [32m- change owner from '' to 'gitlab-redis'[0m
       [32m- change group from '' to 'git'[0m
 [0m    * directory[/var/log/gitlab/redis] action create
       [32m- create new directory /var/log/gitlab/redis[0m
       [32m- change mode from '' to '0700'[0m
       [32m- change owner from '' to 'gitlab-redis'[0m
 [0m    * template[/var/opt/gitlab/redis/redis.conf] action create
       [32m- create new file /var/opt/gitlab/redis/redis.conf[0m
       [32m- update content in file /var/opt/gitlab/redis/redis.conf from none to d126ed[0m
       [37m--- /var/opt/gitlab/redis/redis.conf	2025-10-30 10:57:04.279444317 +0000[0m
       [37m+++ /var/opt/gitlab/redis/.chef-redis20251030-28-1ewfbzr.conf	2025-10-30 10:57:04.279444317 +0000[0m
       [37m@@ -1,1159 +1,2318 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m+# Redis configuration file example.[0m
       [37m+#[0m
       [37m+# Note that in order to read the configuration file, Redis must be[0m
       [37m+# started with the file path as first argument:[0m
       [37m+#[0m
       [37m+# ./redis-server /path/to/redis.conf[0m
       [37m+[0m
       [37m+# Note on units: when memory size is needed, it is possible to specify[0m
       [37m+# it in the usual form of 1k 5GB 4M and so forth:[0m
       [37m+#[0m
       [37m+# 1k => 1000 bytes[0m
       [37m+# 1kb => 1024 bytes[0m
       [37m+# 1m => 1000000 bytes[0m
       [37m+# 1mb => 1024*1024 bytes[0m
       [37m+# 1g => 1000000000 bytes[0m
       [37m+# 1gb => 1024*1024*1024 bytes[0m
       [37m+#[0m
       [37m+# units are case insensitive so 1GB 1Gb 1gB are all the same.[0m
       [37m+[0m
       [37m+################################## INCLUDES ###################################[0m
       [37m+[0m
       [37m+# Include one or more other config files here.  This is useful if you[0m
       [37m+# have a standard template that goes to all Redis servers but also need[0m
       [37m+# to customize a few per-server settings.  Include files can include[0m
       [37m+# other files, so use this wisely.[0m
       [37m+#[0m
       [37m+# Notice option "include" won't be rewritten by command "CONFIG REWRITE"[0m
       [37m+# from admin or Redis Sentinel. Since Redis always uses the last processed[0m
       [37m+# line as value of a configuration directive, you'd better put includes[0m
       [37m+# at the beginning of this file to avoid overwriting config change at runtime.[0m
       [37m+#[0m
       [37m+# If instead you are interested in using includes to override configuration[0m
       [37m+# options, it is better to use include as the last line.[0m
       [37m+#[0m
       [37m+# include /path/to/local.conf[0m
       [37m+# include /path/to/other.conf[0m
       [37m+[0m
       [37m+################################## NETWORK #####################################[0m
       [37m+[0m
       [37m+# By default, if no "bind" configuration directive is specified, Redis listens[0m
       [37m+# for connections from all the network interfaces available on the server.[0m
       [37m+# It is possible to listen to just one or multiple selected interfaces using[0m
       [37m+# the "bind" configuration directive, followed by one or more IP addresses.[0m
       [37m+#[0m
       [37m+# Examples:[0m
       [37m+#[0m
       [37m+# bind 192.168.1.100 10.0.0.1[0m
       [37m+# bind 127.0.0.1 ::1[0m
       [37m+#[0m
       [37m+# ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the[0m
       [37m+# internet, binding to all the interfaces is dangerous and will expose the[0m
       [37m+# instance to everybody on the internet. So by default we uncomment the[0m
       [37m+# following bind directive, that will force Redis to listen only into[0m
       [37m+# the IPv4 lookback interface address (this means Redis will be able to[0m
       [37m+# accept connections only from clients running into the same computer it[0m
       [37m+# is running).[0m
       [37m+#[0m
       [37m+# IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES[0m
       [37m+# JUST COMMENT THE FOLLOWING LINE.[0m
       [37m+# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
       [37m+bind 127.0.0.1[0m
       [37m+[0m
       [37m+# Protected mode is a layer of security protection, in order to avoid that[0m
       [37m+# Redis instances left open on the internet are accessed and exploited.[0m
       [37m+#[0m
       [37m+# When protected mode is on and if:[0m
       [37m+#[0m
       [37m+# 1) The server is not binding explicitly to a set of addresses using the[0m
       [37m+#    "bind" directive.[0m
       [37m+# 2) No password is configured.[0m
       [37m+#[0m
       [37m+# The server only accepts connections from clients connecting from the[0m
       [37m+# IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain[0m
       [37m+# sockets.[0m
       [37m+#[0m
       [37m+# By default protected mode is enabled. You should disable it only if[0m
       [37m+# you are sure you want clients from other hosts to connect to Redis[0m
       [37m+# even if no authentication is configured, nor a specific set of interfaces[0m
       [37m+# are explicitly listed using the "bind" directive.[0m
       [37m+# protected-mode yes[0m
       [37m+[0m
       [37m+# Accept connections on the specified port, default is 6379 (IANA #815344).[0m
       [37m+# If port 0 is specified Redis will not listen on a TCP socket.[0m
       [37m+port 0[0m
       [37m+[0m
       [37m+# TCP listen() backlog.[0m
       [37m+#[0m
       [37m+# In high requests-per-second environments you need an high backlog in order[0m
       [37m+# to avoid slow clients connections issues. Note that the Linux kernel[0m
       [37m+# will silently truncate it to the value of /proc/sys/net/core/somaxconn so[0m
       [37m+# make sure to raise both the value of somaxconn and tcp_max_syn_backlog[0m
       [37m+# in order to get the desired effect.[0m
       [37m+tcp-backlog 511[0m
       [37m+[0m
       [37m+# Unix socket.[0m
       [37m+#[0m
       [37m+# Specify the path for the Unix socket that will be used to listen for[0m
       [37m+# incoming connections. There is no default, so Redis will not listen[0m
       [37m+# on a unix socket when not specified.[0m
       [37m+#[0m
       [37m+unixsocket /var/opt/gitlab/redis/redis.socket[0m
       [37m+unixsocketperm 777[0m
       [37m+[0m
       [37m+# Close the connection after a client is idle for N seconds (0 to disable)[0m
       [37m+timeout 60[0m
       [37m+[0m
       [37m+# TCP keepalive.[0m
       [37m+#[0m
       [37m+# If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence[0m
       [37m+# of communication. This is useful for two reasons:[0m
       [37m+#[0m
       [37m+# 1) Detect dead peers.[0m
       [37m+# 2) Take the connection alive from the point of view of network[0m
       [37m+#    equipment in the middle.[0m
       [37m+#[0m
       [37m+# On Linux, the specified value (in seconds) is the period used to send ACKs.[0m
       [37m+# Note that to close the connection the double of the time is needed.[0m
       [37m+# On other kernels the period depends on the kernel configuration.[0m
       [37m+#[0m
       [37m+# A reasonable value for this option is 300 seconds, which is the new[0m
       [37m+# Redis default starting with Redis 3.2.1.[0m
       [37m+tcp-keepalive 300[0m
       [37m+[0m
       [37m+################################# GENERAL #####################################[0m
       [37m+[0m
       [37m+# By default Redis does not run as a daemon. Use 'yes' if you need it.[0m
       [37m+# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.[0m
       [37m+daemonize no[0m
       [37m+[0m
       [37m+# If you run Redis from upstart or systemd, Redis can interact with your[0m
       [37m+# supervision tree. Options:[0m
       [37m+#   supervised no      - no supervision interaction[0m
       [37m+#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode[0m
       [37m+#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET[0m
       [37m+#   supervised auto    - detect upstart or systemd method based on[0m
       [37m+#                        UPSTART_JOB or NOTIFY_SOCKET environment variables[0m
       [37m+# Note: these supervision methods only signal "process is ready."[0m
       [37m+#       They do not enable continuous liveness pings back to your supervisor.[0m
       [37m+# supervised no[0m
       [37m+[0m
       [37m+# If a pid file is specified, Redis writes it where specified at startup[0m
       [37m+# and removes it at exit.[0m
       [37m+#[0m
       [37m+# When the server runs non daemonized, no pid file is created if none is[0m
       [37m+# specified in the configuration. When the server is daemonized, the pid file[0m
       [37m+# is used even if not specified, defaulting to "/var/run/redis.pid".[0m
       [37m+#[0m
       [37m+# Creating a pid file is best effort: if Redis is not able to create it[0m
       [37m+# nothing bad happens, the server will start and run normally.[0m
       [37m+pidfile "/var/run/redis_0.pid"[0m
       [37m+[0m
       [37m+# Specify the server verbosity level.[0m
       [37m+# This can be one of:[0m
       [37m+# debug (a lot of information, useful for development/testing)[0m
       [37m+# verbose (many rarely useful info, but not a mess like the debug level)[0m
       [37m+# notice (moderately verbose, what you want in production probably)[0m
       [37m+# warning (only very important / critical messages are logged)[0m
       [37m+loglevel notice[0m
       [37m+[0m
       [37m+# Specify the log file name. Also the empty string can be used to force[0m
       [37m+# Redis to log on the standard output. Note that if you use standard[0m
       [37m+# output for logging but daemonize, logs will be sent to /dev/null[0m
       [37m+logfile ""[0m
       [37m+[0m
       [37m+# To enable logging to the system logger, just set 'syslog-enabled' to yes,[0m
       [37m+# and optionally update the other syslog parameters to suit your needs.[0m
       [37m+# syslog-enabled no[0m
       [37m+[0m
       [37m+# Specify the syslog identity.[0m
       [37m+# syslog-ident redis[0m
       [37m+[0m
       [37m+# Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.[0m
       [37m+# syslog-facility local0[0m
       [37m+[0m
       [37m+# Set the number of databases. The default database is DB 0, you can select[0m
       [37m+# a different one on a per-connection basis using SELECT <dbid> where[0m
       [37m+# dbid is a number between 0 and 'databases'-1[0m
       [37m+databases 16[0m
       [37m+[0m
       [37m+################################ SNAPSHOTTING  ################################[0m
       [37m+#[0m
       [37m+# Save the DB on disk:[0m
       [37m+#[0m
       [37m+#   save <seconds> <changes>[0m
       [37m+#[0m
       [37m+#   Will save the DB if both the given number of seconds and the given[0m
       [37m+#   number of write operations against the DB occurred.[0m
       [37m+#[0m
       [37m+#   In the example below the behaviour will be to save:[0m
       [37m+#   after 900 sec (15 min) if at least 1 key changed[0m
       [37m+#   after 300 sec (5 min) if at least 10 keys changed[0m
       [37m+#   after 60 sec if at least 10000 keys changed[0m
       [37m+#[0m
       [37m+#   Note: you can disable saving completely by commenting out all "save" lines.[0m
       [37m+#[0m
       [37m+#   It is also possible to remove all the previously configured save[0m
       [37m+#   points by adding a save directive with a single empty string argument[0m
       [37m+#   like in the following example:[0m
       [37m+#[0m
       [37m+#   save ""[0m
       [37m+[0m
       [37m+save 900 1[0m
       [37m+save 300 10[0m
       [37m+save 60 10000[0m
       [37m+[0m
       [37m+# By default Redis will stop accepting writes if RDB snapshots are enabled[0m
       [37m+# (at least one save point) and the latest background save failed.[0m
       [37m+# This will make the user aware (in a hard way) that data is not persisting[0m
       [37m+# on disk properly, otherwise chances are that no one will notice and some[0m
       [37m+# disaster will happen.[0m
       [37m+#[0m
       [37m+# If the background saving process will start working again Redis will[0m
       [37m+# automatically allow writes again.[0m
       [37m+#[0m
       [37m+# However if you have setup your proper monitoring of the Redis server[0m
       [37m+# and persistence, you may want to disable this feature so that Redis will[0m
       [37m+# continue to work as usual even if there are problems with disk,[0m
       [37m+# permissions, and so forth.[0m
       [37m+stop-writes-on-bgsave-error yes[0m
       [37m+[0m
       [37m+# Compress string objects using LZF when dump .rdb databases?[0m
       [37m+# For default that's set to 'yes' as it's almost always a win.[0m
       [37m+# If you want to save some CPU in the saving child set it to 'no' but[0m
       [37m+# the dataset will likely be bigger if you have compressible values or keys.[0m
       [37m+rdbcompression yes[0m
       [37m+[0m
       [37m+# Since version 5 of RDB a CRC64 checksum is placed at the end of the file.[0m
       [37m+# This makes the format more resistant to corruption but there is a performance[0m
       [37m+# hit to pay (around 10%) when saving and loading RDB files, so you can disable it[0m
       [37m+# for maximum performances.[0m
       [37m+#[0m
       [37m+# RDB files created with checksum disabled have a checksum of zero that will[0m
       [37m+# tell the loading code to skip the check.[0m
       [37m+rdbchecksum yes[0m
       [37m+[0m
       [37m+# The filename where to dump the DB[0m
       [37m+dbfilename "dump.rdb"[0m
       [37m+[0m
       [37m+# The working directory.[0m
       [37m+#[0m
       [37m+# The DB will be written inside this directory, with the filename specified[0m
       [37m+# above using the 'dbfilename' configuration directive.[0m
       [37m+#[0m
       [37m+# The Append Only File will also be created inside this directory.[0m
       [37m+#[0m
       [37m+# Note that you must specify a directory here, not a file name.[0m
       [37m+dir "/var/opt/gitlab/redis"[0m
       [37m+[0m
       [37m+################################# REPLICATION #################################[0m
       [37m+[0m
       [37m+# Master-Replica replication. Use replicaof to make a Redis instance a copy of[0m
       [37m+# another Redis server. A few things to understand ASAP about Redis replication.[0m
       [37m+#[0m
       [37m+# 1) Redis replication is asynchronous, but you can configure a master to[0m
       [37m+#    stop accepting writes if it appears to be not connected with at least[0m
       [37m+#    a given number of replicas.[0m
       [37m+# 2) Redis replicas are able to perform a partial resynchronization with the[0m
       [37m+#    master if the replication link is lost for a relatively small amount of[0m
       [37m+#    time. You may want to configure the replication backlog size (see the next[0m
       [37m+#    sections of this file) with a sensible value depending on your needs.[0m
       [37m+# 3) Replication is automatic and does not need user intervention. After a[0m
       [37m+#    network partition replicas automatically try to reconnect to masters[0m
       [37m+#    and resynchronize with them.[0m
       [37m+#[0m
       [37m+# replicaof <masterip> <masterport>[0m
       [37m+[0m
       [37m+[0m
       [37m+# If the master is password protected (using the "requirepass" configuration[0m
       [37m+# directive below) it is possible to tell the replica to authenticate before[0m
       [37m+# starting the replication synchronization process, otherwise the master will[0m
       [37m+# refuse the replica request.[0m
       [37m+#[0m
       [37m+# masterauth <master-password>[0m
       [37m+[0m
       [37m+[0m
       [37m+# When a replica loses its connection with the master, or when the replication[0m
       [37m+# is still in progress, the replica can act in two different ways:[0m
       [37m+#[0m
       [37m+# 1) if replica-serve-stale-data is set to 'yes' (the default) the replica will[0m
       [37m+#    still reply to client requests, possibly with out of date data, or the[0m
       [37m+#    data set may just be empty if this is the first synchronization.[0m
       [37m+#[0m
       [37m+# 2) if replica-serve-stale-data is set to 'no' the replica will reply with[0m
       [37m+#    an error "SYNC with master in progress" to all the kind of commands[0m
       [37m+#    but to INFO and REPLICAOF.[0m
       [37m+#[0m
       [37m+replica-serve-stale-data yes[0m
       [37m+[0m
       [37m+# You can configure a replica instance to accept writes or not. Writing against[0m
       [37m+# a replica instance may be useful to store some ephemeral data (because data[0m
       [37m+# written on a replica will be easily deleted after resync with the master) but[0m
       [37m+# may also cause problems if clients are writing to it because of a[0m
       [37m+# misconfiguration.[0m
       [37m+#[0m
       [37m+# Since Redis 2.6 by default replicas are read-only.[0m
       [37m+#[0m
       [37m+# Note: read only replicas are not designed to be exposed to untrusted clients[0m
       [37m+# on the internet. It's just a protection layer against misuse of the instance.[0m
       [37m+# Still a read only replica exports by default all the administrative commands[0m
       [37m+# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve[0m
       [37m+# security of read only replicas using 'rename-command' to shadow all the[0m
       [37m+# administrative / dangerous commands.[0m
       [37m+replica-read-only yes[0m
       [37m+[0m
       [37m+# Replication SYNC strategy: disk or socket.[0m
       [37m+#[0m
       [37m+# -------------------------------------------------------[0m
       [37m+# WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY[0m
       [37m+# -------------------------------------------------------[0m
       [37m+#[0m
       [37m+# New replicas and reconnecting replicas that are not able to continue the replication[0m
       [37m+# process just receiving differences, need to do what is called a "full[0m
       [37m+# synchronization". An RDB file is transmitted from the master to the replicas.[0m
       [37m+# The transmission can happen in two different ways:[0m
       [37m+#[0m
       [37m+# 1) Disk-backed: The Redis master creates a new process that writes the RDB[0m
       [37m+#                 file on disk. Later the file is transferred by the parent[0m
       [37m+#                 process to the replicas incrementally.[0m
       [37m+# 2) Diskless: The Redis master creates a new process that directly writes the[0m
       [37m+#              RDB file to replica sockets, without touching the disk at all.[0m
       [37m+#[0m
       [37m+# With disk-backed replication, while the RDB file is generated, more replicas[0m
       [37m+# can be queued and served with the RDB file as soon as the current child producing[0m
       [37m+# the RDB file finishes its work. With diskless replication instead once[0m
       [37m+# the transfer starts, new replicas arriving will be queued and a new transfer[0m
       [37m+# will start when the current one terminates.[0m
       [37m+#[0m
       [37m+# When diskless replication is used, the master waits a configurable amount of[0m
       [37m+# time (in seconds) before starting the transfer in the hope that multiple replicas[0m
       [37m+# will arrive and the transfer can be parallelized.[0m
       [37m+#[0m
       [37m+# With slow disks and fast (large bandwidth) networks, diskless replication[0m
       [37m+# works better.[0m
       [37m+# repl-diskless-sync no[0m
       [37m+[0m
       [37m+# When diskless replication is enabled, it is possible to configure the delay[0m
       [37m+# the server waits in order to spawn the child that transfers the RDB via socket[0m
       [37m+# to the replicas.[0m
       [37m+#[0m
       [37m+# This is important since once the transfer starts, it is not possible to serve[0m
       [37m+# new replicas arriving, that will be queued for the next RDB transfer, so the server[0m
       [37m+# waits a delay in order to let more replicas arrive.[0m
       [37m+#[0m
       [37m+# The delay is specified in seconds, and by default is 5 seconds. To disable[0m
       [37m+# it entirely just set it to 0 seconds and the transfer will start ASAP.[0m
       [37m+# repl-diskless-sync-delay 5[0m
       [37m+[0m
       [37m+# replicas send PINGs to server in a predefined interval. It's possible to change[0m
       [37m+# this interval with the repl_ping_replica_period option. The default value is 10[0m
       [37m+# seconds.[0m
       [37m+#[0m
       [37m+# repl-ping-replica-period 10[0m
       [37m+[0m
       [37m+# The following option sets the replication timeout for:[0m
       [37m+#[0m
       [37m+# 1) Bulk transfer I/O during SYNC, from the point of view of replica.[0m
       [37m+# 2) Master timeout from the point of view of replicas (data, pings).[0m
       [37m+# 3) replica timeout from the point of view of masters (REPLCONF ACK pings).[0m
       [37m+#[0m
       [37m+# It is important to make sure that this value is greater than the value[0m
       [37m+# specified for repl-ping-replica-period otherwise a timeout will be detected[0m
       [37m+# every time there is low traffic between the master and the replica.[0m
       [37m+#[0m
       [37m+# repl-timeout 60[0m
       [37m+[0m
       [37m+# Disable TCP_NODELAY on the replica socket after SYNC?[0m
       [37m+#[0m
       [37m+# If you select "yes" Redis will use a smaller number of TCP packets and[0m
       [37m+# less bandwidth to send data to replicas. But this can add a delay for[0m
       [37m+# the data to appear on the replica side, up to 40 milliseconds with[0m
       [37m+# Linux kernels using a default configuration.[0m
       [37m+#[0m
       [37m+# If you select "no" the delay for data to appear on the replica side will[0m
       [37m+# be reduced but more bandwidth will be used for replication.[0m
       [37m+#[0m
       [37m+# By default we optimize for low latency, but in very high traffic conditions[0m
       [37m+# or when the master and replicas are many hops away, turning this to "yes" may[0m
       [37m+# be a good idea.[0m
       [37m+repl-disable-tcp-nodelay no[0m
       [37m+[0m
       [37m+# Set the replication backlog size. The backlog is a buffer that accumulates[0m
       [37m+# replica data when replicas are disconnected for some time, so that when a replica[0m
       [37m+# wants to reconnect again, often a full resync is not needed, but a partial[0m
       [37m+# resync is enough, just passing the portion of data the replica missed while[0m
       [37m+# disconnected.[0m
       [37m+#[0m
       [37m+# The bigger the replication backlog, the longer the time the replica can be[0m
       [37m+# disconnected and later be able to perform a partial resynchronization.[0m
       [37m+#[0m
       [37m+# The backlog is only allocated once there is at least a replica connected.[0m
       [37m+#[0m
       [37m+# repl-backlog-size 1mb[0m
       [37m+[0m
       [37m+# After a master has no longer connected replicas for some time, the backlog[0m
       [37m+# will be freed. The following option configures the amount of seconds that[0m
       [37m+# need to elapse, starting from the time the last replica disconnected, for[0m
       [37m+# the backlog buffer to be freed.[0m
       [37m+#[0m
       [37m+# A value of 0 means to never release the backlog.[0m
       [37m+#[0m
       [37m+# repl-backlog-ttl 3600[0m
       [37m+[0m
       [37m+# The replica priority is an integer number published by Redis in the INFO output.[0m
       [37m+# It is used by Redis Sentinel in order to select a replica to promote into a[0m
       [37m+# master if the master is no longer working correctly.[0m
       [37m+#[0m
       [37m+# A replica with a low priority number is considered better for promotion, so[0m
       [37m+# for instance if there are three replicas with priority 10, 100, 25 Sentinel will[0m
       [37m+# pick the one with priority 10, that is the lowest.[0m
       [37m+#[0m
       [37m+# However a special priority of 0 marks the replica as not able to perform the[0m
       [37m+# role of master, so a replica with priority of 0 will never be selected by[0m
       [37m+# Redis Sentinel for promotion.[0m
       [37m+#[0m
       [37m+# By default the priority is 100.[0m
       [37m+replica-priority 100[0m
       [37m+[0m
       [37m+# It is possible for a master to stop accepting writes if there are less than[0m
       [37m+# N replicas connected, having a lag less or equal than M seconds.[0m
       [37m+#[0m
       [37m+# The N replicas need to be in "online" state.[0m
       [37m+#[0m
       [37m+# The lag in seconds, that must be <= the specified value, is calculated from[0m
       [37m+# the last ping received from the replica, that is usually sent every second.[0m
       [37m+#[0m
       [37m+# This option does not GUARANTEE that N replicas will accept the write, but[0m
       [37m+# will limit the window of exposure for lost writes in case not enough replicas[0m
       [37m+# are available, to the specified number of seconds.[0m
       [37m+#[0m
       [37m+# For example to require at least 3 replicas with a lag <= 10 seconds use:[0m
       [37m+#[0m
       [37m+# min-replicas-to-write 3[0m
       [37m+# min-replicas-max-lag 10[0m
       [37m+#[0m
       [37m+# Setting one or the other to 0 disables the feature.[0m
       [37m+#[0m
       [37m+# By default min-replicas-to-write is set to 0 (feature disabled) and[0m
       [37m+# min-replicas-max-lag is set to 10.[0m
       [37m+[0m
       [37m+# A Redis master is able to list the address and port of the attached[0m
       [37m+# replicas in different ways. For example the "INFO replication" section[0m
       [37m+# offers this information, which is used, among other tools, by[0m
       [37m+# Redis Sentinel in order to discover replica instances.[0m
       [37m+# Another place where this info is available is in the output of the[0m
       [37m+# "ROLE" command of a masteer.[0m
       [37m+#[0m
       [37m+# The listed IP and address normally reported by a replica is obtained[0m
       [37m+# in the following way:[0m
       [37m+#[0m
       [37m+#   IP: The address is auto detected by checking the peer address[0m
       [37m+#   of the socket used by the replica to connect with the master.[0m
       [37m+#[0m
       [37m+#   Port: The port is communicated by the replica during the replication[0m
       [37m+#   handshake, and is normally the port that the replica is using to[0m
       [37m+#   list for connections.[0m
       [37m+#[0m
       [37m+# However when port forwarding or Network Address Translation (NAT) is[0m
       [37m+# used, the replica may be actually reachable via different IP and port[0m
       [37m+# pairs. The following two options can be used by a replica in order to[0m
       [37m+# report to its master a specific set of IP and port, so that both INFO[0m
       [37m+# and ROLE will report those values.[0m
       [37m+#[0m
       [37m+# There is no need to use both the options if you need to override just[0m
       [37m+# the port or the IP address.[0m
       [37m+#[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [37m+################################## SECURITY ###################################[0m
       [37m+[0m
       [37m+# Require clients to issue AUTH <PASSWORD> before processing any other[0m
       [37m+# commands.  This might be useful in environments in which you do not trust[0m
       [37m+# others with access to the host running redis-server.[0m
       [37m+#[0m
       [37m+# This should stay commented out for backward compatibility and because most[0m
       [37m+# people do not need auth (e.g. they run their own servers).[0m
       [37m+#[0m
       [37m+# Warning: since Redis is pretty fast an outside user can try up to[0m
       [37m+# 150k passwords per second against a good box. This means that you should[0m
       [37m+# use a very strong password otherwise it will be very easy to break.[0m
       [37m+#[0m
       [37m+[0m
       [37m+[0m
       [37m+# Command renaming.[0m
       [37m+#[0m
       [37m+# It is possible to change the name of dangerous commands in a shared[0m
       [37m+# environment. For instance the CONFIG command may be renamed into something[0m
       [37m+# hard to guess so that it will still be available for internal-use tools[0m
       [37m+# but not available for general clients.[0m
       [37m+#[0m
       [37m+# Example:[0m
       [37m+#[0m
       [37m+# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52[0m
       [37m+#[0m
       [37m+# It is also possible to completely kill a command by renaming it into[0m
       [37m+# an empty string:[0m
       [37m+#[0m
       [37m+# rename-command CONFIG ""[0m
       [37m+#[0m
       [37m+# Please note that changing the name of commands that are logged into the[0m
       [37m+# AOF file or transmitted to replicas may cause problems.[0m
       [37m+rename-command KEYS ""[0m
       [37m+################################### LIMITS ####################################[0m
       [37m+[0m
       [37m+# Set the max number of connected clients at the same time. By default[0m
       [37m+# this limit is set to 10000 clients, however if the Redis server is not[0m
       [37m+# able to configure the process file limit to allow for the specified limit[0m
       [37m+# the max number of allowed clients is set to the current file limit[0m
       [37m+# minus 32 (as Redis reserves a few file descriptors for internal uses).[0m
       [37m+#[0m
       [37m+# Once the limit is reached Redis will close all the new connections sending[0m
       [37m+# an error 'max number of clients reached'.[0m
       [37m+#[0m
       [37m+maxclients 10000[0m
       [37m+[0m
       [37m+# Don't use more memory than the specified amount of bytes.[0m
       [37m+# When the memory limit is reached Redis will try to remove keys[0m
       [37m+# according to the eviction policy selected (see maxmemory-policy).[0m
       [37m+#[0m
       [37m+# If Redis can't remove keys according to the policy, or if the policy is[0m
       [37m+# set to 'noeviction', Redis will start to reply with errors to commands[0m
       [37m+# that would use more memory, like SET, LPUSH, and so on, and will continue[0m
       [37m+# to reply to read-only commands like GET.[0m
       [37m+#[0m
       [37m+# This option is usually useful when using Redis as an LRU cache, or to set[0m
       [37m+# a hard memory limit for an instance (using the 'noeviction' policy).[0m
       [37m+#[0m
       [37m+# WARNING: If you have replicas attached to an instance with maxmemory on,[0m
       [37m+# the size of the output buffers needed to feed the replicas are subtracted[0m
       [37m+# from the used memory count, so that network problems / resyncs will[0m
       [37m+# not trigger a loop where keys are evicted, and in turn the output[0m
       [37m+# buffer of replicas is full with DELs of keys evicted triggering the deletion[0m
       [37m+# of more keys, and so forth until the database is completely emptied.[0m
       [37m+#[0m
       [37m+# In short... if you have replicas attached it is suggested that you set a lower[0m
       [37m+# limit for maxmemory so that there is some free RAM on the system for replica[0m
       [37m+# output buffers (but this is not needed if the policy is 'noeviction').[0m
       [37m+#[0m
       [37m+# maxmemory <bytes>[0m
       [37m+maxmemory 0[0m
       [37m+[0m
       [37m+# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory[0m
       [37m+# is reached. You can select among five behaviors:[0m
       [37m+#[0m
       [37m+# volatile-lru -> remove the key with an expire set using an LRU algorithm[0m
       [37m+# allkeys-lru -> remove any key according to the LRU algorithm[0m
       [37m+# volatile-random -> remove a random key with an expire set[0m
       [37m+# allkeys-random -> remove a random key, any key[0m
       [37m+# volatile-ttl -> remove the key with the nearest expire time (minor TTL)[0m
       [37m+# noeviction -> don't expire at all, just return an error on write operations[0m
       [37m+#[0m
       [37m+# Note: with any of the above policies, Redis will return an error on write[0m
       [37m+#       operations, when there are no suitable keys for eviction.[0m
       [37m+#[0m
       [37m+#       At the date of writing these commands are: set setnx setex append[0m
       [37m+#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd[0m
       [37m+#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby[0m
       [37m+#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby[0m
       [37m+#       getset mset msetnx exec sort[0m
       [37m+#[0m
       [37m+# The default is:[0m
       [37m+#[0m
       [37m+# maxmemory-policy noeviction[0m
       [37m+maxmemory-policy noeviction[0m
       [37m+[0m
       [37m+# LRU and minimal TTL algorithms are not precise algorithms but approximated[0m
       [37m+# algorithms (in order to save memory), so you can tune it for speed or[0m
       [37m+# accuracy. For default Redis will check five keys and pick the one that was[0m
       [37m+# used less recently, you can change the sample size using the following[0m
       [37m+# configuration directive.[0m
       [37m+#[0m
       [37m+# The default of 5 produces good enough results. 10 Approximates very closely[0m
       [37m+# true LRU but costs a bit more CPU. 3 is very fast but not very accurate.[0m
       [37m+#[0m
       [37m+# maxmemory-samples 5[0m
       [37m+maxmemory-samples 5[0m
       [37m+[0m
       [37m+############################# LAZY FREEING ####################################[0m
       [37m+[0m
       [37m+# Redis has two primitives to delete keys. One is called DEL and is a blocking[0m
       [37m+# deletion of the object. It means that the server stops processing new commands[0m
       [37m+# in order to reclaim all the memory associated with an object in a synchronous[0m
       [37m+# way. If the key deleted is associated with a small object, the time needed[0m
       [37m+# in order to execute the DEL command is very small and comparable to most other[0m
       [37m+# O(1) or O(log_N) commands in Redis. However if the key is associated with an[0m
       [37m+# aggregated value containing millions of elements, the server can block for[0m
       [37m+# a long time (even seconds) in order to complete the operation.[0m
       [37m+#[0m
       [37m+# For the above reasons Redis also offers non blocking deletion primitives[0m
       [37m+# such as UNLINK (non blocking DEL) and the ASYNC option of FLUSHALL and[0m
       [37m+# FLUSHDB commands, in order to reclaim memory in background. Those commands[0m
       [37m+# are executed in constant time. Another thread will incrementally free the[0m
       [37m+# object in the background as fast as possible.[0m
       [37m+#[0m
       [37m+# DEL, UNLINK and ASYNC option of FLUSHALL and FLUSHDB are user-controlled.[0m
       [37m+# It's up to the design of the application to understand when it is a good[0m
       [37m+# idea to use one or the other. However the Redis server sometimes has to[0m
       [37m+# delete keys or flush the whole database as a side effect of other operations.[0m
       [37m+# Specifically Redis deletes objects independently of a user call in the[0m
       [37m+# following scenarios:[0m
       [37m+#[0m
       [37m+# 1) On eviction, because of the maxmemory and maxmemory policy configurations,[0m
       [37m+#    in order to make room for new data, without going over the specified[0m
       [37m+#    memory limit.[0m
       [37m+# 2) Because of expire: when a key with an associated time to live (see the[0m
       [37m+#    EXPIRE command) must be deleted from memory.[0m
       [37m+# 3) Because of a side effect of a command that stores data on a key that may[0m
       [37m+#    already exist. For example the RENAME command may delete the old key[0m
       [37m+#    content when it is replaced with another one. Similarly SUNIONSTORE[0m
       [37m+#    or SORT with STORE option may delete existing keys. The SET command[0m
       [37m+#    itself removes any old content of the specified key in order to replace[0m
       [37m+#    it with the specified string.[0m
       [37m+# 4) During replication, when a replica performs a full resynchronization with[0m
       [37m+#    its master, the content of the whole database is removed in order to[0m
       [37m+#    load the RDB file just transferred.[0m
       [37m+#[0m
       [37m+# In all the above cases the default is to delete objects in a blocking way,[0m
       [37m+# like if DEL was called. However you can configure each case specifically[0m
       [37m+# in order to instead release memory in a non-blocking way like if UNLINK[0m
       [37m+# was called, using the following configuration directives:[0m
       [37m+[0m
       [37m+lazyfree-lazy-eviction no[0m
       [37m+lazyfree-lazy-expire no[0m
       [37m+lazyfree-lazy-server-del no[0m
       [37m+replica-lazy-flush no[0m
       [37m+[0m
       [37m+################################ THREADED I/O #################################[0m
       [37m+[0m
       [37m+# Redis is mostly single threaded, however there are certain threaded[0m
       [37m+# operations such as UNLINK, slow I/O accesses and other things that are[0m
       [37m+# performed on side threads.[0m
       [37m+#[0m
       [37m+# Now it is also possible to handle Redis clients socket reads and writes[0m
       [37m+# in different I/O threads. Since especially writing is so slow, normally[0m
       [37m+# Redis users use pipelining in order to speed up the Redis performances per[0m
       [37m+# core, and spawn multiple instances in order to scale more. Using I/O[0m
       [37m+# threads it is possible to easily speedup two times Redis without resorting[0m
       [37m+# to pipelining nor sharding of the instance.[0m
       [37m+#[0m
       [37m+# By default threading is disabled, we suggest enabling it only in machines[0m
       [37m+# that have at least 4 or more cores, leaving at least one spare core.[0m
       [37m+# Using more than 8 threads is unlikely to help much. We also recommend using[0m
       [37m+# threaded I/O only if you actually have performance problems, with Redis[0m
       [37m+# instances being able to use a quite big percentage of CPU time, otherwise[0m
       [37m+# there is no point in using this feature.[0m
       [37m+#[0m
       [37m+# So for instance if you have a four cores boxes, try to use 2 or 3 I/O[0m
       [37m+# threads, if you have a 8 cores, try to use 6 threads. In order to[0m
       [37m+# enable I/O threads use the following configuration directive:[0m
       [37m+#[0m
       [37m+# io-threads 4[0m
       [37m+#[0m
       [37m+# Setting io-threads to 1 will just use the main thread as usual.[0m
       [37m+# When I/O threads are enabled, we only use threads for writes, that is[0m
       [37m+# to thread the write(2) syscall and transfer the client buffers to the[0m
       [37m+# socket. However it is also possible to enable threading of reads and[0m
       [37m+# protocol parsing using the following configuration directive, by setting[0m
       [37m+# it to yes:[0m
       [37m+#[0m
       [37m+# io-threads-do-reads no[0m
       [37m+#[0m
       [37m+# Usually threading reads doesn't help much.[0m
       [37m+#[0m
       [37m+# NOTE 1: This configuration directive cannot be changed at runtime via[0m
       [37m+# CONFIG SET. Aso this feature currently does not work when SSL is[0m
       [37m+# enabled.[0m
       [37m+#[0m
       [37m+# NOTE 2: If you want to test the Redis speedup using redis-benchmark, make[0m
       [37m+# sure you also run the benchmark itself in threaded mode, using the[0m
       [37m+# --threads option to match the number of Redis threads, otherwise you'll not[0m
       [37m+# be able to notice the improvements.[0m
       [37m+[0m
       [37m+io-threads 1[0m
       [37m+io-threads-do-reads no[0m
       [37m+[0m
       [37m+############################## APPEND ONLY MODE ###############################[0m
       [37m+[0m
       [37m+# By default Redis asynchronously dumps the dataset on disk. This mode is[0m
       [37m+# good enough in many applications, but an issue with the Redis process or[0m
       [37m+# a power outage may result into a few minutes of writes lost (depending on[0m
       [37m+# the configured save points).[0m
       [37m+#[0m
       [37m+# The Append Only File is an alternative persistence mode that provides[0m
       [37m+# much better durability. For instance using the default data fsync policy[0m
       [37m+# (see later in the config file) Redis can lose just one second of writes in a[0m
       [37m+# dramatic event like a server power outage, or a single write if something[0m
       [37m+# wrong with the Redis process itself happens, but the operating system is[0m
       [37m+# still running correctly.[0m
       [37m+#[0m
       [37m+# AOF and RDB persistence can be enabled at the same time without problems.[0m
       [37m+# If the AOF is enabled on startup Redis will load the AOF, that is the file[0m
       [37m+# with the better durability guarantees.[0m
       [37m+#[0m
       [37m+# Please check http://redis.io/topics/persistence for more information.[0m
       [37m+[0m
       [37m+appendonly no[0m
       [37m+[0m
       [37m+# The name of the append only file (default: "appendonly.aof")[0m
       [37m+[0m
       [37m+# appendfilename "appendonly.aof"[0m
       [37m+[0m
       [37m+# The fsync() call tells the Operating System to actually write data on disk[0m
       [37m+# instead of waiting for more data in the output buffer. Some OS will really flush[0m
       [37m+# data on disk, some other OS will just try to do it ASAP.[0m
       [37m+#[0m
       [37m+# Redis supports three different modes:[0m
       [37m+#[0m
       [37m+# no: don't fsync, just let the OS flush the data when it wants. Faster.[0m
       [37m+# always: fsync after every write to the append only log. Slow, Safest.[0m
       [37m+# everysec: fsync only one time every second. Compromise.[0m
       [37m+#[0m
       [37m+# The default is "everysec", as that's usually the right compromise between[0m
       [37m+# speed and data safety. It's up to you to understand if you can relax this to[0m
       [37m+# "no" that will let the operating system flush the output buffer when[0m
       [37m+# it wants, for better performances (but if you can live with the idea of[0m
       [37m+# some data loss consider the default persistence mode that's snapshotting),[0m
       [37m+# or on the contrary, use "always" that's very slow but a bit safer than[0m
       [37m+# everysec.[0m
       [37m+#[0m
       [37m+# More details please check the following article:[0m
       [37m+# http://antirez.com/post/redis-persistence-demystified.html[0m
       [37m+#[0m
       [37m+# If unsure, use "everysec".[0m
       [37m+[0m
       [37m+# appendfsync always[0m
       [37m+appendfsync everysec[0m
       [37m+# appendfsync no[0m
       [37m+[0m
       [37m+# When the AOF fsync policy is set to always or everysec, and a background[0m
       [37m+# saving process (a background save or AOF log background rewriting) is[0m
       [37m+# performing a lot of I/O against the disk, in some Linux configurations[0m
       [37m+# Redis may block too long on the fsync() call. Note that there is no fix for[0m
       [37m+# this currently, as even performing fsync in a different thread will block[0m
       [37m+# our synchronous write(2) call.[0m
       [37m+#[0m
       [37m+# In order to mitigate this problem it's possible to use the following option[0m
       [37m+# that will prevent fsync() from being called in the main process while a[0m
       [37m+# BGSAVE or BGREWRITEAOF is in progress.[0m
       [37m+#[0m
       [37m+# This means that while another child is saving, the durability of Redis is[0m
       [37m+# the same as "appendfsync none". In practical terms, this means that it is[0m
       [37m+# possible to lose up to 30 seconds of log in the worst scenario (with the[0m
       [37m+# default Linux settings).[0m
       [37m+#[0m
       [37m+# If you have latency problems turn this to "yes". Otherwise leave it as[0m
       [37m+# "no" that is the safest pick from the point of view of durability.[0m
       [37m+[0m
       [37m+no-appendfsync-on-rewrite no[0m
       [37m+[0m
       [37m+# Automatic rewrite of the append only file.[0m
       [37m+# Redis is able to automatically rewrite the log file implicitly calling[0m
       [37m+# BGREWRITEAOF when the AOF log size grows by the specified percentage.[0m
       [37m+#[0m
       [37m+# This is how it works: Redis remembers the size of the AOF file after the[0m
       [37m+# latest rewrite (if no rewrite has happened since the restart, the size of[0m
       [37m+# the AOF at startup is used).[0m
       [37m+#[0m
       [37m+# This base size is compared to the current size. If the current size is[0m
       [37m+# bigger than the specified percentage, the rewrite is triggered. Also[0m
       [37m+# you need to specify a minimal size for the AOF file to be rewritten, this[0m
       [37m+# is useful to avoid rewriting the AOF file even if the percentage increase[0m
       [37m+# is reached but it is still pretty small.[0m
       [37m+#[0m
       [37m+# Specify a percentage of zero in order to disable the automatic AOF[0m
       [37m+# rewrite feature.[0m
       [37m+[0m
       [37m+auto-aof-rewrite-percentage 100[0m
       [37m+auto-aof-rewrite-min-size 64mb[0m
       [37m+[0m
       [37m+# An AOF file may be found to be truncated at the end during the Redis[0m
       [37m+# startup process, when the AOF data gets loaded back into memory.[0m
       [37m+# This may happen when the system where Redis is running[0m
       [37m+# crashes, especially when an ext4 filesystem is mounted without the[0m
       [37m+# data=ordered option (however this can't happen when Redis itself[0m
       [37m+# crashes or aborts but the operating system still works correctly).[0m
       [37m+#[0m
       [37m+# Redis can either exit with an error when this happens, or load as much[0m
       [37m+# data as possible (the default now) and start if the AOF file is found[0m
       [37m+# to be truncated at the end. The following option controls this behavior.[0m
       [37m+#[0m
       [37m+# If aof-load-truncated is set to yes, a truncated AOF file is loaded and[0m
       [37m+# the Redis server starts emitting a log to inform the user of the event.[0m
       [37m+# Otherwise if the option is set to no, the server aborts with an error[0m
       [37m+# and refuses to start. When the option is set to no, the user requires[0m
       [37m+# to fix the AOF file using the "redis-check-aof" utility before to restart[0m
       [37m+# the server.[0m
       [37m+#[0m
       [37m+# Note that if the AOF file will be found to be corrupted in the middle[0m
       [37m+# the server will still exit with an error. This option only applies when[0m
       [37m+# Redis will try to read more data from the AOF file but not enough bytes[0m
       [37m+# will be found.[0m
       [37m+# aof-load-truncated yes[0m
       [37m+[0m
       [37m+################################ LUA SCRIPTING  ###############################[0m
       [37m+[0m
       [37m+# Max execution time of a Lua script in milliseconds.[0m
       [37m+#[0m
       [37m+# If the maximum execution time is reached Redis will log that a script is[0m
       [37m+# still in execution after the maximum allowed time and will start to[0m
       [37m+# reply to queries with an error.[0m
       [37m+#[0m
       [37m+# When a long running script exceeds the maximum execution time only the[0m
       [37m+# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be[0m
       [37m+# used to stop a script that did not yet called write commands. The second[0m
       [37m+# is the only way to shut down the server in the case a write command was[0m
       [37m+# already issued by the script but the user doesn't want to wait for the natural[0m
       [37m+# termination of the script.[0m
       [37m+#[0m
       [37m+# Set it to 0 or a negative value for unlimited execution without warnings.[0m
       [37m+lua-time-limit 5000[0m
       [37m+[0m
       [37m+################################ REDIS CLUSTER  ###############################[0m
       [37m+#[0m
       [37m+# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++[0m
       [37m+# WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however[0m
       [37m+# in order to mark it as "mature" we need to wait for a non trivial percentage[0m
       [37m+# of users to deploy it in production.[0m
       [37m+# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++[0m
       [37m+#[0m
       [37m+# Normal Redis instances can't be part of a Redis Cluster; only nodes that are[0m
       [37m+# started as cluster nodes can. In order to start a Redis instance as a[0m
       [37m+# cluster node enable the cluster support uncommenting the following:[0m
       [37m+#[0m
       [37m+# cluster-enabled yes[0m
       [37m+[0m
       [37m+# Every cluster node has a cluster configuration file. This file is not[0m
       [37m+# intended to be edited by hand. It is created and updated by Redis nodes.[0m
       [37m+# Every Redis Cluster node requires a different cluster configuration file.[0m
       [37m+# Make sure that instances running in the same system do not have[0m
       [37m+# overlapping cluster configuration file names.[0m
       [37m+#[0m
       [37m+# cluster-config-file nodes-6379.conf[0m
       [37m+[0m
       [37m+# Cluster node timeout is the amount of milliseconds a node must be unreachable[0m
       [37m+# for it to be considered in failure state.[0m
       [37m+# Most other internal time limits are multiple of the node timeout.[0m
       [37m+#[0m
       [37m+# cluster-node-timeout 15000[0m
       [37m+[0m
       [37m+# A replica of a failing master will avoid to start a failover if its data[0m
       [37m+# looks too old.[0m
       [37m+#[0m
       [37m+# There is no simple way for a replica to actually have a exact measure of[0m
       [37m+# its "data age", so the following two checks are performed:[0m
       [37m+#[0m
       [37m+# 1) If there are multiple replicas able to failover, they exchange messages[0m
       [37m+#    in order to try to give an advantage to the replica with the best[0m
       [37m+#    replication offset (more data from the master processed).[0m
       [37m+#    replicas will try to get their rank by offset, and apply to the start[0m
       [37m+#    of the failover a delay proportional to their rank.[0m
       [37m+#[0m
       [37m+# 2) Every single replica computes the time of the last interaction with[0m
       [37m+#    its master. This can be the last ping or command received (if the master[0m
       [37m+#    is still in the "connected" state), or the time that elapsed since the[0m
       [37m+#    disconnection with the master (if the replication link is currently down).[0m
       [37m+#    If the last interaction is too old, the replica will not try to failover[0m
       [37m+#    at all.[0m
       [37m+#[0m
       [37m+# The point "2" can be tuned by user. Specifically a replica will not perform[0m
       [37m+# the failover if, since the last interaction with the master, the time[0m
       [37m+# elapsed is greater than:[0m
       [37m+#[0m
       [37m+#   (node-timeout * replica-validity-factor) + repl-ping-replica-period[0m
       [37m+#[0m
       [37m+# So for example if node-timeout is 30 seconds, and the replica-validity-factor[0m
       [37m+# is 10, and assuming a default repl-ping-replica-period of 10 seconds, the[0m
       [37m+# replica will not try to failover if it was not able to talk with the master[0m
       [37m+# for longer than 310 seconds.[0m
       [37m+#[0m
       [37m+# A large replica-validity-factor may allow replicas with too old data to failover[0m
       [37m+# a master, while a too small value may prevent the cluster from being able to[0m
       [37m+# elect a replica at all.[0m
       [37m+#[0m
       [37m+# For maximum availability, it is possible to set the replica-validity-factor[0m
       [37m+# to a value of 0, which means, that replicas will always try to failover the[0m
       [37m+# master regardless of the last time they interacted with the master.[0m
       [37m+# (However they'll always try to apply a delay proportional to their[0m
       [37m+# offset rank).[0m
       [37m+#[0m
       [37m+# Zero is the only value able to guarantee that when all the partitions heal[0m
       [37m+# the cluster will always be able to continue.[0m
       [37m+#[0m
       [37m+# cluster-replica-validity-factor 10[0m
       [37m+[0m
       [37m+# Cluster replicas are able to migrate to orphaned masters, that are masters[0m
       [37m+# that are left without working replicas. This improves the cluster ability[0m
       [37m+# to resist to failures as otherwise an orphaned master can't be failed over[0m
       [37m+# in case of failure if it has no working replicas.[0m
       [37m+#[0m
       [37m+# replicas migrate to orphaned masters only if there are still at least a[0m
       [37m+# given number of other working replicas for their old master. This number[0m
       [37m+# is the "migration barrier". A migration barrier of 1 means that a replica[0m
       [37m+# will migrate only if there is at least 1 other working replica for its master[0m
       [37m+# and so forth. It usually reflects the number of replicas you want for every[0m
       [37m+# master in your cluster.[0m
       [37m+#[0m
       [37m+# Default is 1 (replicas migrate only if their masters remain with at least[0m
       [37m+# one replica). To disable migration just set it to a very large value.[0m
       [37m+# A value of 0 can be set but is useful only for debugging and dangerous[0m
       [37m+# in production.[0m
       [37m+#[0m
       [37m+# cluster-migration-barrier 1[0m
       [37m+[0m
       [37m+# By default Redis Cluster nodes stop accepting queries if they detect there[0m
       [37m+# is at least an hash slot uncovered (no available node is serving it).[0m
       [37m+# This way if the cluster is partially down (for example a range of hash slots[0m
       [37m+# are no longer covered) all the cluster becomes, eventually, unavailable.[0m
       [37m+# It automatically returns available as soon as all the slots are covered again.[0m
       [37m+#[0m
       [37m+# However sometimes you want the subset of the cluster which is working,[0m
       [37m+# to continue to accept queries for the part of the key space that is still[0m
       [37m+# covered. In order to do so, just set the cluster-require-full-coverage[0m
       [37m+# option to no.[0m
       [37m+#[0m
       [37m+# cluster-require-full-coverage yes[0m
       [37m+[0m
       [37m+# In order to setup your cluster make sure to read the documentation[0m
       [37m+# available at http://redis.io web site.[0m
       [37m+[0m
       [37m+################################## SLOW LOG ###################################[0m
       [37m+[0m
       [37m+# The Redis Slow Log is a system to log queries that exceeded a specified[0m
       [37m+# execution time. The execution time does not include the I/O operations[0m
       [37m+# like talking with the client, sending the reply and so forth,[0m
       [37m+# but just the time needed to actually execute the command (this is the only[0m
       [37m+# stage of command execution where the thread is blocked and can not serve[0m
       [37m+# other requests in the meantime).[0m
       [37m+#[0m
       [37m+# You can configure the slow log with two parameters: one tells Redis[0m
       [37m+# what is the execution time, in microseconds, to exceed in order for the[0m
       [37m+# command to get logged, and the other parameter is the length of the[0m
       [37m+# slow log. When a new command is logged the oldest one is removed from the[0m
       [37m+# queue of logged commands.[0m
       [37m+[0m
       [37m+# The following time is expressed in microseconds, so 1000000 is equivalent[0m
       [37m+# to one second. Note that a negative number disables the slow log, while[0m
       [37m+# a value of zero forces the logging of every command.[0m
       [37m+slowlog-log-slower-than 10000[0m
       [37m+[0m
       [37m+# There is no limit to this length. Just be aware that it will consume memory.[0m
       [37m+# You can reclaim memory used by the slow log with SLOWLOG RESET.[0m
       [37m+slowlog-max-len 128[0m
       [37m+[0m
       [37m+################################ LATENCY MONITOR ##############################[0m
       [37m+[0m
       [37m+# The Redis latency monitoring subsystem samples different operations[0m
       [37m+# at runtime in order to collect data related to possible sources of[0m
       [37m+# latency of a Redis instance.[0m
       [37m+#[0m
       [37m+# Via the LATENCY command this information is available to the user that can[0m
       [37m+# print graphs and obtain reports.[0m
       [37m+#[0m
       [37m+# The system only logs operations that were performed in a time equal or[0m
       [37m+# greater than the amount of milliseconds specified via the[0m
       [37m+# latency-monitor-threshold configuration directive. When its value is set[0m
       [37m+# to zero, the latency monitor is turned off.[0m
       [37m+#[0m
       [37m+# By default latency monitoring is disabled since it is mostly not needed[0m
       [37m+# if you don't have latency issues, and collecting data has a performance[0m
       [37m+# impact, that while very small, can be measured under big load. Latency[0m
       [37m+# monitoring can easily be enabled at runtime using the command[0m
       [37m+# "CONFIG SET latency-monitor-threshold <milliseconds>" if needed.[0m
       [37m+# latency-monitor-threshold 0[0m
       [37m+[0m
       [37m+############################# EVENT NOTIFICATION ##############################[0m
       [37m+[0m
       [37m+# Redis can notify Pub/Sub clients about events happening in the key space.[0m
       [37m+# This feature is documented at http://redis.io/topics/notifications[0m
       [37m+#[0m
       [37m+# For instance if keyspace events notification is enabled, and a client[0m
       [37m+# performs a DEL operation on key "foo" stored in the Database 0, two[0m
       [37m+# messages will be published via Pub/Sub:[0m
       [37m+#[0m
       [37m+# PUBLISH __keyspace@0__:foo del[0m
       [37m+# PUBLISH __keyevent@0__:del foo[0m
       [37m+#[0m
       [37m+# It is possible to select the events that Redis will notify among a set[0m
       [37m+# of classes. Every class is identified by a single character:[0m
       [37m+#[0m
       [37m+#  K     Keyspace events, published with __keyspace@<db>__ prefix.[0m
       [37m+#  E     Keyevent events, published with __keyevent@<db>__ prefix.[0m
       [37m+#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...[0m
       [37m+#  $     String commands[0m
       [37m+#  l     List commands[0m
       [37m+#  s     Set commands[0m
       [37m+#  h     Hash commands[0m
       [37m+#  z     Sorted set commands[0m
       [37m+#  x     Expired events (events generated every time a key expires)[0m
       [37m+#  e     Evicted events (events generated when a key is evicted for maxmemory)[0m
       [37m+#  A     Alias for g$lshzxe, so that the "AKE" string means all the events.[0m
       [37m+#[0m
       [37m+#  The "notify-keyspace-events" takes as argument a string that is composed[0m
       [37m+#  of zero or multiple characters. The empty string means that notifications[0m
       [37m+#  are disabled.[0m
       [37m+#[0m
       [37m+#  Example: to enable list and generic events, from the point of view of the[0m
       [37m+#           event name, use:[0m
       [37m+#[0m
       [37m+#  notify-keyspace-events Elg[0m
       [37m+#[0m
       [37m+#  Example 2: to get the stream of the expired keys subscribing to channel[0m
       [37m+#             name __keyevent@0__:expired use:[0m
       [37m+#[0m
       [37m+#  notify-keyspace-events Ex[0m
       [37m+#[0m
       [37m+#  By default all notifications are disabled because most users don't need[0m
       [37m+#  this feature and the feature has some overhead. Note that if you don't[0m
       [37m+#  specify at least one of K or E, no events will be delivered.[0m
       [37m+notify-keyspace-events ""[0m
       [37m+[0m
       [37m+############################### ADVANCED CONFIG ###############################[0m
       [37m+[0m
       [37m+# Hashes are encoded using a memory efficient data structure when they have a[0m
       [37m+# small number of entries, and the biggest entry does not exceed a given[0m
       [37m+# threshold. These thresholds can be configured using the following directives.[0m
       [37m+hash-max-ziplist-entries 512[0m
       [37m+hash-max-ziplist-value 64[0m
       [37m+[0m
       [37m+# Lists are also encoded in a special way to save a lot of space.[0m
       [37m+# The number of entries allowed per internal list node can be specified[0m
       [37m+# as a fixed maximum size or a maximum number of elements.[0m
       [37m+# For a fixed maximum size, use -5 through -1, meaning:[0m
       [37m+# -5: max size: 64 Kb  <-- not recommended for normal workloads[0m
       [37m+# -4: max size: 32 Kb  <-- not recommended[0m
       [37m+# -3: max size: 16 Kb  <-- probably not recommended[0m
       [37m+# -2: max size: 8 Kb   <-- good[0m
       [37m+# -1: max size: 4 Kb   <-- good[0m
       [37m+# Positive numbers mean store up to _exactly_ that number of elements[0m
       [37m+# per list node.[0m
       [37m+# The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),[0m
       [37m+# but if your use case is unique, adjust the settings as necessary.[0m
       [37m+# list-max-ziplist-size -2[0m
       [37m+[0m
       [37m+# Lists may also be compressed.[0m
       [37m+# Compress depth is the number of quicklist ziplist nodes from *each* side of[0m
       [37m+# the list to *exclude* from compression.  The head and tail of the list[0m
       [37m+# are always uncompressed for fast push/pop operations.  Settings are:[0m
       [37m+# 0: disable all list compression[0m
       [37m+# 1: depth 1 means "don't start compressing until after 1 node into the list,[0m
       [37m+#    going from either the head or tail"[0m
       [37m+#    So: [head]->node->node->...->node->[tail][0m
       [37m+#    [head], [tail] will always be uncompressed; inner nodes will compress.[0m
       [37m+# 2: [head]->[next]->node->node->...->node->[prev]->[tail][0m
       [37m+#    2 here means: don't compress head or head->next or tail->prev or tail,[0m
       [37m+#    but compress all nodes between them.[0m
       [37m+# 3: [head]->[next]->[next]->node->node->...->node->[prev]->[prev]->[tail][0m
       [37m+# etc.[0m
       [37m+# list-compress-depth 0[0m
       [37m+[0m
       [37m+# Sets have a special encoding in just one case: when a set is composed[0m
       [37m+# of just strings that happen to be integers in radix 10 in the range[0m
       [37m+# of 64 bit signed integers.[0m
       [37m+# The following configuration setting sets the limit in the size of the[0m
       [37m+# set in order to use this special memory saving encoding.[0m
       [37m+set-max-intset-entries 512[0m
       [37m+[0m
       [37m+# Similarly to hashes and lists, sorted sets are also specially encoded in[0m
       [37m+# order to save a lot of space. This encoding is only used when the length and[0m
       [37m+# elements of a sorted set are below the following limits:[0m
       [37m+zset-max-ziplist-entries 128[0m
       [37m+zset-max-ziplist-value 64[0m
       [37m+[0m
       [37m+# HyperLogLog sparse representation bytes limit. The limit includes the[0m
       [37m+# 16 bytes header. When an HyperLogLog using the sparse representation crosses[0m
       [37m+# this limit, it is converted into the dense representation.[0m
       [37m+#[0m
       [37m+# A value greater than 16000 is totally useless, since at that point the[0m
       [37m+# dense representation is more memory efficient.[0m
       [37m+#[0m
       [37m+# The suggested value is ~ 3000 in order to have the benefits of[0m
       [37m+# the space efficient encoding without slowing down too much PFADD,[0m
       [37m+# which is O(N) with the sparse encoding. The value can be raised to[0m
       [37m+# ~ 10000 when CPU is not a concern, but space is, and the data set is[0m
       [37m+# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.[0m
       [37m+# hll-sparse-max-bytes 3000[0m
       [37m+[0m
       [37m+# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in[0m
       [37m+# order to help rehashing the main Redis hash table (the one mapping top-level[0m
       [37m+# keys to values). The hash table implementation Redis uses (see dict.c)[0m
       [37m+# performs a lazy rehashing: the more operation you run into a hash table[0m
       [37m+# that is rehashing, the more rehashing "steps" are performed, so if the[0m
       [37m+# server is idle the rehashing is never complete and some more memory is used[0m
       [37m+# by the hash table.[0m
       [37m+#[0m
       [37m+# The default is to use this millisecond 10 times every second in order to[0m
       [37m+# actively rehash the main dictionaries, freeing memory when possible.[0m
       [37m+#[0m
       [37m+# If unsure:[0m
       [37m+# use "activerehashing no" if you have hard latency requirements and it is[0m
       [37m+# not a good thing in your environment that Redis can reply from time to time[0m
       [37m+# to queries with 2 milliseconds delay.[0m
       [37m+#[0m
       [37m+# use "activerehashing yes" if you don't have such hard requirements but[0m
       [37m+# want to free memory asap when possible.[0m
       [37m+activerehashing yes[0m
       [37m+[0m
       [37m+# The client output buffer limits can be used to force disconnection of clients[0m
       [37m+# that are not reading data from the server fast enough for some reason (a[0m
       [37m+# common reason is that a Pub/Sub client can't consume messages as fast as the[0m
       [37m+# publisher can produce them).[0m
       [37m+#[0m
       [37m+# The limit can be set differently for the three different classes of clients:[0m
       [37m+#[0m
       [37m+# normal -> normal clients including MONITOR clients[0m
       [37m+# replica  -> replica clients[0m
       [37m+# pubsub -> clients subscribed to at least one pubsub channel or pattern[0m
       [37m+#[0m
       [37m+# The syntax of every client-output-buffer-limit directive is the following:[0m
       [37m+#[0m
       [37m+# client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>[0m
       [37m+#[0m
       [37m+# A client is immediately disconnected once the hard limit is reached, or if[0m
       [37m+# the soft limit is reached and remains reached for the specified number of[0m
       [37m+# seconds (continuously).[0m
       [37m+# So for instance if the hard limit is 32 megabytes and the soft limit is[0m
       [37m+# 16 megabytes / 10 seconds, the client will get disconnected immediately[0m
       [37m+# if the size of the output buffers reach 32 megabytes, but will also get[0m
       [37m+# disconnected if the client reaches 16 megabytes and continuously overcomes[0m
       [37m+# the limit for 10 seconds.[0m
       [37m+#[0m
       [37m+# By default normal clients are not limited because they don't receive data[0m
       [37m+# without asking (in a push way), but just after a request, so only[0m
       [37m+# asynchronous clients may create a scenario where data is requested faster[0m
       [37m+# than it can read.[0m
       [37m+#[0m
       [37m+# Instead there is a default limit for pubsub and replica clients, since[0m
       [37m+# subscribers and replicas receive data in a push fashion.[0m
       [37m+#[0m
       [37m+# Both the hard or the soft limit can be disabled by setting them to zero.[0m
       [37m+client-output-buffer-limit normal 0 0 0[0m
       [37m+client-output-buffer-limit replica 256mb 64mb 60[0m
       [37m+client-output-buffer-limit pubsub 32mb 8mb 60[0m
       [37m+[0m
       [37m+# Redis calls an internal function to perform many background tasks, like[0m
       [37m+# closing connections of clients in timeout, purging expired keys that are[0m
       [37m+# never requested, and so forth.[0m
       [37m+#[0m
       [37m+# Not all tasks are performed with the same frequency, but Redis checks for[0m
       [37m+# tasks to perform according to the specified "hz" value.[0m
       [37m+#[0m
       [37m+# By default "hz" is set to 10. Raising the value will use more CPU when[0m
       [37m+# Redis is idle, but at the same time will make Redis more responsive when[0m
       [37m+# there are many keys expiring at the same time, and timeouts may be[0m
       [37m+# handled with more precision.[0m
       [37m+#[0m
       [37m+# The range is between 1 and 500, however a value over 100 is usually not[0m
       [37m+# a good idea. Most users should use the default of 10 and raise this up to[0m
       [37m+# 100 only in environments where very low latency is required.[0m
       [37m+hz 10[0m
       [37m+[0m
       [37m+# When a child rewrites the AOF file, if the following option is enabled[0m
       [37m+# the file will be fsync-ed every 32 MB of data generated. This is useful[0m
       [37m+# in order to commit the file to the disk more incrementally and avoid[0m
       [37m+# big latency spikes.[0m
       [37m+aof-rewrite-incremental-fsync yes[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'gitlab-redis'[0m
 [0m  Recipe: <Dynamically Defined Resource>[0m
     * service[redis] action nothing (skipped due to action :nothing)
     * runit_service[redis] action enable
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/redis] action create
         [32m- create new directory /opt/gitlab/sv/redis[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * template[/opt/gitlab/sv/redis/run] action create
         [32m- create new file /opt/gitlab/sv/redis/run[0m
         [32m- update content in file /opt/gitlab/sv/redis/run from none to da365d[0m
         [37m--- /opt/gitlab/sv/redis/run	2025-10-30 10:57:04.322644317 +0000[0m
         [37m+++ /opt/gitlab/sv/redis/.chef-run20251030-28-16airpe	2025-10-30 10:57:04.322644317 +0000[0m
         [37m@@ -1,5 +1,10 @@[0m
         [37m+#!/bin/sh[0m
         [37m+exec 2>&1[0m
         [37m+[0m
         [37m+umask 077[0m
         [37m+exec chpst -P -U gitlab-redis:gitlab-redis -u gitlab-redis:gitlab-redis /opt/gitlab/embedded/bin/redis-server /var/opt/gitlab/redis/redis.conf[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * directory[/opt/gitlab/sv/redis/log] action create
         [32m- create new directory /opt/gitlab/sv/redis/log[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * directory[/opt/gitlab/sv/redis/log/main] action create
         [32m- create new directory /opt/gitlab/sv/redis/log/main[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * template[/opt/gitlab/sv/redis/log/config] action create
         [32m- create new file /opt/gitlab/sv/redis/log/config[0m
         [32m- update content in file /opt/gitlab/sv/redis/log/config from none to 623c00[0m
         [37m--- /opt/gitlab/sv/redis/log/config	2025-10-30 10:57:04.333444317 +0000[0m
         [37m+++ /opt/gitlab/sv/redis/log/.chef-config20251030-28-1f1seq3	2025-10-30 10:57:04.333444317 +0000[0m
         [37m@@ -1,6 +1,12 @@[0m
         [37m+s209715200[0m
         [37m+n30[0m
         [37m+t86400[0m
         [37m+!gzip[0m
         [37m+[0m
         [37m+[0m
         [32m- change mode from '' to '0644'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * ruby_block[verify_chown_persisted_on_redis] action create
         [32m- execute the ruby block verify_chown_persisted_on_redis[0m
 [0m      * ruby_block[verify_chown_persisted_on_redis] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/redis/config] action create
         [32m- create symlink at /var/log/gitlab/redis/config to /opt/gitlab/sv/redis/log/config[0m
 [0m      * template[/opt/gitlab/sv/redis/log/run] action create
         [32m- create new file /opt/gitlab/sv/redis/log/run[0m
         [32m- update content in file /opt/gitlab/sv/redis/log/run from none to af1017[0m
         [37m--- /opt/gitlab/sv/redis/log/run	2025-10-30 10:57:04.344244317 +0000[0m
         [37m+++ /opt/gitlab/sv/redis/log/.chef-run20251030-28-owaykh	2025-10-30 10:57:04.344244317 +0000[0m
         [37m@@ -1,2 +1,4 @@[0m
         [37m+#!/bin/sh[0m
         [37m+exec svlogd -tt /var/log/gitlab/redis[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * directory[/opt/gitlab/sv/redis/env] action create
         [32m- create new directory /opt/gitlab/sv/redis/env[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * ruby_block[Delete unmanaged env files for redis service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/redis/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/redis/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/redis/control] action create
         [32m- create new directory /opt/gitlab/sv/redis/control[0m
         [32m- change mode from '' to '0755'[0m
         [32m- change owner from '' to 'root'[0m
         [32m- change group from '' to 'root'[0m
 [0m      * link[/opt/gitlab/init/redis] action create
         [32m- create symlink at /opt/gitlab/init/redis to /opt/gitlab/embedded/bin/sv[0m
 [0m      * file[/opt/gitlab/sv/redis/down] action nothing (skipped due to action :nothing)
       * ruby_block[restart_service] action run (skipped due to only_if)
       * ruby_block[reload_log_service] action create
         * ruby_block[restart_service] action nothing (skipped due to action :nothing)
         * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
         * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
         * directory[/opt/gitlab/sv/redis] action create (up to date)
         * template[/opt/gitlab/sv/redis/run] action create (up to date)
         * directory[/opt/gitlab/sv/redis/log] action create (up to date)
         * directory[/opt/gitlab/sv/redis/log/main] action create (up to date)
         * template[/opt/gitlab/sv/redis/log/config] action create (up to date)
         * ruby_block[verify_chown_persisted_on_redis] action nothing (skipped due to action :nothing)
         * link[/var/log/gitlab/redis/config] action create (up to date)
         * template[/opt/gitlab/sv/redis/log/run] action create (up to date)
         * directory[/opt/gitlab/sv/redis/env] action create (up to date)
         * ruby_block[Delete unmanaged env files for redis service] action run (skipped due to only_if)
         * template[/opt/gitlab/sv/redis/check] action create (skipped due to only_if)
         * template[/opt/gitlab/sv/redis/finish] action create (skipped due to only_if)
         * directory[/opt/gitlab/sv/redis/control] action create (up to date)
         * link[/opt/gitlab/init/redis] action create (up to date)
         * file[/opt/gitlab/sv/redis/down] action nothing (skipped due to action :nothing)
         * directory[/opt/gitlab/service] action create (up to date)
         * link[/opt/gitlab/service/redis] action create
           [32m- create symlink at /opt/gitlab/service/redis to /opt/gitlab/sv/redis[0m
 [0m        * ruby_block[wait for redis service socket] action run
           [32m- execute the ruby block wait for redis service socket[0m
 [0m        [32m- execute the ruby block reload_log_service[0m
 [0m      * ruby_block[restart_log_service] action run
         * ruby_block[restart_service] action nothing (skipped due to action :nothing)
         * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
         * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
         * directory[/opt/gitlab/sv/redis] action create (up to date)
         * template[/opt/gitlab/sv/redis/run] action create (up to date)
         * directory[/opt/gitlab/sv/redis/log] action create (up to date)
         * directory[/opt/gitlab/sv/redis/log/main] action create (up to date)
         * template[/opt/gitlab/sv/redis/log/config] action create (up to date)
         * ruby_block[verify_chown_persisted_on_redis] action nothing (skipped due to action :nothing)
         * link[/var/log/gitlab/redis/config] action create (up to date)
         * template[/opt/gitlab/sv/redis/log/run] action create (up to date)
         * directory[/opt/gitlab/sv/redis/env] action create (up to date)
         * ruby_block[Delete unmanaged env files for redis service] action run (skipped due to only_if)
         * template[/opt/gitlab/sv/redis/check] action create (skipped due to only_if)
         * template[/opt/gitlab/sv/redis/finish] action create (skipped due to only_if)
         * directory[/opt/gitlab/sv/redis/control] action create (up to date)
         * link[/opt/gitlab/init/redis] action create (up to date)
         * file[/opt/gitlab/sv/redis/down] action nothing (skipped due to action :nothing)
         * directory[/opt/gitlab/service] action create (up to date)
         * link[/opt/gitlab/service/redis] action create (up to date)
         * ruby_block[wait for redis service socket] action run (skipped due to not_if)
         [32m- execute the ruby block restart_log_service[0m
 [0m      * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/redis] action create (up to date)
       * ruby_block[wait for redis service socket] action run (skipped due to not_if)
     
 [0m    * execute[/opt/gitlab/bin/gitlab-ctl start redis] action run
       [execute] ok: run: redis: (pid 264) 6s
       [32m- execute /opt/gitlab/bin/gitlab-ctl start redis[0m
 [0m    * ruby_block[warn pending redis restart] action run (skipped due to only_if)
   
 [0mRecipe: redis::enable[0m
   * template[/opt/gitlab/etc/gitlab-redis-cli-rc] action create
     [32m- create new file /opt/gitlab/etc/gitlab-redis-cli-rc[0m
     [32m- update content in file /opt/gitlab/etc/gitlab-redis-cli-rc from none to 44cac1[0m
     [37m--- /opt/gitlab/etc/gitlab-redis-cli-rc	2025-10-30 10:57:12.655856502 +0000[0m
     [37m+++ /opt/gitlab/etc/.chef-gitlab-redis-cli-rc20251030-28-rlnpv2	2025-10-30 10:57:12.655856502 +0000[0m
     [37m@@ -1,4 +1,8 @@[0m
     [37m+redis_dir='/var/opt/gitlab/redis'[0m
     [37m+redis_host='127.0.0.1'[0m
     [37m+redis_port='0'[0m
     [37m+redis_socket='/var/opt/gitlab/redis/redis.socket'[0m
     [32m- change owner from '' to 'root'[0m
     [32m- change group from '' to 'root'[0m
 [0mRecipe: gitaly::enable[0m
   * directory[/var/opt/gitlab/gitaly] action create (up to date)
   * directory[/var/log/gitlab/gitaly] action create (up to date)
   * directory[/var/opt/gitlab/gitaly/internal_sockets] action create (up to date)
   * env_dir[/opt/gitlab/etc/gitaly/env] action create
     * directory[/opt/gitlab/etc/gitaly/env] action create
       [32m- create new directory /opt/gitlab/etc/gitaly/env[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/HOME] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/HOME[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/HOME from none to 205bb9[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/PATH] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/PATH[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/PATH from none to d5dc07[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/TZ] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/TZ[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/TZ from none to 983a95[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/PYTHONPATH] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/PYTHONPATH[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/PYTHONPATH from none to 83b536[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/ICU_DATA] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/ICU_DATA[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/ICU_DATA from none to a04260[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/SSL_CERT_DIR] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/SSL_CERT_DIR[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/SSL_CERT_DIR from none to 4f45cf[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/GITALY_PID_FILE] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/GITALY_PID_FILE[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/GITALY_PID_FILE from none to e82748[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING from none to b5bea4[0m
       [32m- suppressed sensitive resource[0m
 [0m  
 [0m  * template[Create Gitaly config.toml] action create (up to date)
   * service[gitaly] action nothing (skipped due to action :nothing)
   * runit_service[gitaly] action enable
     * ruby_block[restart_service] action nothing (skipped due to action :nothing)
     * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
     * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
     * directory[/opt/gitlab/sv/gitaly] action create
       [32m- create new directory /opt/gitlab/sv/gitaly[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/gitaly/run] action create
       [32m- create new file /opt/gitlab/sv/gitaly/run[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/run from none to 1a05c2[0m
       [37m--- /opt/gitlab/sv/gitaly/run	2025-10-30 10:57:12.786388511 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/.chef-run20251030-28-qb65b0	2025-10-30 10:57:12.786388511 +0000[0m
       [37m@@ -1,18 +1,36 @@[0m
       [37m+#!/bin/sh[0m
       [37m+[0m
       [37m+# Attempt to change ulimit before the set -e flag, ignore failures[0m
       [37m+ulimit -n 15000[0m
       [37m+[0m
       [37m+set -e # fail on errors[0m
       [37m+[0m
       [37m+# Redirect stderr -> stdout[0m
       [37m+exec 2>&1[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [37m+cd /var/opt/gitlab/gitaly[0m
       [37m+[0m
       [37m+exec chpst -e /opt/gitlab/etc/gitaly/env -P \[0m
       [37m+  -U git:git \[0m
       [37m+  -u git:git \[0m
       [37m+  /opt/gitlab/embedded/bin/gitaly-wrapper /opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/log] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/log[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/log/main] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/log/main[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/gitaly/log/config] action create
       [32m- create new file /opt/gitlab/sv/gitaly/log/config[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/log/config from none to 623c00[0m
       [37m--- /opt/gitlab/sv/gitaly/log/config	2025-10-30 10:57:12.808765427 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/log/.chef-config20251030-28-1iakips	2025-10-30 10:57:12.808765427 +0000[0m
       [37m@@ -1,6 +1,12 @@[0m
       [37m+s209715200[0m
       [37m+n30[0m
       [37m+t86400[0m
       [37m+!gzip[0m
       [37m+[0m
       [37m+[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[verify_chown_persisted_on_gitaly] action create
       [32m- execute the ruby block verify_chown_persisted_on_gitaly[0m
 [0m    * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
     * link[/var/log/gitlab/gitaly/config] action create (up to date)
     * template[/opt/gitlab/sv/gitaly/log/run] action create
       [32m- create new file /opt/gitlab/sv/gitaly/log/run[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/log/run from none to fa6dcc[0m
       [37m--- /opt/gitlab/sv/gitaly/log/run	2025-10-30 10:57:12.816224399 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/log/.chef-run20251030-28-1qfv58q	2025-10-30 10:57:12.816224399 +0000[0m
       [37m@@ -1,2 +1,4 @@[0m
       [37m+#!/bin/sh[0m
       [37m+exec svlogd /var/log/gitlab/gitaly[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/env] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/env[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
     * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
     * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
     * directory[/opt/gitlab/sv/gitaly/control] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/control[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[/opt/gitlab/init/gitaly] action create
       [32m- create symlink at /opt/gitlab/init/gitaly to /opt/gitlab/embedded/bin/sv[0m
 [0m    * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
     * ruby_block[restart_service] action run (skipped due to only_if)
     * ruby_block[reload_log_service] action create
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/gitaly] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log/main] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/gitaly/config] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/gitaly/control] action create (up to date)
       * link[/opt/gitlab/init/gitaly] action create (up to date)
       * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/gitaly] action create
         [32m- create symlink at /opt/gitlab/service/gitaly to /opt/gitlab/sv/gitaly[0m
 [0m      * ruby_block[wait for gitaly service socket] action run
         [32m- execute the ruby block wait for gitaly service socket[0m
 [0m      [32m- execute the ruby block reload_log_service[0m
 [0m    * ruby_block[restart_log_service] action run
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/gitaly] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log/main] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/gitaly/config] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/gitaly/control] action create (up to date)
       * link[/opt/gitlab/init/gitaly] action create (up to date)
       * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/gitaly] action create (up to date)
       * ruby_block[wait for gitaly service socket] action run (skipped due to not_if)
       [32m- execute the ruby block restart_log_service[0m
 [0m    * directory[/opt/gitlab/service] action create (up to date)
     * link[/opt/gitlab/service/gitaly] action create (up to date)
     * ruby_block[wait for gitaly service socket] action run (skipped due to not_if)
   
 [0m  * execute[/opt/gitlab/bin/gitlab-ctl start gitaly] action run
     [execute] ok: run: gitaly: (pid 299) 3s
     [32m- execute /opt/gitlab/bin/gitlab-ctl start gitaly[0m
 [0m  * version_file[Create version file for Gitaly] action create
     * file[/var/opt/gitlab/gitaly/VERSION] action create (up to date)
      (up to date)
   * version_file[Create Ruby version file for Gitaly] action create
     * file[/var/opt/gitlab/gitaly/RUBY_VERSION] action create (up to date)
      (up to date)
   * consul_service[gitaly] action delete
     * file[/var/opt/gitlab/consul/config.d/gitaly-service.json] action delete (up to date)
      (up to date)
 Recipe: praefect::disable[0m
   * service[praefect] action nothing (skipped due to action :nothing)
   * runit_service[praefect] action disable
     * ruby_block[disable praefect] action run (skipped due to only_if)
      (up to date)
   * consul_service[praefect] action delete
     * file[/var/opt/gitlab/consul/config.d/praefect-service.json] action delete (up to date)
      (up to date)
 Recipe: postgresql::user[0m
   * account[Postgresql user and group] action create (up to date)
   * directory[/var/opt/gitlab/postgresql] action create
     [32m- create new directory /var/opt/gitlab/postgresql[0m
     [32m- change mode from '' to '0755'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
 [0m  * file[/var/opt/gitlab/postgresql/.profile] action create
     [32m- create new file /var/opt/gitlab/postgresql/.profile[0m
     [32m- update content in file /var/opt/gitlab/postgresql/.profile from none to 3b0387[0m
     [37m--- /var/opt/gitlab/postgresql/.profile	2025-10-30 10:57:18.248598938 +0000[0m
     [37m+++ /var/opt/gitlab/postgresql/.chef-.profile20251030-28-12opphr.profile	2025-10-30 10:57:18.248598938 +0000[0m
     [37m@@ -1 +1,2 @@[0m
     [37m+PATH=/opt/gitlab/embedded/bin:/opt/gitlab/bin:$PATH[0m
     [32m- change mode from '' to '0600'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
 [0mRecipe: postgresql::enable[0m
   * directory[/var/opt/gitlab/postgresql] action create (up to date)
   * directory[/var/opt/gitlab/postgresql/data] action create
     [32m- create new directory /var/opt/gitlab/postgresql/data[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
 [0m  * directory[/var/log/gitlab/postgresql] action create
     [32m- create new directory /var/log/gitlab/postgresql[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
 [0m  * directory[/var/opt/gitlab/postgresql/data] action create (up to date)
   * link[/var/opt/gitlab/postgresql/data] action create (skipped due to not_if)
   * gitlab_sysctl[kernel.shmmax] action create
     * directory[create /etc/sysctl.d for kernel.shmmax] action create (skipped due to only_if)
     * file[create /opt/gitlab/embedded/etc/90-omnibus-gitlab-kernel.shmmax.conf kernel.shmmax] action create (skipped due to only_if)
     * link[/etc/sysctl.d/90-omnibus-gitlab-kernel.shmmax.conf] action create (skipped due to only_if)
     * execute[load sysctl conf kernel.shmmax] action nothing (skipped due to action :nothing)
      (up to date)
   * gitlab_sysctl[kernel.shmall] action create
     * directory[create /etc/sysctl.d for kernel.shmall] action create (skipped due to only_if)
     * file[create /opt/gitlab/embedded/etc/90-omnibus-gitlab-kernel.shmall.conf kernel.shmall] action create (skipped due to only_if)
     * link[/etc/sysctl.d/90-omnibus-gitlab-kernel.shmall.conf] action create (skipped due to only_if)
     * execute[load sysctl conf kernel.shmall] action nothing (skipped due to action :nothing)
      (up to date)
   * gitlab_sysctl[kernel.sem] action create
     * directory[create /etc/sysctl.d for kernel.sem] action create (skipped due to only_if)
     * file[create /opt/gitlab/embedded/etc/90-omnibus-gitlab-kernel.sem.conf kernel.sem] action create (skipped due to only_if)
     * link[/etc/sysctl.d/90-omnibus-gitlab-kernel.sem.conf] action create (skipped due to only_if)
     * execute[load sysctl conf kernel.sem] action nothing (skipped due to action :nothing)
      (up to date)
   * execute[/opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8] action run
     [execute] The files belonging to this database system will be owned by user "gitlab-psql".
               This user must also own the server process.
               
               The database cluster will be initialized with locale "C.UTF-8".
               The default text search configuration will be set to "english".
               
               Data page checksums are disabled.
               
               fixing permissions on existing directory /var/opt/gitlab/postgresql/data ... ok
               creating subdirectories ... ok
               selecting dynamic shared memory implementation ... posix
               selecting default max_connections ... 100
               selecting default shared_buffers ... 128MB
               selecting default time zone ... Etc/UTC
               creating configuration files ... ok
               running bootstrap script ... ok
               performing post-bootstrap initialization ... ok
               syncing data to disk ... ok
               
               
               Success. You can now start the database server using:
               
                   /opt/gitlab/embedded/bin/pg_ctl -D /var/opt/gitlab/postgresql/data -l logfile start
               
               initdb: warning: enabling "trust" authentication for local connections
               You can change this by editing pg_hba.conf or using the option -A, or
               --auth-local and --auth-host, the next time you run initdb.
     [32m- execute /opt/gitlab/embedded/bin/initdb -D /var/opt/gitlab/postgresql/data -E UTF8[0m
 [0m  * template[/opt/gitlab/etc/gitlab-psql-rc] action create
     [32m- create new file /opt/gitlab/etc/gitlab-psql-rc[0m
     [32m- update content in file /opt/gitlab/etc/gitlab-psql-rc from none to b7b8fc[0m
     [37m--- /opt/gitlab/etc/gitlab-psql-rc	2025-10-30 10:57:18.820998938 +0000[0m
     [37m+++ /opt/gitlab/etc/.chef-gitlab-psql-rc20251030-28-wvff2s	2025-10-30 10:57:18.820998938 +0000[0m
     [37m@@ -1,5 +1,10 @@[0m
     [37m+psql_user='gitlab-psql'[0m
     [37m+psql_group='gitlab-psql'[0m
     [37m+psql_host='/var/opt/gitlab/postgresql'[0m
     [37m+psql_port='5432'[0m
     [37m+psql_dbname='gitlabhq_production'[0m
     [32m- change owner from '' to 'root'[0m
     [32m- change group from '' to 'root'[0m
 [0m  * file[/var/opt/gitlab/postgresql/data/server.crt] action create
     [32m- create new file /var/opt/gitlab/postgresql/data/server.crt[0m
     [32m- update content in file /var/opt/gitlab/postgresql/data/server.crt from none to 63d3bb[0m
     [32m- suppressed sensitive resource[0m
     [32m- change mode from '' to '0400'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
     [32m- change group from '' to 'gitlab-psql'[0m
 [0m  * file[/var/opt/gitlab/postgresql/data/server.key] action create
     [32m- create new file /var/opt/gitlab/postgresql/data/server.key[0m
     [32m- update content in file /var/opt/gitlab/postgresql/data/server.key from none to ef109c[0m
     [32m- suppressed sensitive resource[0m
     [32m- change mode from '' to '0400'[0m
     [32m- change owner from '' to 'gitlab-psql'[0m
     [32m- change group from '' to 'gitlab-psql'[0m
 [0m  * postgresql_config[gitlab] action create
     * template[/var/opt/gitlab/postgresql/data/postgresql.conf] action create
       [32m- update content in file /var/opt/gitlab/postgresql/data/postgresql.conf from 1f372e to 290c4d[0m
       [37m--- /var/opt/gitlab/postgresql/data/postgresql.conf	2025-10-30 10:57:18.302598938 +0000[0m
       [37m+++ /var/opt/gitlab/postgresql/data/.chef-postgresql20251030-28-1k1018z.conf	2025-10-30 10:57:18.860598938 +0000[0m
       [37m@@ -1,3 +1,7 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m # -----------------------------[0m
       [37m # PostgreSQL configuration file[0m
       [37m # -----------------------------[0m
       [37m@@ -16,9 +20,9 @@[0m
       [37m #[0m
       [37m # This file is read on server startup and when the server receives a SIGHUP[0m
       [37m # signal.  If you edit the file on a running system, you have to SIGHUP the[0m
       [37m-# server for the changes to take effect, run "pg_ctl reload", or execute[0m
       [37m-# "SELECT pg_reload_conf()".  Some parameters, which are marked below,[0m
       [37m-# require a server shutdown and restart to take effect.[0m
       [37m+# server for the changes to take effect, or use "pg_ctl reload".  Some[0m
       [37m+# parameters, which are marked below, require a server shutdown and restart to[0m
       [37m+# take effect.[0m
       [37m #[0m
       [37m # Any parameter can also be given as a command-line option to the server, e.g.,[0m
       [37m # "postgres -c log_connections=on".  Some parameters can be changed at run time[0m
       [37m@@ -27,7 +31,7 @@[0m
       [37m # Memory units:  kB = kilobytes        Time units:  ms  = milliseconds[0m
       [37m #                MB = megabytes                     s   = seconds[0m
       [37m #                GB = gigabytes                     min = minutes[0m
       [37m-#                TB = terabytes                     h   = hours[0m
       [37m+#                                                   h   = hours[0m
       [37m #                                                   d   = days[0m
       [37m [0m
       [37m [0m
       [37m@@ -38,16 +42,16 @@[0m
       [37m # The default values of these variables are driven from the -D command-line[0m
       [37m # option or PGDATA environment variable, represented here as ConfigDir.[0m
       [37m [0m
       [37m-#data_directory = 'ConfigDir'		# use data in another directory[0m
       [37m-					# (change requires restart)[0m
       [37m-#hba_file = 'ConfigDir/pg_hba.conf'	# host-based authentication file[0m
       [37m-					# (change requires restart)[0m
       [37m-#ident_file = 'ConfigDir/pg_ident.conf'	# ident configuration file[0m
       [37m-					# (change requires restart)[0m
       [37m+#data_directory = 'ConfigDir'   # use data in another directory[0m
       [37m+          # (change requires restart)[0m
       [37m+#hba_file = 'ConfigDir/pg_hba.conf' # host-based authentication file[0m
       [37m+          # (change requires restart)[0m
       [37m+#ident_file = 'ConfigDir/pg_ident.conf' # ident configuration file[0m
       [37m+          # (change requires restart)[0m
       [37m [0m
       [37m # If external_pid_file is not explicitly set, no extra PID file is written.[0m
       [37m-#external_pid_file = ''			# write an extra PID file[0m
       [37m-					# (change requires restart)[0m
       [37m+#external_pid_file = '(none)'   # write an extra PID file[0m
       [37m+          # (change requires restart)[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m@@ -56,60 +60,57 @@[0m
       [37m [0m
       [37m # - Connection Settings -[0m
       [37m [0m
       [37m-#listen_addresses = 'localhost'		# what IP address(es) to listen on;[0m
       [37m-					# comma-separated list of addresses;[0m
       [37m-					# defaults to 'localhost'; use '*' for all[0m
       [37m-					# (change requires restart)[0m
       [37m-#port = 5432				# (change requires restart)[0m
       [37m-max_connections = 100			# (change requires restart)[0m
       [37m-#superuser_reserved_connections = 3	# (change requires restart)[0m
       [37m-#unix_socket_directories = '/tmp'	# comma-separated list of directories[0m
       [37m-					# (change requires restart)[0m
       [37m-#unix_socket_group = ''			# (change requires restart)[0m
       [37m-#unix_socket_permissions = 0777		# begin with 0 to use octal notation[0m
       [37m-					# (change requires restart)[0m
       [37m-#bonjour = off				# advertise server via Bonjour[0m
       [37m-					# (change requires restart)[0m
       [37m-#bonjour_name = ''			# defaults to the computer name[0m
       [37m-					# (change requires restart)[0m
       [37m+listen_addresses = ''    # what IP address(es) to listen on;[0m
       [37m+          # comma-separated list of addresses;[0m
       [37m+          # defaults to 'localhost', '*' = all[0m
       [37m+          # (change requires restart)[0m
       [37m+port = 5432        # (change requires restart)[0m
       [37m+max_connections = 200      # (change requires restart)[0m
       [37m+# Note:  Increasing max_connections costs ~400 bytes of shared memory per[0m
       [37m+# connection slot, plus lock space (see max_locks_per_transaction).[0m
       [37m+#superuser_reserved_connections = 3 # (change requires restart)[0m
       [37m+unix_socket_directories = '/var/opt/gitlab/postgresql'   # (change requires restart)[0m
       [37m+#unix_socket_group = ''     # (change requires restart)[0m
       [37m+#unix_socket_permissions = 0777   # begin with 0 to use octal notation[0m
       [37m+          # (change requires restart)[0m
       [37m+#bonjour = off        # advertise server via Bonjour[0m
       [37m+          # (change requires restart)[0m
       [37m+#bonjour_name = ''      # defaults to the computer name[0m
       [37m+          # (change requires restart)[0m
       [37m [0m
       [37m-# - TCP settings -[0m
       [37m-# see "man 7 tcp" for details[0m
       [37m+# - Security and Authentication -[0m
       [37m [0m
       [37m-#tcp_keepalives_idle = 0		# TCP_KEEPIDLE, in seconds;[0m
       [37m-					# 0 selects the system default[0m
       [37m-#tcp_keepalives_interval = 0		# TCP_KEEPINTVL, in seconds;[0m
       [37m-					# 0 selects the system default[0m
       [37m-#tcp_keepalives_count = 0		# TCP_KEEPCNT;[0m
       [37m-					# 0 selects the system default[0m
       [37m-#tcp_user_timeout = 0			# TCP_USER_TIMEOUT, in milliseconds;[0m
       [37m-					# 0 selects the system default[0m
       [37m+#authentication_timeout = 1min    # 1s-600s[0m
       [37m [0m
       [37m-# - Authentication -[0m
       [37m+# change requires restart[0m
       [37m+ssl = on[0m
       [37m [0m
       [37m-#authentication_timeout = 1min		# 1s-600s[0m
       [37m-#password_encryption = md5		# md5 or scram-sha-256[0m
       [37m+# allowed SSL ciphers[0m
       [37m+ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL:!SSLv3:!TLSv1'[0m
       [37m+[0m
       [37m+ssl_cert_file = 'server.crt'[0m
       [37m+ssl_key_file = 'server.key'[0m
       [37m+ssl_ca_file = '/opt/gitlab/embedded/ssl/certs/cacert.pem'[0m
       [37m+[0m
       [37m+[0m
       [37m+#ssl_renegotiation_limit = 512MB  # amount of data between renegotiations[0m
       [37m+#password_encryption = on[0m
       [37m #db_user_namespace = off[0m
       [37m [0m
       [37m-# GSSAPI using Kerberos[0m
       [37m-#krb_server_keyfile = 'FILE:${sysconfdir}/krb5.keytab'[0m
       [37m+# Kerberos and GSSAPI[0m
       [37m+#krb_server_keyfile = ''[0m
       [37m+#krb_srvname = 'postgres'   # (Kerberos only)[0m
       [37m #krb_caseins_users = off[0m
       [37m [0m
       [37m-# - SSL -[0m
       [37m+# - TCP Keepalives -[0m
       [37m+# see "man 7 tcp" for details[0m
       [37m [0m
       [37m-#ssl = off[0m
       [37m-#ssl_ca_file = ''[0m
       [37m-#ssl_cert_file = 'server.crt'[0m
       [37m-#ssl_crl_file = ''[0m
       [37m-#ssl_key_file = 'server.key'[0m
       [37m-#ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers[0m
       [37m-#ssl_prefer_server_ciphers = on[0m
       [37m-#ssl_ecdh_curve = 'prime256v1'[0m
       [37m-#ssl_min_protocol_version = 'TLSv1'[0m
       [37m-#ssl_max_protocol_version = ''[0m
       [37m-#ssl_dh_params_file = ''[0m
       [37m-#ssl_passphrase_command = ''[0m
       [37m-#ssl_passphrase_command_supports_reload = off[0m
       [37m+#tcp_keepalives_idle = 0    # TCP_KEEPIDLE, in seconds;[0m
       [37m+          # 0 selects the system default[0m
       [37m+#tcp_keepalives_interval = 0    # TCP_KEEPINTVL, in seconds;[0m
       [37m+          # 0 selects the system default[0m
       [37m+#tcp_keepalives_count = 0   # TCP_KEEPCNT;[0m
       [37m+          # 0 selects the system default[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m@@ -118,228 +119,105 @@[0m
       [37m [0m
       [37m # - Memory -[0m
       [37m [0m
       [37m-shared_buffers = 128MB			# min 128kB[0m
       [37m-					# (change requires restart)[0m
       [37m-#huge_pages = try			# on, off, or try[0m
       [37m-					# (change requires restart)[0m
       [37m-#temp_buffers = 8MB			# min 800kB[0m
       [37m-#max_prepared_transactions = 0		# zero disables the feature[0m
       [37m-					# (change requires restart)[0m
       [37m-# Caution: it is not advisable to set max_prepared_transactions nonzero unless[0m
       [37m-# you actively intend to use prepared transactions.[0m
       [37m-#work_mem = 4MB				# min 64kB[0m
       [37m-#maintenance_work_mem = 64MB		# min 1MB[0m
       [37m-#autovacuum_work_mem = -1		# min 1MB, or -1 to use maintenance_work_mem[0m
       [37m-#max_stack_depth = 2MB			# min 100kB[0m
       [37m-#shared_memory_type = mmap		# the default is the first option[0m
       [37m-					# supported by the operating system:[0m
       [37m-					#   mmap[0m
       [37m-					#   sysv[0m
       [37m-					#   windows[0m
       [37m-					# (change requires restart)[0m
       [37m-dynamic_shared_memory_type = posix	# the default is the first option[0m
       [37m-					# supported by the operating system:[0m
       [37m-					#   posix[0m
       [37m-					#   sysv[0m
       [37m-					#   windows[0m
       [37m-					#   mmap[0m
       [37m-					# (change requires restart)[0m
       [37m+shared_buffers = 1MB # min 128kB[0m
       [37m+          # (change requires restart)[0m
       [37m+#temp_buffers = 8MB     # min 800kB[0m
       [37m+#max_prepared_transactions = 0    # zero disables the feature[0m
       [37m+          # (change requires restart)[0m
       [37m+# Note:  Increasing max_prepared_transactions costs ~600 bytes of shared memory[0m
       [37m+# per transaction slot, plus lock space (see max_locks_per_transaction).[0m
       [37m+# It is not advisable to set max_prepared_transactions nonzero unless you[0m
       [37m+# actively intend to use prepared transactions.[0m
       [37m+#max_stack_depth = 2MB      # min 100kB[0m
       [37m [0m
       [37m-# - Disk -[0m
       [37m+# - Kernel Resource Usage -[0m
       [37m [0m
       [37m-#temp_file_limit = -1			# limits per-process temp file space[0m
       [37m-					# in kB, or -1 for no limit[0m
       [37m+#max_files_per_process = 1000   # min 25[0m
       [37m+          # (change requires restart)[0m
       [37m+shared_preload_libraries = ''    # (change requires restart)[0m
       [37m [0m
       [37m-# - Kernel Resources -[0m
       [37m-[0m
       [37m-#max_files_per_process = 1000		# min 25[0m
       [37m-					# (change requires restart)[0m
       [37m-[0m
       [37m # - Cost-Based Vacuum Delay -[0m
       [37m [0m
       [37m-#vacuum_cost_delay = 0			# 0-100 milliseconds (0 disables)[0m
       [37m-#vacuum_cost_page_hit = 1		# 0-10000 credits[0m
       [37m-#vacuum_cost_page_miss = 10		# 0-10000 credits[0m
       [37m-#vacuum_cost_page_dirty = 20		# 0-10000 credits[0m
       [37m-#vacuum_cost_limit = 200		# 1-10000 credits[0m
       [37m+#vacuum_cost_delay = 0ms    # 0-100 milliseconds[0m
       [37m+#vacuum_cost_page_hit = 1   # 0-10000 credits[0m
       [37m+#vacuum_cost_page_miss = 10   # 0-10000 credits[0m
       [37m+#vacuum_cost_page_dirty = 20    # 0-10000 credits[0m
       [37m+#vacuum_cost_limit = 200    # 1-10000 credits[0m
       [37m [0m
       [37m # - Background Writer -[0m
       [37m [0m
       [37m-#bgwriter_delay = 200ms			# 10-10000ms between rounds[0m
       [37m-#bgwriter_lru_maxpages = 100		# max buffers written/round, 0 disables[0m
       [37m-#bgwriter_lru_multiplier = 2.0		# 0-10.0 multiplier on buffers scanned/round[0m
       [37m-#bgwriter_flush_after = 512kB		# measured in pages, 0 disables[0m
       [37m+#bgwriter_delay = 200ms     # 10-10000ms between rounds[0m
       [37m+#bgwriter_lru_maxpages = 100    # 0-1000 max buffers written/round[0m
       [37m+#bgwriter_lru_multiplier = 2.0    # 0-10.0 multipler on buffers scanned/round[0m
       [37m [0m
       [37m # - Asynchronous Behavior -[0m
       [37m [0m
       [37m-#effective_io_concurrency = 1		# 1-1000; 0 disables prefetching[0m
       [37m-#max_worker_processes = 8		# (change requires restart)[0m
       [37m-#max_parallel_maintenance_workers = 2	# taken from max_parallel_workers[0m
       [37m-#max_parallel_workers_per_gather = 2	# taken from max_parallel_workers[0m
       [37m-#parallel_leader_participation = on[0m
       [37m-#max_parallel_workers = 8		# maximum number of max_worker_processes that[0m
       [37m-					# can be used in parallel operations[0m
       [37m-#old_snapshot_threshold = -1		# 1min-60d; -1 disables; 0 is immediate[0m
       [37m-					# (change requires restart)[0m
       [37m-#backend_flush_after = 0		# measured in pages, 0 disables[0m
       [37m+#effective_io_concurrency = 1   # 1-1000. 0 disables prefetching[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# WRITE-AHEAD LOG[0m
       [37m+# WRITE AHEAD LOG[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m # - Settings -[0m
       [37m [0m
       [37m-#wal_level = replica			# minimal, replica, or logical[0m
       [37m-					# (change requires restart)[0m
       [37m-#fsync = on				# flush data to disk for crash safety[0m
       [37m-					# (turning this off can cause[0m
       [37m-					# unrecoverable data corruption)[0m
       [37m-#synchronous_commit = on		# synchronization level;[0m
       [37m-					# off, local, remote_write, remote_apply, or on[0m
       [37m-#wal_sync_method = fsync		# the default is the first option[0m
       [37m-					# supported by the operating system:[0m
       [37m-					#   open_datasync[0m
       [37m-					#   fdatasync (default on Linux)[0m
       [37m-					#   fsync[0m
       [37m-					#   fsync_writethrough[0m
       [37m-					#   open_sync[0m
       [37m-#full_page_writes = on			# recover from partial page writes[0m
       [37m-#wal_compression = off			# enable compression of full-page writes[0m
       [37m-#wal_log_hints = off			# also do full page writes of non-critical updates[0m
       [37m-					# (change requires restart)[0m
       [37m-#wal_init_zero = on			# zero-fill new WAL files[0m
       [37m-#wal_recycle = on			# recycle WAL files[0m
       [37m-#wal_buffers = -1			# min 32kB, -1 sets based on shared_buffers[0m
       [37m-					# (change requires restart)[0m
       [37m-#wal_writer_delay = 200ms		# 1-10000 milliseconds[0m
       [37m-#wal_writer_flush_after = 1MB		# measured in pages, 0 disables[0m
       [37m+wal_level = minimal[0m
       [37m+wal_log_hints = off      # also do full page writes of non-critical updates[0m
       [37m+          # (change requires restart)[0m
       [37m+#fsync = on       # turns forced synchronization on or off[0m
       [37m+#wal_sync_method = fsync    # the default is the first option[0m
       [37m+          # supported by the operating system:[0m
       [37m+          #   open_datasync[0m
       [37m+          #   fdatasync (default on Linux)[0m
       [37m+          #   fsync[0m
       [37m+          #   fsync_writethrough[0m
       [37m+          #   open_sync[0m
       [37m+#full_page_writes = on      # recover from partial page writes[0m
       [37m+wal_buffers = -1 # -1     # min 32kB, -1 sets based on shared_buffers[0m
       [37m+          # (change requires restart)[0m
       [37m+#wal_writer_delay = 200ms   # 1-10000 milliseconds[0m
       [37m [0m
       [37m-#commit_delay = 0			# range 0-100000, in microseconds[0m
       [37m-#commit_siblings = 5			# range 1-1000[0m
       [37m+#commit_delay = 0     # range 0-100000, in microseconds[0m
       [37m+#commit_siblings = 5      # range 1-1000[0m
       [37m [0m
       [37m-# - Checkpoints -[0m
       [37m-[0m
       [37m-#checkpoint_timeout = 5min		# range 30s-1d[0m
       [37m-max_wal_size = 1GB[0m
       [37m min_wal_size = 80MB[0m
       [37m-#checkpoint_completion_target = 0.5	# checkpoint target duration, 0.0 - 1.0[0m
       [37m-#checkpoint_flush_after = 256kB		# measured in pages, 0 disables[0m
       [37m-#checkpoint_warning = 30s		# 0 disables[0m
       [37m+max_wal_size = 1GB[0m
       [37m [0m
       [37m-# - Archiving -[0m
       [37m+# The number of replication slots to reserve.[0m
       [37m+max_replication_slots = 0[0m
       [37m [0m
       [37m-#archive_mode = off		# enables archiving; off, on, or always[0m
       [37m-				# (change requires restart)[0m
       [37m-#archive_command = ''		# command to use to archive a logfile segment[0m
       [37m-				# placeholders: %p = path of file to archive[0m
       [37m-				#               %f = file name only[0m
       [37m-				# e.g. 'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f'[0m
       [37m-#archive_timeout = 0		# force a logfile segment switch after this[0m
       [37m-				# number of seconds; 0 disables[0m
       [37m [0m
       [37m-# - Archive Recovery -[0m
       [37m+# - Archiving -[0m
       [37m [0m
       [37m-# These are only used in recovery mode.[0m
       [37m+archive_mode = off   # allows archiving to be done[0m
       [37m+        # (change requires restart, also requires 'wal_level' of 'hot_standby' OR 'replica')[0m
       [37m [0m
       [37m-#restore_command = ''		# command to use to restore an archived logfile segment[0m
       [37m-				# placeholders: %p = path of file to restore[0m
       [37m-				#               %f = file name only[0m
       [37m-				# e.g. 'cp /mnt/server/archivedir/%f %p'[0m
       [37m-				# (change requires restart)[0m
       [37m-#archive_cleanup_command = ''	# command to execute at every restartpoint[0m
       [37m-#recovery_end_command = ''	# command to execute at completion of recovery[0m
       [37m-[0m
       [37m-# - Recovery Target -[0m
       [37m-[0m
       [37m-# Set these only when performing a targeted recovery.[0m
       [37m-[0m
       [37m-#recovery_target = ''		# 'immediate' to end recovery as soon as a[0m
       [37m-                                # consistent state is reached[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_name = ''	# the named restore point to which recovery will proceed[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_time = ''	# the time stamp up to which recovery will proceed[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_xid = ''	# the transaction ID up to which recovery will proceed[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_lsn = ''	# the WAL LSN up to which recovery will proceed[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_inclusive = on # Specifies whether to stop:[0m
       [37m-				# just after the specified recovery target (on)[0m
       [37m-				# just before the recovery target (off)[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_timeline = 'latest'	# 'current', 'latest', or timeline ID[0m
       [37m-				# (change requires restart)[0m
       [37m-#recovery_target_action = 'pause'	# 'pause', 'promote', 'shutdown'[0m
       [37m-				# (change requires restart)[0m
       [37m-[0m
       [37m-[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m # REPLICATION[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-# - Sending Servers -[0m
       [37m-[0m
       [37m-# Set these on the master and on any standby that will send replication data.[0m
       [37m-[0m
       [37m-#max_wal_senders = 10		# max number of walsender processes[0m
       [37m-				# (change requires restart)[0m
       [37m-#wal_keep_segments = 0		# in logfile segments; 0 disables[0m
       [37m-#wal_sender_timeout = 60s	# in milliseconds; 0 disables[0m
       [37m-[0m
       [37m-#max_replication_slots = 10	# max number of replication slots[0m
       [37m-				# (change requires restart)[0m
       [37m-#track_commit_timestamp = off	# collect timestamp of transaction commit[0m
       [37m-				# (change requires restart)[0m
       [37m-[0m
       [37m # - Master Server -[0m
       [37m [0m
       [37m-# These settings are ignored on a standby server.[0m
       [37m+# These settings are ignored on a standby server[0m
       [37m [0m
       [37m-#synchronous_standby_names = ''	# standby servers that provide sync rep[0m
       [37m-				# method to choose sync standbys, number of sync standbys,[0m
       [37m-				# and comma-separated list of application_name[0m
       [37m-				# from standby(s); '*' = all[0m
       [37m-#vacuum_defer_cleanup_age = 0	# number of xacts by which cleanup is delayed[0m
       [37m+max_wal_senders = 0[0m
       [37m+        # (change requires restart)[0m
       [37m+#wal_sender_delay = 1s    # walsender cycle time, 1-10000 milliseconds[0m
       [37m+#vacuum_defer_cleanup_age = 0 # number of xacts by which cleanup is delayed[0m
       [37m+#replication_timeout = 60s  # in milliseconds; 0 disables[0m
       [37m+#synchronous_standby_names = '' # standby servers that provide sync rep[0m
       [37m+        # comma-separated list of application_name[0m
       [37m+        # from standby(s); '*' = all[0m
       [37m [0m
       [37m # - Standby Servers -[0m
       [37m [0m
       [37m-# These settings are ignored on a master server.[0m
       [37m+# These settings are ignored on a master server[0m
       [37m [0m
       [37m-#primary_conninfo = ''			# connection string to sending server[0m
       [37m-					# (change requires restart)[0m
       [37m-#primary_slot_name = ''			# replication slot on sending server[0m
       [37m-					# (change requires restart)[0m
       [37m-#promote_trigger_file = ''		# file name whose presence ends recovery[0m
       [37m-#hot_standby = on			# "off" disallows queries during recovery[0m
       [37m-					# (change requires restart)[0m
       [37m-#max_standby_archive_delay = 30s	# max delay before canceling queries[0m
       [37m-					# when reading WAL from archive;[0m
       [37m-					# -1 allows indefinite delay[0m
       [37m-#max_standby_streaming_delay = 30s	# max delay before canceling queries[0m
       [37m-					# when reading streaming WAL;[0m
       [37m-					# -1 allows indefinite delay[0m
       [37m-#wal_receiver_status_interval = 10s	# send replies at least this often[0m
       [37m-					# 0 disables[0m
       [37m-#hot_standby_feedback = off		# send info from standby to prevent[0m
       [37m-					# query conflicts[0m
       [37m-#wal_receiver_timeout = 60s		# time that receiver waits for[0m
       [37m-					# communication from master[0m
       [37m-					# in milliseconds; 0 disables[0m
       [37m-#wal_retrieve_retry_interval = 5s	# time to wait before retrying to[0m
       [37m-					# retrieve WAL after a failed attempt[0m
       [37m-#recovery_min_apply_delay = 0		# minimum delay for applying changes during recovery[0m
       [37m+hot_standby = off[0m
       [37m+          # (change requires restart)[0m
       [37m+#wal_receiver_status_interval = 10s # send replies at least this often[0m
       [37m+          # 0 disables[0m
       [37m [0m
       [37m-# - Subscribers -[0m
       [37m-[0m
       [37m-# These settings are ignored on a publisher.[0m
       [37m-[0m
       [37m-#max_logical_replication_workers = 4	# taken from max_worker_processes[0m
       [37m-					# (change requires restart)[0m
       [37m-#max_sync_workers_per_subscription = 2	# taken from max_logical_replication_workers[0m
       [37m-[0m
       [37m-[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m # QUERY TUNING[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m@@ -350,218 +228,126 @@[0m
       [37m #enable_hashagg = on[0m
       [37m #enable_hashjoin = on[0m
       [37m #enable_indexscan = on[0m
       [37m-#enable_indexonlyscan = on[0m
       [37m #enable_material = on[0m
       [37m #enable_mergejoin = on[0m
       [37m #enable_nestloop = on[0m
       [37m-#enable_parallel_append = on[0m
       [37m #enable_seqscan = on[0m
       [37m #enable_sort = on[0m
       [37m #enable_tidscan = on[0m
       [37m-#enable_partitionwise_join = off[0m
       [37m-#enable_partitionwise_aggregate = off[0m
       [37m-#enable_parallel_hash = on[0m
       [37m-#enable_partition_pruning = on[0m
       [37m [0m
       [37m # - Planner Cost Constants -[0m
       [37m [0m
       [37m-#seq_page_cost = 1.0			# measured on an arbitrary scale[0m
       [37m-#random_page_cost = 4.0			# same scale as above[0m
       [37m-#cpu_tuple_cost = 0.01			# same scale as above[0m
       [37m-#cpu_index_tuple_cost = 0.005		# same scale as above[0m
       [37m-#cpu_operator_cost = 0.0025		# same scale as above[0m
       [37m-#parallel_tuple_cost = 0.1		# same scale as above[0m
       [37m-#parallel_setup_cost = 1000.0	# same scale as above[0m
       [37m+#cpu_tuple_cost = 0.01      # same scale as above[0m
       [37m+#cpu_index_tuple_cost = 0.005   # same scale as above[0m
       [37m+#cpu_operator_cost = 0.0025   # same scale as above[0m
       [37m [0m
       [37m-#jit_above_cost = 100000		# perform JIT compilation if available[0m
       [37m-					# and query more expensive than this;[0m
       [37m-					# -1 disables[0m
       [37m-#jit_inline_above_cost = 500000		# inline small functions if query is[0m
       [37m-					# more expensive than this; -1 disables[0m
       [37m-#jit_optimize_above_cost = 500000	# use expensive JIT optimizations if[0m
       [37m-					# query is more expensive than this;[0m
       [37m-					# -1 disables[0m
       [37m-[0m
       [37m-#min_parallel_table_scan_size = 8MB[0m
       [37m-#min_parallel_index_scan_size = 512kB[0m
       [37m-#effective_cache_size = 4GB[0m
       [37m-[0m
       [37m # - Genetic Query Optimizer -[0m
       [37m [0m
       [37m #geqo = on[0m
       [37m #geqo_threshold = 12[0m
       [37m-#geqo_effort = 5			# range 1-10[0m
       [37m-#geqo_pool_size = 0			# selects default based on effort[0m
       [37m-#geqo_generations = 0			# selects default based on effort[0m
       [37m-#geqo_selection_bias = 2.0		# range 1.5-2.0[0m
       [37m-#geqo_seed = 0.0			# range 0.0-1.0[0m
       [37m+#geqo_effort = 5      # range 1-10[0m
       [37m+#geqo_pool_size = 0     # selects default based on effort[0m
       [37m+#geqo_generations = 0     # selects default based on effort[0m
       [37m+#geqo_selection_bias = 2.0    # range 1.5-2.0[0m
       [37m+#geqo_seed = 0.0      # range 0.0-1.0[0m
       [37m [0m
       [37m # - Other Planner Options -[0m
       [37m [0m
       [37m-#default_statistics_target = 100	# range 1-10000[0m
       [37m-#constraint_exclusion = partition	# on, off, or partition[0m
       [37m-#cursor_tuple_fraction = 0.1		# range 0.0-1.0[0m
       [37m+#default_statistics_target = 100  # range 1-10000[0m
       [37m+#constraint_exclusion = partition # on, off, or partition[0m
       [37m+#cursor_tuple_fraction = 0.1    # range 0.0-1.0[0m
       [37m #from_collapse_limit = 8[0m
       [37m-#join_collapse_limit = 8		# 1 disables collapsing of explicit[0m
       [37m-					# JOIN clauses[0m
       [37m-#force_parallel_mode = off[0m
       [37m-#jit = on				# allow JIT compilation[0m
       [37m-#plan_cache_mode = auto			# auto, force_generic_plan or[0m
       [37m-					# force_custom_plan[0m
       [37m+#join_collapse_limit = 8    # 1 disables collapsing of explicit[0m
       [37m+          # JOIN clauses[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# REPORTING AND LOGGING[0m
       [37m+# ERROR REPORTING AND LOGGING[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-# - Where to Log -[0m
       [37m [0m
       [37m-#log_destination = 'stderr'		# Valid values are combinations of[0m
       [37m-					# stderr, csvlog, syslog, and eventlog,[0m
       [37m-					# depending on platform.  csvlog[0m
       [37m-					# requires logging_collector to be on.[0m
       [37m-[0m
       [37m-# This is used when logging to stderr:[0m
       [37m-#logging_collector = off		# Enable capturing of stderr and csvlog[0m
       [37m-					# into log files. Required to be on for[0m
       [37m-					# csvlogs.[0m
       [37m-					# (change requires restart)[0m
       [37m-[0m
       [37m-# These are only used if logging_collector is on:[0m
       [37m-#log_directory = 'log'			# directory where log files are written,[0m
       [37m-					# can be absolute or relative to PGDATA[0m
       [37m-#log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'	# log file name pattern,[0m
       [37m-					# can include strftime() escapes[0m
       [37m-#log_file_mode = 0600			# creation mode for log files,[0m
       [37m-					# begin with 0 to use octal notation[0m
       [37m-#log_truncate_on_rotation = off		# If on, an existing log file with the[0m
       [37m-					# same name as the new log file will be[0m
       [37m-					# truncated rather than appended to.[0m
       [37m-					# But such truncation only occurs on[0m
       [37m-					# time-driven rotation, not on restarts[0m
       [37m-					# or size-driven rotation.  Default is[0m
       [37m-					# off, meaning append to existing files[0m
       [37m-					# in all cases.[0m
       [37m-#log_rotation_age = 1d			# Automatic rotation of logfiles will[0m
       [37m-					# happen after that time.  0 disables.[0m
       [37m-#log_rotation_size = 10MB		# Automatic rotation of logfiles will[0m
       [37m-					# happen after that much log output.[0m
       [37m-					# 0 disables.[0m
       [37m-[0m
       [37m # These are relevant when logging to syslog:[0m
       [37m #syslog_facility = 'LOCAL0'[0m
       [37m #syslog_ident = 'postgres'[0m
       [37m-#syslog_sequence_numbers = on[0m
       [37m-#syslog_split_messages = on[0m
       [37m [0m
       [37m-# This is only relevant when logging to eventlog (win32):[0m
       [37m-# (change requires restart)[0m
       [37m-#event_source = 'PostgreSQL'[0m
       [37m+#silent_mode = off      # Run server silently.[0m
       [37m+          # DO NOT USE without syslog or[0m
       [37m+          # logging_collector[0m
       [37m+          # (change requires restart)[0m
       [37m [0m
       [37m+[0m
       [37m # - When to Log -[0m
       [37m [0m
       [37m-#log_min_messages = warning		# values in order of decreasing detail:[0m
       [37m-					#   debug5[0m
       [37m-					#   debug4[0m
       [37m-					#   debug3[0m
       [37m-					#   debug2[0m
       [37m-					#   debug1[0m
       [37m-					#   info[0m
       [37m-					#   notice[0m
       [37m-					#   warning[0m
       [37m-					#   error[0m
       [37m-					#   log[0m
       [37m-					#   fatal[0m
       [37m-					#   panic[0m
       [37m+#client_min_messages = notice   # values in order of decreasing detail:[0m
       [37m+          #   debug5[0m
       [37m+          #   debug4[0m
       [37m+          #   debug3[0m
       [37m+          #   debug2[0m
       [37m+          #   debug1[0m
       [37m+          #   log[0m
       [37m+          #   notice[0m
       [37m+          #   warning[0m
       [37m+          #   error[0m
       [37m [0m
       [37m-#log_min_error_statement = error	# values in order of decreasing detail:[0m
       [37m-					#   debug5[0m
       [37m-					#   debug4[0m
       [37m-					#   debug3[0m
       [37m-					#   debug2[0m
       [37m-					#   debug1[0m
       [37m-					#   info[0m
       [37m-					#   notice[0m
       [37m-					#   warning[0m
       [37m-					#   error[0m
       [37m-					#   log[0m
       [37m-					#   fatal[0m
       [37m-					#   panic (effectively off)[0m
       [37m+#log_min_messages = warning   # values in order of decreasing detail:[0m
       [37m+          #   debug5[0m
       [37m+          #   debug4[0m
       [37m+          #   debug3[0m
       [37m+          #   debug2[0m
       [37m+          #   debug1[0m
       [37m+          #   info[0m
       [37m+          #   notice[0m
       [37m+          #   warning[0m
       [37m+          #   error[0m
       [37m+          #   log[0m
       [37m+          #   fatal[0m
       [37m+          #   panic[0m
       [37m [0m
       [37m-#log_min_duration_statement = -1	# -1 is disabled, 0 logs all statements[0m
       [37m-					# and their durations, > 0 logs only[0m
       [37m-					# statements running at least this number[0m
       [37m-					# of milliseconds[0m
       [37m+#log_min_error_statement = error  # values in order of decreasing detail:[0m
       [37m+          #   debug5[0m
       [37m+          #   debug4[0m
       [37m+          #   debug3[0m
       [37m+          #   debug2[0m
       [37m+          #   debug1[0m
       [37m+          #   info[0m
       [37m+          #   notice[0m
       [37m+          #   warning[0m
       [37m+          #   error[0m
       [37m+          #   log[0m
       [37m+          #   fatal[0m
       [37m+          #   panic (effectively off)[0m
       [37m [0m
       [37m-#log_transaction_sample_rate = 0.0	# Fraction of transactions whose statements[0m
       [37m-					# are logged regardless of their duration. 1.0 logs all[0m
       [37m-					# statements from all transactions, 0.0 never logs.[0m
       [37m-[0m
       [37m # - What to Log -[0m
       [37m [0m
       [37m #debug_print_parse = off[0m
       [37m #debug_print_rewritten = off[0m
       [37m #debug_print_plan = off[0m
       [37m #debug_pretty_print = on[0m
       [37m-#log_checkpoints = off[0m
       [37m #log_connections = off[0m
       [37m #log_disconnections = off[0m
       [37m #log_duration = off[0m
       [37m-#log_error_verbosity = default		# terse, default, or verbose messages[0m
       [37m+#log_error_verbosity = default    # terse, default, or verbose messages[0m
       [37m #log_hostname = off[0m
       [37m-#log_line_prefix = '%m [%p] '		# special values:[0m
       [37m-					#   %a = application name[0m
       [37m-					#   %u = user name[0m
       [37m-					#   %d = database name[0m
       [37m-					#   %r = remote host and port[0m
       [37m-					#   %h = remote host[0m
       [37m-					#   %p = process ID[0m
       [37m-					#   %t = timestamp without milliseconds[0m
       [37m-					#   %m = timestamp with milliseconds[0m
       [37m-					#   %n = timestamp with milliseconds (as a Unix epoch)[0m
       [37m-					#   %i = command tag[0m
       [37m-					#   %e = SQL state[0m
       [37m-					#   %c = session ID[0m
       [37m-					#   %l = session line number[0m
       [37m-					#   %s = session start timestamp[0m
       [37m-					#   %v = virtual transaction ID[0m
       [37m-					#   %x = transaction ID (0 if none)[0m
       [37m-					#   %q = stop here in non-session[0m
       [37m-					#        processes[0m
       [37m-					#   %% = '%'[0m
       [37m-					# e.g. '<%u%%%d> '[0m
       [37m-#log_lock_waits = off			# log lock waits >= deadlock_timeout[0m
       [37m-#log_statement = 'none'			# none, ddl, mod, all[0m
       [37m-#log_replication_commands = off[0m
       [37m-#log_temp_files = -1			# log temporary files equal or larger[0m
       [37m-					# than the specified size in kilobytes;[0m
       [37m-					# -1 disables, 0 logs all temp files[0m
       [37m-log_timezone = 'Etc/UTC'[0m
       [37m+#log_lock_waits = off     # log lock waits >= deadlock_timeout[0m
       [37m+#log_statement = 'none'     # none, ddl, mod, all[0m
       [37m+#log_timezone = '(defaults to server environment setting)'[0m
       [37m [0m
       [37m-#------------------------------------------------------------------------------[0m
       [37m-# PROCESS TITLE[0m
       [37m-#------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-#cluster_name = ''			# added to process titles if nonempty[0m
       [37m-					# (change requires restart)[0m
       [37m-#update_process_title = on[0m
       [37m-[0m
       [37m-[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# STATISTICS[0m
       [37m+# RUNTIME STATISTICS[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-# - Query and Index Statistics Collector -[0m
       [37m+# - Query/Index Statistics Collector -[0m
       [37m [0m
       [37m #track_activities = on[0m
       [37m #track_counts = on[0m
       [37m-#track_io_timing = off[0m
       [37m-#track_functions = none			# none, pl, all[0m
       [37m-#track_activity_query_size = 1024	# (change requires restart)[0m
       [37m+#track_functions = none     # none, pl, all[0m
       [37m+track_activity_query_size = 1024 # (change requires restart)[0m
       [37m+#update_process_title = on[0m
       [37m #stats_temp_directory = 'pg_stat_tmp'[0m
       [37m [0m
       [37m [0m
       [37m-# - Monitoring -[0m
       [37m+# - Statistics Monitoring -[0m
       [37m [0m
       [37m #log_parser_stats = off[0m
       [37m #log_planner_stats = off[0m
       [37m@@ -570,117 +356,53 @@[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# AUTOVACUUM[0m
       [37m+# AUTOVACUUM PARAMETERS[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-#autovacuum = on			# Enable autovacuum subprocess?  'on'[0m
       [37m-					# requires track_counts to also be on.[0m
       [37m-#log_autovacuum_min_duration = -1	# -1 disables, 0 logs all actions and[0m
       [37m-					# their durations, > 0 logs only[0m
       [37m-					# actions running at least this number[0m
       [37m-					# of milliseconds.[0m
       [37m-#autovacuum_max_workers = 3		# max number of autovacuum subprocesses[0m
       [37m-					# (change requires restart)[0m
       [37m-#autovacuum_naptime = 1min		# time between autovacuum runs[0m
       [37m-#autovacuum_vacuum_threshold = 50	# min number of row updates before[0m
       [37m-					# vacuum[0m
       [37m-#autovacuum_analyze_threshold = 50	# min number of row updates before[0m
       [37m-					# analyze[0m
       [37m-#autovacuum_vacuum_scale_factor = 0.2	# fraction of table size before vacuum[0m
       [37m-#autovacuum_analyze_scale_factor = 0.1	# fraction of table size before analyze[0m
       [37m-#autovacuum_freeze_max_age = 200000000	# maximum XID age before forced vacuum[0m
       [37m-					# (change requires restart)[0m
       [37m-#autovacuum_multixact_freeze_max_age = 400000000	# maximum multixact age[0m
       [37m-					# before forced vacuum[0m
       [37m-					# (change requires restart)[0m
       [37m-#autovacuum_vacuum_cost_delay = 2ms	# default vacuum cost delay for[0m
       [37m-					# autovacuum, in milliseconds;[0m
       [37m-					# -1 means use vacuum_cost_delay[0m
       [37m-#autovacuum_vacuum_cost_limit = -1	# default vacuum cost limit for[0m
       [37m-					# autovacuum, -1 means use[0m
       [37m-					# vacuum_cost_limit[0m
       [37m-[0m
       [37m-[0m
       [37m+autovacuum_max_workers = 3 # max number of autovacuum subprocesses[0m
       [37m+          # (change requires restart)[0m
       [37m+autovacuum_freeze_max_age = 200000000  # maximum XID age before forced vacuum[0m
       [37m+          # (change requires restart)[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m # CLIENT CONNECTION DEFAULTS[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m # - Statement Behavior -[0m
       [37m [0m
       [37m-#client_min_messages = notice		# values in order of decreasing detail:[0m
       [37m-					#   debug5[0m
       [37m-					#   debug4[0m
       [37m-					#   debug3[0m
       [37m-					#   debug2[0m
       [37m-					#   debug1[0m
       [37m-					#   log[0m
       [37m-					#   notice[0m
       [37m-					#   warning[0m
       [37m-					#   error[0m
       [37m-#search_path = '"$user", public'	# schema names[0m
       [37m-#row_security = on[0m
       [37m-#default_tablespace = ''		# a tablespace name, '' uses the default[0m
       [37m-#temp_tablespaces = ''			# a list of tablespace names, '' uses[0m
       [37m-					# only default tablespace[0m
       [37m-#default_table_access_method = 'heap'[0m
       [37m+#search_path = '"$user",public'   # schema names[0m
       [37m+#default_tablespace = ''    # a tablespace name, '' uses the default[0m
       [37m+#temp_tablespaces = ''      # a list of tablespace names, '' uses[0m
       [37m+          # only default tablespace[0m
       [37m #check_function_bodies = on[0m
       [37m #default_transaction_isolation = 'read committed'[0m
       [37m #default_transaction_read_only = off[0m
       [37m #default_transaction_deferrable = off[0m
       [37m #session_replication_role = 'origin'[0m
       [37m-#statement_timeout = 0			# in milliseconds, 0 is disabled[0m
       [37m-#lock_timeout = 0			# in milliseconds, 0 is disabled[0m
       [37m-#idle_in_transaction_session_timeout = 0	# in milliseconds, 0 is disabled[0m
       [37m #vacuum_freeze_min_age = 50000000[0m
       [37m #vacuum_freeze_table_age = 150000000[0m
       [37m-#vacuum_multixact_freeze_min_age = 5000000[0m
       [37m-#vacuum_multixact_freeze_table_age = 150000000[0m
       [37m-#vacuum_cleanup_index_scale_factor = 0.1	# fraction of total number of tuples[0m
       [37m-						# before index cleanup, 0 always performs[0m
       [37m-						# index cleanup[0m
       [37m-#bytea_output = 'hex'			# hex, escape[0m
       [37m+#bytea_output = 'hex'     # hex, escape[0m
       [37m #xmlbinary = 'base64'[0m
       [37m #xmloption = 'content'[0m
       [37m-#gin_fuzzy_search_limit = 0[0m
       [37m-#gin_pending_list_limit = 4MB[0m
       [37m [0m
       [37m # - Locale and Formatting -[0m
       [37m [0m
       [37m-datestyle = 'iso, mdy'[0m
       [37m #intervalstyle = 'postgres'[0m
       [37m-timezone = 'Etc/UTC'[0m
       [37m+#timezone = '(defaults to server environment setting)'[0m
       [37m #timezone_abbreviations = 'Default'     # Select the set of available time zone[0m
       [37m-					# abbreviations.  Currently, there are[0m
       [37m-					#   Default[0m
       [37m-					#   Australia (historical usage)[0m
       [37m-					#   India[0m
       [37m-					# You can create your own file in[0m
       [37m-					# share/timezonesets/.[0m
       [37m-#extra_float_digits = 1			# min -15, max 3; any value >0 actually[0m
       [37m-					# selects precise output mode[0m
       [37m-#client_encoding = sql_ascii		# actually, defaults to database[0m
       [37m-					# encoding[0m
       [37m+          # abbreviations.  Currently, there are[0m
       [37m+          #   Default[0m
       [37m+          #   Australia[0m
       [37m+          #   India[0m
       [37m+          # You can create your own file in[0m
       [37m+          # share/timezonesets/.[0m
       [37m+#extra_float_digits = 0     # min -15, max 3[0m
       [37m+#client_encoding = sql_ascii    # actually, defaults to database[0m
       [37m+          # encoding[0m
       [37m [0m
       [37m-# These settings are initialized by initdb, but they can be changed.[0m
       [37m-lc_messages = 'C.UTF-8'			# locale for system error message[0m
       [37m-					# strings[0m
       [37m-lc_monetary = 'C.UTF-8'			# locale for monetary formatting[0m
       [37m-lc_numeric = 'C.UTF-8'			# locale for number formatting[0m
       [37m-lc_time = 'C.UTF-8'				# locale for time formatting[0m
       [37m-[0m
       [37m-# default configuration for text search[0m
       [37m-default_text_search_config = 'pg_catalog.english'[0m
       [37m-[0m
       [37m-# - Shared Library Preloading -[0m
       [37m-[0m
       [37m-#shared_preload_libraries = ''	# (change requires restart)[0m
       [37m-#local_preload_libraries = ''[0m
       [37m-#session_preload_libraries = ''[0m
       [37m-#jit_provider = 'llvmjit'		# JIT library to use[0m
       [37m-[0m
       [37m # - Other Defaults -[0m
       [37m [0m
       [37m #dynamic_library_path = '$libdir'[0m
       [37m+#local_preload_libraries = ''[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m@@ -688,28 +410,27 @@[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m #deadlock_timeout = 1s[0m
       [37m-#max_locks_per_transaction = 64		# min 10[0m
       [37m-					# (change requires restart)[0m
       [37m-#max_pred_locks_per_transaction = 64	# min 10[0m
       [37m-					# (change requires restart)[0m
       [37m-#max_pred_locks_per_relation = -2	# negative values mean[0m
       [37m-					# (max_pred_locks_per_transaction[0m
       [37m-					#  / -max_pred_locks_per_relation) - 1[0m
       [37m-#max_pred_locks_per_page = 2            # min 0[0m
       [37m+max_locks_per_transaction = 128   # min 10[0m
       [37m+          # (change requires restart)[0m
       [37m+# Note:  Each lock table slot uses ~270 bytes of shared memory, and there are[0m
       [37m+# max_locks_per_transaction * (max_connections + max_prepared_transactions)[0m
       [37m+# lock table slots.[0m
       [37m+#max_pred_locks_per_transaction = 64  # min 10[0m
       [37m+          # (change requires restart)[0m
       [37m [0m
       [37m-[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# VERSION AND PLATFORM COMPATIBILITY[0m
       [37m+# VERSION/PLATFORM COMPATIBILITY[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m # - Previous PostgreSQL Versions -[0m
       [37m [0m
       [37m #array_nulls = on[0m
       [37m-#backslash_quote = safe_encoding	# on, off, or safe_encoding[0m
       [37m+#backslash_quote = safe_encoding  # on, off, or safe_encoding[0m
       [37m+#default_with_oids = off[0m
       [37m #escape_string_warning = on[0m
       [37m #lo_compat_privileges = off[0m
       [37m-#operator_precedence_warning = off[0m
       [37m #quote_all_identifiers = off[0m
       [37m+#sql_inheritance = on[0m
       [37m #standard_conforming_strings = on[0m
       [37m #synchronize_seqscans = on[0m
       [37m [0m
       [37m@@ -722,30 +443,15 @@[0m
       [37m # ERROR HANDLING[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-#exit_on_error = off			# terminate session on any error?[0m
       [37m-#restart_after_crash = on		# reinitialize after backend crash?[0m
       [37m-#data_sync_retry = off			# retry or panic on failure to fsync[0m
       [37m-					# data?[0m
       [37m-					# (change requires restart)[0m
       [37m+#exit_on_error = off        # terminate session on any error?[0m
       [37m+#restart_after_crash = on     # reinitialize after backend crash?[0m
       [37m [0m
       [37m [0m
       [37m #------------------------------------------------------------------------------[0m
       [37m-# CONFIG FILE INCLUDES[0m
       [37m-#------------------------------------------------------------------------------[0m
       [37m-[0m
       [37m-# These options allow settings to be loaded from files other than the[0m
       [37m-# default postgresql.conf.  Note that these are directives, not variable[0m
       [37m-# assignments, so they can usefully be given more than once.[0m
       [37m-[0m
       [37m-#include_dir = '...'			# include files ending in '.conf' from[0m
       [37m-					# a directory, e.g., 'conf.d'[0m
       [37m-#include_if_exists = '...'		# include file only if it exists[0m
       [37m-#include = '...'			# include file[0m
       [37m-[0m
       [37m-[0m
       [37m-#------------------------------------------------------------------------------[0m
       [37m # CUSTOMIZED OPTIONS[0m
       [37m #------------------------------------------------------------------------------[0m
       [37m [0m
       [37m-# Add settings for extensions here[0m
       [37m+#custom_variable_classes = ''   # list of custom variable class names[0m
       [37m+[0m
       [37m+include 'runtime.conf'[0m
       [32m- change mode from '0600' to '0644'[0m
 [0m    * template[/var/opt/gitlab/postgresql/data/runtime.conf] action create
       [32m- create new file /var/opt/gitlab/postgresql/data/runtime.conf[0m
       [32m- update content in file /var/opt/gitlab/postgresql/data/runtime.conf from none to 1e3c74[0m
       [37m--- /var/opt/gitlab/postgresql/data/runtime.conf	2025-10-30 10:57:18.903798938 +0000[0m
       [37m+++ /var/opt/gitlab/postgresql/data/.chef-runtime20251030-28-1x70tbp.conf	2025-10-30 10:57:18.903798938 +0000[0m
       [37m@@ -1,134 +1,268 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m+# Changing variables in this file should only require a reload of PostgreSQL[0m
       [37m+# As the gitlab-psql user, run:[0m
       [37m+# /opt/gitlab/embedded/bin/pg_ctl reload -D /var/opt/gitlab/postgresql/data[0m
       [37m+work_mem = 16MB				# min 64kB[0m
       [37m+maintenance_work_mem = 16MB # 16MB    # min 1MB[0m
       [37m+synchronous_commit = on # synchronization level; on, off, or local[0m
       [37m+synchronous_standby_names = ''[0m
       [37m+[0m
       [37m+# - Checkpoints -[0m
       [37m+min_wal_size = 80MB[0m
       [37m+max_wal_size = 1GB[0m
       [37m+[0m
       [37m+checkpoint_timeout = 5min		# range 30s-1h, default 5min[0m
       [37m+checkpoint_completion_target = 0.9	# checkpoint target duration, 0.0 - 1.0, default 0.5[0m
       [37m+checkpoint_warning = 30s		# 0 disables, default 30s[0m
       [37m+[0m
       [37m+# - Logging -[0m
       [37m+log_directory = '/var/log/gitlab/postgresql'[0m
       [37m+[0m
       [37m+# - Archiving -[0m
       [37m+archive_command = ''   # command to use to archive a logfile segment[0m
       [37m+archive_timeout = 0    # force a logfile segment switch after this[0m
       [37m+        # number of seconds; 0 disables[0m
       [37m+[0m
       [37m+# - Replication[0m
       [37m+wal_keep_segments = 10[0m
       [37m+[0m
       [37m+max_standby_archive_delay = 30s # max delay before canceling queries[0m
       [37m+          # when reading WAL from archive;[0m
       [37m+          # -1 allows indefinite delay[0m
       [37m+max_standby_streaming_delay = 30s # max delay before canceling queries[0m
       [37m+          # when reading streaming WAL;[0m
       [37m+          # -1 allows indefinite delay[0m
       [37m+[0m
       [37m+hot_standby_feedback = off   # send info from standby to prevent[0m
       [37m+          # query conflicts[0m
       [37m+[0m
       [37m+# - Planner Cost Constants -[0m
       [37m+#seq_page_cost = 1.0      # measured on an arbitrary scale[0m
       [37m+random_page_cost = 2.0     # same scale as above[0m
       [37m+[0m
       [37m+effective_cache_size = 3913MB # Default 128MB[0m
       [37m+[0m
       [37m+log_min_duration_statement = -1  # -1 is disabled, 0 logs all statements[0m
       [37m+          # and their durations, > 0 logs only[0m
       [37m+          # statements running at least this number[0m
       [37m+          # of milliseconds[0m
       [37m+[0m
       [37m+log_checkpoints = off[0m
       [37m+[0m
       [37m+log_line_prefix = '' # default '', special values:[0m
       [37m+          #   %a = application name[0m
       [37m+          #   %u = user name[0m
       [37m+          #   %d = database name[0m
       [37m+          #   %r = remote host and port[0m
       [37m+          #   %h = remote host[0m
       [37m+          #   %p = process ID[0m
       [37m+          #   %t = timestamp without milliseconds[0m
       [37m+          #   %m = timestamp with milliseconds[0m
       [37m+          #   %i = command tag[0m
       [37m+          #   %e = SQL state[0m
       [37m+          #   %c = session ID[0m
       [37m+          #   %l = session line number[0m
       [37m+          #   %s = session start timestamp[0m
       [37m+          #   %v = virtual transaction ID[0m
       [37m+          #   %x = transaction ID (0 if none)[0m
       [37m+          #   %q = stop here in non-session[0m
       [37m+          #        processes[0m
       [37m+          #   %% = '%'[0m
       [37m+[0m
       [37m+log_temp_files = -1      # log temporary files equal or larger[0m
       [37m+          # than the specified size in kilobytes;[0m
       [37m+          # -1 disables, 0 logs all temp files[0m
       [37m+[0m
       [37m+[0m
       [37m+# - Autovacuum parameters -[0m
       [37m+autovacuum = on # Enable autovacuum subprocess?  'on'[0m
       [37m+          # requires track_counts to also be on.[0m
       [37m+[0m
       [37m+log_autovacuum_min_duration = -1 # -1 disables, 0 logs all actions and[0m
       [37m+          # their durations, > 0 logs only[0m
       [37m+          # actions running at least this number[0m
       [37m+          # of milliseconds.[0m
       [37m+[0m
       [37m+autovacuum_naptime = 1min # time between autovacuum runs[0m
       [37m+autovacuum_vacuum_threshold = 50 # min number of row updates before[0m
       [37m+          # vacuum[0m
       [37m+autovacuum_analyze_threshold = 50 # min number of row updates before[0m
       [37m+          # analyze[0m
       [37m+autovacuum_vacuum_scale_factor = 0.02 # fraction of table size before vacuum[0m
       [37m+autovacuum_analyze_scale_factor = 0.01 # fraction of table size before analyze[0m
       [37m+autovacuum_vacuum_cost_delay = 20ms # default vacuum cost delay for[0m
       [37m+          # autovacuum, in milliseconds;[0m
       [37m+          # -1 means use vacuum_cost_delay[0m
       [37m+autovacuum_vacuum_cost_limit = -1 # default vacuum cost limit for[0m
       [37m+          # autovacuum, -1 means use[0m
       [37m+          # vacuum_cost_limit[0m
       [37m+[0m
       [37m+# Parameters for gathering statistics[0m
       [37m+default_statistics_target = 1000[0m
       [37m+[0m
       [37m+# - Client connection timeouts[0m
       [37m+statement_timeout = 60000[0m
       [37m+[0m
       [37m+idle_in_transaction_session_timeout = 60000[0m
       [37m+[0m
       [37m+# IO settings[0m
       [37m+effective_io_concurrency = 1[0m
       [37m+track_io_timing = 'off'[0m
       [37m+[0m
       [37m+# Parallel worker settings[0m
       [37m+max_worker_processes = 8[0m
       [37m+max_parallel_workers_per_gather = 0[0m
       [37m+[0m
       [37m+# Deadlock handling and logging[0m
       [37m+deadlock_timeout = '5s'[0m
       [37m+log_lock_waits = 1[0m
       [37m+[0m
       [37m+# - Locale and Formatting -[0m
       [37m+datestyle = 'iso, mdy'[0m
       [37m+[0m
       [37m+# These settings are initialized by initdb, but they can be changed.[0m
       [37m+lc_messages = 'C'     # locale for system error message[0m
       [37m+          # strings[0m
       [37m+lc_monetary = 'C'     # locale for monetary formatting[0m
       [37m+lc_numeric = 'C'      # locale for number formatting[0m
       [37m+lc_time = 'C'       # locale for time formatting[0m
       [37m+[0m
       [37m+# default configuration for text search[0m
       [37m+default_text_search_config = 'pg_catalog.english'[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'gitlab-psql'[0m
 [0m    * template[/var/opt/gitlab/postgresql/data/pg_hba.conf] action create
       [32m- update content in file /var/opt/gitlab/postgresql/data/pg_hba.conf from 98c8d4 to 40e348[0m
       [37m--- /var/opt/gitlab/postgresql/data/pg_hba.conf	2025-10-30 10:57:18.302598938 +0000[0m
       [37m+++ /var/opt/gitlab/postgresql/data/.chef-pg_hba20251030-28-zph0aa.conf	2025-10-30 10:57:18.914598938 +0000[0m
       [37m@@ -1,98 +1,74 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m # PostgreSQL Client Authentication Configuration File[0m
       [37m # ===================================================[0m
       [37m #[0m
       [37m-# Refer to the "Client Authentication" section in the PostgreSQL[0m
       [37m-# documentation for a complete description of this file.  A short[0m
       [37m-# synopsis follows.[0m
       [37m+# Refer to the "Client Authentication" section in the[0m
       [37m+# PostgreSQL documentation for a complete description[0m
       [37m+# of this file.  A short synopsis follows.[0m
       [37m #[0m
       [37m # This file controls: which hosts are allowed to connect, how clients[0m
       [37m # are authenticated, which PostgreSQL user names they can use, which[0m
       [37m # databases they can access.  Records take one of these forms:[0m
       [37m #[0m
       [37m-# local         DATABASE  USER  METHOD  [OPTIONS][0m
       [37m-# host          DATABASE  USER  ADDRESS  METHOD  [OPTIONS][0m
       [37m-# hostssl       DATABASE  USER  ADDRESS  METHOD  [OPTIONS][0m
       [37m-# hostnossl     DATABASE  USER  ADDRESS  METHOD  [OPTIONS][0m
       [37m-# hostgssenc    DATABASE  USER  ADDRESS  METHOD  [OPTIONS][0m
       [37m-# hostnogssenc  DATABASE  USER  ADDRESS  METHOD  [OPTIONS][0m
       [37m+# local      DATABASE  USER  METHOD  [OPTION][0m
       [37m+# host       DATABASE  USER  CIDR-ADDRESS  METHOD  [OPTION][0m
       [37m+# hostssl    DATABASE  USER  CIDR-ADDRESS  METHOD  [OPTION][0m
       [37m+# hostnossl  DATABASE  USER  CIDR-ADDRESS  METHOD  [OPTION][0m
       [37m #[0m
       [37m # (The uppercase items must be replaced by actual values.)[0m
       [37m #[0m
       [37m-# The first field is the connection type: "local" is a Unix-domain[0m
       [37m-# socket, "host" is either a plain or SSL-encrypted TCP/IP socket,[0m
       [37m-# "hostssl" is an SSL-encrypted TCP/IP socket, and "hostnossl" is a[0m
       [37m-# non-SSL TCP/IP socket.  Similarly, "hostgssenc" uses a[0m
       [37m-# GSSAPI-encrypted TCP/IP socket, while "hostnogssenc" uses a[0m
       [37m-# non-GSSAPI socket.[0m
       [37m+# The first field is the connection type: "local" is a Unix-domain socket,[0m
       [37m+# "host" is either a plain or SSL-encrypted TCP/IP socket, "hostssl" is an[0m
       [37m+# SSL-encrypted TCP/IP socket, and "hostnossl" is a plain TCP/IP socket.[0m
       [37m #[0m
       [37m-# DATABASE can be "all", "sameuser", "samerole", "replication", a[0m
       [37m-# database name, or a comma-separated list thereof. The "all"[0m
       [37m-# keyword does not match "replication". Access to replication[0m
       [37m-# must be enabled in a separate record (see example below).[0m
       [37m+# DATABASE can be "all", "sameuser", "samerole", a database name, or[0m
       [37m+# a comma-separated list thereof.[0m
       [37m #[0m
       [37m-# USER can be "all", a user name, a group name prefixed with "+", or a[0m
       [37m-# comma-separated list thereof.  In both the DATABASE and USER fields[0m
       [37m-# you can also write a file name prefixed with "@" to include names[0m
       [37m-# from a separate file.[0m
       [37m+# USER can be "all", a user name, a group name prefixed with "+", or[0m
       [37m+# a comma-separated list thereof.  In both the DATABASE and USER fields[0m
       [37m+# you can also write a file name prefixed with "@" to include names from[0m
       [37m+# a separate file.[0m
       [37m #[0m
       [37m-# ADDRESS specifies the set of hosts the record matches.  It can be a[0m
       [37m-# host name, or it is made up of an IP address and a CIDR mask that is[0m
       [37m-# an integer (between 0 and 32 (IPv4) or 128 (IPv6) inclusive) that[0m
       [37m-# specifies the number of significant bits in the mask.  A host name[0m
       [37m-# that starts with a dot (.) matches a suffix of the actual host name.[0m
       [37m-# Alternatively, you can write an IP address and netmask in separate[0m
       [37m-# columns to specify the set of hosts.  Instead of a CIDR-address, you[0m
       [37m-# can write "samehost" to match any of the server's own IP addresses,[0m
       [37m-# or "samenet" to match any address in any subnet that the server is[0m
       [37m-# directly connected to.[0m
       [37m+# CIDR-ADDRESS specifies the set of hosts the record matches.[0m
       [37m+# It is made up of an IP address and a CIDR mask that is an integer[0m
       [37m+# (between 0 and 32 (IPv4) or 128 (IPv6) inclusive) that specifies[0m
       [37m+# the number of significant bits in the mask.  Alternatively, you can write[0m
       [37m+# an IP address and netmask in separate columns to specify the set of hosts.[0m
       [37m #[0m
       [37m-# METHOD can be "trust", "reject", "md5", "password", "scram-sha-256",[0m
       [37m-# "gss", "sspi", "ident", "peer", "pam", "ldap", "radius" or "cert".[0m
       [37m-# Note that "password" sends passwords in clear text; "md5" or[0m
       [37m-# "scram-sha-256" are preferred since they send encrypted passwords.[0m
       [37m+# METHOD can be "trust", "reject", "md5", "crypt", "password", "gss", "sspi",[0m
       [37m+# "krb5", "ident", "pam" or "ldap".  Note that "password" sends passwords[0m
       [37m+# in clear text; "md5" is preferred since it sends encrypted passwords.[0m
       [37m #[0m
       [37m-# OPTIONS are a set of options for the authentication in the format[0m
       [37m-# NAME=VALUE.  The available options depend on the different[0m
       [37m-# authentication methods -- refer to the "Client Authentication"[0m
       [37m-# section in the documentation for a list of which options are[0m
       [37m-# available for which authentication methods.[0m
       [37m+# OPTION is the ident map or the name of the PAM service, depending on METHOD.[0m
       [37m #[0m
       [37m-# Database and user names containing spaces, commas, quotes and other[0m
       [37m-# special characters must be quoted.  Quoting one of the keywords[0m
       [37m-# "all", "sameuser", "samerole" or "replication" makes the name lose[0m
       [37m-# its special character, and just match a database or username with[0m
       [37m-# that name.[0m
       [37m+# Database and user names containing spaces, commas, quotes and other special[0m
       [37m+# characters must be quoted. Quoting one of the keywords "all", "sameuser" or[0m
       [37m+# "samerole" makes the name lose its special character, and just match a[0m
       [37m+# database or username with that name.[0m
       [37m #[0m
       [37m-# This file is read on server startup and when the server receives a[0m
       [37m-# SIGHUP signal.  If you edit the file on a running system, you have to[0m
       [37m-# SIGHUP the server for the changes to take effect, run "pg_ctl reload",[0m
       [37m-# or execute "SELECT pg_reload_conf()".[0m
       [37m-#[0m
       [37m+# This file is read on server startup and when the postmaster receives[0m
       [37m+# a SIGHUP signal.  If you edit the file on a running system, you have[0m
       [37m+# to SIGHUP the postmaster for the changes to take effect.  You can use[0m
       [37m+# "pg_ctl reload" to do that.[0m
       [37m+[0m
       [37m # Put your actual configuration here[0m
       [37m # ----------------------------------[0m
       [37m #[0m
       [37m # If you want to allow non-local connections, you need to add more[0m
       [37m-# "host" records.  In that case you will also need to make PostgreSQL[0m
       [37m-# listen on a non-local interface via the listen_addresses[0m
       [37m-# configuration parameter, or via the -i or -h command line switches.[0m
       [37m+# "host" records. In that case you will also need to make PostgreSQL listen[0m
       [37m+# on a non-local interface via the listen_addresses configuration parameter,[0m
       [37m+# or via the -i or -h command line switches.[0m
       [37m+#[0m
       [37m [0m
       [37m-# CAUTION: Configuring the system for local "trust" authentication[0m
       [37m-# allows any local user to connect as any PostgreSQL user, including[0m
       [37m-# the database superuser.  If you do not trust all your local users,[0m
       [37m-# use another authentication method.[0m
       [37m [0m
       [37m+# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD[0m
       [37m [0m
       [37m-# TYPE  DATABASE        USER            ADDRESS                 METHOD[0m
       [37m-[0m
       [37m # "local" is for Unix domain socket connections only[0m
       [37m-local   all             all                                     trust[0m
       [37m-# IPv4 local connections:[0m
       [37m-host    all             all             127.0.0.1/32            trust[0m
       [37m-# IPv6 local connections:[0m
       [37m-host    all             all             ::1/128                 trust[0m
       [37m-# Allow replication connections from localhost, by a user with the[0m
       [37m-# replication privilege.[0m
       [37m-local   replication     all                                     trust[0m
       [37m-host    replication     all             127.0.0.1/32            trust[0m
       [37m-host    replication     all             ::1/128                 trust[0m
       [37m+local   all         all                               peer map=gitlab[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [32m- change mode from '0600' to '0644'[0m
 [0m    * template[/var/opt/gitlab/postgresql/data/pg_ident.conf] action create
       [32m- update content in file /var/opt/gitlab/postgresql/data/pg_ident.conf from 297f46 to 5399a1[0m
       [37m--- /var/opt/gitlab/postgresql/data/pg_ident.conf	2025-10-30 10:57:18.302598938 +0000[0m
       [37m+++ /var/opt/gitlab/postgresql/data/.chef-pg_ident20251030-28-1lafqau.conf	2025-10-30 10:57:18.932598938 +0000[0m
       [37m@@ -40,4 +40,8 @@[0m
       [37m # ----------------------------------[0m
       [37m [0m
       [37m # MAPNAME       SYSTEM-USERNAME         PG-USERNAME[0m
       [37m+gitlab  git  gitlab[0m
       [37m+gitlab  mattermost  gitlab_mattermost[0m
       [37m+# Default to a 1-1 mapping between system usernames and Postgres usernames[0m
       [37m+gitlab  /^(.*)$  \1[0m
       [32m- change mode from '0600' to '0644'[0m
 [0m  
 [0m  * service[postgresql] action nothing (skipped due to action :nothing)
   * runit_service[postgresql] action enable
     * ruby_block[restart_service] action nothing (skipped due to action :nothing)
     * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
     * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
     * directory[/opt/gitlab/sv/postgresql] action create
       [32m- create new directory /opt/gitlab/sv/postgresql[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/postgresql/run] action create
       [32m- create new file /opt/gitlab/sv/postgresql/run[0m
       [32m- update content in file /opt/gitlab/sv/postgresql/run from none to dc5689[0m
       [37m--- /opt/gitlab/sv/postgresql/run	2025-10-30 10:57:18.950598938 +0000[0m
       [37m+++ /opt/gitlab/sv/postgresql/.chef-run20251030-28-1drwcvo	2025-10-30 10:57:18.950598938 +0000[0m
       [37m@@ -1,4 +1,8 @@[0m
       [37m+#!/bin/sh[0m
       [37m+exec 2>&1[0m
       [37m+[0m
       [37m+exec chpst -P -U gitlab-psql:gitlab-psql -u gitlab-psql:gitlab-psql /opt/gitlab/embedded/bin/postgres -D /var/opt/gitlab/postgresql/data[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/postgresql/log] action create
       [32m- create new directory /opt/gitlab/sv/postgresql/log[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/postgresql/log/main] action create
       [32m- create new directory /opt/gitlab/sv/postgresql/log/main[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/postgresql/log/config] action create
       [32m- create new file /opt/gitlab/sv/postgresql/log/config[0m
       [32m- update content in file /opt/gitlab/sv/postgresql/log/config from none to 623c00[0m
       [37m--- /opt/gitlab/sv/postgresql/log/config	2025-10-30 10:57:18.964998938 +0000[0m
       [37m+++ /opt/gitlab/sv/postgresql/log/.chef-config20251030-28-w8zcgi	2025-10-30 10:57:18.964998938 +0000[0m
       [37m@@ -1,6 +1,12 @@[0m
       [37m+s209715200[0m
       [37m+n30[0m
       [37m+t86400[0m
       [37m+!gzip[0m
       [37m+[0m
       [37m+[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[verify_chown_persisted_on_postgresql] action create
       [32m- execute the ruby block verify_chown_persisted_on_postgresql[0m
 [0m    * ruby_block[verify_chown_persisted_on_postgresql] action nothing (skipped due to action :nothing)
     * link[/var/log/gitlab/postgresql/config] action create
       [32m- create symlink at /var/log/gitlab/postgresql/config to /opt/gitlab/sv/postgresql/log/config[0m
 [0m    * template[/opt/gitlab/sv/postgresql/log/run] action create
       [32m- create new file /opt/gitlab/sv/postgresql/log/run[0m
       [32m- update content in file /opt/gitlab/sv/postgresql/log/run from none to ce742a[0m
       [37m--- /opt/gitlab/sv/postgresql/log/run	2025-10-30 10:57:18.975798938 +0000[0m
       [37m+++ /opt/gitlab/sv/postgresql/log/.chef-run20251030-28-1af7drw	2025-10-30 10:57:18.975798938 +0000[0m
       [37m@@ -1,2 +1,4 @@[0m
       [37m+#!/bin/sh[0m
       [37m+exec svlogd -tt /var/log/gitlab/postgresql[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/postgresql/env] action create
       [32m- create new directory /opt/gitlab/sv/postgresql/env[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[Delete unmanaged env files for postgresql service] action run (skipped due to only_if)
     * template[/opt/gitlab/sv/postgresql/check] action create (skipped due to only_if)
     * template[/opt/gitlab/sv/postgresql/finish] action create (skipped due to only_if)
     * directory[/opt/gitlab/sv/postgresql/control] action create
       [32m- create new directory /opt/gitlab/sv/postgresql/control[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/postgresql/control/t] action create
       [32m- create new file /opt/gitlab/sv/postgresql/control/t[0m
       [32m- update content in file /opt/gitlab/sv/postgresql/control/t from none to 05ae12[0m
       [37m--- /opt/gitlab/sv/postgresql/control/t	2025-10-30 10:57:18.986598938 +0000[0m
       [37m+++ /opt/gitlab/sv/postgresql/control/.chef-t20251030-28-1gdl398	2025-10-30 10:57:18.986598938 +0000[0m
       [37m@@ -1,3 +1,6 @@[0m
       [37m+#!/bin/sh[0m
       [37m+echo "received TERM from runit, sending INT instead to force quit connections"[0m
       [37m+/opt/gitlab/embedded/bin/sv interrupt postgresql[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[/opt/gitlab/init/postgresql] action create
       [32m- create symlink at /opt/gitlab/init/postgresql to /opt/gitlab/embedded/bin/sv[0m
 [0m    * file[/opt/gitlab/sv/postgresql/down] action nothing (skipped due to action :nothing)
     * ruby_block[restart_service] action run (skipped due to only_if)
     * ruby_block[reload_log_service] action create
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/postgresql] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/run] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/log] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/log/main] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_postgresql] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/postgresql/config] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for postgresql service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/postgresql/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/postgresql/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/postgresql/control] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/control/t] action create (up to date)
       * link[/opt/gitlab/init/postgresql] action create (up to date)
       * file[/opt/gitlab/sv/postgresql/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/postgresql] action create
         [32m- create symlink at /opt/gitlab/service/postgresql to /opt/gitlab/sv/postgresql[0m
 [0m      * ruby_block[wait for postgresql service socket] action run
         [32m- execute the ruby block wait for postgresql service socket[0m
 [0m      * directory[/opt/gitlab/service/postgresql/supervise] action create
         [32m- change mode from '0700' to '0755'[0m
 [0m      * directory[/opt/gitlab/service/postgresql/log/supervise] action create
         [32m- change mode from '0700' to '0755'[0m
 [0m      * file[/opt/gitlab/service/postgresql/supervise/ok] action touch
         [32m- create new file /opt/gitlab/service/postgresql/supervise/ok[0m
         [32m- change owner from '' to 'gitlab-psql'[0m
         [32m- change group from '' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/supervise/ok[0m
 [0m      * file[/opt/gitlab/service/postgresql/log/supervise/ok] action touch
         [32m- create new file /opt/gitlab/service/postgresql/log/supervise/ok[0m
         [32m- change owner from '' to 'gitlab-psql'[0m
         [32m- change group from '' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/log/supervise/ok[0m
 [0m      * file[/opt/gitlab/service/postgresql/supervise/status] action touch
         [32m- change owner from 'root' to 'gitlab-psql'[0m
         [32m- change group from 'root' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/supervise/status[0m
 [0m      * file[/opt/gitlab/service/postgresql/log/supervise/status] action touch
         [32m- change owner from 'root' to 'gitlab-psql'[0m
         [32m- change group from 'root' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/log/supervise/status[0m
 [0m      * file[/opt/gitlab/service/postgresql/supervise/control] action touch
         [32m- create new file /opt/gitlab/service/postgresql/supervise/control[0m
         [32m- change owner from '' to 'gitlab-psql'[0m
         [32m- change group from '' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/supervise/control[0m
 [0m      * file[/opt/gitlab/service/postgresql/log/supervise/control] action touch
         [32m- create new file /opt/gitlab/service/postgresql/log/supervise/control[0m
         [32m- change owner from '' to 'gitlab-psql'[0m
         [32m- change group from '' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/log/supervise/control[0m
 [0m      [32m- execute the ruby block reload_log_service[0m
 [0m    * ruby_block[restart_log_service] action run
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/postgresql] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/run] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/log] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/log/main] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_postgresql] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/postgresql/config] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/postgresql/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for postgresql service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/postgresql/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/postgresql/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/postgresql/control] action create (up to date)
       * template[/opt/gitlab/sv/postgresql/control/t] action create (up to date)
       * link[/opt/gitlab/init/postgresql] action create (up to date)
       * file[/opt/gitlab/sv/postgresql/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/postgresql] action create (up to date)
       * ruby_block[wait for postgresql service socket] action run (skipped due to not_if)
       * directory[/opt/gitlab/service/postgresql/supervise] action create (up to date)
       * directory[/opt/gitlab/service/postgresql/log/supervise] action create (up to date)
       * file[/opt/gitlab/service/postgresql/supervise/ok] action touch (skipped due to only_if)
       * file[/opt/gitlab/service/postgresql/log/supervise/ok] action touch (skipped due to only_if)
       * file[/opt/gitlab/service/postgresql/supervise/status] action touch (skipped due to only_if)
       * file[/opt/gitlab/service/postgresql/log/supervise/status] action touch
         [32m- change owner from 'root' to 'gitlab-psql'[0m
         [32m- change group from 'root' to 'gitlab-psql'[0m
         [32m- update utime on file /opt/gitlab/service/postgresql/log/supervise/status[0m
 [0m      * file[/opt/gitlab/service/postgresql/supervise/control] action touch (skipped due to only_if)
       * file[/opt/gitlab/service/postgresql/log/supervise/control] action touch (skipped due to only_if)
       [32m- execute the ruby block restart_log_service[0m
 [0m    * directory[/opt/gitlab/service] action create (up to date)
     * link[/opt/gitlab/service/postgresql] action create (up to date)
     * ruby_block[wait for postgresql service socket] action run (skipped due to not_if)
     * directory[/opt/gitlab/service/postgresql/supervise] action create (up to date)
     * directory[/opt/gitlab/service/postgresql/log/supervise] action create (up to date)
     * file[/opt/gitlab/service/postgresql/supervise/ok] action touch (skipped due to only_if)
     * file[/opt/gitlab/service/postgresql/log/supervise/ok] action touch (skipped due to only_if)
     * file[/opt/gitlab/service/postgresql/supervise/status] action touch (skipped due to only_if)
     * file[/opt/gitlab/service/postgresql/log/supervise/status] action touch
       [32m- change owner from 'root' to 'gitlab-psql'[0m
       [32m- change group from 'root' to 'gitlab-psql'[0m
       [32m- update utime on file /opt/gitlab/service/postgresql/log/supervise/status[0m
 [0m    * file[/opt/gitlab/service/postgresql/supervise/control] action touch (skipped due to only_if)
     * file[/opt/gitlab/service/postgresql/log/supervise/control] action touch (skipped due to only_if)
   
 [0m  * execute[/opt/gitlab/bin/gitlab-ctl start postgresql] action run
     [execute] ok: run: postgresql: (pid 450) 3s
     [32m- execute /opt/gitlab/bin/gitlab-ctl start postgresql[0m
 [0m  * database_objects[postgresql] action create
     * postgresql_user[gitlab] action create
       * execute[create gitlab postgresql user] action run
         [execute] CREATE ROLE
         [32m- execute /opt/gitlab/bin/gitlab-psql -d template1 -c "CREATE USER \"gitlab\""[0m
 [0m    
 [0m    * postgresql_user[gitlab_replicator] action create
       * execute[create gitlab_replicator postgresql user] action run
         [execute] CREATE ROLE
         [32m- execute /opt/gitlab/bin/gitlab-psql -d template1 -c "CREATE USER \"gitlab_replicator\""[0m
 [0m      * execute[set options for gitlab_replicator postgresql user] action run
         [execute] ALTER ROLE
         [32m- execute /opt/gitlab/bin/gitlab-psql -d template1 -c "ALTER USER \"gitlab_replicator\" replication"[0m
 [0m    
 [0m    * execute[create gitlabhq_production database] action run
       [32m- execute /opt/gitlab/embedded/bin/createdb --port 5432 -h /var/opt/gitlab/postgresql -O gitlab gitlabhq_production[0m
 [0m    * postgresql_extension[pg_trgm] action enable
       * postgresql_query[enable pg_trgm extension] action run
         * execute[enable pg_trgm extension (postgresql)] action run
           [execute] CREATE EXTENSION
           [32m- execute /opt/gitlab/bin/gitlab-psql -d gitlabhq_production -c "CREATE EXTENSION IF NOT EXISTS pg_trgm"[0m
 [0m      
 [0m    
 [0m    * postgresql_extension[btree_gist] action enable
       * postgresql_query[enable btree_gist extension] action run
         * execute[enable btree_gist extension (postgresql)] action run
           [execute] CREATE EXTENSION
           [32m- execute /opt/gitlab/bin/gitlab-psql -d gitlabhq_production -c "CREATE EXTENSION IF NOT EXISTS btree_gist"[0m
 [0m      
 [0m    
 [0m  
 [0m  * ruby_block[warn pending postgresql restart] action run (skipped due to only_if)
   * execute[reload postgresql] action nothing (skipped due to action :nothing)
   * execute[start postgresql] action nothing (skipped due to action :nothing)
 Recipe: gitlab-kas::disable[0m
   * service[gitlab-kas] action nothing (skipped due to action :nothing)
   * runit_service[gitlab-kas] action disable
     * ruby_block[disable gitlab-kas] action run (skipped due to only_if)
      (up to date)
 Recipe: gitlab::database_migrations[0m
   * ruby_block[check remote PG version] action nothing (skipped due to action :nothing)

STDERR:  /opt/gitlab/embedded/bin/runsvdir-start: line 24: ulimit: pending signals: cannot modify limit: Operation not permitted
 /opt/gitlab/embedded/bin/runsvdir-start: line 34: ulimit: max user processes: cannot modify limit: Operation not permitted
 /opt/gitlab/embedded/bin/runsvdir-start: line 37: /proc/sys/fs/file-max: Read-only file system
 /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/chef-15.14.0/lib/chef/provider/remote_file/local_file.rb:43: warning: URI.unescape is obsolete
 /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/chef-15.14.0/lib/chef/provider/remote_file/local_file.rb:43: warning: URI.unescape is obsolete




sudo docker inspect 716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb[
    {
        "Id": "716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb",
        "Created": "2025-10-30T10:56:40.618810453Z",
        "Path": "/assets/wrapper",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 28416,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-10-30T10:56:51.6469157Z",
            "FinishedAt": "0001-01-01T00:00:00Z",
            "Health": {
                "Status": "starting",
                "FailingStreak": 0,
                "Log": [
                    {
                        "Start": "2025-10-30T10:56:56.85292205Z",
                        "End": "2025-10-30T10:56:56.92981895Z",
                        "ExitCode": 7,
                        "Output": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed to connect to localhost port 80: Connection refused\n"
                    },
                    {
                        "Start": "2025-10-30T10:57:01.930650687Z",
                        "End": "2025-10-30T10:57:01.996594227Z",
                        "ExitCode": 7,
                        "Output": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed to connect to localhost port 80: Connection refused\n"
                    },
                    {
                        "Start": "2025-10-30T10:57:06.997179959Z",
                        "End": "2025-10-30T10:57:07.049744081Z",
                        "ExitCode": 7,
                        "Output": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed to connect to localhost port 80: Connection refused\n"
                    },
                    {
                        "Start": "2025-10-30T10:57:15.163882865Z",
                        "End": "2025-10-30T10:57:15.236114058Z",
                        "ExitCode": 7,
                        "Output": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed to connect to localhost port 80: Connection refused\n"
                    },
                    {
                        "Start": "2025-10-30T10:57:20.237663468Z",
                        "End": "2025-10-30T10:57:20.306011988Z",
                        "ExitCode": 7,
                        "Output": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (7) Failed to connect to localhost port 80: Connection refused\n"
                    }
                ]
            }
        },
        "Image": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
        "ResolvConfPath": "/var/lib/docker/containers/716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb/hostname",
        "HostsPath": "/var/lib/docker/containers/716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb/hosts",
        "LogPath": "/var/lib/docker/containers/716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb/716e31763402507c63484d875481faa4e904f54cc399cd60d06079d50a3782cb-json.log",
        "Name": "/gitlab",
        "RestartCount": 0,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": [
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config:/etc/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs:/var/log/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data:/var/opt/gitlab:rw"
            ],
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "22/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "2222"
                    }
                ],
                "80/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8080"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": [
                {
                    "Name": "nofile",
                    "Hard": 1048576,
                    "Soft": 1048576
                },
                {
                    "Name": "nproc",
                    "Hard": 1048576,
                    "Soft": 1048576
                }
            ],
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config",
                "Destination": "/etc/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs",
                "Destination": "/var/log/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data",
                "Destination": "/var/opt/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            }
        ],
        "Config": {
            "Hostname": "gitlab.local",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "22/tcp": {},
                "443/tcp": {},
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "GITLAB_OMNIBUS_CONFIG=external_url 'http://localhost:8080'\ngitlab_rails['gitlab_shell_ssh_port'] = 2222\npostgresql['enable'] = true\nredis['enable'] = true\ngitlab_rails['initial_root_password'] = 'ChangeMe!'\n",
                "PATH=/opt/gitlab/embedded/bin:/opt/gitlab/bin:/assets:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "LANG=C.UTF-8",
                "TERM=xterm"
            ],
            "Cmd": [
                "/assets/wrapper"
            ],
            "Healthcheck": {
                "Test": [
                    "CMD",
                    "curl",
                    "-f",
                    "http://localhost:80/-/health"
                ],
                "Interval": 30000000000,
                "Timeout": 10000000000,
                "StartPeriod": 300000000000,
                "Retries": 10
            },
            "Image": "gitlab/gitlab-ce:13.10.2-ce.0",
            "Volumes": {
                "/etc/gitlab": {},
                "/var/log/gitlab": {},
                "/var/opt/gitlab": {}
            },
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "053ed798921cbd364ea56f081ec4ca71929e726f98610d2bf632f4649bad158b",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "postgres:service_healthy:false,redis:service_healthy:false",
                "com.docker.compose.image": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool",
                "com.docker.compose.service": "gitlab",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "6cea8284468e80b1799e9190d245f63d7fb1e90db195e39a7ac51310c125c294",
            "SandboxKey": "/var/run/docker/netns/6cea8284468e",
            "Ports": {
                "22/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "2222"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "2222"
                    }
                ],
                "80/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "8080"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "8080"
                    }
                ]
            },
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "gitlab",
                        "gitlab"
                    ],
                    "MacAddress": "3a:7b:6b:f4:4d:c3",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "5e20d3d916fdd4b434e8820a8eed98826cebde9f7d62353cdd0ca23881c4b422",
                    "EndpointID": "e99abbfa8eb976009bec9056b7c760b767bb57fb1cb167f104ff5c4fd982e692",
                    "Gateway": "172.18.0.1",
                    "IPAddress": "172.18.0.4",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "gitlab",
                        "716e31763402",
                        "gitlab.local"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.docker.distribution.manifest.v2+json",
            "digest": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
            "size": 2197,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]