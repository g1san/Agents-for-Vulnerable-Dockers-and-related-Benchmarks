#1 [internal] load local bake definitions
#1 reading from stdin 721B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 507B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/gitlab/gitlab-ce:13.10.2-ce.0
#3 DONE 0.0s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/4] FROM docker.io/gitlab/gitlab-ce:13.10.2-ce.0@sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5
#5 resolve docker.io/gitlab/gitlab-ce:13.10.2-ce.0@sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5 0.0s done
#5 CACHED

#6 [internal] load build context
#6 transferring context: 305B done
#6 DONE 0.0s

#7 [2/4] RUN apt-get update && apt-get install -y --no-install-recommends gosu && rm -rf /var/lib/apt/lists/*
#7 0.355 Get:1 http://archive.ubuntu.com/ubuntu focal InRelease [265 kB]
#7 0.467 Get:2 http://security.ubuntu.com/ubuntu focal-security InRelease [128 kB]
#7 0.546 Get:3 http://archive.ubuntu.com/ubuntu focal-updates InRelease [128 kB]
#7 0.594 Get:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease [128 kB]
#7 0.662 Get:5 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [177 kB]
#7 0.718 Get:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [11.3 MB]
#7 1.172 Get:7 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [4432 kB]
#7 1.516 Get:8 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages [1275 kB]
#7 1.586 Get:9 http://archive.ubuntu.com/ubuntu focal/restricted amd64 Packages [33.4 kB]
#7 1.586 Get:10 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [1599 kB]
#7 1.685 Get:11 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [4998 kB]
#7 2.000 Get:12 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [4920 kB]
#7 2.322 Get:13 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [36.8 kB]
#7 2.404 Get:14 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [28.6 kB]
#7 2.493 Get:15 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 Packages [55.2 kB]
#7 3.265 Get:16 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [33.1 kB]
#7 3.272 Get:17 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [4801 kB]
#7 4.199 Get:18 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [1308 kB]
#7 4.511 Fetched 35.7 MB in 4s (8358 kB/s)
#7 4.511 Reading package lists...
#7 5.402 Reading package lists...
#7 6.222 Building dependency tree...
#7 6.377 Reading state information...
#7 6.589 The following NEW packages will be installed:
#7 6.590   gosu
#7 6.694 0 upgraded, 1 newly installed, 0 to remove and 84 not upgraded.
#7 6.694 Need to get 525 kB of archives.
#7 6.694 After this operation, 1653 kB of additional disk space will be used.
#7 6.694 Get:1 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 gosu amd64 1.10-1ubuntu0.20.04.2 [525 kB]
#7 7.082 debconf: delaying package configuration, since apt-utils is not installed
#7 7.106 Fetched 525 kB in 0s (1527 kB/s)
#7 7.130 Selecting previously unselected package gosu.
#7 7.130 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 91453 files and directories currently installed.)
#7 7.202 Preparing to unpack .../gosu_1.10-1ubuntu0.20.04.2_amd64.deb ...
#7 7.205 Unpacking gosu (1.10-1ubuntu0.20.04.2) ...
#7 7.271 Setting up gosu (1.10-1ubuntu0.20.04.2) ...
#7 DONE 7.3s

#8 [3/4] COPY init.sh /init.sh
#8 DONE 0.0s

#9 [4/4] RUN chmod +x /init.sh
#9 DONE 0.3s

#10 exporting to image
#10 exporting layers
#10 exporting layers 0.2s done
#10 exporting manifest sha256:81057dceb54a747826486579538f22fe7f5a7c09b1e9aa6d22e482f2b7d94880 0.0s done
#10 exporting config sha256:4e4f5941f6778196d75b2633d8d90fbbf66696c9bdb77f6a880e022f17c519ca 0.0s done
#10 exporting attestation manifest sha256:9cb03f49f3c35ba4f74ee3f3bd8db699b5df7f74bcc137e1a5f99bd2812b436f 0.0s done
#10 exporting manifest list sha256:c728fc37e642210617a46a88321d1931b6b3066b8f7aa0691efa8f578afc26d0 done
#10 naming to docker.io/library/custom_no_tool-gitlab:latest done
#10 unpacking to docker.io/library/custom_no_tool-gitlab:latest 0.1s done
#10 DONE 0.3s

#11 resolving provenance for metadata file
#11 DONE 0.0s
 custom_no_tool-gitlab  Built
 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_redis-data  Creating
 Volume custom_no_tool_redis-data  Created
 Volume custom_no_tool_postgres-data  Creating
 Volume custom_no_tool_postgres-data  Created
 Container postgres  Creating
 Container redis  Creating
 Container redis  Created
 Container postgres  Created
 Container gitlab  Creating
 Container gitlab  Created
 Container redis  Starting
 Container postgres  Starting
 Container redis  Started
 Container postgres  Started
 Container postgres  Waiting
 Container redis  Waiting
 Container redis  Healthy
 Container postgres  Healthy
 Container gitlab  Starting
 Container gitlab  Started


sudo docker logs 5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed --details
STDOUT: 
STDERR:  error: failed switching to "gitlab": unable to find user gitlab: no matching entries in passwd file




sudo docker inspect 5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed[
    {
        "Id": "5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed",
        "Created": "2025-10-30T10:53:46.643834113Z",
        "Path": "/init.sh",
        "Args": [],
        "State": {
            "Status": "exited",
            "Running": false,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 0,
            "ExitCode": 1,
            "Error": "",
            "StartedAt": "2025-10-30T10:54:00.540731795Z",
            "FinishedAt": "2025-10-30T10:54:00.723847399Z",
            "Health": {
                "Status": "unhealthy",
                "FailingStreak": 0,
                "Log": []
            }
        },
        "Image": "sha256:c728fc37e642210617a46a88321d1931b6b3066b8f7aa0691efa8f578afc26d0",
        "ResolvConfPath": "/var/lib/docker/containers/5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed/hostname",
        "HostsPath": "/var/lib/docker/containers/5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed/hosts",
        "LogPath": "/var/lib/docker/containers/5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed/5d4c1a1093c95d6bd158eaebdc11ea9b484cc8febaee0d3254d4c5c65bcd67ed-json.log",
        "Name": "/gitlab",
        "RestartCount": 0,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": [
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config:/etc/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs:/var/log/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data:/var/opt/gitlab:rw"
            ],
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "22/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "2222"
                    }
                ],
                "80/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8080"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": [
                {
                    "Name": "nofile",
                    "Hard": 1048576,
                    "Soft": 1048576
                },
                {
                    "Name": "nproc",
                    "Hard": 1048576,
                    "Soft": 1048576
                }
            ],
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs",
                "Destination": "/var/log/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data",
                "Destination": "/var/opt/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config",
                "Destination": "/etc/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            }
        ],
        "Config": {
            "Hostname": "gitlab.local",
            "Domainname": "",
            "User": "root",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "22/tcp": {},
                "443/tcp": {},
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "GITLAB_OMNIBUS_CONFIG=external_url 'http://localhost:8080'\ngitlab_rails['gitlab_shell_ssh_port'] = 2222\npostgresql['enable'] = false\nredis['enable'] = false\ngitlab_rails['initial_root_password'] = 'ChangeMe!'\n",
                "PATH=/opt/gitlab/embedded/bin:/opt/gitlab/bin:/assets:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "LANG=C.UTF-8",
                "TERM=xterm"
            ],
            "Cmd": null,
            "Healthcheck": {
                "Test": [
                    "CMD",
                    "curl",
                    "-f",
                    "http://localhost:80/-/health"
                ],
                "Interval": 30000000000,
                "Timeout": 10000000000,
                "StartPeriod": 120000000000,
                "Retries": 10
            },
            "Image": "custom_no_tool-gitlab",
            "Volumes": {
                "/etc/gitlab": {},
                "/var/log/gitlab": {},
                "/var/opt/gitlab": {}
            },
            "WorkingDir": "",
            "Entrypoint": [
                "/init.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "34567152f23d98cb9784f8f41d9759a48b1619cc0725a7177cad6a02e25758c1",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "postgres:service_healthy:false,redis:service_healthy:false",
                "com.docker.compose.image": "sha256:c728fc37e642210617a46a88321d1931b6b3066b8f7aa0691efa8f578afc26d0",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool",
                "com.docker.compose.service": "gitlab",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "",
            "SandboxKey": "",
            "Ports": {},
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "gitlab",
                        "gitlab"
                    ],
                    "MacAddress": "",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "07a025d99b89fc09f635c22432b6dec9b889d5f6e82bccc40f350ba9ed62d124",
                    "EndpointID": "",
                    "Gateway": "",
                    "IPAddress": "",
                    "IPPrefixLen": 0,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "gitlab",
                        "5d4c1a1093c9",
                        "gitlab.local"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.oci.image.manifest.v1+json",
            "digest": "sha256:81057dceb54a747826486579538f22fe7f5a7c09b1e9aa6d22e482f2b7d94880",
            "size": 2565,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]