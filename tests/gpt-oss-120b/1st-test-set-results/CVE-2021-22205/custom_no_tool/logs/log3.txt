 Network custom_no_tool_default  Creating
 Network custom_no_tool_default  Created
 Volume custom_no_tool_postgres-data  Creating
 Volume custom_no_tool_postgres-data  Created
 Volume custom_no_tool_redis-data  Creating
 Volume custom_no_tool_redis-data  Created
 Container redis  Creating
 Container postgres  Creating
 Container redis  Created
 Container postgres  Created
 Container gitlab  Creating
 Container gitlab  Created
 Container postgres  Starting
 Container redis  Starting
 Container redis  Started
 Container postgres  Started
 Container postgres  Waiting
 Container redis  Waiting
 Container redis  Healthy
 Container postgres  Healthy
 Container gitlab  Starting
 Container gitlab  Started


sudo docker logs c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14 --details
STDOUT:  Thank you for using GitLab Docker Image!
 Current version: gitlab-ce=13.10.2-ce.0
 
 Configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
 And restart this container to reload settings.
 To do it use docker exec:
 
   docker exec -it gitlab vim /etc/gitlab/gitlab.rb
   docker restart gitlab
 
 For a comprehensive list of configuration options please see the Omnibus GitLab readme
 https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
 
 If this container fails to start due to permission problems try to fix it by executing:
 
   docker exec -it gitlab update-permissions
   docker restart gitlab
 
 Cleaning stale PIDs & sockets
 Installing gitlab.rb config...
 Generating ssh_host_rsa_key...
 Generating public/private rsa key pair.
 Your identification has been saved in /etc/gitlab/ssh_host_rsa_key
 Your public key has been saved in /etc/gitlab/ssh_host_rsa_key.pub
 The key fingerprint is:
 SHA256:RzXrXBNAFNkWSR1Og/S7Hfl2zF+jWVgWB3Fca4NaNh8 root@gitlab.local
 The key's randomart image is:
 +---[RSA 3072]----+
 |           oOBBX=|
 |           ..+O+=|
 |          . .*oE.|
 |         . o+.+.B|
 |        S ..o  B |
 |         .    +o=|
 |             . +O|
 |              +.=|
 |             o  .|
 +----[SHA256]-----+
 Generating ssh_host_ecdsa_key...
 Generating public/private ecdsa key pair.
 Your identification has been saved in /etc/gitlab/ssh_host_ecdsa_key
 Your public key has been saved in /etc/gitlab/ssh_host_ecdsa_key.pub
 The key fingerprint is:
 SHA256:XslfK+j8VLJz4hCvUtJ7SnIqny6pwhjGmA3gtrmAGoU root@gitlab.local
 The key's randomart image is:
 +---[ECDSA 256]---+
 |                 |
 |.                |
 |o.               |
 |Eo.      . .     |
 |==o     S.= . o  |
 |B=.    ...o= = . |
 |+=.    .oo=.O o  |
 |o.o   + .O.=.=   |
 |   ... ==.=+o    |
 +----[SHA256]-----+
 Generating ssh_host_ed25519_key...
 Generating public/private ed25519 key pair.
 Your identification has been saved in /etc/gitlab/ssh_host_ed25519_key
 Your public key has been saved in /etc/gitlab/ssh_host_ed25519_key.pub
 The key fingerprint is:
 SHA256:vN1oP8jITIGdCeTUDWRgD20BaJw2GlL1eW3UHFTQuJM root@gitlab.local
 The key's randomart image is:
 +--[ED25519 256]--+
 | ..o.+B*=+.++*.  |
 |. . B=.=+o. + .  |
 | . = .+=ooo  o   |
 |  .   .o=.  E    |
 |        S.   .   |
 |        .o o     |
 |       +.o+..    |
 |        +.o..    |
 |            ..   |
 +----[SHA256]-----+
 Preparing services...
 Starting services...
 Configuring GitLab...
 Starting Chef Infra Client, version 15.14.0[0m
 resolving cookbooks for run list: ["gitlab"][0m
 Synchronizing Cookbooks:[0m
   - gitlab (0.0.1)[0m
   - package (0.1.0)[0m
   - logrotate (0.1.0)[0m
   - postgresql (0.1.0)[0m
   - redis (0.1.0)[0m
   - monitoring (0.1.0)[0m
   - registry (0.1.0)[0m
   - mattermost (0.1.0)[0m
   - consul (0.1.0)[0m
   - gitaly (0.1.0)[0m
   - praefect (0.1.0)[0m
   - gitlab-kas (0.1.0)[0m
   - gitlab-pages (0.1.0)[0m
   - letsencrypt (0.1.0)[0m
   - nginx (0.1.0)[0m
   - runit (5.1.3)[0m
   - acme (4.1.1)[0m
   - crond (0.1.0)[0m
 Installing Cookbook Gems:[0m
 Compiling Cookbooks...[0m
 Recipe: gitlab::default[0m
   * directory[/etc/gitlab] action create
     [32m- change mode from '0755' to '0775'[0m
 [0m  Converging 249 resources[0m
   * directory[/etc/gitlab] action create (up to date)
   * directory[Create /var/opt/gitlab] action create (up to date)
   * directory[Create /var/log/gitlab] action create (up to date)
   * directory[/opt/gitlab/embedded/etc] action create
     [32m- create new directory /opt/gitlab/embedded/etc[0m
     [32m- change mode from '' to '0755'[0m
     [32m- change owner from '' to 'root'[0m
     [32m- change group from '' to 'root'[0m
 [0m  * template[/opt/gitlab/embedded/etc/gitconfig] action create
     [32m- create new file /opt/gitlab/embedded/etc/gitconfig[0m
     [32m- update content in file /opt/gitlab/embedded/etc/gitconfig from none to 5a725a[0m
     [37m--- /opt/gitlab/embedded/etc/gitconfig	2025-10-30 10:49:48.220923014 +0000[0m
     [37m+++ /opt/gitlab/embedded/etc/.chef-gitconfig20251030-32-iy8ce2	2025-10-30 10:49:48.220923014 +0000[0m
     [37m@@ -1,16 +1,32 @@[0m
     [37m+[pack][0m
     [37m+  threads = 1[0m
     [37m+[receive][0m
     [37m+  fsckObjects = true[0m
     [37m+advertisePushOptions = true[0m
     [37m+[repack][0m
     [37m+  writeBitmaps = true[0m
     [37m+[transfer][0m
     [37m+  hideRefs=^refs/tmp/[0m
     [37m+hideRefs=^refs/keep-around/[0m
     [37m+hideRefs=^refs/remotes/[0m
     [37m+[core][0m
     [37m+  alternateRefsCommand="exit 0 #"[0m
     [37m+fsyncObjectFiles = true[0m
     [37m+[fetch][0m
     [37m+  writeCommitGraph = true[0m
     [32m- change mode from '' to '0755'[0m
 [0mRecipe: gitlab::web-server[0m
   * account[Webserver user and group] action create (up to date)
 Recipe: gitlab::users[0m
   * directory[/var/opt/gitlab] action create (up to date)
   * account[GitLab user and group] action create (up to date)
   * template[/var/opt/gitlab/.gitconfig] action create
     [32m- create new file /var/opt/gitlab/.gitconfig[0m
     [32m- update content in file /var/opt/gitlab/.gitconfig from none to a0993e[0m
     [37m--- /var/opt/gitlab/.gitconfig	2025-10-30 10:49:48.231723014 +0000[0m
     [37m+++ /var/opt/gitlab/.chef-.gitconfig20251030-32-274y6x.gitconfig	2025-10-30 10:49:48.231723014 +0000[0m
     [37m@@ -1,13 +1,26 @@[0m
     [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
     [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
     [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
     [37m+[0m
     [37m+[user][0m
     [37m+        name = GitLab[0m
     [37m+        email = gitlab@localhost[0m
     [37m+[core][0m
     [37m+        autocrlf = input[0m
     [37m+        alternateRefsCommand="exit 0 #"[0m
     [37m+        fsyncObjectFiles = true[0m
     [37m+[gc][0m
     [37m+        auto = 0[0m
     [32m- change mode from '' to '0644'[0m
     [32m- change owner from '' to 'git'[0m
     [32m- change group from '' to 'git'[0m
 [0m  * directory[/var/opt/gitlab/.bundle] action create
     [32m- create new directory /var/opt/gitlab/.bundle[0m
     [32m- change owner from '' to 'git'[0m
     [32m- change group from '' to 'git'[0m
 [0mRecipe: gitlab::gitlab-shell[0m
   * storage_directory[/var/opt/gitlab/.ssh] action create
     * ruby_block[directory resource: /var/opt/gitlab/.ssh] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/.ssh[0m
 [0m  
 [0m  * directory[/var/log/gitlab/gitlab-shell/] action create
     [32m- create new directory /var/log/gitlab/gitlab-shell/[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[/var/opt/gitlab/gitlab-shell] action create
     [32m- create new directory /var/opt/gitlab/gitlab-shell[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * templatesymlink[Create a config.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-shell/config.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-shell/config.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-shell/config.yml from none to 301fbf[0m
       [37m--- /var/opt/gitlab/gitlab-shell/config.yml	2025-10-30 10:49:48.433323014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-shell/.chef-config20251030-32-4biqw8.yml	2025-10-30 10:49:48.433323014 +0000[0m
       [37m@@ -1,45 +1,90 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m+# GitLab user. git by default[0m
       [37m+user: git[0m
       [37m+[0m
       [37m+# Url to gitlab instance. Used for api calls. May but need not end with a slash.[0m
       [37m+gitlab_url: "http+unix://%2Fvar%2Fopt%2Fgitlab%2Fgitlab-workhorse%2Fsockets%2Fsocket"[0m
       [37m+[0m
       [37m+gitlab_relative_url_root: [0m
       [37m+[0m
       [37m+http_settings:[0m
       [37m+  [0m
       [37m+#  user: someone[0m
       [37m+#  password: somepass[0m
       [37m+#  ca_file: /etc/ssl/cert.pem[0m
       [37m+#  ca_path: /etc/pki/tls/certs[0m
       [37m+#  self_signed_cert: false[0m
       [37m+[0m
       [37m+# File used as authorized_keys for gitlab user[0m
       [37m+auth_file: "/var/opt/gitlab/.ssh/authorized_keys"[0m
       [37m+[0m
       [37m+# SSL certificate dir where custom certificates can be placed[0m
       [37m+# https://golang.org/pkg/crypto/x509/[0m
       [37m+ssl_cert_dir: "/opt/gitlab/embedded/ssl/certs/"[0m
       [37m+[0m
       [37m+# Log file.[0m
       [37m+# Default is gitlab-shell.log in the root directory.[0m
       [37m+log_file: "/var/log/gitlab/gitlab-shell/gitlab-shell.log"[0m
       [37m+[0m
       [37m+# Log level. INFO by default[0m
       [37m+log_level: [0m
       [37m+[0m
       [37m+log_format: json[0m
       [37m+[0m
       [37m+# Audit usernames.[0m
       [37m+# Set to true to see real usernames in the logs instead of key ids, which is easier to follow, but[0m
       [37m+# incurs an extra API call on every gitlab-shell command.[0m
       [37m+audit_usernames: [0m
       [37m+[0m
       [37m+migration:[0m
       [37m+  {"enabled":true,"features":[]}[0m
       [37m+[0m
       [37m+[0m
       [32m- change mode from '' to '0640'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'git'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-shell/config.yml to /var/opt/gitlab/gitlab-shell/config.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-shell/config.yml to /var/opt/gitlab/gitlab-shell/config.yml[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-shell/.gitlab_shell_secret] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-shell/.gitlab_shell_secret to /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret[0m
 [0m  * file[/var/opt/gitlab/.ssh/authorized_keys] action create_if_missing
     [32m- create new file /var/opt/gitlab/.ssh/authorized_keys[0m
     [32m- change mode from '' to '0600'[0m
     [32m- change owner from '' to 'git'[0m
     [32m- change group from '' to 'git'[0m
 [0mRecipe: gitlab::gitlab-rails[0m
   * storage_directory[/var/opt/gitlab/git-data] action create
     * ruby_block[directory resource: /var/opt/gitlab/git-data] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/git-data[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/git-data/repositories] action create
     * ruby_block[directory resource: /var/opt/gitlab/git-data/repositories] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/git-data/repositories[0m
 [0m  
 [0mRecipe: gitlab::rails_pages_shared_path[0m
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/pages] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/pages] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/pages[0m
 [0m  
 [0mRecipe: gitlab::gitlab-rails[0m
   * storage_directory[/var/opt/gitlab/gitlab-rails/shared/artifacts] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/artifacts] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/artifacts[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/external-diffs] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/external-diffs] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/external-diffs[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/lfs-objects] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/lfs-objects] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/lfs-objects[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/packages] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/packages] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/packages[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/dependency_proxy] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/dependency_proxy] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/dependency_proxy[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/terraform_state] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/terraform_state] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/terraform_state[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/encrypted_settings] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/encrypted_settings] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/encrypted_settings[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/uploads] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/uploads] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/uploads[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-ci/builds] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-ci/builds] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-ci/builds[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/cache] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/cache] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/cache[0m
 [0m  
 [0m  * storage_directory[/var/opt/gitlab/gitlab-rails/shared/tmp] action create
     * ruby_block[directory resource: /var/opt/gitlab/gitlab-rails/shared/tmp] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/gitlab-rails/shared/tmp[0m
 [0m  
 [0m  * storage_directory[/opt/gitlab/embedded/service/gitlab-rails/public] action create (skipped due to only_if)
   * directory[create /var/opt/gitlab/gitlab-rails/etc] action create
     [32m- create new directory /var/opt/gitlab/gitlab-rails/etc[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /opt/gitlab/etc/gitlab-rails] action create
     [32m- create new directory /opt/gitlab/etc/gitlab-rails[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /var/opt/gitlab/gitlab-rails/working] action create
     [32m- create new directory /var/opt/gitlab/gitlab-rails/working[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /var/opt/gitlab/gitlab-rails/tmp] action create
     [32m- create new directory /var/opt/gitlab/gitlab-rails/tmp[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /var/opt/gitlab/gitlab-rails/upgrade-status] action create
     [32m- create new directory /var/opt/gitlab/gitlab-rails/upgrade-status[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[create /var/log/gitlab/gitlab-rails] action create
     [32m- create new directory /var/log/gitlab/gitlab-rails[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * storage_directory[/var/opt/gitlab/backups] action create
     * ruby_block[directory resource: /var/opt/gitlab/backups] action run
       [32m- execute the ruby block directory resource: /var/opt/gitlab/backups[0m
 [0m  
 [0m  * directory[/var/opt/gitlab/gitlab-rails] action create
     [32m- change owner from 'root' to 'git'[0m
 [0m  * directory[/var/opt/gitlab/gitlab-ci] action create
     [32m- change owner from 'root' to 'git'[0m
 [0m  * file[/var/opt/gitlab/gitlab-rails/etc/gitlab-registry.key] action create (skipped due to only_if)
   * template[/opt/gitlab/etc/gitlab-rails/gitlab-rails-rc] action create
     [32m- create new file /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc[0m
     [32m- update content in file /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc from none to 7b16c8[0m
     [37m--- /opt/gitlab/etc/gitlab-rails/gitlab-rails-rc	2025-10-30 10:49:51.262923014 +0000[0m
     [37m+++ /opt/gitlab/etc/gitlab-rails/.chef-gitlab-rails-rc20251030-32-1yj7t1e	2025-10-30 10:49:51.262923014 +0000[0m
     [37m@@ -1,5 +1,10 @@[0m
     [37m+gitlab_user='git'[0m
     [37m+gitlab_group='git'[0m
     [37m+registry_dir=''[0m
     [37m+registry_user='registry'[0m
     [37m+registry_group='registry'[0m
 [0m  * file[/opt/gitlab/embedded/service/gitlab-rails/.secret] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/secret] action delete (up to date)
   * templatesymlink[Create a database.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/database.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/database.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/database.yml from none to 35aaf2[0m
       [37m--- /var/opt/gitlab/gitlab-rails/etc/database.yml	2025-10-30 10:49:51.284523014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-rails/etc/.chef-database20251030-32-4fgkle.yml	2025-10-30 10:49:51.284523014 +0000[0m
       [37m@@ -1,30 +1,60 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m+production:[0m
       [37m+  adapter: postgresql[0m
       [37m+  encoding: unicode[0m
       [37m+  collation: [0m
       [37m+  database: gitlabhq_production[0m
       [37m+  username: "gitlab"[0m
       [37m+  password: [0m
       [37m+  host: "/var/opt/gitlab/postgresql"[0m
       [37m+  port: 5432[0m
       [37m+  socket: [0m
       [37m+  sslmode: [0m
       [37m+  sslcompression: 0[0m
       [37m+  sslrootcert: [0m
       [37m+  sslca: [0m
       [37m+  load_balancing: {"hosts":[]}[0m
       [37m+  prepared_statements: false[0m
       [37m+  statement_limit: 1000[0m
       [37m+  connect_timeout: [0m
       [37m+  keepalives: [0m
       [37m+  keepalives_idle: [0m
       [37m+  keepalives_interval: [0m
       [37m+  keepalives_count: [0m
       [37m+  tcp_user_timeout: [0m
       [37m+  application_name: [0m
       [37m+  variables:[0m
       [37m+    statement_timeout: [0m
       [32m- change mode from '' to '0640'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'git'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/database.yml to /var/opt/gitlab/gitlab-rails/etc/database.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/database.yml to /var/opt/gitlab/gitlab-rails/etc/database.yml[0m
 [0m  
 [0m  * templatesymlink[Create a secrets.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/secrets.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/secrets.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/secrets.yml from none to 0fdb9c[0m
       [32m- suppressed sensitive resource[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml to /var/opt/gitlab/gitlab-rails/etc/secrets.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml to /var/opt/gitlab/gitlab-rails/etc/secrets.yml[0m
 [0m  
 [0m  * templatesymlink[Create a resque.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/resque.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/resque.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/resque.yml from none to ec4232[0m
       [37m--- /var/opt/gitlab/gitlab-rails/etc/resque.yml	2025-10-30 10:49:51.309723014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-rails/etc/.chef-resque20251030-32-rpp7qc.yml	2025-10-30 10:49:51.309723014 +0000[0m
       [37m@@ -1,2 +1,4 @@[0m
       [37m+production:[0m
       [37m+  url: unix:/var/opt/gitlab/redis/redis.socket[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/resque.yml to /var/opt/gitlab/gitlab-rails/etc/resque.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/resque.yml to /var/opt/gitlab/gitlab-rails/etc/resque.yml[0m
 [0m  
 [0m  * templatesymlink[Create a cable.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/cable.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/cable.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/cable.yml from none to 551667[0m
       [37m--- /var/opt/gitlab/gitlab-rails/etc/cable.yml	2025-10-30 10:49:51.320523014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-rails/etc/.chef-cable20251030-32-1o8qt2h.yml	2025-10-30 10:49:51.320523014 +0000[0m
       [37m@@ -1,3 +1,6 @@[0m
       [37m+production:[0m
       [37m+  adapter: redis[0m
       [37m+  url: unix:/var/opt/gitlab/redis/redis.socket[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/cable.yml to /var/opt/gitlab/gitlab-rails/etc/cable.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/cable.yml to /var/opt/gitlab/gitlab-rails/etc/cable.yml[0m
 [0m  
 [0m  * templatesymlink[Create a redis.cache.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.cache.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.cache.yml] action delete (up to date)
   * templatesymlink[Create a redis.queues.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.queues.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.queues.yml] action delete (up to date)
   * templatesymlink[Create a redis.shared_state.yml and create a symlink to Rails root] action create (skipped due to not_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/config/redis.shared_state.yml] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/redis.shared_state.yml] action delete (up to date)
   * templatesymlink[Create a smtp_settings.rb and create a symlink to Rails root] action delete
     * file[/var/opt/gitlab/gitlab-rails/etc/smtp_settings.rb] action delete (up to date)
     * link[/opt/gitlab/embedded/service/gitlab-rails/config/initializers/smtp_settings.rb] action delete (up to date)
      (up to date)
   * templatesymlink[Create a gitlab.yml and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab.yml] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/gitlab.yml[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/gitlab.yml from none to 035ee5[0m
       [37m--- /var/opt/gitlab/gitlab-rails/etc/gitlab.yml	2025-10-30 10:49:51.381723014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-rails/etc/.chef-gitlab20251030-32-1fc0tzd.yml	2025-10-30 10:49:51.381723014 +0000[0m
       [37m@@ -1,782 +1,1564 @@[0m
       [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
       [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
       [37m+# and run `sudo gitlab-ctl reconfigure`.[0m
       [37m+[0m
       [37m+production: &base[0m
       [37m+  #[0m
       [37m+  # 1. GitLab app settings[0m
       [37m+  # ==========================[0m
       [37m+[0m
       [37m+  ## GitLab settings[0m
       [37m+  gitlab:[0m
       [37m+    ## Web server settings (note: host is the FQDN, do not include http://)[0m
       [37m+    host: localhost[0m
       [37m+    port: 8080[0m
       [37m+    https: false[0m
       [37m+[0m
       [37m+    # The maximum time unicorn/puma can spend on the request. This needs to be smaller than the worker timeout.[0m
       [37m+    # Default is 95% of the worker timeout[0m
       [37m+    max_request_duration_seconds: 57[0m
       [37m+[0m
       [37m+    # Uncommment this line below if your ssh host is different from HTTP/HTTPS one[0m
       [37m+    # (you'd obviously need to replace ssh.host_example.com with your own host).[0m
       [37m+    # Otherwise, ssh host will be set to the `host:` value above[0m
       [37m+    ssh_host: [0m
       [37m+[0m
       [37m+    # If your ssh user differs from the system user, you need to specify it here[0m
       [37m+    # Set it to an empty string to omit the username from any ssh url altogether[0m
       [37m+    ssh_user: [0m
       [37m+[0m
       [37m+    # WARNING: See config/application.rb under "Relative url support" for the list of[0m
       [37m+    # other files that need to be changed for relative url support[0m
       [37m+    relative_url_root: [0m
       [37m+[0m
       [37m+    # Trusted Proxies[0m
       [37m+    # Customize if you have GitLab behind a reverse proxy which is running on a different machine.[0m
       [37m+    # Add the IP address for your reverse proxy to the list, otherwise users will appear signed in from that address.[0m
       [37m+    trusted_proxies:[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [37m+    # Uncomment and customize if you can't use the default user to run GitLab (default: 'git')[0m
       [37m+    user: git[0m
       [37m+[0m
       [37m+    ## Date & Time settings[0m
       [37m+    time_zone: [0m
       [37m+[0m
       [37m+    ## Email settings[0m
       [37m+    # Uncomment and set to false if you need to disable email sending from GitLab (default: true)[0m
       [37m+    email_enabled: [0m
       [37m+    # Email address used in the "From" field in mails sent by GitLab[0m
       [37m+    email_from: gitlab@localhost[0m
       [37m+    email_display_name: [0m
       [37m+    email_reply_to: [0m
       [37m+    email_subject_suffix: [0m
       [37m+    # Email SMIME signing settings[0m
       [37m+    email_smime:[0m
       [37m+      enabled: false[0m
       [37m+      key_file: /etc/gitlab/ssl/gitlab_smime.key[0m
       [37m+      cert_file: /etc/gitlab/ssl/gitlab_smime.crt[0m
       [37m+      ca_certs_file: [0m
       [37m+[0m
       [37m+    # Email server smtp settings are in [a separate file](initializers/smtp_settings.rb.sample).[0m
       [37m+[0m
       [37m+    ## User settings[0m
       [37m+    default_can_create_group:   # default: true[0m
       [37m+    username_changing_enabled:  # default: true - User can change her username/namespace[0m
       [37m+    ## Default theme[0m
       [37m+    ##   1 - Graphite[0m
       [37m+    ##   2 - Charcoal[0m
       [37m+    ##   3 - Green[0m
       [37m+    ##   4 - Gray[0m
       [37m+    ##   5 - Violet[0m
       [37m+    ##   6 - Blue[0m
       [37m+    default_theme:  # default: 2[0m
       [37m+[0m
       [37m+    ## Automatic issue closing[0m
       [37m+    # If a commit message matches this regular expression, all issues referenced from the matched text will be closed.[0m
       [37m+    # This happens when the commit is pushed or merged into the default branch of a project.[0m
       [37m+    # When not specified the default issue_closing_pattern as specified below will be used.[0m
       [37m+    # Tip: you can test your closing pattern at http://rubular.com[0m
       [37m+    issue_closing_pattern: [0m
       [37m+[0m
       [37m+    ## Default project features settings[0m
       [37m+    default_projects_features:[0m
       [37m+      issues: [0m
       [37m+      merge_requests: [0m
       [37m+      wiki: [0m
       [37m+      snippets: [0m
       [37m+      builds: [0m
       [37m+      container_registry: [0m
       [37m+[0m
       [37m+    ## Webhook settings[0m
       [37m+    # Number of seconds to wait for HTTP response after sending webhook HTTP POST request (default: 10)[0m
       [37m+    webhook_timeout: [0m
       [37m+[0m
       [37m+    ### GraphQL Settings[0m
       [37m+    # Tells the rails application how long it has to complete a GraphQL request.[0m
       [37m+    # We suggest this value to be higher than the database timeout value[0m
       [37m+    # and lower than the worker timeout set in unicorn/puma. (default: 30)[0m
       [37m+    graphql_timeout: [0m
       [37m+[0m
       [37m+    ## Repository downloads directory[0m
       [37m+    # When a user clicks e.g. 'Download zip' on a project, a temporary zip file is created in the following directory.[0m
       [37m+    # The default is 'tmp/repositories' relative to the root of the Rails app.[0m
       [37m+    repository_downloads_path: [0m
       [37m+[0m
       [37m+    ## Impersonation settings[0m
       [37m+    impersonation_enabled: [0m
       [37m+[0m
       [37m+    ## Application settings cache expiry in seconds. (default: 60)[0m
       [37m+    application_settings_cache_seconds: [0m
       [37m+[0m
       [37m+    usage_ping_enabled: [0m
       [37m+[0m
       [37m+    # Seat link setting[0m
       [37m+    # When disabled the customer instances would not send seat link information via cron service everyday. (default: true)[0m
       [37m+    seat_link_enabled: true[0m
       [37m+[0m
       [37m+  ## Reply by email[0m
       [37m+  # Allow users to comment on issues and merge requests by replying to notification emails.[0m
       [37m+  # For documentation on how to set this up, see https://docs.gitlab.com/ee/administration/reply_by_email.html[0m
       [37m+  incoming_email:[0m
       [37m+    enabled: false[0m
       [37m+[0m
       [37m+    # The email address including the `%{key}` placeholder that will be replaced to reference the item being replied to.[0m
       [37m+    # The placeholder can be omitted but if present, it must appear in the "user" part of the address (before the `@`).[0m
       [37m+    address: [0m
       [37m+[0m
       [37m+    # Email account username[0m
       [37m+    # With third party providers, this is usually the full email address.[0m
       [37m+    # With self-hosted email servers, this is usually the user part of the email address.[0m
       [37m+    user: [0m
       [37m+    # Email account password[0m
       [37m+    password: [0m
       [37m+[0m
       [37m+    # IMAP server host[0m
       [37m+    host: [0m
       [37m+    # IMAP server port[0m
       [37m+    port: [0m
       [37m+    # Whether the IMAP server uses SSL[0m
       [37m+    ssl: [0m
       [37m+    # Whether the IMAP server uses StartTLS[0m
       [37m+    start_tls: [0m
       [37m+[0m
       [37m+    # The mailbox where incoming mail will end up. Usually "inbox".[0m
       [37m+    mailbox: "inbox"[0m
       [37m+    # The IDLE command timeout.[0m
       [37m+    idle_timeout: [0m
       [37m+    # file path of internal `mail_room` JSON logs[0m
       [37m+    log_path: /var/log/gitlab/mailroom/mail_room_json.log[0m
       [37m+[0m
       [37m+    # Whether to expunge (permanently remove) messages from the mailbox when they are deleted after delivery[0m
       [37m+    expunge_deleted: [0m
       [37m+[0m
       [37m+[0m
       [37m+  ## Service desk email[0m
       [37m+  # Allow users to use a separate service desk address[0m
       [37m+  # For documentation on how to set this up, see http://doc.gitlab.com/ce/administration/reply_by_email.html[0m
       [37m+  service_desk_email:[0m
       [37m+    enabled: false[0m
       [37m+[0m
       [37m+    # The email address including the `%{key}` placeholder that will be replaced to reference the item being replied to.[0m
       [37m+    # The placeholder can be omitted but if present, it must appear in the "user" part of the address (before the `@`).[0m
       [37m+    address: [0m
       [37m+[0m
       [37m+    # Email account username[0m
       [37m+    # With third party providers, this is usually the full email address.[0m
       [37m+    # With self-hosted email servers, this is usually the user part of the email address.[0m
       [37m+    user: [0m
       [37m+    # Email account password[0m
       [37m+    password: [0m
       [37m+[0m
       [37m+    # IMAP server host[0m
       [37m+    host: [0m
       [37m+    # IMAP server port[0m
       [37m+    port: [0m
       [37m+    # Whether the IMAP server uses SSL[0m
       [37m+    ssl: [0m
       [37m+    # Whether the IMAP server uses StartTLS[0m
       [37m+    start_tls: [0m
       [37m+[0m
       [37m+    # The mailbox where incoming mail will end up. Usually "inbox".[0m
       [37m+    mailbox: "inbox"[0m
       [37m+    # The IDLE command timeout.[0m
       [37m+    idle_timeout: [0m
       [37m+    # file path of internal `mail_room` JSON logs[0m
       [37m+    log_path: /var/log/gitlab/mailroom/mail_room_json.log[0m
       [37m+[0m
       [37m+  ## Build Artifacts[0m
       [37m+  artifacts:[0m
       [37m+    enabled: true[0m
       [37m+    # The location where Build Artifacts are stored (default: shared/artifacts).[0m
       [37m+    path: /var/opt/gitlab/gitlab-rails/shared/artifacts[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "artifacts"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## External merge request diffs[0m
       [37m+  external_diffs:[0m
       [37m+    enabled: [0m
       [37m+    # The location where merge request diffs are stored (default: shared/external-diffs).[0m
       [37m+    storage_path: /var/opt/gitlab/gitlab-rails/shared/external-diffs[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "external-diffs"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Git LFS[0m
       [37m+  lfs:[0m
       [37m+    enabled: [0m
       [37m+    # The location where LFS objects are stored (default: shared/lfs-objects).[0m
       [37m+    storage_path: /var/opt/gitlab/gitlab-rails/shared/lfs-objects[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "lfs-objects"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Uploads[0m
       [37m+  uploads:[0m
       [37m+    # The location where uploads objects are stored (default: public/).[0m
       [37m+    storage_path: /opt/gitlab/embedded/service/gitlab-rails/public[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "uploads"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Packages[0m
       [37m+  packages:[0m
       [37m+    enabled: [0m
       [37m+    # The location where build packages are stored (default: shared/packages).[0m
       [37m+    storage_path: /var/opt/gitlab/gitlab-rails/shared/packages[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "packages"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Dependency proxy (EE only)[0m
       [37m+  dependency_proxy:[0m
       [37m+    enabled: [0m
       [37m+    # The location where dependency_proxy blobs are stored (default: shared/dependency_proxy).[0m
       [37m+    storage_path: /var/opt/gitlab/gitlab-rails/shared/dependency_proxy[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      direct_upload: false[0m
       [37m+      background_upload: true[0m
       [37m+      proxy_download: false[0m
       [37m+      remote_directory: "dependency_proxy"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Terraform state[0m
       [37m+  terraform_state:[0m
       [37m+    enabled: [0m
       [37m+    # The location where terraform state files are stored (default: shared/terraform_state).[0m
       [37m+    storage_path: /var/opt/gitlab/gitlab-rails/shared/terraform_state[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      remote_directory: "terraform"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Container Registry[0m
       [37m+  registry:[0m
       [37m+    enabled: false[0m
       [37m+    host: [0m
       [37m+    port: [0m
       [37m+    api_url:  # internal address to the registry, will be used by GitLab to directly communicate with API[0m
       [37m+    path: [0m
       [37m+    key: /var/opt/gitlab/gitlab-rails/etc/gitlab-registry.key[0m
       [37m+    issuer: omnibus-gitlab-issuer[0m
       [37m+    notification_secret: [0m
       [37m+[0m
       [37m+  ## Kubernetes Agent Server[0m
       [37m+  gitlab_kas:[0m
       [37m+    enabled: false[0m
       [37m+    internal_url: [0m
       [37m+    external_url: [0m
       [37m+[0m
       [37m+  ## Error Reporting and Logging with Sentry[0m
       [37m+  sentry:[0m
       [37m+    enabled: false[0m
       [37m+    dsn: [0m
       [37m+    clientside_dsn: [0m
       [37m+    environment:  # e.g. development, staging, production[0m
       [37m+[0m
       [37m+  mattermost:[0m
       [37m+    enabled: false[0m
       [37m+    host: [0m
       [37m+[0m
       [37m+  ## GitLab Pages[0m
       [37m+  pages:[0m
       [37m+    enabled: false[0m
       [37m+    access_control: false[0m
       [37m+    path: /var/opt/gitlab/gitlab-rails/shared/pages[0m
       [37m+    host: [0m
       [37m+    port: [0m
       [37m+    https: false[0m
       [37m+    external_http: false[0m
       [37m+    external_https: false[0m
       [37m+    artifacts_server: true[0m
       [37m+    object_store:[0m
       [37m+      enabled: false[0m
       [37m+      remote_directory: "pages"[0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## Gravatar[0m
       [37m+  ## For Libravatar see: https://docs.gitlab.com/ee/customization/libravatar.html[0m
       [37m+  gravatar:[0m
       [37m+    # gravatar urls: possible placeholders: %{hash} %{size} %{email}[0m
       [37m+    plain_url:      # default: http://www.gravatar.com/avatar/%{hash}?s=%{size}&d=identicon[0m
       [37m+    ssl_url:       # default: https://secure.gravatar.com/avatar/%{hash}?s=%{size}&d=identicon[0m
       [37m+[0m
       [37m+  ## Sidekiq[0m
       [37m+  sidekiq:[0m
       [37m+    log_format: json[0m
       [37m+[0m
       [37m+  ## Auxiliary jobs[0m
       [37m+  # Periodically executed jobs, to self-heal GitLab, do external synchronizations, etc.[0m
       [37m+  # Please read here for more information: https://github.com/ondrejbartas/sidekiq-cron#adding-cron-job[0m
       [37m+  cron_jobs:[0m
       [37m+    # Flag stuck CI builds as failed[0m
       [37m+[0m
       [37m+    # Remove expired build artifacts[0m
       [37m+[0m
       [37m+    # Stop expired environments[0m
       [37m+[0m
       [37m+    # Schedule pipelines in the near future[0m
       [37m+[0m
       [37m+    # Periodically run 'git fsck' on all repositories. If started more than[0m
       [37m+    # once per hour you will have concurrent 'git fsck' jobs.[0m
       [37m+[0m
       [37m+    # Send admin emails once a week[0m
       [37m+[0m
       [37m+    # Send emails about personal tokens about to expired[0m
       [37m+[0m
       [37m+    # Send emails about personal tokens that have expired[0m
       [37m+[0m
       [37m+    # Remove outdated repository archives[0m
       [37m+[0m
       [37m+    # Archive live traces which have not been archived yet[0m
       [37m+[0m
       [37m+    # Verify custom GitLab Pages domains[0m
       [37m+[0m
       [37m+    # Obtain and renew SSL certificates for pages domain through Let's Encrypt[0m
       [37m+[0m
       [37m+    # Removes unverified pages domains[0m
       [37m+[0m
       [37m+    # Remove unaccepted member invitations[0m
       [37m+[0m
       [37m+    # Periodically migrate diffs from the database to external storage[0m
       [37m+[0m
       [37m+    # Update CI Platform Metrics daily[0m
       [37m+[0m
       [37m+    ##[0m
       [37m+    # GitLab EE only jobs:[0m
       [37m+[0m
       [37m+    # Snapshot Devops Adoption statistics[0m
       [37m+[0m
       [37m+    # Snapshot active users statistics[0m
       [37m+[0m
       [37m+    # In addition to refreshing users when they log in,[0m
       [37m+    # periodically refresh LDAP users membership.[0m
       [37m+    # NOTE: This will only take effect if LDAP is enabled[0m
       [37m+[0m
       [37m+    # GitLab LDAP group sync worker[0m
       [37m+    # NOTE: This will only take effect if LDAP is enabled[0m
       [37m+[0m
       [37m+    # GitLab Geo prune event log worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled (primary node only)[0m
       [37m+[0m
       [37m+    # GitLab Geo repository sync worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled[0m
       [37m+[0m
       [37m+    # GitLab Geo registry backfill worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled (secondary nodes only)[0m
       [37m+[0m
       [37m+    # GitLab Geo file download dispatch worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled[0m
       [37m+[0m
       [37m+    # GitLab Geo repository verification primary batch worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled[0m
       [37m+[0m
       [37m+    # GitLab Geo repository verification secondary scheduler worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled[0m
       [37m+[0m
       [37m+    # GitLab Geo migrated local files clean up worker[0m
       [37m+    # NOTE: This will only take effect if Geo is enabled (secondary nodes only)[0m
       [37m+[0m
       [37m+    # Export pseudonymized data in CSV format for analysis[0m
       [37m+[0m
       [37m+[0m
       [37m+    # Worker for triggering counter jobs for usage trends and keep backward compatibiltity with analytics_instance_statistics_count_job_trigger_worker_cron until 14.0[0m
       [37m+[0m
       [37m+    # Worker for triggering member invitation reminder emails[0m
       [37m+[0m
       [37m+    # Worker for the scheduled user status cleanup[0m
       [37m+[0m
       [37m+  ## Geo[0m
       [37m+  # NOTE: These settings will only take effect if Geo is enabled[0m
       [37m+  geo:[0m
       [37m+    # This is an optional identifier which Geo nodes can use to identify themselves.[0m
       [37m+    # For example, if external_url is the same for two secondaries, you must specify[0m
       [37m+    # a unique Geo node name for those secondaries.[0m
       [37m+    #[0m
       [37m+    # If it is blank, it defaults to external_url.[0m
       [37m+    node_name: [0m
       [37m+[0m
       [37m+    registry_replication:[0m
       [37m+      enabled: [0m
       [37m+      primary_api_url:  # internal address to the primary registry, will be used by GitLab to directly communicate with primary registry API[0m
       [37m+[0m
       [37m+  ## Feature Flag https://docs.gitlab.com/ee/user/project/operations/feature_flags.html[0m
       [37m+  feature_flags:[0m
       [37m+    unleash:[0m
       [37m+      enabled: false[0m
       [37m+[0m
       [37m+  #[0m
       [37m+  # 2. GitLab CI settings[0m
       [37m+  # ==========================[0m
       [37m+[0m
       [37m+  gitlab_ci:[0m
       [37m+    # Default project notifications settings:[0m
       [37m+    #[0m
       [37m+    # Send emails only on broken builds (default: true)[0m
       [37m+    all_broken_builds: [0m
       [37m+    #[0m
       [37m+    # Add pusher to recipients list (default: false)[0m
       [37m+    add_pusher: [0m
       [37m+[0m
       [37m+    # The location where build traces are stored (default: builds/). Relative paths are relative to Rails.root[0m
       [37m+    builds_path: /var/opt/gitlab/gitlab-ci/builds[0m
       [37m+[0m
       [37m+  #[0m
       [37m+  # 3. Auth settings[0m
       [37m+  # ==========================[0m
       [37m+[0m
       [37m+  ## LDAP settings[0m
       [37m+  # You can inspect a sample of the LDAP users with login access by running:[0m
       [37m+  #   bundle exec rake gitlab:ldap:check RAILS_ENV=production[0m
       [37m+  ldap:[0m
       [37m+    enabled: false[0m
       [37m+    sync_time: [0m
       [37m+    prevent_ldap_sign_in: false[0m
       [37m+    host: [0m
       [37m+    port: [0m
       [37m+    uid: [0m
       [37m+    method:  # "tls" or "ssl" or "plain"[0m
       [37m+    bind_dn: [0m
       [37m+    password: [0m
       [37m+    active_directory: [0m
       [37m+    allow_username_or_email_login: [0m
       [37m+    lowercase_usernames: [0m
       [37m+    base: [0m
       [37m+    user_filter: [0m
       [37m+[0m
       [37m+    ## EE only[0m
       [37m+    group_base: [0m
       [37m+    admin_group: [0m
       [37m+    sync_ssh_keys: [0m
       [37m+    sync_time: [0m
       [37m+[0m
       [37m+  ## Smartcard authentication settings[0m
       [37m+  smartcard:[0m
       [37m+    # Allow smartcard authentication[0m
       [37m+    enabled: false[0m
       [37m+[0m
       [37m+    # Path to a file containing a CA certificate[0m
       [37m+    ca_file: "/etc/gitlab/ssl/CA.pem"[0m
       [37m+[0m
       [37m+    # Host and port where the client side certificate is requested by the[0m
       [37m+    # webserver (NGINX/Apache)[0m
       [37m+    client_certificate_required_host: [0m
       [37m+    client_certificate_required_port: 3444[0m
       [37m+[0m
       [37m+    # Browser session with smartcard sign-in is required for Git access[0m
       [37m+    required_for_git_access: false[0m
       [37m+[0m
       [37m+    # SAN extensions to match users with certificates[0m
       [37m+    san_extensions: false[0m
       [37m+[0m
       [37m+  ## Kerberos settings[0m
       [37m+  kerberos:[0m
       [37m+    # Allow the HTTP Negotiate authentication method for Git clients[0m
       [37m+    enabled: [0m
       [37m+[0m
       [37m+    # Kerberos 5 keytab file. The keytab file must be readable by the GitLab user,[0m
       [37m+    # and should be different from other keytabs in the system.[0m
       [37m+    # (default: use default keytab from Krb5 config)[0m
       [37m+    keytab: [0m
       [37m+[0m
       [37m+    # The Kerberos service name to be used by GitLab.[0m
       [37m+    # (default: accept any service name in keytab file)[0m
       [37m+    service_principal_name: [0m
       [37m+[0m
       [37m+    # Kerberos realms/domains that are allowed to automatically link LDAP identities.[0m
       [37m+    # By default, GitLab accepts a realm that matches the domain derived from the[0m
       [37m+    # LDAP `base` DN. For example, `ou=users,dc=example,dc=com` would allow users[0m
       [37m+    # with a realm matching `example.com`.[0m
       [37m+    simple_ldap_linking_allowed_realms: null[0m
       [37m+[0m
       [37m+    # Dedicated port: Git before 2.4 does not fall back to Basic authentication if Negotiate fails.[0m
       [37m+    # To support both Basic and Negotiate methods with older versions of Git, configure[0m
       [37m+    # nginx to proxy GitLab on an extra port (e.g. 8443) and uncomment the following lines[0m
       [37m+    # to dedicate this port to Kerberos authentication. (default: false)[0m
       [37m+    use_dedicated_port: [0m
       [37m+    port: [0m
       [37m+    https: [0m
       [37m+[0m
       [37m+[0m
       [37m+  ## OmniAuth settings[0m
       [37m+  omniauth:[0m
       [37m+    # Allow login via Twitter, Google, etc. using OmniAuth providers[0m
       [37m+    enabled: [0m
       [37m+[0m
       [37m+    # Uncomment this to automatically sign in with a specific omniauth provider's without[0m
       [37m+    # showing GitLab's sign-in page (default: show the GitLab sign-in page)[0m
       [37m+    auto_sign_in_with_provider: [0m
       [37m+[0m
       [37m+    # Sync user's email address from the specified Omniauth provider every time the user logs[0m
       [37m+    # in (default: nil). And consequently make this field read-only.[0m
       [37m+[0m
       [37m+    # Sync user's profile from the specified Omniauth providers every time the user logs in (default: empty).[0m
       [37m+    # Define the allowed providers using an array, e.g. ["cas3", "saml", "twitter"],[0m
       [37m+    # or as true/false to allow all providers or none.[0m
       [37m+    # sync_profile_from_provider: [][0m
       [37m+[0m
       [37m+    # Select which info to sync from the providers above. (default: email).[0m
       [37m+    # Define the synced profile info using an array. Available options are "name", "email" and "location"[0m
       [37m+    # e.g. ["name", "email", "location"] or as true to sync all available.[0m
       [37m+    # This consequently will make the selected attributes read-only.[0m
       [37m+    # sync_profile_attributes: true[0m
       [37m+[0m
       [37m+    # CAUTION![0m
       [37m+    # This allows users to login without having a user account first. Define the allowed[0m
       [37m+    # providers using an array, e.g. ["saml", "twitter"][0m
       [37m+    # User accounts will be created automatically when authentication was successful.[0m
       [37m+    allow_single_sign_on: ["saml"][0m
       [37m+[0m
       [37m+    # Locks down those users until they have been cleared by the admin (default: true).[0m
       [37m+    block_auto_created_users: [0m
       [37m+    # Look up new users in LDAP servers. If a match is found (same uid), automatically[0m
       [37m+    # link the omniauth identity with the LDAP account. (default: false)[0m
       [37m+    auto_link_ldap_user: [0m
       [37m+[0m
       [37m+    # Allow users with existing accounts to login and auto link their account via SAML[0m
       [37m+    # login, without having to do a manual login first and manually add SAML[0m
       [37m+    # (default: false)[0m
       [37m+    auto_link_saml_user: null[0m
       [37m+[0m
       [37m+    # Allow users with existing accounts to sign in and auto link their account via OmniAuth[0m
       [37m+    # login, without having to do a manual login first and manually add OmniAuth. Links on email.[0m
       [37m+    # Define the allowed providers using an array, e.g. ["saml", "twitter"], or as true/false to[0m
       [37m+    # allow all providers or none.[0m
       [37m+    # (default: false)[0m
       [37m+    auto_link_user: null[0m
       [37m+[0m
       [37m+    # Set different Omniauth providers as external so that all users creating accounts[0m
       [37m+    # via these providers will not be able to have access to internal projects. You[0m
       [37m+    # will need to use the full name of the provider, like `google_oauth2` for Google.[0m
       [37m+    # Refer to the examples below for the full names of the supported providers.[0m
       [37m+    # (default: [])[0m
       [37m+    external_providers: null[0m
       [37m+[0m
       [37m+    # CAUTION![0m
       [37m+    # This allows users to login with the specified providers without two factor. Define the allowed providers[0m
       [37m+    # using an array, e.g. ["twitter", 'google_oauth2'], or as true/false to allow all providers or none.[0m
       [37m+    # This option should only be configured for providers which already have two factor.[0m
       [37m+    # (default: false)[0m
       [37m+    allow_bypass_two_factor:  null[0m
       [37m+[0m
       [37m+    ## Auth providers[0m
       [37m+    # Uncomment the following lines and fill in the data of the auth provider you want to use[0m
       [37m+    # If your favorite auth provider is not listed you can use others:[0m
       [37m+    # see https://github.com/gitlabhq/gitlab-public-wiki/wiki/Custom-omniauth-provider-configurations[0m
       [37m+    # The 'app_id' and 'app_secret' parameters are always passed as the first two[0m
       [37m+    # arguments, followed by optional 'args' which can be either a hash or an array.[0m
       [37m+    # Documentation for this is available at https://docs.gitlab.com/ee/integration/omniauth.html[0m
       [37m+    providers:[0m
       [37m+      # - { name: 'google_oauth2', app_id: 'YOUR APP ID',[0m
       [37m+      #     app_secret: 'YOUR APP SECRET',[0m
       [37m+      #     args: { access_type: 'offline', approval_prompt: '' } }[0m
       [37m+      # - { name: 'twitter', app_id: 'YOUR APP ID',[0m
       [37m+      #     app_secret: 'YOUR APP SECRET'}[0m
       [37m+      # - { name: 'github', app_id: 'YOUR APP ID',[0m
       [37m+      #     app_secret: 'YOUR APP SECRET',[0m
       [37m+      #     args: { scope: 'user:email' } }[0m
       [37m+[0m
       [37m+  # FortiAuthenticator settings[0m
       [37m+  forti_authenticator:[0m
       [37m+    # Allow using FortiAuthenticator as OTP provider[0m
       [37m+    enabled: false[0m
       [37m+[0m
       [37m+[0m
       [37m+  # FortiToken Cloud settings[0m
       [37m+  forti_token_cloud:[0m
       [37m+    # Allow using FortiToken Cloud as OTP provider[0m
       [37m+    enabled: false[0m
       [37m+[0m
       [37m+[0m
       [37m+  # Shared file storage settings[0m
       [37m+  shared:[0m
       [37m+    path: /var/opt/gitlab/gitlab-rails/shared[0m
       [37m+[0m
       [37m+  # Encrypted Settings configuration[0m
       [37m+  encrypted_settings:[0m
       [37m+    path: /var/opt/gitlab/gitlab-rails/shared/encrypted_settings[0m
       [37m+[0m
       [37m+  # Gitaly settings[0m
       [37m+  # This setting controls whether GitLab uses Gitaly[0m
       [37m+  # Eventually Gitaly use will become mandatory and[0m
       [37m+  # this option will disappear.[0m
       [37m+  gitaly:[0m
       [37m+    client_path: /opt/gitlab/embedded/bin[0m
       [37m+    token: ""[0m
       [37m+[0m
       [37m+[0m
       [37m+  #[0m
       [37m+  # 4. Advanced settings[0m
       [37m+  # ==========================[0m
       [37m+[0m
       [37m+  ## Repositories settings[0m
       [37m+  repositories:[0m
       [37m+    # Paths where repositories can be stored. Give the canonicalized absolute pathname.[0m
       [37m+    # NOTE: REPOS PATHS MUST NOT CONTAIN ANY SYMLINK!!![0m
       [37m+    storages: {"default":{"path":"/var/opt/gitlab/git-data/repositories","gitaly_address":"unix:/var/opt/gitlab/gitaly/gitaly.socket"}}[0m
       [37m+[0m
       [37m+  ## Backup settings[0m
       [37m+  backup:[0m
       [37m+    path: "/var/opt/gitlab/backups"   # Relative paths are relative to Rails.root (default: tmp/backups/)[0m
       [37m+    archive_permissions:  # Permissions for the resulting backup.tar file (default: 0600)[0m
       [37m+    keep_time:    # default: 0 (forever) (in seconds)[0m
       [37m+    pg_schema:    # default: nil, it means that all schemas will be backed up[0m
       [37m+    upload:[0m
       [37m+      # Fog storage connection settings, see http://fog.io/storage/ .[0m
       [37m+      connection: [0m
       [37m+      # The remote 'directory' to store your backups. For S3, this would be the bucket name.[0m
       [37m+      remote_directory: [0m
       [37m+      multipart_chunk_size: [0m
       [37m+      encryption: [0m
       [37m+      encryption_key: [0m
       [37m+      storage_class: [0m
       [37m+[0m
       [37m+  ## Pseudonymizer settings[0m
       [37m+  pseudonymizer:[0m
       [37m+    manifest: [0m
       [37m+    upload:[0m
       [37m+      remote_directory: [0m
       [37m+      connection: {}[0m
       [37m+[0m
       [37m+  ## GitLab Shell settings[0m
       [37m+  gitlab_shell:[0m
       [37m+    path: /opt/gitlab/embedded/service/gitlab-shell/[0m
       [37m+    hooks_path: /opt/gitlab/embedded/service/gitlab-shell/hooks/[0m
       [37m+    authorized_keys_file: /var/opt/gitlab/.ssh/authorized_keys[0m
       [37m+[0m
       [37m+    # Git over HTTP[0m
       [37m+    upload_pack: [0m
       [37m+    receive_pack: [0m
       [37m+[0m
       [37m+    # If you use non-standard ssh port you need to specify it[0m
       [37m+    ssh_port: 2222[0m
       [37m+[0m
       [37m+    # Git import/fetch timeout[0m
       [37m+    git_timeout: 10800[0m
       [37m+[0m
       [37m+  ## Git settings[0m
       [37m+  # CAUTION![0m
       [37m+  # Use the default values unless you really know what you are doing[0m
       [37m+  git:[0m
       [37m+    bin_path: /opt/gitlab/embedded/bin/git[0m
       [37m+[0m
       [37m+  monitoring:[0m
       [37m+    # Time between sampling of unicorn socket metrics, in seconds[0m
       [37m+    unicorn_sampler_interval: 10[0m
       [37m+    # IP whitelist controlling access to monitoring endpoints[0m
       [37m+    ip_whitelist:[0m
       [37m+      - "127.0.0.0/8"[0m
       [37m+      - "::1/128"[0m
       [37m+    # Sidekiq exporter is webserver built in to Sidekiq to expose Prometheus metrics[0m
       [37m+    sidekiq_exporter:[0m
       [37m+      enabled: true[0m
       [37m+      log_enabled: false[0m
       [37m+      address: 127.0.0.1[0m
       [37m+      port: 8082[0m
       [37m+[0m
       [37m+    # Web exporter is webserver built in to Unicorn/Puma to expose Prometheus metrics[0m
       [37m+    web_exporter:[0m
       [37m+      enabled: false[0m
       [37m+      address: 127.0.0.1[0m
       [37m+      port: 8083[0m
       [37m+[0m
       [37m+  shutdown:[0m
       [37m+    blackout_seconds: 10[0m
       [37m+[0m
       [37m+  ## Prometheus settings[0m
       [37m+  # Do not modify these settings here. They should be modified in /etc/gitlab/gitlab.rb[0m
       [37m+  # if you installed GitLab via Omnibus.[0m
       [37m+  # If you installed from source, you need to install and configure Prometheus[0m
       [37m+  # yourself, and then update the values here.[0m
       [37m+  # https://docs.gitlab.com/ee/administration/monitoring/prometheus/[0m
       [37m+  prometheus:[0m
       [37m+    enabled: true[0m
       [37m+    server_address: "localhost:9090"[0m
       [37m+[0m
       [37m+  ## Consul settings[0m
       [37m+  consul:[0m
       [37m+    api_url: ""[0m
       [37m+[0m
       [37m+  #[0m
       [37m+  # 5. Extra customization[0m
       [37m+  # ==========================[0m
       [37m+[0m
       [37m+  extra:[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [37m+  rack_attack:[0m
       [37m+    git_basic_auth: [0m
       [37m+[0m
       [37m+[0m
       [37m+development:[0m
       [37m+  <<: *base[0m
       [37m+[0m
       [37m+test:[0m
       [37m+  <<: *base[0m
       [37m+  gravatar:[0m
       [37m+    enabled: true[0m
       [37m+  gitlab:[0m
       [37m+    host: localhost[0m
       [37m+    port: 80[0m
       [37m+[0m
       [37m+    # When you run tests we clone and setup gitlab-shell[0m
       [37m+    # In order to setup it correctly you need to specify[0m
       [37m+    # your system username you use to run GitLab[0m
       [37m+    # user: YOUR_USERNAME[0m
       [37m+  repositories:[0m
       [37m+    storages:[0m
       [37m+      default: { "path": "tmp/tests/repositories/" }[0m
       [37m+  gitlab_shell:[0m
       [37m+    path: tmp/tests/gitlab-shell/[0m
       [37m+    hooks_path: tmp/tests/gitlab-shell/hooks/[0m
       [37m+  issues_tracker:[0m
       [37m+    redmine:[0m
       [37m+      title: "Redmine"[0m
       [37m+      project_url: "http://redmine/projects/:issues_tracker_id"[0m
       [37m+      issues_url: "http://redmine/:project_id/:issues_tracker_id/:id"[0m
       [37m+      new_issue_url: "http://redmine/projects/:issues_tracker_id/issues/new"[0m
       [37m+    jira:[0m
       [37m+      title: "JIRA"[0m
       [37m+      url: https://samplecompany.example.net[0m
       [37m+      project_key: PROJECT[0m
       [37m+  ldap:[0m
       [37m+    enabled: false[0m
       [37m+    servers:[0m
       [37m+      main:[0m
       [37m+        label: ldap[0m
       [37m+        host: 127.0.0.1[0m
       [37m+        port: 3890[0m
       [37m+        uid: 'uid'[0m
       [37m+        method: 'plain' # "tls" or "ssl" or "plain"[0m
       [37m+        base: 'dc=example,dc=com'[0m
       [37m+        user_filter: ''[0m
       [37m+        group_base: 'ou=groups,dc=example,dc=com'[0m
       [37m+        admin_group: ''[0m
       [37m+        sync_ssh_keys: false[0m
       [37m+[0m
       [37m+staging:[0m
       [37m+  <<: *base[0m
       [32m- change mode from '' to '0640'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'git'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml to /var/opt/gitlab/gitlab-rails/etc/gitlab.yml] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml to /var/opt/gitlab/gitlab-rails/etc/gitlab.yml[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_workhorse_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret from none to fefe72[0m
       [32m- suppressed sensitive resource[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_workhorse_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_workhorse_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_shell_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret from none to b0a056[0m
       [32m- suppressed sensitive resource[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_shell_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_shell_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_pages_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret from none to 5d99f1[0m
       [32m- suppressed sensitive resource[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_pages_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret] action create
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_pages_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_pages_secret[0m
 [0m  
 [0m  * templatesymlink[Create a gitlab_kas_secret and create a symlink to Rails root] action create
     * template[/var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret from none to 847f7e[0m
       [32m- suppressed sensitive resource[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[Link /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret] action create
       [32m- unlink existing symlink to file at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret[0m
       [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/.gitlab_kas_secret to /var/opt/gitlab/gitlab-rails/etc/gitlab_kas_secret[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/config/initializers/relative_url.rb] action delete (up to date)
   * file[/var/opt/gitlab/gitlab-rails/etc/relative_url.rb] action delete (up to date)
   * env_dir[/opt/gitlab/etc/gitlab-rails/env] action create
     * directory[/opt/gitlab/etc/gitlab-rails/env] action create
       [32m- create new directory /opt/gitlab/etc/gitlab-rails/env[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/HOME] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/HOME[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/HOME from none to 205bb9[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/RAILS_ENV] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/RAILS_ENV[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/RAILS_ENV from none to ab8e18[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/LD_PRELOAD from none to f79114[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/SIDEKIQ_MEMORY_KILLER_MAX_RSS from none to dd80d7[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/BUNDLE_GEMFILE from none to 28d586[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/PATH] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/PATH[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/PATH from none to d5dc07[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/ICU_DATA] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/ICU_DATA[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/ICU_DATA from none to a04260[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/PYTHONPATH] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/PYTHONPATH[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/PYTHONPATH from none to 83b536[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/EXECJS_RUNTIME from none to 75081b[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitlab-rails/env/TZ] action create
       [32m- create new file /opt/gitlab/etc/gitlab-rails/env/TZ[0m
       [32m- update content in file /opt/gitlab/etc/gitlab-rails/env/TZ from none to 983a95[0m
       [32m- suppressed sensitive resource[0m
 [0m  
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/tmp] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/tmp to /var/opt/gitlab/gitlab-rails/tmp[0m
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/public/uploads] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/public/uploads to /var/opt/gitlab/gitlab-rails/uploads[0m
 [0m  * link[/opt/gitlab/embedded/service/gitlab-rails/log] action create
     [32m- create symlink at /opt/gitlab/embedded/service/gitlab-rails/log to /var/log/gitlab/gitlab-rails[0m
 [0m  * link[/var/log/gitlab/gitlab-rails/sidekiq.log] action delete (skipped due to only_if)
   * file[/opt/gitlab/embedded/service/gitlab-rails/db/structure.sql] action create
     [32m- change owner from 'root' to 'git'[0m
 [0m  * remote_file[/var/opt/gitlab/gitlab-rails/VERSION] action create
     [32m- create new file /var/opt/gitlab/gitlab-rails/VERSION[0m
     [32m- update content in file /var/opt/gitlab/gitlab-rails/VERSION from none to 949150[0m
     [37m--- /var/opt/gitlab/gitlab-rails/VERSION	2025-10-30 10:49:51.543723014 +0000[0m
     [37m+++ /var/opt/gitlab/gitlab-rails/.chef-VERSION20251030-32-1am2z1p	2025-10-30 10:49:51.543723014 +0000[0m
     [37m@@ -1 +1,2 @@[0m
     [37m+13.10.2[0m
 [0m  * remote_file[/var/opt/gitlab/gitlab-rails/REVISION] action create
     [32m- create new file /var/opt/gitlab/gitlab-rails/REVISION[0m
     [32m- update content in file /var/opt/gitlab/gitlab-rails/REVISION from none to bcc1a0[0m
     [37m--- /var/opt/gitlab/gitlab-rails/REVISION	2025-10-30 10:49:51.554523014 +0000[0m
     [37m+++ /var/opt/gitlab/gitlab-rails/.chef-REVISION20251030-32-gzo1m6	2025-10-30 10:49:51.554523014 +0000[0m
     [37m@@ -1 +1,2 @@[0m
     [37m+7efd19e3716[0m
 [0m  * version_file[Create version file for Rails] action create
     * file[/var/opt/gitlab/gitlab-rails/RUBY_VERSION] action create
       [32m- create new file /var/opt/gitlab/gitlab-rails/RUBY_VERSION[0m
       [32m- update content in file /var/opt/gitlab/gitlab-rails/RUBY_VERSION from none to 22dcc2[0m
       [37m--- /var/opt/gitlab/gitlab-rails/RUBY_VERSION	2025-10-30 10:49:51.586923014 +0000[0m
       [37m+++ /var/opt/gitlab/gitlab-rails/.chef-RUBY_VERSION20251030-32-1yo40lg	2025-10-30 10:49:51.586923014 +0000[0m
       [37m@@ -1 +1,2 @@[0m
       [37m+ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-linux][0m
 [0m  
 [0m  * execute[clear the gitlab-rails cache] action nothing (skipped due to action :nothing)
   * file[/var/opt/gitlab/gitlab-rails/config.ru] action delete (up to date)
 Recipe: gitlab::selinux[0m
   * bash[Set proper security context on ssh files for selinux] action nothing (skipped due to action :nothing)
 Recipe: gitlab::add_trusted_certs[0m
   * directory[/etc/gitlab/trusted-certs] action create
     [32m- create new directory /etc/gitlab/trusted-certs[0m
     [32m- change mode from '' to '0755'[0m
 [0m  * directory[/opt/gitlab/embedded/ssl/certs] action create (up to date)
   * file[/opt/gitlab/embedded/ssl/certs/README] action create
     [32m- create new file /opt/gitlab/embedded/ssl/certs/README[0m
     [32m- update content in file /opt/gitlab/embedded/ssl/certs/README from none to 623059[0m
     [37m--- /opt/gitlab/embedded/ssl/certs/README	2025-10-30 10:49:51.604923014 +0000[0m
     [37m+++ /opt/gitlab/embedded/ssl/certs/.chef-README20251030-32-1wxj0bi	2025-10-30 10:49:51.604923014 +0000[0m
     [37m@@ -1,3 +1,6 @@[0m
     [37m+This directory is managed by omnibus-gitlab.[0m
     [37m+ Any file placed in this directory will be ignored[0m
     [37m+. Place certificates in /etc/gitlab/trusted-certs.[0m
     [32m- change mode from '' to '0644'[0m
 [0m  * ruby_block[Move existing certs and link to /opt/gitlab/embedded/ssl/certs] action run
 
   * Moving existing certificates found in /opt/gitlab/embedded/ssl/certs
 
   * Symlinking existing certificates found in /etc/gitlab/trusted-certs
 
     [32m- execute the ruby block Move existing certs and link to /opt/gitlab/embedded/ssl/certs[0m
 [0mRecipe: gitlab::default[0m
   * service[create a temporary unicorn service] action nothing (skipped due to action :nothing)
   * service[create a temporary puma service] action nothing (skipped due to action :nothing)
   * service[create a temporary actioncable service] action nothing (skipped due to action :nothing)
   * service[create a temporary sidekiq service] action nothing (skipped due to action :nothing)
   * service[create a temporary mailroom service] action nothing (skipped due to action :nothing)
 Recipe: package::sysctl[0m
   * execute[reload all sysctl conf] action nothing (skipped due to action :nothing)
 Recipe: postgresql::bin[0m
   * ruby_block[check_postgresql_version] action run (skipped due to not_if)
   * ruby_block[check_postgresql_version_is_deprecated] action run (skipped due to not_if)
   * ruby_block[Link postgresql bin files to the correct version] action run
     [32m- execute the ruby block Link postgresql bin files to the correct version[0m
 [0mRecipe: redis::disable[0m
   * service[redis] action nothing (skipped due to action :nothing)
   * runit_service[redis] action disable
     * ruby_block[disable redis] action run (skipped due to only_if)
      (up to date)
 Recipe: gitaly::enable[0m
   * directory[/var/opt/gitlab/gitaly] action create
     [32m- create new directory /var/opt/gitlab/gitaly[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[/var/log/gitlab/gitaly] action create
     [32m- create new directory /var/log/gitlab/gitaly[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * directory[/var/opt/gitlab/gitaly/internal_sockets] action create
     [32m- create new directory /var/opt/gitlab/gitaly/internal_sockets[0m
     [32m- change mode from '' to '0700'[0m
     [32m- change owner from '' to 'git'[0m
 [0m  * env_dir[/opt/gitlab/etc/gitaly/env] action create
     * directory[/opt/gitlab/etc/gitaly/env] action create
       [32m- create new directory /opt/gitlab/etc/gitaly/env[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/HOME] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/HOME[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/HOME from none to 205bb9[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/PATH] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/PATH[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/PATH from none to d5dc07[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/TZ] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/TZ[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/TZ from none to 983a95[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/PYTHONPATH] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/PYTHONPATH[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/PYTHONPATH from none to 83b536[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/ICU_DATA] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/ICU_DATA[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/ICU_DATA from none to a04260[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/SSL_CERT_DIR] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/SSL_CERT_DIR[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/SSL_CERT_DIR from none to 4f45cf[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/GITALY_PID_FILE] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/GITALY_PID_FILE[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/GITALY_PID_FILE from none to e82748[0m
       [32m- suppressed sensitive resource[0m
 [0m    * file[/opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING] action create
       [32m- create new file /opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING[0m
       [32m- update content in file /opt/gitlab/etc/gitaly/env/WRAPPER_JSON_LOGGING from none to b5bea4[0m
       [32m- suppressed sensitive resource[0m
 [0m  
 [0m  * template[Create Gitaly config.toml] action create
     [32m- create new file /var/opt/gitlab/gitaly/config.toml[0m
     [32m- update content in file /var/opt/gitlab/gitaly/config.toml from none to ea1098[0m
     [37m--- /var/opt/gitlab/gitaly/config.toml	2025-10-30 10:49:51.734523014 +0000[0m
     [37m+++ /var/opt/gitlab/gitaly/.chef-config20251030-32-1sdq6dh.toml	2025-10-30 10:49:51.734523014 +0000[0m
     [37m@@ -1,49 +1,98 @@[0m
     [37m+# Gitaly configuration file[0m
     [37m+# This file is managed by gitlab-ctl. Manual changes will be[0m
     [37m+# erased! To change the contents below, edit /etc/gitlab/gitlab.rb[0m
     [37m+# and run:[0m
     [37m+# sudo gitlab-ctl reconfigure[0m
     [37m+[0m
     [37m+socket_path = '/var/opt/gitlab/gitaly/gitaly.socket'[0m
     [37m+[0m
     [37m+internal_socket_dir = '/var/opt/gitlab/gitaly/internal_sockets'[0m
     [37m+bin_dir = '/opt/gitlab/embedded/bin'[0m
     [37m+[0m
     [37m+[0m
     [37m+# Optional: export metrics via Prometheus[0m
     [37m+prometheus_listen_addr = 'localhost:9236'[0m
     [37m+[0m
     [37m+[0m
     [37m+[[storage]][0m
     [37m+name = 'default'[0m
     [37m+path = '/var/opt/gitlab/git-data/repositories'[0m
     [37m+[0m
     [37m+[logging][0m
     [37m+format = 'json'[0m
     [37m+dir = '/var/log/gitlab/gitaly'[0m
     [37m+[0m
     [37m+[0m
     [37m+[auth][0m
     [37m+[0m
     [37m+[git][0m
     [37m+[0m
     [37m+[0m
     [37m+[gitaly-ruby][0m
     [37m+dir = "/opt/gitlab/embedded/service/gitaly-ruby"[0m
     [37m+rugged_git_config_search_path = "/opt/gitlab/embedded/etc"[0m
     [37m+[0m
     [37m+[gitlab-shell][0m
     [37m+dir = "/opt/gitlab/embedded/service/gitlab-shell"[0m
     [37m+[0m
     [37m+[gitlab][0m
     [37m+url = 'http+unix://%2Fvar%2Fopt%2Fgitlab%2Fgitlab-workhorse%2Fsockets%2Fsocket'[0m
     [37m+relative_url_root = ''[0m
     [37m+[0m
     [37m+[0m
     [37m+[hooks][0m
     [37m+[0m
     [37m+[0m
     [37m+[0m
     [37m+[0m
     [37m+[0m
     [37m+[0m
     [32m- change mode from '' to '0640'[0m
     [32m- change owner from '' to 'root'[0m
     [32m- change group from '' to 'git'[0m
 [0m  * service[gitaly] action nothing (skipped due to action :nothing)
   * runit_service[gitaly] action enable
     * ruby_block[restart_service] action nothing (skipped due to action :nothing)
     * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
     * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
     * directory[/opt/gitlab/sv/gitaly] action create
       [32m- create new directory /opt/gitlab/sv/gitaly[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/gitaly/run] action create
       [32m- create new file /opt/gitlab/sv/gitaly/run[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/run from none to 1a05c2[0m
       [37m--- /opt/gitlab/sv/gitaly/run	2025-10-30 10:49:51.748923014 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/.chef-run20251030-32-1uagrkb	2025-10-30 10:49:51.748923014 +0000[0m
       [37m@@ -1,18 +1,36 @@[0m
       [37m+#!/bin/sh[0m
       [37m+[0m
       [37m+# Attempt to change ulimit before the set -e flag, ignore failures[0m
       [37m+ulimit -n 15000[0m
       [37m+[0m
       [37m+set -e # fail on errors[0m
       [37m+[0m
       [37m+# Redirect stderr -> stdout[0m
       [37m+exec 2>&1[0m
       [37m+[0m
       [37m+[0m
       [37m+[0m
       [37m+cd /var/opt/gitlab/gitaly[0m
       [37m+[0m
       [37m+exec chpst -e /opt/gitlab/etc/gitaly/env -P \[0m
       [37m+  -U git:git \[0m
       [37m+  -u git:git \[0m
       [37m+  /opt/gitlab/embedded/bin/gitaly-wrapper /opt/gitlab/embedded/bin/gitaly /var/opt/gitlab/gitaly/config.toml[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/log] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/log[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/log/main] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/log/main[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * template[/opt/gitlab/sv/gitaly/log/config] action create
       [32m- create new file /opt/gitlab/sv/gitaly/log/config[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/log/config from none to 623c00[0m
       [37m--- /opt/gitlab/sv/gitaly/log/config	2025-10-30 10:49:51.759723014 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/log/.chef-config20251030-32-p9600k	2025-10-30 10:49:51.759723014 +0000[0m
       [37m@@ -1,6 +1,12 @@[0m
       [37m+s209715200[0m
       [37m+n30[0m
       [37m+t86400[0m
       [37m+!gzip[0m
       [37m+[0m
       [37m+[0m
       [32m- change mode from '' to '0644'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[verify_chown_persisted_on_gitaly] action create
       [32m- execute the ruby block verify_chown_persisted_on_gitaly[0m
 [0m    * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
     * link[/var/log/gitlab/gitaly/config] action create
       [32m- create symlink at /var/log/gitlab/gitaly/config to /opt/gitlab/sv/gitaly/log/config[0m
 [0m    * template[/opt/gitlab/sv/gitaly/log/run] action create
       [32m- create new file /opt/gitlab/sv/gitaly/log/run[0m
       [32m- update content in file /opt/gitlab/sv/gitaly/log/run from none to fa6dcc[0m
       [37m--- /opt/gitlab/sv/gitaly/log/run	2025-10-30 10:49:51.774123014 +0000[0m
       [37m+++ /opt/gitlab/sv/gitaly/log/.chef-run20251030-32-1g3t40h	2025-10-30 10:49:51.774123014 +0000[0m
       [37m@@ -1,2 +1,4 @@[0m
       [37m+#!/bin/sh[0m
       [37m+exec svlogd /var/log/gitlab/gitaly[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * directory[/opt/gitlab/sv/gitaly/env] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/env[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
     * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
     * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
     * directory[/opt/gitlab/sv/gitaly/control] action create
       [32m- create new directory /opt/gitlab/sv/gitaly/control[0m
       [32m- change mode from '' to '0755'[0m
       [32m- change owner from '' to 'root'[0m
       [32m- change group from '' to 'root'[0m
 [0m    * link[/opt/gitlab/init/gitaly] action create
       [32m- create symlink at /opt/gitlab/init/gitaly to /opt/gitlab/embedded/bin/sv[0m
 [0m    * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
     * ruby_block[restart_service] action run (skipped due to only_if)
     * ruby_block[reload_log_service] action create
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/gitaly] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log/main] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/gitaly/config] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/gitaly/control] action create (up to date)
       * link[/opt/gitlab/init/gitaly] action create (up to date)
       * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/gitaly] action create
         [32m- create symlink at /opt/gitlab/service/gitaly to /opt/gitlab/sv/gitaly[0m
 [0m      * ruby_block[wait for gitaly service socket] action run
         [32m- execute the ruby block wait for gitaly service socket[0m
 [0m      [32m- execute the ruby block reload_log_service[0m
 [0m    * ruby_block[restart_log_service] action run
       * ruby_block[restart_service] action nothing (skipped due to action :nothing)
       * ruby_block[restart_log_service] action nothing (skipped due to action :nothing)
       * ruby_block[reload_log_service] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/sv/gitaly] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/log/main] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/config] action create (up to date)
       * ruby_block[verify_chown_persisted_on_gitaly] action nothing (skipped due to action :nothing)
       * link[/var/log/gitlab/gitaly/config] action create (up to date)
       * template[/opt/gitlab/sv/gitaly/log/run] action create (up to date)
       * directory[/opt/gitlab/sv/gitaly/env] action create (up to date)
       * ruby_block[Delete unmanaged env files for gitaly service] action run (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/check] action create (skipped due to only_if)
       * template[/opt/gitlab/sv/gitaly/finish] action create (skipped due to only_if)
       * directory[/opt/gitlab/sv/gitaly/control] action create (up to date)
       * link[/opt/gitlab/init/gitaly] action create (up to date)
       * file[/opt/gitlab/sv/gitaly/down] action nothing (skipped due to action :nothing)
       * directory[/opt/gitlab/service] action create (up to date)
       * link[/opt/gitlab/service/gitaly] action create (up to date)
       * ruby_block[wait for gitaly service socket] action run (skipped due to not_if)
       [32m- execute the ruby block restart_log_service[0m
 [0m    * directory[/opt/gitlab/service] action create (up to date)
     * link[/opt/gitlab/service/gitaly] action create (up to date)
     * ruby_block[wait for gitaly service socket] action run (skipped due to not_if)
   
 [0m  * execute[/opt/gitlab/bin/gitlab-ctl start gitaly] action run
     [execute] ok: run: gitaly: (pid 472) 2s
     [32m- execute /opt/gitlab/bin/gitlab-ctl start gitaly[0m
 [0m  * version_file[Create version file for Gitaly] action create
     * file[/var/opt/gitlab/gitaly/VERSION] action create
       [32m- create new file /var/opt/gitlab/gitaly/VERSION[0m
       [32m- update content in file /var/opt/gitlab/gitaly/VERSION from none to 616b61[0m
       [37m--- /var/opt/gitlab/gitaly/VERSION	2025-10-30 10:49:59.057588168 +0000[0m
       [37m+++ /var/opt/gitlab/gitaly/.chef-VERSION20251030-32-18lw31z	2025-10-30 10:49:59.057588168 +0000[0m
       [37m@@ -1 +1,2 @@[0m
       [37m+Gitaly, version 13.10.2[0m
 [0m  
 [0m  * version_file[Create Ruby version file for Gitaly] action create
     * file[/var/opt/gitlab/gitaly/RUBY_VERSION] action create
       [32m- create new file /var/opt/gitlab/gitaly/RUBY_VERSION[0m
       [32m- update content in file /var/opt/gitlab/gitaly/RUBY_VERSION from none to 22dcc2[0m
       [37m--- /var/opt/gitlab/gitaly/RUBY_VERSION	2025-10-30 10:49:59.101692758 +0000[0m
       [37m+++ /var/opt/gitlab/gitaly/.chef-RUBY_VERSION20251030-32-1j9wc2n	2025-10-30 10:49:59.101692758 +0000[0m
       [37m@@ -1 +1,2 @@[0m
       [37m+ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-linux][0m
 [0m  
 [0m  * consul_service[gitaly] action delete
     * file[/var/opt/gitlab/consul/config.d/gitaly-service.json] action delete (up to date)
      (up to date)
 Recipe: praefect::disable[0m
   * service[praefect] action nothing (skipped due to action :nothing)
   * runit_service[praefect] action disable
     * ruby_block[disable praefect] action run (skipped due to only_if)
      (up to date)
   * consul_service[praefect] action delete
     * file[/var/opt/gitlab/consul/config.d/praefect-service.json] action delete (up to date)
      (up to date)
 Recipe: postgresql::disable[0m
   * service[postgresql] action nothing (skipped due to action :nothing)
   * runit_service[postgresql] action disable
     * ruby_block[disable postgresql] action run (skipped due to only_if)
      (up to date)
 Recipe: gitlab-kas::disable[0m
   * service[gitlab-kas] action nothing (skipped due to action :nothing)
   * runit_service[gitlab-kas] action disable
     * ruby_block[disable gitlab-kas] action run (skipped due to only_if)
      (up to date)
 Recipe: gitlab::database_migrations[0m
   * ruby_block[check remote PG version] action nothing (skipped due to action :nothing)

STDERR:  cat: /var/opt/gitlab/gitlab-rails/VERSION: No such file or directory
 /opt/gitlab/embedded/bin/runsvdir-start: line 24: ulimit: pending signals: cannot modify limit: Operation not permitted
 /opt/gitlab/embedded/bin/runsvdir-start: line 34: ulimit: max user processes: cannot modify limit: Operation not permitted
 /opt/gitlab/embedded/bin/runsvdir-start: line 37: /proc/sys/fs/file-max: Read-only file system
 /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/chef-15.14.0/lib/chef/provider/remote_file/local_file.rb:43: warning: URI.unescape is obsolete
 /opt/gitlab/embedded/lib/ruby/gems/2.7.0/gems/chef-15.14.0/lib/chef/provider/remote_file/local_file.rb:43: warning: URI.unescape is obsolete




sudo docker inspect c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14[
    {
        "Id": "c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14",
        "Created": "2025-10-30T10:49:23.216958494Z",
        "Path": "/assets/wrapper",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 23981,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-10-30T10:49:37.035192032Z",
            "FinishedAt": "0001-01-01T00:00:00Z",
            "Health": {
                "Status": "starting",
                "FailingStreak": 0,
                "Log": []
            }
        },
        "Image": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
        "ResolvConfPath": "/var/lib/docker/containers/c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14/hostname",
        "HostsPath": "/var/lib/docker/containers/c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14/hosts",
        "LogPath": "/var/lib/docker/containers/c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14/c9b22c80f0a9cf6279ef246d0b66bf84ac4908a3c39e2cd537a63506bab9fd14-json.log",
        "Name": "/gitlab",
        "RestartCount": 0,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": [
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data:/var/opt/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config:/etc/gitlab:rw",
                "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs:/var/log/gitlab:rw"
            ],
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_no_tool_default",
            "PortBindings": {
                "22/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "2222"
                    }
                ],
                "80/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8080"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": [
                {
                    "Name": "nofile",
                    "Hard": 65536,
                    "Soft": 65536
                },
                {
                    "Name": "nproc",
                    "Hard": 65536,
                    "Soft": 65536
                }
            ],
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-data",
                "Destination": "/var/opt/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-config",
                "Destination": "/etc/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/gitlab-logs",
                "Destination": "/var/log/gitlab",
                "Mode": "rw",
                "RW": true,
                "Propagation": "rprivate"
            }
        ],
        "Config": {
            "Hostname": "gitlab.local",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "22/tcp": {},
                "443/tcp": {},
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "GITLAB_OMNIBUS_CONFIG=external_url 'http://localhost:8080'\ngitlab_rails['gitlab_shell_ssh_port'] = 2222\npostgresql['enable'] = false\nredis['enable'] = false\ngitlab_rails['initial_root_password'] = 'ChangeMe!'\n",
                "PATH=/opt/gitlab/embedded/bin:/opt/gitlab/bin:/assets:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "LANG=C.UTF-8",
                "TERM=xterm"
            ],
            "Cmd": [
                "/assets/wrapper"
            ],
            "Healthcheck": {
                "Test": [
                    "CMD-SHELL",
                    "/opt/gitlab/bin/gitlab-healthcheck --fail --max-time 10"
                ],
                "Interval": 60000000000,
                "Timeout": 30000000000,
                "Retries": 5
            },
            "Image": "gitlab/gitlab-ce:13.10.2-ce.0",
            "Volumes": {
                "/etc/gitlab": {},
                "/var/log/gitlab": {},
                "/var/opt/gitlab": {}
            },
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "c81444e8dbe83a495a05feee91b624c2c9ece6827a5394ffc303d402da599765",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "postgres:service_healthy:false,redis:service_healthy:false",
                "com.docker.compose.image": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom_no_tool",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2021-22205/custom_no_tool",
                "com.docker.compose.service": "gitlab",
                "com.docker.compose.version": "2.40.2",
                "desktop.docker.io/wsl-distro": "Ubuntu"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "36bd252177d60462c81c36df580181922e3cf0291b4cb2ec1f7c492e8ff4511d",
            "SandboxKey": "/var/run/docker/netns/36bd252177d6",
            "Ports": {
                "22/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "2222"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "2222"
                    }
                ],
                "80/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "8080"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "8080"
                    }
                ]
            },
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_no_tool_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "gitlab",
                        "gitlab"
                    ],
                    "MacAddress": "ea:21:c9:f6:91:a9",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "faa2fb17a35e36068199cdc16125bad1064c8cbf54ccb15c6e0982046daffe25",
                    "EndpointID": "d5864d12b18655c691e3d0f6c2aff52efcce4ed2e8254b4e222ed3bf5784912b",
                    "Gateway": "172.18.0.1",
                    "IPAddress": "172.18.0.4",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "gitlab",
                        "c9b22c80f0a9",
                        "gitlab.local"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.docker.distribution.manifest.v2+json",
            "digest": "sha256:9d9a1d2ba84bb74babe25192d67e4eb176a1b504757ebe8a817974f1e7132de5",
            "size": 2197,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]