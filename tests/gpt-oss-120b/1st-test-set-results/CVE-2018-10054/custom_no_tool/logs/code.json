{
    "files": [
        {
            "location": "./../../dockers/CVE-2018-10054/custom_no_tool/Dockerfile",
            "content": "FROM openjdk:11-jre-slim\n\nENV H2_VERSION=1.4.197\n\n# Install curl (required for downloading the H2 jar)\nRUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*\n\n# Download the H2 Database jar into /opt\nRUN curl -L -o /opt/h2.jar https://repo1.maven.org/maven2/com/h2database/h2/${H2_VERSION}/h2-${H2_VERSION}.jar\n\n# Create a directory for database files and place the init script\nRUN mkdir -p /opt/h2-data\nCOPY init.sql /opt/init.sql\nCOPY entrypoint.sh /opt/entrypoint.sh\nRUN chmod +x /opt/entrypoint.sh\n\n# Expose the default H2 web console (8082) and TCP port (9092)\nEXPOSE 8082 9092\n\n# Default environment variables (can be overridden in docker\u2011compose)\nENV WEB_ALLOW_OTHERS=false\nENV TCP_ALLOW_OTHERS=false\n\n# Use the custom entrypoint that conditionally adds flags and runs the init script\nENTRYPOINT [\"sh\", \"/opt/entrypoint.sh\"]"
        },
        {
            "location": "./../../dockers/CVE-2018-10054/custom_no_tool/docker-compose.yml",
            "content": "version: \"3.8\"\n\nservices:\n  h2:\n    build: .\n    container_name: h2_cve_2018_10054\n    ports:\n      - \"8082:8082\"   # H2 Web Console\n      - \"9092:9092\"   # H2 TCP Server (JDBC)\n    volumes:\n      - h2_data:/opt/h2-data\n    environment:\n      WEB_ALLOW_OTHERS: \"false\"\n      TCP_ALLOW_OTHERS: \"false\"\n\nvolumes:\n  h2_data:\n    driver: local"
        },
        {
            "location": "./../../dockers/CVE-2018-10054/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/sh\n\n# Run initialization SQL script if it exists\nif [ -f /opt/init.sql ]; then\n  java -cp /opt/h2.jar org.h2.tools.RunScript \\\n    -url jdbc:h2:/opt/h2-data/test \\\n    -script /opt/init.sql \\\n    -user sa \\\n    -password ''\nfi\n\n# Build the option list for the H2 Server\nOPTIONS=\"-web -tcp -baseDir /opt/h2-data\"\n\nif [ \"$WEB_ALLOW_OTHERS\" = \"true\" ]; then\n  OPTIONS=\"$OPTIONS -webAllowOthers\"\nfi\n\nif [ \"$TCP_ALLOW_OTHERS\" = \"true\" ]; then\n  OPTIONS=\"$OPTIONS -tcpAllowOthers\"\nfi\n\n# Start the H2 Server with the computed options\nexec java -cp /opt/h2.jar org.h2.tools.Server $OPTIONS"
        },
        {
            "location": "./../../dockers/CVE-2018-10054/custom_no_tool/init.sql",
            "content": "-- Sample initialization script for H2 (optional)\n-- This file will be executed automatically by the custom entrypoint.\nCREATE TABLE IF NOT EXISTS test (\n    id INT PRIMARY KEY,\n    value VARCHAR(255)\n);\nINSERT INTO test (id, value) VALUES (1, 'sample data');"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2018-10054/custom_no_tool"
}