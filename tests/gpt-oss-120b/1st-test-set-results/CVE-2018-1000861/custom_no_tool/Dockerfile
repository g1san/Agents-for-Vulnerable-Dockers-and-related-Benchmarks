FROM python:2.7-alpine

# Install build tools and runtime dependencies required for docker‑compose
RUN apk update && apk add --no-cache \
        gcc \
        musl-dev \
        libffi-dev \
        openssl-dev \
        git \
        curl && \
    pip install --no-cache-dir docker-compose==1.21.0 && \
    # Remove build‑time packages to keep the image small
    apk del gcc musl-dev libffi-dev openssl-dev git curl

WORKDIR /app
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]