{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/docker-compose.yml",
            "content": "version: \"3.8\"\nservices:\n  redis:\n    build: ./redis\n    ports:\n      - \"6379:6379\"\n    volumes:\n      - redis-data:/data\n  webapp:\n    build: ./app\n    ports:\n      - \"5000:5000\"\n    depends_on:\n      - redis\n    environment:\n      - REDIS_HOST=redis\n      - REDIS_PORT=6379\nvolumes:\n  redis-data:"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/redis/Dockerfile",
            "content": "FROM ubuntu:22.04\nRUN apt-get update && apt-get install -y redis-server imagemagick && rm -rf /var/lib/apt/lists/*\nCOPY init-data.sh /usr/local/bin/init-data.sh\nRUN chmod +x /usr/local/bin/init-data.sh\nCMD [\"sh\",\"-c\",\"redis-server --save 60 1 & sleep 5 && /usr/local/bin/init-data.sh && tail -f /dev/null\"]"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/redis/init-data.sh",
            "content": "#!/bin/sh\nredis-cli -h 127.0.0.1 -p 6379 set testkey \"vulnerable data\""
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/app/Dockerfile",
            "content": "FROM ubuntu:22.04\nRUN apt-get update && apt-get install -y python3.11 python3-pip imagemagick && rm -rf /var/lib/apt/lists/*\nWORKDIR /app\nCOPY app.py .\nCOPY requirements.txt .\nRUN pip3 install --no-cache-dir -r requirements.txt\nCMD [\"python3\",\"app.py\"]"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/app/requirements.txt",
            "content": "flask\nredis"
        },
        {
            "location": "./../../dockers/CVE-2022-44268/custom_no_tool/app/app.py",
            "content": "import os\nfrom flask import Flask, jsonify\nimport redis\n\napp = Flask(__name__)\n\nr = redis.Redis(host=os.getenv('REDIS_HOST','redis'), port=int(os.getenv('REDIS_PORT',6379)), decode_responses=True)\n\n@app.route('/get')\ndef get():\n    val = r.get('testkey')\n    return jsonify({'testkey': val})\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)"
        }
    ],
    "directory_tree": "CVE-2022-44268/custom_no_tool"
}