#1 [internal] load local bake definitions
#1 reading from stdin 1.43kB done
#1 DONE 0.0s

#2 [malicious internal] load build definition from Dockerfile
#2 transferring dockerfile: 172B done
#2 DONE 0.0s

#3 [vulnerable_app internal] load build definition from Dockerfile
#3 transferring dockerfile: 259B done
#3 DONE 0.0s

#4 [vulnerable_app internal] load metadata for docker.io/library/docker:20.10-cli
#4 DONE 1.1s

#5 [malicious internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [vulnerable_app internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [vulnerable_app internal] load build context
#7 transferring context: 579B done
#7 DONE 0.0s

#8 [vulnerable_app 1/2] FROM docker.io/library/docker:20.10-cli@sha256:2967f0819c84dd589ed0a023b9d25dcfe7a3c123d5bf784ffbb77edf55335f0c
#8 resolve docker.io/library/docker:20.10-cli@sha256:2967f0819c84dd589ed0a023b9d25dcfe7a3c123d5bf784ffbb77edf55335f0c 0.0s done
#8 sha256:ac56a29f30eb929bd39086c9e11300ca62e2e446ae9d5d557e6723ded96d1ccc 0B / 167B 0.2s
#8 sha256:ac56a29f30eb929bd39086c9e11300ca62e2e446ae9d5d557e6723ded96d1ccc 167B / 167B 0.3s done
#8 sha256:49d0e23604c0500f6a93a56a7e0951c8b8264e5822db51d8b4105d6c1a373374 0B / 1.02kB 0.2s
#8 sha256:4d37eec86745434c6e5165a35a2012abbfd788ef455e7a6f3aeb282e2ef4839e 0B / 548B 0.2s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 0B / 16.38MB 0.2s
#8 sha256:ac56a29f30eb929bd39086c9e11300ca62e2e446ae9d5d557e6723ded96d1ccc 167B / 167B 0.3s done
#8 sha256:49d0e23604c0500f6a93a56a7e0951c8b8264e5822db51d8b4105d6c1a373374 1.02kB / 1.02kB 0.4s done
#8 sha256:49d0e23604c0500f6a93a56a7e0951c8b8264e5822db51d8b4105d6c1a373374 1.02kB / 1.02kB 0.4s done
#8 sha256:4d37eec86745434c6e5165a35a2012abbfd788ef455e7a6f3aeb282e2ef4839e 548B / 548B 0.5s done
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 0B / 16.00MB 0.2s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 0B / 14.12MB 0.2s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 1.05MB / 16.38MB 0.6s
#8 sha256:f3759a44eb9f3e3577a539da15a245f36a7436c3bcc726a0a4c0e677c835a6ba 0B / 90B 0.2s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 2.10MB / 16.38MB 0.8s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 3.15MB / 16.38MB 0.9s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 1.05MB / 16.00MB 0.6s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 1.05MB / 14.12MB 0.6s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 4.19MB / 16.38MB 1.1s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 2.10MB / 16.00MB 0.8s
#8 sha256:f3759a44eb9f3e3577a539da15a245f36a7436c3bcc726a0a4c0e677c835a6ba 90B / 90B 0.6s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 5.24MB / 16.38MB 1.2s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 2.10MB / 14.12MB 0.9s
#8 sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb 0B / 2.01MB 0.2s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 6.29MB / 16.38MB 1.4s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 3.15MB / 16.00MB 1.1s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 7.34MB / 16.38MB 1.5s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 4.19MB / 16.00MB 1.2s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 3.15MB / 14.12MB 1.2s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 4.19MB / 14.12MB 1.4s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 8.39MB / 16.38MB 1.8s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 6.29MB / 16.00MB 1.5s
#8 sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb 2.01MB / 2.01MB 0.8s done
#8 sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb 2.01MB / 2.01MB 0.8s done
#8 sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6 0B / 3.40MB 0.2s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 9.44MB / 16.38MB 2.1s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 7.34MB / 16.00MB 1.8s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 5.24MB / 14.12MB 1.7s
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 10.49MB / 16.38MB 2.3s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 8.47MB / 16.00MB 2.0s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 6.29MB / 14.12MB 1.8s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 9.44MB / 16.00MB 2.1s
#8 sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6 1.05MB / 3.40MB 0.6s
#8 sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6 3.40MB / 3.40MB 0.7s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 11.53MB / 16.38MB 2.7s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 10.49MB / 16.00MB 2.4s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 7.34MB / 14.12MB 2.3s
#8 sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6 3.40MB / 3.40MB 0.7s done
#8 extracting sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 11.53MB / 16.00MB 2.6s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 8.39MB / 14.12MB 2.4s
#8 extracting sha256:8a49fdb3b6a5ff2bd8ec6a86c05b2922a0f7454579ecc07637e94dfd1d0639b6 0.1s done
#8 extracting sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb
#8 extracting sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb 0.2s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 12.58MB / 16.38MB 3.0s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 13.63MB / 16.00MB 2.7s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 10.49MB / 14.12MB 2.7s
#8 extracting sha256:db1d8fde5ab00eb91a63f1f2ceb21e27bf1b3e1bcb622bb9a3828478273df8cb 0.2s done
#8 extracting sha256:f3759a44eb9f3e3577a539da15a245f36a7436c3bcc726a0a4c0e677c835a6ba 0.0s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 13.63MB / 16.38MB 3.2s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 16.00MB / 16.00MB 2.9s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 14.68MB / 16.38MB 3.3s
#8 sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 16.00MB / 16.00MB 2.9s done
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 12.58MB / 14.12MB 2.9s
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 14.12MB / 14.12MB 3.0s done
#8 sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 16.38MB / 16.38MB 3.4s done
#8 sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 14.12MB / 14.12MB 3.0s done
#8 extracting sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b
#8 extracting sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 0.2s done
#8 extracting sha256:1465fd8ca4ab3bbf2ff1fd0a79ecbb543f6c91c45c4e6643f12bf8f172af186b 0.2s done
#8 extracting sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144
#8 extracting sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 0.2s done
#8 extracting sha256:95c1bc752a8b6c0d7c1951d978f7a9d88f0473002f2b6fe9c05052dfa1d64144 0.2s done
#8 extracting sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e
#8 extracting sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 0.2s done
#8 extracting sha256:f5ce33fb9a21fd7c58a485b4048bb20b38c48518028ebbc87b46da23e62cd48e 0.2s done
#8 extracting sha256:4d37eec86745434c6e5165a35a2012abbfd788ef455e7a6f3aeb282e2ef4839e 0.0s done
#8 extracting sha256:49d0e23604c0500f6a93a56a7e0951c8b8264e5822db51d8b4105d6c1a373374 0.0s done
#8 extracting sha256:ac56a29f30eb929bd39086c9e11300ca62e2e446ae9d5d557e6723ded96d1ccc 0.0s done
#8 DONE 4.4s

#9 [malicious 2/2] RUN echo "Malicious container for CVE-2018-1000533 demonstration" > /malicious.txt
#9 DONE 0.5s

#10 [vulnerable_app 2/5] RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*
#10 0.250 /bin/sh: apt-get: not found
#10 ERROR: process "/bin/sh -c apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 127

#11 [malicious] exporting to image
#11 exporting layers 0.1s done
#11 CANCELED
------
 > [vulnerable_app 2/5] RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*:
0.250 /bin/sh: apt-get: not found
------
Dockerfile:2

--------------------

   1 |     FROM docker:20.10-cli

   2 | >>> RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

   3 |     RUN mkdir -p /app

   4 |     COPY entrypoint.sh /app/entrypoint.sh

--------------------

target vulnerable_app: failed to solve: process "/bin/sh -c apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 127

