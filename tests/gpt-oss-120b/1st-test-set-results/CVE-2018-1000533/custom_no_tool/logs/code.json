{
    "files": [
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\nservices:\n  gitlist:\n    build:\n      context: ./gitlist\n    environment:\n      - VULN_MODE=enabled\n      - MYSQL_ROOT_PASSWORD=example_root_pwd\n      - MYSQL_DATABASE=gitlistdb\n      - MYSQL_USER=gitlistuser\n      - MYSQL_PASSWORD=gitlistpwd\n    depends_on:\n      - db\n    restart: unless-stopped\n    ports:\n      - \"9000:9000\"\n  nginx:\n    image: nginx:1.25.3\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro\n      - ./gitlist:/var/www/html:ro\n    depends_on:\n      - gitlist\n    restart: unless-stopped\n  db:\n    image: mariadb:10.2\n    environment:\n      MYSQL_ROOT_PASSWORD: example_root_pwd\n      MYSQL_DATABASE: gitlistdb\n      MYSQL_USER: gitlistuser\n      MYSQL_PASSWORD: gitlistpwd\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - db_data:/var/lib/mysql\n    restart: unless-stopped\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/gitlist/Dockerfile",
            "content": "FROM php:7.4-fpm\n\n# Install dependencies needed for GitList and MySQL client\nRUN apt-get update && apt-get install -y \\\n    git unzip libzip-dev default-mysql-client && \\\n    docker-php-ext-install mysqli && \\\n    docker-php-ext-configure zip && docker-php-ext-install zip && \\\n    rm -rf /var/lib/apt/lists/*\n\nWORKDIR /var/www/html\n\n# Clone the specific vulnerable version of GitList (0.5.0)\nRUN git clone --branch 0.5.0 --depth 1 https://github.com/klaussilveira/gitlist.git .\n\n# Copy initialization scripts\nCOPY entrypoint.sh /entrypoint.sh\nCOPY db_init.sh /app/db_init.sh\nCOPY init_db.sql /app/init_db.sql\nRUN chmod +x /entrypoint.sh /app/db_init.sh\n\nEXPOSE 9000\n\nENTRYPOINT [\"/entrypoint.sh\"]"
        },
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/gitlist/entrypoint.sh",
            "content": "#!/bin/sh\n# Wait for the MariaDB service to become reachable\nuntil mysqladmin ping -h db -u root -p\"${MYSQL_ROOT_PASSWORD}\" --silent; do\n  echo \"Waiting for MySQL...\"\n  sleep 2\ndone\n\n# Initialize database schema and seed data (if not already present)\n/app/db_init.sh\n\n# Start PHP-FPM\nexec php-fpm"
        },
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/gitlist/db_init.sh",
            "content": "#!/bin/sh\n# Wait for MySQL to be ready (double\u2011check)\nuntil mysqladmin ping -h db -u root -p\"${MYSQL_ROOT_PASSWORD}\" --silent; do\n  echo \"Waiting for MySQL before DB init...\"\n  sleep 2\ndone\n\n# Execute the initialization SQL script\nmysql -h db -u root -p\"${MYSQL_ROOT_PASSWORD}\" < /app/init_db.sql"
        },
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/gitlist/init_db.sql",
            "content": "CREATE DATABASE IF NOT EXISTS gitlistdb;\nUSE gitlistdb;\n-- Minimal table required for GitList demonstration\nCREATE TABLE IF NOT EXISTS repositories (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    path VARCHAR(255) NOT NULL\n);\nINSERT INTO repositories (name, path) VALUES ('demo', '/var/www/html/repo');"
        },
        {
            "location": "./../../dockers/CVE-2018-1000533/custom_no_tool/nginx/nginx.conf",
            "content": "server {\n    listen 80;\n    server_name _;\n    root /var/www/html/public;\n    index index.php index.html;\n\n    location / {\n        try_files $uri $uri/ /index.php?$args;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_pass gitlist:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n}"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2018-1000533/custom_no_tool"
}