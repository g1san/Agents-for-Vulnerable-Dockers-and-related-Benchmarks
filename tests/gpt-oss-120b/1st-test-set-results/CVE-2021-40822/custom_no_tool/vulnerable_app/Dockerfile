FROM nginx:alpine
RUN apk add --no-cache docker-cli curl
ENV DOCKER_HOST=tcp://docker:2375
WORKDIR /app
COPY index.html /usr/share/nginx/html/index.html
COPY exploit.sh /app/exploit.sh
COPY entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/exploit.sh /app/entrypoint.sh
EXPOSE 80
ENTRYPOINT ["sh", "/app/entrypoint.sh"]