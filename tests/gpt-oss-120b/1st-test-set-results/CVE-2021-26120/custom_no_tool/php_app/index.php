<?php
require __DIR__ . '/vendor/autoload.php';

use Smarty\Smarty;

$smarty = new Smarty();
// Configure Smarty directories (using defaults inside the container)
$smarty->setTemplateDir(__DIR__ . '/templates');
$smarty->setCompileDir(__DIR__ . '/templates_c');
$smarty->setCacheDir(__DIR__ . '/cache');
$smarty->setConfigDir(__DIR__ . '/configs');

// Simple demonstration: load a template whose name can be supplied via query string
$tpl = isset($_GET['tpl']) ? basename($_GET['tpl']) : 'vuln.tpl';
$input = isset($_GET['input']) ? $_GET['input'] : 'hello';
$smarty->assign('user_input', $input);

// NOTE: In a real vulnerable scenario the template name would be controlled by an attacker.
// The vulnerable Smarty versions allow constructs like {function name=...} inside the template.
// This demo simply renders the selected template.
$smarty->display($tpl);
?>