FROM httpd:2.4.29

COPY httpd/conf/httpd.conf /usr/local/apache2/conf/httpd.conf

RUN mkdir -p /usr/local/apache2/htdocs/uploads \
    && mkdir -p /usr/local/apache2/cgi-bin \
    && chown -R daemon:daemon /usr/local/apache2/htdocs/uploads /usr/local/apache2/cgi-bin

COPY httpd/cgi-bin/upload.sh /usr/local/apache2/cgi-bin/upload.sh

RUN chmod +x /usr/local/apache2/cgi-bin/upload.sh