{
    "files": [
        {
            "location": "./../../dockers/CVE-2016-1898/custom_no_tool/docker-compose.yml",
            "content": "services:\n  web:\n    build: ./web\n    ports:\n      - \"80:80\"\n    depends_on:\n      - db\n      - ffmpeg\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: user\n      MYSQL_PASSWORD: userpass\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n    ports:\n      - \"3306:3306\"\n      - \"33060:33060\"\n  ffmpeg:\n    build: ./ffmpeg\n    restart: unless-stopped\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2016-1898/custom_no_tool/ffmpeg/Dockerfile",
            "content": "FROM ubuntu:18.04\nRUN apt-get update && apt-get install -y \\\n    autoconf \\\n    automake \\\n    build-essential \\\n    pkg-config \\\n    libass-dev \\\n    libfreetype6-dev \\\n    libgnutls28-dev \\\n    libmp3lame-dev \\\n    libopus-dev \\\n    libtheora-dev \\\n    libtool \\\n    libvorbis-dev \\\n    libvpx-dev \\\n    libx264-dev \\\n    yasm \\\n    nasm \\\n    wget && rm -rf /var/lib/apt/lists/*\nENV FFMPEG_VERSION=2.0.2\nRUN wget https://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.bz2 && \\\n    tar xjf ffmpeg-${FFMPEG_VERSION}.tar.bz2 && \\\n    cd ffmpeg-${FFMPEG_VERSION} && \\\n    ./configure --enable-gpl --enable-nonfree --enable-libx264 --enable-libmp3lame --enable-libopus --disable-doc && \\\n    make -j$(nproc) && \\\n    make install && \\\n    cd .. && rm -rf ffmpeg-${FFMPEG_VERSION} ffmpeg-${FFMPEG_VERSION}.tar.bz2\nCMD [\"tail\", \"-f\", \"/dev/null\"]"
        },
        {
            "location": "./../../dockers/CVE-2016-1898/custom_no_tool/web/Dockerfile",
            "content": "FROM php:7.4-apache\nRUN apt-get update && apt-get install -y default-mysql-client default-libmysqlclient-dev && docker-php-ext-install mysqli && rm -rf /var/lib/apt/lists/*\nCOPY index.php /var/www/html/"
        },
        {
            "location": "./../../dockers/CVE-2016-1898/custom_no_tool/web/index.php",
            "content": "<?php\nif (isset($_GET['file'])) {\n    $file = $_GET['file'];\n    // vulnerable: no validation of the file path\n    readfile($file);\n} else {\n    echo \"Provide ?file=path\";\n}\n?>"
        },
        {
            "location": "./../../dockers/CVE-2016-1898/custom_no_tool/db/init.sql",
            "content": "CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, username VARCHAR(50), password VARCHAR(50));\nINSERT INTO users (username, password) VALUES ('admin','adminpass'), ('user','userpass');"
        }
    ],
    "directory_tree": "CVE-2016-1898/custom_no_tool"
}