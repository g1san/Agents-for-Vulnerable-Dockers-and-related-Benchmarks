{
    "files": [
        {
            "location": "./../../dockers/CVE-2020-11978/custom_no_tool/docker-compose.yml",
            "content": "services:\n  airflow:\n    build: ./airflow\n    environment:\n      - AIRFLOW__CORE__LOAD_EXAMPLES=False\n      - AIRFLOW__CORE__EXECUTOR=SequentialExecutor\n      - AIRFLOW__CORE__SQL_ALCHEMY_CONN=sqlite:////usr/local/airflow/airflow.db\n    ports:\n      - \"8080:8080\"\n    entrypoint: [\"sh\", \"/entrypoint.sh\"]\n    command: [\"webserver\"]\n    volumes:\n      - airflow_data:/usr/local/airflow\n  scheduler:\n    build: ./airflow\n    environment:\n      - AIRFLOW__CORE__LOAD_EXAMPLES=False\n      - AIRFLOW__CORE__EXECUTOR=SequentialExecutor\n      - AIRFLOW__CORE__SQL_ALCHEMY_CONN=sqlite:////usr/local/airflow/airflow.db\n    entrypoint: [\"sh\", \"/entrypoint.sh\"]\n    command: [\"scheduler\"]\n    depends_on:\n      - airflow\n    volumes:\n      - airflow_data:/usr/local/airflow\nvolumes:\n  airflow_data:"
        },
        {
            "location": "./../../dockers/CVE-2020-11978/custom_no_tool/airflow/Dockerfile",
            "content": "FROM apache/airflow:1.10.10\n\n# Switch to root to create the directory that will hold the SQLite DB and set correct permissions\nUSER root\nRUN mkdir -p /usr/local/airflow && chown -R airflow:airflow /usr/local/airflow\n\n# Copy the custom entrypoint script and make it executable\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh \\\n    && chown airflow:airflow /entrypoint.sh\n\n# Return to the default non\u2011root airflow user provided by the base image\nUSER airflow"
        },
        {
            "location": "./../../dockers/CVE-2020-11978/custom_no_tool/airflow/entrypoint.sh",
            "content": "#!/bin/sh\nset -e\n\n# Initialise the metadata database only when the webserver starts\nCOMPONENT=${1:-webserver}\n\nif [ \"$COMPONENT\" = \"webserver\" ]; then\n  if [ ! -f /usr/local/airflow/airflow.db ]; then\n    airflow db init\n  fi\nfi\n\nif [ \"$COMPONENT\" = \"scheduler\" ]; then\n  exec airflow scheduler\nelse\n  exec airflow webserver\nfi"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2020-11978/custom_no_tool"
}