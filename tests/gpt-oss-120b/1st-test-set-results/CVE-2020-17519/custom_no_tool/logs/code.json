{
    "files": [
        {
            "location": "./../../dockers/CVE-2020-17519/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\nservices:\n  jobmanager:\n    image: flink:1.11.2\n    ports:\n      - \"8081:8081\"\n    command: jobmanager\n    environment:\n      - JOB_MANAGER_RPC_ADDRESS=jobmanager\n    container_name: jobmanager\n\n  taskmanager:\n    image: flink:1.11.2\n    depends_on:\n      - jobmanager\n    environment:\n      - JOB_MANAGER_RPC_ADDRESS=jobmanager\n    command: taskmanager\n    ports:\n      - \"6123:6123\"\n    container_name: taskmanager\n\n  mysql:\n    image: mysql:8.0\n    ports:\n      - \"3306:3306\"\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpwd\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: testuser\n      MYSQL_PASSWORD: testpwd\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - ./db:/docker-entrypoint-initdb.d\n    container_name: mysql\n\n  php_app:\n    build:\n      context: ./app\n    ports:\n      - \"80:80\"\n    environment:\n      - MYSQL_HOST=mysql\n      - MYSQL_DATABASE=testdb\n      - MYSQL_USER=testuser\n      - MYSQL_PASSWORD=testpwd\n    depends_on:\n      mysql:\n        condition: service_healthy\n    container_name: php_app"
        },
        {
            "location": "./../../dockers/CVE-2020-17519/custom_no_tool/app/Dockerfile",
            "content": "FROM php:8.2-apache\n\n# Install required packages for building mysqli and other extensions\nRUN apt-get update && \\\n    apt-get install -y \\\n      default-libmysqlclient-dev \\\n      libzip-dev \\\n      build-essential \\\n      && docker-php-ext-install mysqli \\\n      && docker-php-ext-enable mysqli \\\n      && apt-get purge -y --auto-remove default-libmysqlclient-dev build-essential \\\n      && rm -rf /var/lib/apt/lists/*\n\nCOPY src/ /var/www/html/"
        },
        {
            "location": "./../../dockers/CVE-2020-17519/custom_no_tool/app/src/index.php",
            "content": "<?php\n$host = getenv('MYSQL_HOST') ?: 'mysql';\n$user = getenv('MYSQL_USER') ?: 'testuser';\n$pass = getenv('MYSQL_PASSWORD') ?: 'testpwd';\n$db   = getenv('MYSQL_DATABASE') ?: 'testdb';\n\n$mysqli = new mysqli($host, $user, $pass, $db);\n\nif ($mysqli->connect_error) {\n    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);\n}\n\n$result = $mysqli->query('SELECT id, name FROM users');\nwhile ($row = $result->fetch_assoc()) {\n    echo $row['id'] . ': ' . $row['name'] . \"\\n\";\n}\n?>"
        },
        {
            "location": "./../../dockers/CVE-2020-17519/custom_no_tool/db/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(100) NOT NULL\n);\n\nINSERT INTO users (name) VALUES ('Alice'), ('Bob'), ('Charlie');"
        }
    ],
    "directory_tree": "custom_no_tool/\n  docker-compose.yml\n  app/\n    Dockerfile\n    src/\n      index.php\n  db/\n    init.sql"
}