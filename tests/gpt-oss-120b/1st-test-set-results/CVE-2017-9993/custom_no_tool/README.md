# CVE-2017-9993 Reproduction Environment

This Docker Compose setup creates a minimal environment that includes the vulnerable Gogs service (version **0.11.0**) which is affected by CVE-2017-9993. The accompanying MySQL database is preâ€‘configured with a small test dataset so Gogs can start without manual intervention.

## How to run
```bash
cd ./../../dockers/CVE-2017-9993/custom_no_tool
docker compose up -d --build
```

The Gogs web interface will be reachable at `http://localhost:3000`. Use the default admin credentials (`admin` / `admin`) or create a new account.

The exploit for CVE-2017-9993 can be performed against the running Gogs instance on port **3000**.

## Test data
A simple SQL file (`init.sql`) is mounted into the MySQL container and creates a dummy table `test` with a few rows. This demonstrates that the database is automatically populated on first start.

## Notes on the Dockerfile
* The Gogs binary is downloaded as a **ZIP** archive. After extraction, the contained folder is flattened so that the `gogs` executable resides directly in `/app/gogs`.
* All required packages (`ca-certificates`, `tzdata`, `git`, `openssh-client`, `wget`, `curl`, `ffmpeg`) **plus** the runtime libraries needed by the Gogs binary (`libsqlite3-0`, `libssl1.1`) are installed via `apt-get`.
* The `gogs` user owns the entire `/app/gogs` directory after extraction, ensuring the service can start without permission issues.
* No `gosu` utility is required; the container switches to the `gogs` user with the `USER` directive.

With these changes the stack builds and starts automatically using `docker compose up`.