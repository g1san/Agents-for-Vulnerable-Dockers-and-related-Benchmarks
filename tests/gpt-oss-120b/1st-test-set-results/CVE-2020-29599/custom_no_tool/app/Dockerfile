FROM node:14-alpine3.12
WORKDIR /usr/src/app
# Install ImageMagick and required runtime dependencies
RUN apk update && apk add --no-cache \
    imagemagick \
    ghostscript \
    libxml2 \
    libjpeg-turbo \
    libpng \
    freetype
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 8080
CMD ["node", "server.js"]