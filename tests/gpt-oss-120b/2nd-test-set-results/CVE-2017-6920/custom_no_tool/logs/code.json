{
    "files": [
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: user\n      MYSQL_PASSWORD: userpass\n    volumes:\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n    ports:\n      - \"3306:3306\"\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  drupal:\n    build: ./drupal\n    environment:\n      DRUPAL_DB_HOST: db\n      DRUPAL_DB_NAME: testdb\n      DRUPAL_DB_USER: user\n      DRUPAL_DB_PASSWORD: userpass\n    volumes:\n      - drupal-data:/var/www/html\n    depends_on:\n      db:\n        condition: service_healthy\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://nginx\"]\n      interval: 15s\n      timeout: 5s\n      retries: 5\n\n  nginx:\n    build: ./nginx\n    ports:\n      - \"80:80\"\n    depends_on:\n      drupal:\n        condition: service_started\n    links:\n      - drupal\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"]\n      interval: 15s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  drupal-data:\n"
        },
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/nginx/Dockerfile",
            "content": "FROM nginx:1.21-alpine\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\n"
        },
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/nginx/nginx.conf",
            "content": "server {\n    listen 80;\n    server_name _;\n    root /var/www/html;\n    index index.php index.html index.htm;\n\n    location / {\n        try_files $uri /index.php?$query_string;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass drupal:9000;\n        fastcgi_index index.php;\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $fastcgi_path_info;\n    }\n\n    location ~ /\\.?ht {\n        deny all;\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/drupal/Dockerfile",
            "content": "FROM drupal:8.3.3-fpm\nCOPY php.ini /usr/local/etc/php/conf.d/custom.ini\n"
        },
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/drupal/php.ini",
            "content": "[yaml]\n; Ensure the yaml PHP extension does not allow deserialization of PHP objects\nyaml.decode_php = 0\n"
        },
        {
            "location": "./../../dockers/CVE-2017-6920/custom_no_tool/db/init.sql",
            "content": "CREATE TABLE users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL\n);\nINSERT INTO users (name) VALUES ('alice'), ('bob');\n"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2017-6920/custom_no_tool"
}