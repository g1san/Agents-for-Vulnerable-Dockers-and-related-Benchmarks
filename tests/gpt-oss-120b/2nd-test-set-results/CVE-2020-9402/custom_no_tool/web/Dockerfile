FROM oraclelinux:8

# Install required packages, Oracle Instant Client and Python 3.8
RUN yum -y install oracle-release-el8 && \
    yum -y install oracle-instantclient19.8-basic oracle-instantclient19.8-sdk \
    python38 python38-pip gcc libaio libaio-devel && \
    yum clean all && rm -rf /var/cache/yum

# Set environment variable for Instant Client
ENV LD_LIBRARY_PATH=/usr/lib/oracle/19.8/client64/lib:${LD_LIBRARY_PATH}

# Install Python dependencies
RUN pip3 install --no-cache-dir Django==2.2.24 cx_Oracle==8.3.0

WORKDIR /app
COPY . /app

EXPOSE 8000

CMD ["python3", "manage.py", "runserver", "0.0.0.0:8000"]