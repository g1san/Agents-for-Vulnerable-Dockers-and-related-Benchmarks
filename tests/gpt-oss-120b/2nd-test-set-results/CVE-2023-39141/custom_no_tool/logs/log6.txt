#1 [internal] load local bake definitions
#1 reading from stdin 1.34kB done
#1 DONE 0.0s

#2 [db internal] load build definition from Dockerfile
#2 transferring dockerfile: 205B done
#2 DONE 0.0s

#3 [webui internal] load build definition from Dockerfile
#3 transferring dockerfile: 578B done
#3 DONE 0.0s

#4 [webui internal] load metadata for docker.io/library/node:18-alpine
#4 ...

#5 [db internal] load metadata for docker.io/library/mysql:5.7
#5 DONE 0.4s

#6 [db internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [db internal] load build context
#7 transferring context: 255B done
#7 DONE 0.0s

#4 [webui internal] load metadata for docker.io/library/node:18-alpine
#4 DONE 0.4s

#8 [webui internal] load .dockerignore
#8 transferring context: 2B done
#8 DONE 0.0s

#9 [db 1/2] FROM docker.io/library/mysql:5.7@sha256:4bc6bc963e6d8443453676cae56536f4b8156d78bae03c0145cbe47c2aad73bb
#9 resolve docker.io/library/mysql:5.7@sha256:4bc6bc963e6d8443453676cae56536f4b8156d78bae03c0145cbe47c2aad73bb 0.0s done
#9 DONE 0.0s

#10 [db 2/2] COPY init.sql /docker-entrypoint-initdb.d/
#10 CACHED

#11 [webui 1/6] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#11 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.0s done
#11 CACHED

#12 [webui internal] load build context
#12 transferring context: 1.40kB done
#12 DONE 0.0s

#13 [db] exporting to image
#13 exporting layers done
#13 exporting manifest sha256:a31d2f517b2acf00be9365696ae296bda9e03c2509cba1da698976f72ec25a9b done
#13 exporting config sha256:46e20efd822d0e5aba7d2d661881d24a88f71bce0391b5c4de8b11dbbc202e4b done
#13 exporting attestation manifest sha256:49305239402f6ac36bd70e73877fc870bdc4d6a0964ef6931a7d8aec52117278
#13 exporting attestation manifest sha256:49305239402f6ac36bd70e73877fc870bdc4d6a0964ef6931a7d8aec52117278 0.0s done
#13 exporting manifest list sha256:5190aef9859f9812c20c4f977c27fbc009fae89c8f70552a77f27cd5fb40d5ce 0.0s done
#13 naming to docker.io/library/custom_no_tool-db:latest done
#13 unpacking to docker.io/library/custom_no_tool-db:latest 0.0s done
#13 DONE 0.1s

#14 [db] resolving provenance for metadata file
#14 DONE 0.0s

#15 [webui 2/6] RUN apk add --no-cache git make gcc g++ python3
#15 0.216 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
#15 0.421 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
#15 0.781 (1/39) Installing libstdc++-dev (14.2.0-r4)
#15 1.333 (2/39) Installing jansson (2.14-r4)
#15 1.352 (3/39) Installing zstd-libs (1.5.6-r2)
#15 1.412 (4/39) Installing binutils (2.43.1-r3)
#15 1.858 (5/39) Installing libgomp (14.2.0-r4)
#15 1.890 (6/39) Installing libatomic (14.2.0-r4)
#15 1.905 (7/39) Installing gmp (6.3.0-r2)
#15 1.946 (8/39) Installing isl26 (0.26-r1)
#15 2.066 (9/39) Installing mpfr4 (4.2.1-r0)
#15 2.117 (10/39) Installing mpc1 (1.3.1-r1)
#15 2.143 (11/39) Installing gcc (14.2.0-r4)
#15 10.88 (12/39) Installing musl-dev (1.2.5-r9)
#15 11.60 (13/39) Installing g++ (14.2.0-r4)
#15 13.74 (14/39) Installing brotli-libs (1.1.0-r2)
#15 13.80 (15/39) Installing c-ares (1.34.5-r0)
#15 13.83 (16/39) Installing libunistring (1.2-r0)
#15 13.91 (17/39) Installing libidn2 (2.3.7-r0)
#15 13.93 (18/39) Installing nghttp2-libs (1.64.0-r0)
#15 13.95 (19/39) Installing libpsl (0.21.5-r3)
#15 13.97 (20/39) Installing libcurl (8.14.1-r2)
#15 14.02 (21/39) Installing libexpat (2.7.3-r0)
#15 14.04 (22/39) Installing pcre2 (10.43-r0)
#15 14.08 (23/39) Installing git (2.47.3-r0)
#15 14.48 (24/39) Installing git-init-template (2.47.3-r0)
#15 14.50 (25/39) Installing make (4.4.1-r2)
#15 14.52 (26/39) Installing libbz2 (1.0.8-r6)
#15 14.54 (27/39) Installing libffi (3.4.7-r0)
#15 14.56 (28/39) Installing gdbm (1.24-r0)
#15 14.58 (29/39) Installing xz-libs (5.6.3-r1)
#15 14.61 (30/39) Installing mpdecimal (4.0.0-r0)
#15 14.63 (31/39) Installing ncurses-terminfo-base (6.5_p20241006-r3)
#15 14.65 (32/39) Installing libncursesw (6.5_p20241006-r3)
#15 14.68 (33/39) Installing libpanelw (6.5_p20241006-r3)
#15 14.69 (34/39) Installing readline (8.2.13-r0)
#15 14.72 (35/39) Installing sqlite-libs (3.48.0-r4)
#15 14.85 (36/39) Installing python3 (3.12.12-r0)
#15 15.70 (37/39) Installing python3-pycache-pyc0 (3.12.12-r0)
#15 16.11 (38/39) Installing pyc (3.12.12-r0)
#15 16.11 (39/39) Installing python3-pyc (3.12.12-r0)
#15 16.11 Executing busybox-1.37.0-r12.trigger
#15 16.12 OK: 280 MiB in 56 packages
#15 DONE 41.0s

#16 [webui 3/6] WORKDIR /app
#16 DONE 0.0s

#17 [webui 4/6] RUN git clone https://github.com/ziahamza/webui-aria2.git .
#17 0.212 Cloning into '.'...
#17 DONE 2.3s

#18 [webui 5/6] COPY node-server.js /app/node-server.js
#18 DONE 0.0s

#19 [webui 6/6] RUN npm ci
#19 1.218 npm warn old lockfile
#19 1.218 npm warn old lockfile The package-lock.json file was created with an old version of npm,
#19 1.218 npm warn old lockfile so supplemental metadata must be fetched from the registry.
#19 1.218 npm warn old lockfile
#19 1.218 npm warn old lockfile This is a one-time fix-up, please be patient...
#19 1.218 npm warn old lockfile
#19 8.648 npm warn deprecated workbox-google-analytics@3.4.1: It is not compatible with newer versions of GA starting with v4, as long as you are using GAv3 it should be ok, but the package is not longer being maintained
#19 8.767 npm warn deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
#19 8.908 npm warn deprecated topo@2.0.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
#19 9.179 npm warn deprecated source-map-url@0.4.0: See https://github.com/lydell/source-map-url#deprecated
#19 9.180 npm warn deprecated set-value@2.0.0: Critical bug fixed in v3.0.1, please upgrade to the latest version.
#19 9.246 npm warn deprecated rimraf@2.6.2: Rimraf versions prior to v4 are no longer supported
#19 9.324 npm warn deprecated uuid@3.3.2: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
#19 9.365 npm warn deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
#19 9.686 npm warn deprecated osenv@0.1.5: This package is no longer supported.
#19 9.749 npm warn deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.
#19 9.848 npm warn deprecated npmlog@4.1.2: This package is no longer supported.
#19 9.892 npm warn deprecated mixin-deep@1.3.1: Critical bug fixed in v2.0.1, please upgrade to the latest version.
#19 9.892 npm warn deprecated move-concurrently@1.0.1: This package is no longer supported.
#19 10.14 npm warn deprecated request@2.87.0: request has been deprecated, see https://github.com/request/request/issues/3142
#19 10.22 npm warn deprecated lodash.template@4.4.0: This package is deprecated. Use https://socket.dev/npm/package/eta instead.
#19 10.29 npm warn deprecated source-map-resolve@0.5.2: See https://github.com/lydell/source-map-resolve#deprecated
#19 10.47 npm warn deprecated is-data-descriptor@0.1.4: Please upgrade to v0.1.5
#19 10.49 npm warn deprecated is-accessor-descriptor@0.1.6: Please upgrade to v0.1.7
#19 10.52 npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
#19 10.55 npm warn deprecated tar@2.2.1: This version of tar is no longer supported, and will not receive security updates. Please upgrade asap.
#19 10.59 npm warn deprecated hoek@4.2.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
#19 10.67 npm warn deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)
#19 10.70 npm warn deprecated har-validator@5.0.3: this library is no longer supported
#19 10.70 npm warn deprecated glob@7.1.3: Glob versions prior to v9 are no longer supported
#19 10.83 npm warn deprecated html-webpack-plugin@3.2.0: 3.x is no longer supported
#19 10.87 npm warn deprecated fs-write-stream-atomic@1.0.10: This package is no longer supported.
#19 11.17 npm warn deprecated domelementtype@1.3.0: update to domelementtype@1.3.1
#19 11.27 npm warn deprecated gauge@2.7.4: This package is no longer supported.
#19 11.33 npm warn deprecated copy-concurrently@1.0.5: This package is no longer supported.
#19 11.47 npm warn deprecated uglify-es@3.3.9: support for ECMAScript is superseded by `uglify-js` as of v3.13.0
#19 11.64 npm warn deprecated fstream@1.0.11: This package is no longer supported.
#19 11.75 npm warn deprecated are-we-there-yet@1.1.5: This package is no longer supported.
#19 11.85 npm warn deprecated acorn-dynamic-import@3.0.0: This is probably built in to whatever tool you're using. If you still need it... idk
#19 12.02 npm warn deprecated set-value@0.4.3: Critical bug fixed in v3.0.1, please upgrade to the latest version.
#19 12.04 npm warn deprecated is-accessor-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.07 npm warn deprecated is-data-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.37 npm warn deprecated is-data-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.37 npm warn deprecated is-data-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.38 npm warn deprecated joi@11.4.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
#19 12.38 npm warn deprecated is-accessor-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.38 npm warn deprecated is-accessor-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.41 npm warn deprecated is-accessor-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.43 npm warn deprecated is-data-descriptor@1.0.0: Please upgrade to v1.0.1
#19 12.54 npm warn deprecated bfj-node4@5.3.1: Switch to the `bfj` package for fixes and new features!
#19 12.56 npm warn deprecated buffer@4.9.1: This version of 'buffer' is out-of-date. You must update to v4.9.2 or newer
#19 12.58 npm warn deprecated angular-translate@2.18.1: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.
#19 12.97 npm warn deprecated angular@1.7.3: For the actively supported Angular, see https://www.npmjs.com/package/@angular/core. AngularJS support has officially ended. For extended AngularJS support options, see https://goo.gle/angularjs-path-forward.
#19 13.10 npm warn deprecated jquery@3.3.1: This version is deprecated. Please upgrade to the latest version or find support at https://www.herodevs.com/support/jquery-nes.
#19 13.65 npm warn deprecated node-sass@4.9.3: Node Sass is no longer supported. Please use `sass` or `sass-embedded` instead.
#19 14.27 npm warn deprecated flag-icon-css@3.0.0: The project has been renamed to flag-icons
#19 14.71 npm warn deprecated core-js@2.5.7: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.
#19 17.20 npm error code 1
#19 17.20 npm error path /app/node_modules/node-sass
#19 17.20 npm error command failed
#19 17.20 npm error command sh -c node scripts/build.js
#19 17.20 npm error Building: /usr/local/bin/node /app/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
#19 17.20 npm error gyp info it worked if it ends with ok
#19 17.20 npm error gyp verb cli [
#19 17.20 npm error gyp verb cli   '/usr/local/bin/node',
#19 17.20 npm error gyp verb cli   '/app/node_modules/node-gyp/bin/node-gyp.js',
#19 17.20 npm error gyp verb cli   'rebuild',
#19 17.20 npm error gyp verb cli   '--verbose',
#19 17.20 npm error gyp verb cli   '--libsass_ext=',
#19 17.20 npm error gyp verb cli   '--libsass_cflags=',
#19 17.20 npm error gyp verb cli   '--libsass_ldflags=',
#19 17.20 npm error gyp verb cli   '--libsass_library='
#19 17.20 npm error gyp verb cli ]
#19 17.20 npm error gyp info using node-gyp@3.8.0
#19 17.20 npm error gyp info using node@18.20.8 | linux | x64
#19 17.20 npm error gyp verb command rebuild []
#19 17.20 npm error gyp verb command clean []
#19 17.20 npm error gyp verb clean removing "build" directory
#19 17.20 npm error gyp verb command configure []
#19 17.20 npm error gyp verb check python checking for Python executable "/usr/bin/python3" in the PATH
#19 17.20 npm error gyp verb `which` succeeded /usr/bin/python3 /usr/bin/python3
#19 17.20 npm error gyp ERR! configure error 
#19 17.20 npm error gyp ERR! stack Error: Command failed: /usr/bin/python3 -c import sys; print "%s.%s.%s" % sys.version_info[:3];
#19 17.20 npm error gyp ERR! stack   File "<string>", line 1
#19 17.20 npm error gyp ERR! stack     import sys; print "%s.%s.%s" % sys.version_info[:3];
#19 17.20 npm error gyp ERR! stack                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#19 17.20 npm error gyp ERR! stack SyntaxError: Missing parentheses in call to 'print'. Did you mean print(...)?
#19 17.20 npm error gyp ERR! stack 
#19 17.20 npm error gyp ERR! stack     at ChildProcess.exithandler (node:child_process:422:12)
#19 17.20 npm error gyp ERR! stack     at ChildProcess.emit (node:events:517:28)
#19 17.20 npm error gyp ERR! stack     at maybeClose (node:internal/child_process:1098:16)
#19 17.20 npm error gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:303:5)
#19 17.20 npm error gyp ERR! System Linux 6.6.87.2-microsoft-standard-WSL2
#19 17.20 npm error gyp ERR! command "/usr/local/bin/node" "/app/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
#19 17.20 npm error gyp ERR! cwd /app/node_modules/node-sass
#19 17.20 npm error gyp ERR! node -v v18.20.8
#19 17.20 npm error gyp ERR! node-gyp -v v3.8.0
#19 17.20 npm error gyp ERR! not ok 
#19 17.20 npm error Build failed with error code: 1
#19 17.21 npm notice
#19 17.21 npm notice New major version of npm available! 10.8.2 -> 11.6.2
#19 17.21 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
#19 17.21 npm notice To update run: npm install -g npm@11.6.2
#19 17.21 npm notice
#19 17.21 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-10-30T23_42_10_407Z-debug-0.log
#19 ERROR: process "/bin/sh -c npm ci" did not complete successfully: exit code: 1
------
 > [webui 6/6] RUN npm ci:
17.20 npm error gyp ERR! node -v v18.20.8
17.20 npm error gyp ERR! node-gyp -v v3.8.0
17.20 npm error gyp ERR! not ok 
17.20 npm error Build failed with error code: 1
17.21 npm notice
17.21 npm notice New major version of npm available! 10.8.2 -> 11.6.2
17.21 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.2
17.21 npm notice To update run: npm install -g npm@11.6.2
17.21 npm notice
17.21 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-10-30T23_42_10_407Z-debug-0.log
------
Dockerfile:18

--------------------

  16 |     

  17 |     # Install dependencies

  18 | >>> RUN npm ci

  19 |     

  20 |     EXPOSE 80

--------------------

target webui: failed to solve: process "/bin/sh -c npm ci" did not complete successfully: exit code: 1

