FROM openjdk:8-jre-slim

ENV ACTIVEMQ_VERSION=5.13.2
ENV ACTIVEMQ_HOME=/opt/activemq

RUN apt-get update && \
    apt-get install -y curl tar ca-certificates && \
    rm -rf /var/lib/apt/lists/* && \
    mkdir -p $ACTIVEMQ_HOME && \
    curl -fSL "https://archive.apache.org/dist/activemq/$ACTIVEMQ_VERSION/apache-activemq-$ACTIVEMQ_VERSION-bin.tar.gz" -o /tmp/activemq.tgz && \
    tar -xzf /tmp/activemq.tgz -C $ACTIVEMQ_HOME --strip-components=1 && \
    rm -f /tmp/activemq.tgz && \
    chmod +x $ACTIVEMQ_HOME/bin/*

EXPOSE 61616 8161

CMD ["/opt/activemq/bin/activemq", "console"]