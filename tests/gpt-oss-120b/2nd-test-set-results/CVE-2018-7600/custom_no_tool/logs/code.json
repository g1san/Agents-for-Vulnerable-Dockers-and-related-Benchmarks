{
    "files": [
        {
            "location": "./../../dockers/CVE-2018-7600/custom_no_tool/docker-compose.yml",
            "content": "services:\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: drupal\n      MYSQL_USER: drupal\n      MYSQL_PASSWORD: drupalpass\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql:ro\n  drupal:\n    build: .\n    depends_on:\n      - db\n    ports:\n      - \"8080:80\"\n    environment:\n      DRUPAL_DB_HOST: db\n      DRUPAL_DB_USER: drupal\n      DRUPAL_DB_PASSWORD: drupalpass\n      DRUPAL_DB_NAME: drupal\n    volumes:\n      - drupal_files:/var/www/html/sites/default/files\nvolumes:\n  db_data:\n  drupal_files:\n"
        },
        {
            "location": "./../../dockers/CVE-2018-7600/custom_no_tool/Dockerfile",
            "content": "FROM drupal:7-apache\n\n# Install required tools (curl, git, unzip, MySQL client, PHP CLI and extensions) and CA certificates\nRUN set -eux; \\\n    apt-get update; \\\n    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\\n        curl git unzip default-mysql-client php-cli php-mbstring php-xml ca-certificates; \\\n    rm -rf /var/lib/apt/lists/*\n\n# Install Drush 8 (follow redirects)\nRUN curl -L -fsSL https://github.com/drush-ops/drush/releases/download/8.4.8/drush.phar -o /usr/local/bin/drush \\\n    && chmod +x /usr/local/bin/drush\n\n# Copy custom entrypoint\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\nCMD [\"apache2-foreground\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2018-7600/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/bash\nset -e\n\n# Wait for the MySQL service to be ready using Drupal DB credentials\ntimeout=60\nwhile ! mysqladmin ping -h\"${DRUPAL_DB_HOST}\" -u\"${DRUPAL_DB_USER}\" -p\"${DRUPAL_DB_PASSWORD}\" --silent; do\n  timeout=$((timeout-1))\n  if [ $timeout -le 0 ]; then\n    echo \"MySQL not reachable, exiting.\"\n    exit 1\n  fi\n  echo \"Waiting for MySQL...\"\n  sleep 2\ndone\n\n# If Drupal is not installed, run site install via Drush\nif [ ! -f /var/www/html/sites/default/settings.php ]; then\n  echo \"Installing Drupal site...\"\n  drush site:install standard \\\n    --db-url=\"mysqli://${DRUPAL_DB_USER}:${DRUPAL_DB_PASSWORD}@${DRUPAL_DB_HOST}/${DRUPAL_DB_NAME}\" \\\n    --site-name=\"Vulnerable Drupal\" \\\n    --account-name=admin \\\n    --account-pass=admin \\\n    -y\nfi\n\n# Execute the default command (Apache foreground)\nexec \"$@\"\n"
        },
        {
            "location": "./../../dockers/CVE-2018-7600/custom_no_tool/db/init.sql",
            "content": "-- Sample init script for MySQL (no tables needed for Drupal auto\u2011install)\n-- This file ensures the DB container runs the init script mechanism.\n-- No pre\u2011populated data is required; Drupal will create its own schema on first run.\n\n-- Optional test data (a minimal user record) can be added here if desired if desired.\n"
        }
    ],
    "directory_tree": "CVE-2018-7600/custom_no_tool"
}