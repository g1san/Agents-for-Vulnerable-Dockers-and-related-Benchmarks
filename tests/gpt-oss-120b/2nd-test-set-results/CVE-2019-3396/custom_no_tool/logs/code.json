{
    "files": [
        {
            "location": "./../../dockers/CVE-2019-3396/custom_no_tool/docker-compose.yml",
            "content": "services:\n  db:\n    image: postgres:10\n    container_name: confluence-db\n    environment:\n      POSTGRES_USER: confluence\n      POSTGRES_PASSWORD: confluence\n      POSTGRES_DB: confluence\n    volumes:\n      - db_data:/var/lib/postgresql/data\n      - ./postgres/init.sql:/docker-entrypoint-initdb.d/init.sql\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U confluence -d confluence\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    restart: unless-stopped\n\n  confluence:\n    build: .\n    container_name: confluence\n    depends_on:\n      db:\n        condition: service_healthy\n    ports:\n      - \"8090:8090\"\n    environment:\n      ATL_JDBC_URL: jdbc:postgresql://db:5432/confluence\n      ATL_JDBC_USER: confluence\n      ATL_JDBC_PASSWORD: confluence\n      ATL_JDBC_DRIVER: org.postgresql.Driver\n      ATL_DB_TYPE: postgresql\n    volumes:\n      - confluence_data:/var/atlassian/application-data/confluence\n    command: [\"/usr/local/bin/wait-for-it.sh\",\"db\",\"5432\",\"--\",\"/entrypoint.sh\"]\n    restart: unless-stopped\n\nvolumes:\n  db_data:\n  confluence_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2019-3396/custom_no_tool/Dockerfile",
            "content": "FROM atlassian/confluence-server:6.14.1\n\n# Install netcat (required by wait\u2011for\u2011it script)\nRUN apt-get update && apt-get install -y netcat-openbsd && rm -rf /var/lib/apt/lists/*\n\n# Copy the wait\u2011for\u2011it script and make it executable\nCOPY wait-for-it.sh /usr/local/bin/wait-for-it.sh\nRUN chmod +x /usr/local/bin/wait-for-it.sh\n"
        },
        {
            "location": "./../../dockers/CVE-2019-3396/custom_no_tool/wait-for-it.sh",
            "content": "#!/usr/bin/env bash\n# Simple wait\u2011for\u2011it script adapted for Docker Compose\nset -e\n\nhost=\"$1\"\nport=\"$2\"\nshift 2\n\nwhile ! nc -z \"$host\" \"$port\" 2>/dev/null; do\n  echo \"Waiting for $host:$port...\"\n  sleep 2\ndone\n\nexec \"$@\"\n"
        },
        {
            "location": "./../../dockers/CVE-2019-3396/custom_no_tool/postgres/init.sql",
            "content": "-- Sample data for Confluence testing\nCREATE TABLE sample_table (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    value TEXT\n);\n\nINSERT INTO sample_table (name, value) VALUES ('test1', 'value1');\nINSERT INTO sample_table (name, value) VALUES ('test2', 'value2');\n"
        }
    ],
    "directory_tree": "CVE-2019-3396/custom_no_tool"
}