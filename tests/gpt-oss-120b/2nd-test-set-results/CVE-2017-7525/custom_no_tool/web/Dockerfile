FROM tomcat:7.0.81-jre8

# Copy the JSP page into the ROOT webapp
COPY index.jsp /usr/local/tomcat/webapps/ROOT/

# Download vulnerable Jackson Databind (2.8.8) and its dependencies
RUN mkdir -p /usr/local/tomcat/webapps/ROOT/WEB-INF/lib && \
    cd /usr/local/tomcat/webapps/ROOT/WEB-INF/lib && \
    curl -fSL https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.8.8/jackson-databind-2.8.8.jar -o jackson-databind-2.8.8.jar && \
    curl -fSL https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.8/jackson-core-2.8.8.jar -o jackson-core-2.8.8.jar && \
    curl -fSL https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.8.8/jackson-annotations-2.8.8.jar -o jackson-annotations-2.8.8.jar

EXPOSE 8080