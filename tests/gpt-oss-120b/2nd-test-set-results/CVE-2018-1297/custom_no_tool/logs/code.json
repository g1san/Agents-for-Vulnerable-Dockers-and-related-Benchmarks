{
    "files": [
        {
            "location": "./../../dockers/CVE-2018-1297/custom_no_tool/docker-compose.yml",
            "content": "services:\n  web:\n    build: ./web\n    ports:\n      - \"8080:80\"\n    depends_on:\n      - db\n    environment:\n      DB_HOST: db\n      DB_USER: vuln_user\n      DB_PASSWORD: vuln_pass\n      DB_NAME: vuln_db\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: vuln_db\n      MYSQL_USER: vuln_user\n      MYSQL_PASSWORD: vuln_pass\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n  jmeter:\n    image: justb4/jmeter:2.15\n    ports:\n      - \"1099:1099\"\n    environment: {}\n    command: \"sh -c 'while true; do sleep 3600; done'\"\n  java:\n    image: openjdk:8-jre-alpine\n    command: \"sh -c 'while true; do sleep 3600; done'\"\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2018-1297/custom_no_tool/web/Dockerfile",
            "content": "FROM php:7.4-apache\nRUN apt-get update && apt-get install -y \\\n    build-essential \\\n    default-mysql-client \\\n    default-libmysqlclient-dev && \\\n    docker-php-ext-install mysqli && \\\n    docker-php-ext-enable mysqli && \\\n    rm -rf /var/lib/apt/lists/*\nCOPY src/ /var/www/html/\nEXPOSE 80"
        },
        {
            "location": "./../../dockers/CVE-2018-1297/custom_no_tool/web/src/index.php",
            "content": "<?php\n$host = getenv('DB_HOST');\n$user = getenv('DB_USER');\n$pass = getenv('DB_PASSWORD');\n$db   = getenv('DB_NAME');\n\n$conn = new mysqli($host, $user, $pass, $db);\nif ($conn->connect_error) {\n    die('Connection failed: ' . $conn->connect_error);\n}\n\n// Very insecure: directly using GET parameter in SQL query (SQL Injection)\n$id = $_GET['id'];\n$sql = \"SELECT name, email FROM users WHERE id = $id\";\n$result = $conn->query($sql);\n\nif ($result && $result->num_rows > 0) {\n    while($row = $result->fetch_assoc()) {\n        echo \"Name: \" . $row['name'] . \"<br>\";\n        echo \"Email: \" . $row['email'] . \"<br>\";\n    }\n} else {\n    echo \"No results found.\";\n}\n?>"
        },
        {
            "location": "./../../dockers/CVE-2018-1297/custom_no_tool/db/init.sql",
            "content": "CREATE TABLE users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(100) NOT NULL\n);\n\nINSERT INTO users (name, email) VALUES\n('Alice', 'alice@example.com'),\n('Bob', 'bob@example.com'),\n('Charlie', 'charlie@example.com');"
        }
    ],
    "directory_tree": "CVE-2018-1297/custom_no_tool"
}