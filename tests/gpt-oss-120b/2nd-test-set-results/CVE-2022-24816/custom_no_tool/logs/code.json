{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-24816/custom_no_tool/Dockerfile",
            "content": "FROM docker:20.10.14-dind\n\nENV GEOSERVER_VERSION=2.17.2\nENV GEOSERVER_HOME=/opt/geoserver-${GEOSERVER_VERSION}\n\n# Install Java (OpenJDK 11), Bash, curl and unzip, then download and extract GeoServer\nRUN apk add --no-cache openjdk11 bash curl unzip && \\\n    mkdir -p /opt && \\\n    curl -L -o /tmp/geoserver.zip https://downloads.sourceforge.net/project/geoserver/GeoServer/${GEOSERVER_VERSION}/geoserver-${GEOSERVER_VERSION}-bin.zip && \\\n    unzip /tmp/geoserver.zip -d /opt && \\\n    rm /tmp/geoserver.zip && \\\n    # Ensure the extracted directory matches GEOSERVER_HOME (handle possible \"-bin\" suffix)\n    mv /opt/geoserver-${GEOSERVER_VERSION}* ${GEOSERVER_HOME} && \\\n    chmod +x ${GEOSERVER_HOME}/bin/startup.sh\n\nEXPOSE 8080\n\nCOPY entrypoint.sh /entrypoint.sh\nRUN chmod +x /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]"
        },
        {
            "location": "./../../dockers/CVE-2022-24816/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/sh\n\n# Start Docker daemon in the background\ndockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock &\nDOCKER_PID=$!\n\n# Wait until Docker daemon is responsive\nwhile ! curl -s http://localhost:2375/_ping > /dev/null; do\n  sleep 1\ndone\n\n# Start GeoServer in the background using bash (startup.sh expects bash)\nbash ${GEOSERVER_HOME}/bin/startup.sh &\n\n# Keep the container alive as long as the Docker daemon runs\nwait $DOCKER_PID"
        },
        {
            "location": "./../../dockers/CVE-2022-24816/custom_no_tool/docker-compose.yml",
            "content": "services:\n  vulnerable-docker:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    privileged: true\n    ports:\n      - \"2375:2375\"\n      - \"8080:8080\"\n    environment:\n      - DOCKER_TLS_CERTDIR=\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:2375/_ping\"]\n      interval: 10s\n      timeout: 2s\n      retries: 5"
        }
    ],
    "directory_tree": "CVE-2022-24816/custom_no_tool"
}