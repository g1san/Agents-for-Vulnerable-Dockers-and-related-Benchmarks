{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-22205/custom_no_tool/docker-compose.yml",
            "content": "services:\n  db:\n    image: postgres:13-alpine\n    restart: always\n    environment:\n      POSTGRES_PASSWORD: gitlabpass\n      POSTGRES_USER: gitlab\n      POSTGRES_DB: gitlabhq_production\n    volumes:\n      - db-data:/var/lib/postgresql/data\n      - ./db_init:/docker-entrypoint-initdb.d\n\n  redis:\n    image: redis:6-alpine\n    restart: always\n    volumes:\n      - redis-data:/data\n\n  gitlab:\n    build:\n      context: .\n      dockerfile: Dockerfile.gitlab-ce\n    restart: always\n    depends_on:\n      - db\n      - redis\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://localhost:80'\n        gitlab_rails['db_adapter'] = 'postgresql'\n        gitlab_rails['db_encoding'] = 'unicode'\n        gitlab_rails['db_database'] = 'gitlabhq_production'\n        gitlab_rails['db_username'] = 'gitlab'\n        gitlab_rails['db_password'] = 'gitlabpass'\n        gitlab_rails['redis_host'] = 'redis'\n    ports:\n      - \"8080:80\"\n      - \"8443:443\"\n    volumes:\n      - gitlab-config:/etc/gitlab\n      - gitlab-logs:/var/log/gitlab\n      - gitlab-data:/var/opt/gitlab\n    ulimits:\n      nofile:\n        soft: 65536\n        hard: 65536\n      nproc: 65535\n\n  nginx:\n    image: nginx:1.21-alpine\n    restart: always\n    depends_on:\n      - gitlab\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro\n\nvolumes:\n  db-data:\n  redis-data:\n  gitlab-config:\n  gitlab-logs:\n  gitlab-data:"
        },
        {
            "location": "./../../dockers/CVE-2021-22205/custom_no_tool/Dockerfile.gitlab-ce",
            "content": "FROM gitlab/gitlab-ce:13.8.8-ce.0\n\n# No additional package installation \u2013 base image already contains required tools.\n\nHEALTHCHECK --interval=30s --timeout=10s --start-period=300s \\\n  CMD curl -fs http://127.0.0.1:80/-/readiness || exit 1"
        },
        {
            "location": "./../../dockers/CVE-2021-22205/custom_no_tool/nginx.conf",
            "content": "server {\n    listen 80;\n    server_name _;\n    location / {\n        proxy_pass http://gitlab:80;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}"
        },
        {
            "location": "./../../dockers/CVE-2021-22205/custom_no_tool/db_init/init.sql",
            "content": "-- Simple test data for GitLab's PostgreSQL database\nCREATE TABLE IF NOT EXISTS test_table (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n);\n\nINSERT INTO test_table (name) VALUES ('sample data 1'), ('sample data 2');"
        }
    ],
    "directory_tree": "CVE-2021-22205/custom_no_tool"
}