{
    "files": [
        {
            "location": "./../../dockers/CVE-2015-3337/custom_no_tool/docker-compose.yml",
            "content": "services:\n  web:\n    build: ./web\n    ports:\n      - \"80:80\"\n    depends_on:\n      - db\n    environment:\n      MYSQL_HOST: db\n      MYSQL_USER: test\n      MYSQL_PASSWORD: test\n      MYSQL_DATABASE: vuln\n\n  db:\n    image: mysql:5.5\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: vuln\n      MYSQL_USER: test\n      MYSQL_PASSWORD: test\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql\n\n  elasticsearch:\n    build: ./elasticsearch\n    environment:\n      - discovery.type=single-node\n    ports:\n      - \"9200:9200\"\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:9200\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2015-3337/custom_no_tool/web/Dockerfile",
            "content": "FROM php:8.2-apache\nCOPY index.php /var/www/html/\nEXPOSE 80"
        },
        {
            "location": "./../../dockers/CVE-2015-3337/custom_no_tool/web/index.php",
            "content": "<?php\n// Vulnerable script used to demonstrate CVE-2015-3337 \u2013 arbitrary command execution\nif (isset($_GET['cmd'])) {\n    system($_GET['cmd']);\n}\n?>"
        },
        {
            "location": "./../../dockers/CVE-2015-3337/custom_no_tool/db/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    username VARCHAR(50) NOT NULL,\n    password VARCHAR(255) NOT NULL\n) ENGINE=InnoDB;\nINSERT INTO users (username, password) VALUES ('admin', 'admin');"
        },
        {
            "location": "./../../dockers/CVE-2015-3337/custom_no_tool/elasticsearch/Dockerfile",
            "content": "FROM docker.elastic.co/elasticsearch/elasticsearch-oss:1.5.1\nRUN echo \"deb http://archive.debian.org/debian/ jessie main\" > /etc/apt/sources.list \\\n    && echo \"Acquire::Check-Valid-Until false;\" > /etc/apt/apt.conf.d/99no-check-valid-until \\\n    && apt-get update -o Acquire::Check-Valid-Until=false \\\n    && apt-get install -y --no-install-recommends curl \\\n    && rm -rf /var/lib/apt/lists/*"
        }
    ],
    "directory_tree": "CVE-2015-3337/custom_no_tool/"
}