{
    "files": [
        {
            "location": "./../../dockers/CVE-2020-11978/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  airflow:\n    image: apache/airflow:1.10.10-python3.7\n    environment:\n      - AIRFLOW__CORE__LOAD_EXAMPLES=False\n      - AIRFLOW__CORE__EXECUTOR=SequentialExecutor\n      - AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql://airflow:airflow@postgres/airflow\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      - postgres\n    command: >\n      bash -c \"\n        until pg_isready -h postgres -U airflow; do echo 'waiting for postgres...' && sleep 2; done &&\n        airflow initdb &&\n        export AIRFLOW__WEBSERVER__WEB_SERVER_HOST=0.0.0.0 &&\n        airflow scheduler &\n        exec airflow webserver\n      \"\n    healthcheck:\n      test: [\"CMD\", \"bash\", \"-c\", \"sleep 5 && curl -f http://localhost:8080/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n\n  postgres:\n    image: postgres:13\n    environment:\n      POSTGRES_USER: airflow\n      POSTGRES_PASSWORD: airflow\n      POSTGRES_DB: airflow\n    volumes:\n      - pg_data:/var/lib/postgresql/data\n      - ./postgres/init.sql:/docker-entrypoint-initdb.d/init.sql\n    healthcheck:\n      test: [\"CMD\", \"pg_isready\", \"-U\", \"airflow\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  pg_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2020-11978/custom_no_tool/postgres/init.sql",
            "content": "CREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(50) NOT NULL,\n    password VARCHAR(255) NOT NULL\n);\nINSERT INTO users (username, password) VALUES ('alice', 'password1'), ('bob', 'password2');\n"
        }
    ],
    "directory_tree": "custom_no_tool/\n\u251c\u2500 docker-compose.yml\n\u2514\u2500 postgres/\n   \u2514\u2500 init.sql"
}