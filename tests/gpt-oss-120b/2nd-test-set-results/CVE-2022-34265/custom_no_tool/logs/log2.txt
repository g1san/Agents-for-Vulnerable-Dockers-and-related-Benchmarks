#1 [internal] load local bake definitions
#1 reading from stdin 703B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 411B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.11-slim
#3 DONE 0.4s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [1/8] FROM docker.io/library/python:3.11-slim@sha256:8eb5fc663972b871c528fef04be4eaa9ab8ab4539a5316c4b8c133771214a617
#5 resolve docker.io/library/python:3.11-slim@sha256:8eb5fc663972b871c528fef04be4eaa9ab8ab4539a5316c4b8c133771214a617 0.0s done
#5 DONE 0.0s

#6 [2/8] WORKDIR /app
#6 CACHED

#7 [internal] load build context
#7 transferring context: 4.53kB done
#7 DONE 0.0s

#8 [3/8] RUN apt-get update && apt-get install -y --no-install-recommends postgresql-client && rm -rf /var/lib/apt/lists/*
#8 0.277 Hit:1 http://deb.debian.org/debian trixie InRelease
#8 0.277 Get:2 http://deb.debian.org/debian trixie-updates InRelease [47.3 kB]
#8 0.298 Get:3 http://deb.debian.org/debian-security trixie-security InRelease [43.4 kB]
#8 0.312 Get:4 http://deb.debian.org/debian trixie/main amd64 Packages [9669 kB]
#8 0.739 Get:5 http://deb.debian.org/debian trixie-updates/main amd64 Packages [5412 B]
#8 0.752 Get:6 http://deb.debian.org/debian-security trixie-security/main amd64 Packages [69.0 kB]
#8 1.370 Fetched 9834 kB in 1s (8478 kB/s)
#8 1.370 Reading package lists...
#8 1.841 Reading package lists...
#8 2.338 Building dependency tree...
#8 2.452 Reading state information...
#8 2.654 The following additional packages will be installed:
#8 2.654   libcom-err2 libgdbm-compat4t64 libgssapi-krb5-2 libk5crypto3 libkeyutils1
#8 2.655   libkrb5-3 libkrb5support0 libldap2 libperl5.40 libpq5 libsasl2-2
#8 2.655   libsasl2-modules-db perl perl-modules-5.40 postgresql-client-17
#8 2.656   postgresql-client-common sensible-utils
#8 2.659 Suggested packages:
#8 2.659   krb5-doc krb5-user perl-doc libterm-readline-gnu-perl
#8 2.659   | libterm-readline-perl-perl make libtap-harness-archive-perl postgresql-17
#8 2.659   postgresql-doc-17
#8 2.659 Recommended packages:
#8 2.659   krb5-locales libldap-common libsasl2-modules
#8 2.748 The following NEW packages will be installed:
#8 2.748   libcom-err2 libgdbm-compat4t64 libgssapi-krb5-2 libk5crypto3 libkeyutils1
#8 2.748   libkrb5-3 libkrb5support0 libldap2 libperl5.40 libpq5 libsasl2-2
#8 2.749   libsasl2-modules-db perl perl-modules-5.40 postgresql-client
#8 2.749   postgresql-client-17 postgresql-client-common sensible-utils
#8 2.794 0 upgraded, 18 newly installed, 0 to remove and 0 not upgraded.
#8 2.794 Need to get 10.9 MB of archives.
#8 2.794 After this operation, 66.3 MB of additional disk space will be used.
#8 2.794 Get:1 http://deb.debian.org/debian trixie/main amd64 sensible-utils all 0.0.25 [25.0 kB]
#8 2.808 Get:2 http://deb.debian.org/debian trixie/main amd64 perl-modules-5.40 all 5.40.1-6 [3019 kB]
#8 2.943 Get:3 http://deb.debian.org/debian trixie/main amd64 libgdbm-compat4t64 amd64 1.24-2 [50.3 kB]
#8 2.944 Get:4 http://deb.debian.org/debian trixie/main amd64 libperl5.40 amd64 5.40.1-6 [4341 kB]
#8 3.085 Get:5 http://deb.debian.org/debian trixie/main amd64 perl amd64 5.40.1-6 [267 kB]
#8 3.091 Get:6 http://deb.debian.org/debian trixie/main amd64 libcom-err2 amd64 1.47.2-3+b3 [25.0 kB]
#8 3.091 Get:7 http://deb.debian.org/debian trixie/main amd64 libkrb5support0 amd64 1.21.3-5 [33.0 kB]
#8 3.092 Get:8 http://deb.debian.org/debian trixie/main amd64 libk5crypto3 amd64 1.21.3-5 [81.5 kB]
#8 3.095 Get:9 http://deb.debian.org/debian trixie/main amd64 libkeyutils1 amd64 1.6.3-6 [9456 B]
#8 3.095 Get:10 http://deb.debian.org/debian trixie/main amd64 libkrb5-3 amd64 1.21.3-5 [326 kB]
#8 3.103 Get:11 http://deb.debian.org/debian trixie/main amd64 libgssapi-krb5-2 amd64 1.21.3-5 [138 kB]
#8 3.111 Get:12 http://deb.debian.org/debian trixie/main amd64 libsasl2-modules-db amd64 2.1.28+dfsg1-9 [19.8 kB]
#8 3.111 Get:13 http://deb.debian.org/debian trixie/main amd64 libsasl2-2 amd64 2.1.28+dfsg1-9 [57.5 kB]
#8 3.114 Get:14 http://deb.debian.org/debian trixie/main amd64 libldap2 amd64 2.6.10+dfsg-1 [194 kB]
#8 3.126 Get:15 http://deb.debian.org/debian trixie/main amd64 libpq5 amd64 17.6-0+deb13u1 [228 kB]
#8 3.136 Get:16 http://deb.debian.org/debian trixie/main amd64 postgresql-client-common all 278 [47.1 kB]
#8 3.138 Get:17 http://deb.debian.org/debian trixie/main amd64 postgresql-client-17 amd64 17.6-0+deb13u1 [2031 kB]
#8 3.246 Get:18 http://deb.debian.org/debian trixie/main amd64 postgresql-client all 17+278 [14.0 kB]
#8 3.365 debconf: unable to initialize frontend: Dialog
#8 3.365 debconf: (TERM is not set, so the dialog frontend is not usable.)
#8 3.365 debconf: falling back to frontend: Readline
#8 3.365 debconf: unable to initialize frontend: Readline
#8 3.365 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC entries checked: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.40.1 /usr/local/share/perl/5.40.1 /usr/lib/x86_64-linux-gnu/perl5/5.40 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.40 /usr/share/perl/5.40 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 8, <STDIN> line 18.)
#8 3.365 debconf: falling back to frontend: Teletype
#8 3.371 debconf: unable to initialize frontend: Teletype
#8 3.371 debconf: (This frontend requires a controlling tty.)
#8 3.371 debconf: falling back to frontend: Noninteractive
#8 3.887 Fetched 10.9 MB in 0s (22.6 MB/s)
#8 3.908 Selecting previously unselected package sensible-utils.
#8 3.908 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 5644 files and directories currently installed.)
#8 3.916 Preparing to unpack .../00-sensible-utils_0.0.25_all.deb ...
#8 3.919 Unpacking sensible-utils (0.0.25) ...
#8 3.962 Selecting previously unselected package perl-modules-5.40.
#8 3.963 Preparing to unpack .../01-perl-modules-5.40_5.40.1-6_all.deb ...
#8 3.966 Unpacking perl-modules-5.40 (5.40.1-6) ...
#8 4.224 Selecting previously unselected package libgdbm-compat4t64:amd64.
#8 4.225 Preparing to unpack .../02-libgdbm-compat4t64_1.24-2_amd64.deb ...
#8 4.231 Unpacking libgdbm-compat4t64:amd64 (1.24-2) ...
#8 4.262 Selecting previously unselected package libperl5.40:amd64.
#8 4.263 Preparing to unpack .../03-libperl5.40_5.40.1-6_amd64.deb ...
#8 4.267 Unpacking libperl5.40:amd64 (5.40.1-6) ...
#8 4.483 Selecting previously unselected package perl.
#8 4.484 Preparing to unpack .../04-perl_5.40.1-6_amd64.deb ...
#8 4.488 Unpacking perl (5.40.1-6) ...
#8 4.525 Selecting previously unselected package libcom-err2:amd64.
#8 4.525 Preparing to unpack .../05-libcom-err2_1.47.2-3+b3_amd64.deb ...
#8 4.529 Unpacking libcom-err2:amd64 (1.47.2-3+b3) ...
#8 4.558 Selecting previously unselected package libkrb5support0:amd64.
#8 4.559 Preparing to unpack .../06-libkrb5support0_1.21.3-5_amd64.deb ...
#8 4.563 Unpacking libkrb5support0:amd64 (1.21.3-5) ...
#8 4.596 Selecting previously unselected package libk5crypto3:amd64.
#8 4.597 Preparing to unpack .../07-libk5crypto3_1.21.3-5_amd64.deb ...
#8 4.600 Unpacking libk5crypto3:amd64 (1.21.3-5) ...
#8 4.632 Selecting previously unselected package libkeyutils1:amd64.
#8 4.633 Preparing to unpack .../08-libkeyutils1_1.6.3-6_amd64.deb ...
#8 4.636 Unpacking libkeyutils1:amd64 (1.6.3-6) ...
#8 4.666 Selecting previously unselected package libkrb5-3:amd64.
#8 4.667 Preparing to unpack .../09-libkrb5-3_1.21.3-5_amd64.deb ...
#8 4.670 Unpacking libkrb5-3:amd64 (1.21.3-5) ...
#8 4.714 Selecting previously unselected package libgssapi-krb5-2:amd64.
#8 4.715 Preparing to unpack .../10-libgssapi-krb5-2_1.21.3-5_amd64.deb ...
#8 4.719 Unpacking libgssapi-krb5-2:amd64 (1.21.3-5) ...
#8 4.748 Selecting previously unselected package libsasl2-modules-db:amd64.
#8 4.749 Preparing to unpack .../11-libsasl2-modules-db_2.1.28+dfsg1-9_amd64.deb ...
#8 4.752 Unpacking libsasl2-modules-db:amd64 (2.1.28+dfsg1-9) ...
#8 4.782 Selecting previously unselected package libsasl2-2:amd64.
#8 4.783 Preparing to unpack .../12-libsasl2-2_2.1.28+dfsg1-9_amd64.deb ...
#8 4.786 Unpacking libsasl2-2:amd64 (2.1.28+dfsg1-9) ...
#8 4.819 Selecting previously unselected package libldap2:amd64.
#8 4.820 Preparing to unpack .../13-libldap2_2.6.10+dfsg-1_amd64.deb ...
#8 4.824 Unpacking libldap2:amd64 (2.6.10+dfsg-1) ...
#8 4.862 Selecting previously unselected package libpq5:amd64.
#8 4.863 Preparing to unpack .../14-libpq5_17.6-0+deb13u1_amd64.deb ...
#8 4.867 Unpacking libpq5:amd64 (17.6-0+deb13u1) ...
#8 4.911 Selecting previously unselected package postgresql-client-common.
#8 4.913 Preparing to unpack .../15-postgresql-client-common_278_all.deb ...
#8 4.920 Unpacking postgresql-client-common (278) ...
#8 4.952 Selecting previously unselected package postgresql-client-17.
#8 4.953 Preparing to unpack .../16-postgresql-client-17_17.6-0+deb13u1_amd64.deb ...
#8 4.956 Unpacking postgresql-client-17 (17.6-0+deb13u1) ...
#8 5.059 Selecting previously unselected package postgresql-client.
#8 5.061 Preparing to unpack .../17-postgresql-client_17+278_all.deb ...
#8 5.064 Unpacking postgresql-client (17+278) ...
#8 5.094 Setting up libkeyutils1:amd64 (1.6.3-6) ...
#8 5.102 Setting up libgdbm-compat4t64:amd64 (1.24-2) ...
#8 5.111 Setting up libcom-err2:amd64 (1.47.2-3+b3) ...
#8 5.121 Setting up libkrb5support0:amd64 (1.21.3-5) ...
#8 5.130 Setting up libsasl2-modules-db:amd64 (2.1.28+dfsg1-9) ...
#8 5.139 Setting up libk5crypto3:amd64 (1.21.3-5) ...
#8 5.147 Setting up libsasl2-2:amd64 (2.1.28+dfsg1-9) ...
#8 5.157 Setting up perl-modules-5.40 (5.40.1-6) ...
#8 5.166 Setting up sensible-utils (0.0.25) ...
#8 5.175 Setting up libkrb5-3:amd64 (1.21.3-5) ...
#8 5.184 Setting up libldap2:amd64 (2.6.10+dfsg-1) ...
#8 5.194 Setting up libperl5.40:amd64 (5.40.1-6) ...
#8 5.203 Setting up perl (5.40.1-6) ...
#8 5.217 Setting up libgssapi-krb5-2:amd64 (1.21.3-5) ...
#8 5.227 Setting up postgresql-client-common (278) ...
#8 5.244 Setting up libpq5:amd64 (17.6-0+deb13u1) ...
#8 5.253 Setting up postgresql-client-17 (17.6-0+deb13u1) ...
#8 5.584 update-alternatives: using /usr/share/postgresql/17/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode
#8 5.616 Setting up postgresql-client (17+278) ...
#8 5.625 Processing triggers for libc-bin (2.41-12) ...
#8 DONE 5.8s

#9 [4/8] COPY requirements.txt .
#9 DONE 0.0s

#10 [5/8] RUN pip install --no-cache-dir -r requirements.txt
#10 4.526 Collecting Django==4.0.5 (from -r requirements.txt (line 1))
#10 4.607   Downloading Django-4.0.5-py3-none-any.whl.metadata (4.0 kB)
#10 4.715 Collecting psycopg2-binary (from -r requirements.txt (line 2))
#10 4.729   Downloading psycopg2_binary-2.9.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (4.9 kB)
#10 4.795 Collecting asgiref<4,>=3.4.1 (from Django==4.0.5->-r requirements.txt (line 1))
#10 4.807   Downloading asgiref-3.10.0-py3-none-any.whl.metadata (9.3 kB)
#10 4.857 Collecting sqlparse>=0.2.2 (from Django==4.0.5->-r requirements.txt (line 1))
#10 4.871   Downloading sqlparse-0.5.3-py3-none-any.whl.metadata (3.9 kB)
#10 5.004 Downloading Django-4.0.5-py3-none-any.whl (8.0 MB)
#10 5.886    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.0/8.0 MB 9.1 MB/s eta 0:00:00
#10 5.900 Downloading psycopg2_binary-2.9.11-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (4.2 MB)
#10 6.113    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 19.8 MB/s eta 0:00:00
#10 6.126 Downloading asgiref-3.10.0-py3-none-any.whl (24 kB)
#10 6.139 Downloading sqlparse-0.5.3-py3-none-any.whl (44 kB)
#10 6.142    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 44.4/44.4 kB 62.5 MB/s eta 0:00:00
#10 6.244 Installing collected packages: sqlparse, psycopg2-binary, asgiref, Django
#10 7.984 Successfully installed Django-4.0.5 asgiref-3.10.0 psycopg2-binary-2.9.11 sqlparse-0.5.3
#10 7.984 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#10 8.080 
#10 8.080 [notice] A new release of pip is available: 24.0 -> 25.3
#10 8.080 [notice] To update, run: pip install --upgrade pip
#10 DONE 8.3s

#11 [6/8] COPY . .
#11 DONE 0.1s

#12 [7/8] COPY wait-for-db.sh /wait-for-db.sh
#12 DONE 0.0s

#13 [8/8] RUN chmod +x /wait-for-db.sh
#13 DONE 0.2s

#14 exporting to image
#14 exporting layers
#14 exporting layers 2.1s done
#14 exporting manifest sha256:79cbd0518c02d4617908e7b6e2b3a97a73da93eca7098c404ce1b9afeef11499 done
#14 exporting config sha256:ea04e1631f166833a6a1c62130b7e9e13bc4d8d42eb5bf92e5eb4c9088f04ac4 done
#14 exporting attestation manifest sha256:a65dc9669000cbd1e82c5cde131ed6b80ef84edf5192de2e663b1f9a83cca7ff 0.0s done
#14 exporting manifest list sha256:26cef52891dc1a0e6413bfafde9bfc6e08e9a5fdadb064a2a4f67ae0c63d2b32 done
#14 naming to docker.io/library/custom_no_tool-web:latest done
#14 unpacking to docker.io/library/custom_no_tool-web:latest
#14 unpacking to docker.io/library/custom_no_tool-web:latest 2.2s done
#14 DONE 4.4s

#15 resolving provenance for metadata file
#15 DONE 0.0s
 custom_no_tool-web  Built
 Network custom_no_tool_cve_net  Creating
 Network custom_no_tool_cve_net  Created
 Volume custom_no_tool_db_data  Creating
 Volume custom_no_tool_db_data  Created
 Container custom_no_tool-db-1  Creating
 Container custom_no_tool-db-1  Created
 Container custom_no_tool-web-1  Creating
 Container custom_no_tool-web-1  Created
 Container custom_no_tool-db-1  Starting
 Container custom_no_tool-db-1  Started
 Container custom_no_tool-db-1  Waiting
 Container custom_no_tool-db-1  Healthy
 Container custom_no_tool-web-1  Starting
Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: exec: "./wait-for-db.sh": permission denied: unknown
