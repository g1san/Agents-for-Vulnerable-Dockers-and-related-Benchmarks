FROM python:3.10-slim

# Install curl for healthchecks and upgrade pip
RUN apt-get update && \
    apt-get install -y --no-install-recommends curl && \
    rm -rf /var/lib/apt/lists/* && \
    python -m pip install --upgrade pip

# Install specific versions of huggingface_hub and gradio that are compatible
RUN pip install --no-cache-dir "huggingface_hub==0.19.4" "gradio==4.5.0"

# Copy the demo application
WORKDIR /app
COPY app.py .

EXPOSE 7860

CMD ["python", "-u", "app.py"]