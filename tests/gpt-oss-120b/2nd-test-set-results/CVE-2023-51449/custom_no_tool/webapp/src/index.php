<?php
$redis = new Redis();
$redis->connect($_ENV['REDIS_HOST'], (int)$_ENV['REDIS_PORT']);

// Simple page that allows storing and retrieving a value via query parameters
if (isset($_GET['key']) && isset($_GET['value'])) {
    // Vulnerable: no validation on key/value, allows injection of Redis commands
    $redis->set($_GET['key'], $_GET['value']);
    echo "<p>Set {$_GET['key']} = {$_GET['value']}</p>";
}

if (isset($_GET['key'])) {
    $value = $redis->get($_GET['key']);
    echo "<p>Value for {$_GET['key']}: $value</p>";
}
?>
<html>
<body>
<h1>Vulnerable Redis Demo</h1>
<form method="get">
  Key: <input type="text" name="key" /><br/>
  Value: <input type="text" name="value" /><br/>
  <input type="submit" value="Store" />
</form>
</body>
</html>