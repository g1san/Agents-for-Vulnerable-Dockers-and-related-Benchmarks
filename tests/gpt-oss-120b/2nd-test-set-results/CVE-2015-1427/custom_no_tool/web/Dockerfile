FROM php:7.4-apache
# Install required packages and PHP extensions for WordPress
RUN apt-get update \
    && apt-get install -y --no-install-recommends \
       curl \
       libpng-dev \
       libjpeg-dev \
       default-mysql-client \
    && docker-php-ext-install mysqli \
    && docker-php-ext-enable mysqli \
    && rm -rf /var/lib/apt/lists/*
# Download vulnerable version of WordPress (4.2.2) which is known to be exploitable via CVE-2015-1427
RUN curl -fsSL -o /tmp/wordpress.tar.gz https://wordpress.org/wordpress-4.2.2.tar.gz \
    && tar -xzf /tmp/wordpress.tar.gz -C /var/www/html --strip-components=1 \
    && rm /tmp/wordpress.tar.gz
# Set proper permissions
RUN chown -R www-data:www-data /var/www/html
EXPOSE 80