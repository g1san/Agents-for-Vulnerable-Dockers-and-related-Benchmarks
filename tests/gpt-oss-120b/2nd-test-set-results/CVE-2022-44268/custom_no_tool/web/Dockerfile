FROM ubuntu:22.04
ENV DEBIAN_FRONTEND=noninteractive
RUN apt-get update && \
    apt-get install -y apache2 php libapache2-mod-php imagemagick && \
    rm -rf /var/lib/apt/lists/*
COPY ./app /var/www/html/
RUN chown -R www-data:www-data /var/www/html && \
    a2enmod php8.1
CMD ["apache2ctl", "-D", "FOREGROUND"]