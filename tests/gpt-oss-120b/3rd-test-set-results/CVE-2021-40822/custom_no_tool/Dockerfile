FROM eclipse-temurin:11-jre
LABEL maintainer="cve-2021-40822-research"
ENV GEOSERVER_VERSION=2.18.5
RUN apt-get update && apt-get install -y wget unzip && rm -rf /var/lib/apt/lists/*
WORKDIR /opt
RUN wget -q "https://downloads.sourceforge.net/project/geoserver/GeoServer/${GEOSERVER_VERSION}/geoserver-${GEOSERVER_VERSION}-bin.zip" \
    && unzip geoserver-${GEOSERVER_VERSION}-bin.zip \
    && rm geoserver-${GEOSERVER_VERSION}-bin.zip
ENV GEOSERVER_HOME=/opt/geoserver-${GEOSERVER_VERSION}
ENV GEOSERVER_DATA_DIR=${GEOSERVER_HOME}/data_dir
ENV PATH="${GEOSERVER_HOME}/bin:${PATH}"
RUN chmod +x ${GEOSERVER_HOME}/bin/startup.sh
EXPOSE 8080
CMD ["/opt/geoserver-${GEOSERVER_VERSION}/bin/startup.sh"]