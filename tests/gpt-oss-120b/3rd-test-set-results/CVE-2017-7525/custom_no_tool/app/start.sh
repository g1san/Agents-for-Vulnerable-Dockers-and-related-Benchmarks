#!/bin/sh
# Wait for Cassandra to be ready (check TCP port)
echo "Waiting for Cassandra to be ready..."
while ! nc -z "$CASSANDRA_HOST" 9042; do
  sleep 2
  echo "still waiting..."
 done

echo "Cassandra is up. Running init script."
node init.js

# Start the vulnerable application
exec node server.js