FROM eclipse-temurin:8-jre-alpine
LABEL maintainer="security@example.com"
ENV DRUID_VERSION=0.19.5
ENV DRUID_HOME=/opt/druid
ENV PATH=$DRUID_HOME/bin:$PATH
# Install required utilities and CA certificates
RUN apk add --no-cache bash curl tar ca-certificates && update-ca-certificates
# Install Druid distribution
RUN mkdir -p $DRUID_HOME && \
    curl -fSL https://archive.apache.org/dist/druid/${DRUID_VERSION}/apache-druid-${DRUID_VERSION}-bin.tar.gz | \
    tar -xz -C $DRUID_HOME --strip-components=1 && \
    chmod +x $DRUID_HOME/bin/*
WORKDIR $DRUID_HOME
# Default command (kept for reference, not used in compose)
CMD ["bin/post-index-task", "--host", "localhost", "--port", "8082"]