#1 [internal] load local bake definitions
#1 reading from stdin 1.37kB done
#1 DONE 0.0s

#2 [web internal] load build definition from Dockerfile
#2 transferring dockerfile: 151B 0.0s done
#2 DONE 1.4s

#3 [imagemagick internal] load build definition from Dockerfile
#3 transferring dockerfile: 330B done
#3 DONE 1.4s

#4 [imagemagick internal] load metadata for docker.io/library/alpine:3.13
#4 DONE 0.4s

#5 [web internal] load metadata for docker.io/library/node:14-alpine
#5 ...

#6 [imagemagick internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [imagemagick 1/2] FROM docker.io/library/alpine:3.13@sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911
#7 resolve docker.io/library/alpine:3.13@sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911 0.0s done
#7 CACHED

#8 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#8 0.199 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#8 ...

#5 [web internal] load metadata for docker.io/library/node:14-alpine
#5 DONE 0.8s

#9 [web internal] load .dockerignore
#9 transferring context: 2B done
#9 DONE 0.0s

#10 [web internal] load build context
#10 transferring context: 561B done
#10 DONE 0.0s

#11 [web 1/5] FROM docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33
#11 resolve docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33 0.0s done
#11 DONE 0.1s

#12 [web 3/5] COPY package.json .
#12 CACHED

#13 [web 2/5] WORKDIR /app
#13 CACHED

#14 [web 4/5] RUN npm install
#14 CACHED

#15 [web 5/5] COPY . .
#15 CACHED

#16 [web] exporting to image
#16 exporting layers done
#16 exporting manifest sha256:a7770588f759ac4ce3e7094d4c1dcc3fbec9848175f4db7d9fbd917b32bcf54e done
#16 exporting config sha256:f464b27fc4eeb7fea4e5f865ea241932233debbf3c4d9733dda8fc0a5d469215 done
#16 exporting attestation manifest sha256:9608f289645a099c24fc5b66437833792fa27e9ef0aed023247f7000f2ac976a 0.0s done
#16 exporting manifest list sha256:caf44f2217e39a0e2a390335a07539c864e0fb4dd6c6613ce78fc0bb99acb047 0.0s done
#16 naming to docker.io/library/custom_no_tool-web:latest done
#16 unpacking to docker.io/library/custom_no_tool-web:latest done
#16 DONE 0.1s

#8 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#8 0.472 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#8 ...

#17 [web] resolving provenance for metadata file
#17 DONE 0.0s

#8 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#8 0.948 v3.13.12-98-g1d183746afa [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]
#8 0.948 v3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]
#8 0.948 OK: 13901 distinct packages available
#8 0.986 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#8 1.276 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#8 1.674 ERROR: unable to select packages:
#8 1.716   imagemagick-7.0.11.14-r0:
#8 1.716     breaks: world[imagemagick=7.0.10.39-r0]
#8 ERROR: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1
------
 > [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version:
0.199 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
0.472 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
0.948 v3.13.12-98-g1d183746afa [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]
0.948 v3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]
0.948 OK: 13901 distinct packages available
0.986 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
1.276 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
1.674 ERROR: unable to select packages:
1.716   imagemagick-7.0.11.14-r0:
1.716     breaks: world[imagemagick=7.0.10.39-r0]
------
Dockerfile:3

--------------------

   2 |     # Install the vulnerable ImageMagick version (7.0.10-39) that exists in the Alpine 3.13 repositories

   3 | >>> RUN apk update && \

   4 | >>>     apk add --no-cache imagemagick=7.0.10.39-r0 && \

   5 | >>>     magick -version

   6 |     # Keep the container running for interactive use

--------------------

target imagemagick: failed to solve: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1

