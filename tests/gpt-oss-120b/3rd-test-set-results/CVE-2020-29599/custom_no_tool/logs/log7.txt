#1 [internal] load local bake definitions
#1 reading from stdin 1.37kB done
#1 DONE 0.0s

#2 [imagemagick internal] load build definition from Dockerfile
#2 transferring dockerfile: 330B done
#2 DONE 0.0s

#3 [web internal] load build definition from Dockerfile
#3 transferring dockerfile: 151B done
#3 DONE 0.0s

#4 [web internal] load metadata for docker.io/library/node:14-alpine
#4 DONE 0.4s

#5 [imagemagick internal] load metadata for docker.io/library/alpine:3.12
#5 DONE 0.4s

#6 [web internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [imagemagick internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [web internal] load build context
#8 transferring context: 561B done
#8 DONE 0.0s

#9 [web 1/5] FROM docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33
#9 resolve docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33 0.0s done
#9 DONE 0.1s

#10 [web 4/5] RUN npm install
#10 CACHED

#11 [web 3/5] COPY package.json .
#11 CACHED

#12 [web 2/5] WORKDIR /app
#12 CACHED

#13 [web 5/5] COPY . .
#13 CACHED

#14 [web] exporting to image
#14 exporting layers done
#14 exporting manifest sha256:a7770588f759ac4ce3e7094d4c1dcc3fbec9848175f4db7d9fbd917b32bcf54e done
#14 exporting config sha256:f464b27fc4eeb7fea4e5f865ea241932233debbf3c4d9733dda8fc0a5d469215
#14 ...

#15 [imagemagick 1/2] FROM docker.io/library/alpine:3.12@sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69
#15 resolve docker.io/library/alpine:3.12@sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69 0.0s done
#15 CACHED

#14 [web] exporting to image
#14 exporting config sha256:f464b27fc4eeb7fea4e5f865ea241932233debbf3c4d9733dda8fc0a5d469215 done
#14 exporting attestation manifest sha256:9533af8416de05c6e01a595a476bd174d183ce54311615d27fa251798a112ead 0.1s done
#14 exporting manifest list sha256:dacf0f7291f7210c0556b7d0496f1713530baa4a75ec64adfb909ed85b64c8b0 0.0s done
#14 naming to docker.io/library/custom_no_tool-web:latest done
#14 unpacking to docker.io/library/custom_no_tool-web:latest 0.0s done
#14 DONE 0.3s

#16 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#16 0.373 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
#16 ...

#17 [web] resolving provenance for metadata file
#17 DONE 0.0s

#16 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#16 0.599 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
#16 0.918 v3.12.12-53-gc96f3238172 [http://dl-cdn.alpinelinux.org/alpine/v3.12/main]
#16 0.918 v3.12.12-52-g800c17231ad [http://dl-cdn.alpinelinux.org/alpine/v3.12/community]
#16 0.918 OK: 12767 distinct packages available
#16 0.949 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
#16 1.175 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
#16 1.464 ERROR: unable to select packages:
#16 1.491   imagemagick-7.0.10.48-r0:
#16 1.491     breaks: world[imagemagick=7.0.10.39-r0]
#16 ERROR: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1
------
 > [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version:
0.373 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
0.599 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
0.918 v3.12.12-53-gc96f3238172 [http://dl-cdn.alpinelinux.org/alpine/v3.12/main]
0.918 v3.12.12-52-g800c17231ad [http://dl-cdn.alpinelinux.org/alpine/v3.12/community]
0.918 OK: 12767 distinct packages available
0.949 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
1.175 fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
1.464 ERROR: unable to select packages:
1.491   imagemagick-7.0.10.48-r0:
1.491     breaks: world[imagemagick=7.0.10.39-r0]
------
Dockerfile:3

--------------------

   2 |     # Install the vulnerable ImageMagick version (7.0.10-39) that exists in the Alpine 3.12 repositories

   3 | >>> RUN apk update && \

   4 | >>>     apk add --no-cache imagemagick=7.0.10.39-r0 && \

   5 | >>>     magick -version

   6 |     # Keep the container running for interactive use

--------------------

target imagemagick: failed to solve: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1

