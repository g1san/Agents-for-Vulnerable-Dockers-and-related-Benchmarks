#1 [internal] load local bake definitions
#1 reading from stdin 1.37kB done
#1 DONE 0.0s

#2 [web internal] load build definition from Dockerfile
#2 transferring dockerfile: 151B done
#2 DONE 0.0s

#3 [imagemagick internal] load build definition from Dockerfile
#3 transferring dockerfile: 330B done
#3 DONE 0.0s

#4 [imagemagick internal] load metadata for docker.io/library/alpine:3.13
#4 ...

#5 [web internal] load metadata for docker.io/library/node:14-alpine
#5 DONE 0.4s

#6 [web internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [web internal] load build context
#7 transferring context: 561B done
#7 DONE 0.0s

#8 [web 1/5] FROM docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33
#8 resolve docker.io/library/node:14-alpine@sha256:434215b487a329c9e867202ff89e704d3a75e554822e07f3e0c0f9e606121b33 0.0s done
#8 DONE 0.0s

#9 [web 3/5] COPY package.json .
#9 CACHED

#10 [web 2/5] WORKDIR /app
#10 CACHED

#11 [web 4/5] RUN npm install
#11 CACHED

#12 [web 5/5] COPY . .
#12 CACHED

#13 [web] exporting to image
#13 exporting layers done
#13 exporting manifest sha256:a7770588f759ac4ce3e7094d4c1dcc3fbec9848175f4db7d9fbd917b32bcf54e done
#13 exporting config sha256:f464b27fc4eeb7fea4e5f865ea241932233debbf3c4d9733dda8fc0a5d469215 done
#13 exporting attestation manifest sha256:fdf42ef30ea267aba17785e413a44e9137d28fc551e430f57b2418332179f856
#13 exporting attestation manifest sha256:fdf42ef30ea267aba17785e413a44e9137d28fc551e430f57b2418332179f856 0.1s done
#13 exporting manifest list sha256:3a7bd5d64f71edb80433f9c41aad8ea71b57467dd1a7c9eff532e77e934f5d1f 0.0s done
#13 naming to docker.io/library/custom_no_tool-web:latest done
#13 unpacking to docker.io/library/custom_no_tool-web:latest 0.0s done
#13 DONE 0.2s

#4 [imagemagick internal] load metadata for docker.io/library/alpine:3.13
#4 ...

#14 [web] resolving provenance for metadata file
#14 DONE 0.0s

#4 [imagemagick internal] load metadata for docker.io/library/alpine:3.13
#4 DONE 1.2s

#15 [imagemagick internal] load .dockerignore
#15 transferring context: 2B done
#15 DONE 0.0s

#16 [imagemagick 1/2] FROM docker.io/library/alpine:3.13@sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911
#16 resolve docker.io/library/alpine:3.13@sha256:469b6e04ee185740477efa44ed5bdd64a07bbdd6c7e5f5d169e540889597b911 0.0s done
#16 sha256:72cfd02ff4d01b1f319eed108b53120dea0185b916d2abeb4e6121879cbf7a65 0B / 2.83MB 0.2s
#16 sha256:72cfd02ff4d01b1f319eed108b53120dea0185b916d2abeb4e6121879cbf7a65 1.05MB / 2.83MB 0.8s
#16 sha256:72cfd02ff4d01b1f319eed108b53120dea0185b916d2abeb4e6121879cbf7a65 2.83MB / 2.83MB 1.2s done
#16 extracting sha256:72cfd02ff4d01b1f319eed108b53120dea0185b916d2abeb4e6121879cbf7a65 0.1s done
#16 DONE 1.4s

#17 [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version
#17 0.228 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#17 0.586 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#17 1.127 v3.13.12-98-g1d183746afa [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]
#17 1.127 v3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]
#17 1.127 OK: 13901 distinct packages available
#17 1.172 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#17 1.337 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#17 1.646 ERROR: unable to select packages:
#17 1.691   imagemagick-7.0.11.14-r0:
#17 1.691     breaks: world[imagemagick=7.0.10.39-r0]
#17 ERROR: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1
------
 > [imagemagick 2/2] RUN apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version:
0.228 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
0.586 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
1.127 v3.13.12-98-g1d183746afa [https://dl-cdn.alpinelinux.org/alpine/v3.13/main]
1.127 v3.13.12-94-g0551adbecc [https://dl-cdn.alpinelinux.org/alpine/v3.13/community]
1.127 OK: 13901 distinct packages available
1.172 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
1.337 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
1.646 ERROR: unable to select packages:
1.691   imagemagick-7.0.11.14-r0:
1.691     breaks: world[imagemagick=7.0.10.39-r0]
------
Dockerfile:3

--------------------

   2 |     # Install the vulnerable ImageMagick version (7.0.10-39) that exists in the Alpine 3.13 repositories

   3 | >>> RUN apk update && \

   4 | >>>     apk add --no-cache imagemagick=7.0.10.39-r0 && \

   5 | >>>     magick -version

   6 |     # Keep the container running for interactive use

--------------------

target imagemagick: failed to solve: process "/bin/sh -c apk update &&     apk add --no-cache imagemagick=7.0.10.39-r0 &&     magick -version" did not complete successfully: exit code: 1

