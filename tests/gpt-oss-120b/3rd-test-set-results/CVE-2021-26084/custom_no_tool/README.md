# CVE-2021-26084 Test Environment

This Docker Compose setup deploys an intentionally vulnerable version of Atlassian Confluence (7.12.4) together with a PostgreSQL database. The configuration mirrors a typical on‑premise deployment and is immediately runnable with:

```
 docker compose up -d
```

The Confluence instance will be reachable on port **8090** of the host. The PostgreSQL service is now exposed on port **5432**, allowing external tools or scripts to connect directly to the database.

## Components
- **confluence** – Atlassian Confluence Server 7.12.4 (vulnerable version)
- **postgres** – PostgreSQL 12 (exposed on host port 5432)

## Credentials (default for demonstration only)
- Database name: `confluence`
- Username: `confluence`
- Password: `confluence`

The database is pre‑populated with a simple `test` table containing a single row (`example`). This can be used to verify connectivity from outside the compose network.

Confluence itself does not require additional credentials for initial startup; you can proceed through the web installer using the default trial mode.

## Exploitation notes
With the services running, an attacker can reproduce the vulnerability by issuing a crafted POST request to:
```
http://<host>:8090/rest/tinymce/1/macro/preview
```
including an OGNL payload in the `macro` parameter. This will execute arbitrary commands on the host running the container.

**Use this environment only in isolated, secure labs.**