FROM node:18-alpine

# Create a nonâ€‘root user (node is provided by the base image)
USER node

WORKDIR /app

# Copy only package.json (and optionally package-lock.json) first to leverage Docker cache
COPY --chown=node:node package.json ./

# Install dependencies
RUN npm install

# Copy the rest of the application source code
COPY --chown=node:node . .

EXPOSE 8080
CMD ["node", "app.js"]