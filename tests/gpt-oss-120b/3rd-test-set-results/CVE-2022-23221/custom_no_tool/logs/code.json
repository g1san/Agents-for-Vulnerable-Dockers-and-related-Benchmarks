{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-23221/custom_no_tool/docker-compose.yml",
            "content": "services:\n  web:\n    build: ./web\n    ports:\n      - \"8080:80\"\n    depends_on:\n      - db\n      - h2\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: user\n      MYSQL_PASSWORD: userpass\n    ports:\n      - \"3306:3306\"\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./init.sql:/docker-entrypoint-initdb.d/init.sql\n  h2:\n    image: ghcr.io/h2database/h2:2.1.214\n    ports:\n      - \"9092:9092\"\n      - \"8082:8082\"\n    volumes:\n      - h2_data:/opt/h2-data\nvolumes:\n  db_data:\n  h2_data:"
        },
        {
            "location": "./../../dockers/CVE-2022-23221/custom_no_tool/web/Dockerfile",
            "content": "FROM python:3.9-slim\nWORKDIR /app\n# Install build tools and MySQL client headers needed for mysql-connector-python\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n        gcc \\\n        default-libmysqlclient-dev \\\n        python3-dev && \\\n    pip install --no-cache-dir \"Flask==2.0.3\" \"Werkzeug==2.0.3\" mysql-connector-python==8.0.28 && \\\n    apt-get purge -y --auto-remove gcc default-libmysqlclient-dev && \\\n    rm -rf /var/lib/apt/lists/*\nCOPY app.py /app/app.py\nEXPOSE 80\nCMD [\"python\", \"app.py\"]"
        },
        {
            "location": "./../../dockers/CVE-2022-23221/custom_no_tool/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  username VARCHAR(50) NOT NULL,\n  password_hash VARCHAR(255) NOT NULL\n) ENGINE=InnoDB;\n\nINSERT INTO users (username, password_hash) VALUES\n  ('alice', SHA2('alicepwd', 256)),\n  ('bob', SHA2('bobpwd', 256));"
        }
    ],
    "directory_tree": "CVE-2022-23221/custom_no_tool"
}