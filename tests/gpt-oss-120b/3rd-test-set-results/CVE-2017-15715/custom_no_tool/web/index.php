<?php
$host = getenv('DB_HOST');
$user = getenv('DB_USER');
$pass = getenv('DB_PASSWORD');
$db   = getenv('DB_NAME');

// Vulnerable: direct insertion of GET parameter into SQL query (SQL injection)
$id = $_GET['id'];
$conn = new mysqli($host, $user, $pass, $db);
if ($conn->connect_error) {
    die('Connection failed: ' . $conn->connect_error);
}
$sql = "SELECT * FROM secrets WHERE id = $id"; // No sanitization
$result = $conn->query($sql);
if ($result && $result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
        echo "<pre>" . htmlspecialchars(print_r($row, true)) . "</pre>";
    }
} else {
    echo 'No record found.';
}
$conn->close();
?>