{
    "files": [
        {
            "location": "./../../dockers/CVE-2020-9402/custom_no_tool/docker-compose.yml",
            "content": "services:\n  vulnerable-app:\n    build: ./app\n    ports:\n      - \"8000:8000\"\n    depends_on:\n      db:\n        condition: service_healthy\n    environment:\n      - DJANGO_SETTINGS_MODULE=myproj.settings\n    command: [\"/app/entrypoint.sh\"]\n  db:\n    image: oracle/database:19.3.0-ee\n    environment:\n      - ORACLE_PWD=oracle\n      - ORACLE_ALLOW_REMOTE=true\n    ports:\n      - \"1521:1521\"\n    healthcheck:\n      test: [\"CMD\", \"nc\", \"-z\", \"localhost\", \"1521\"]\n      interval: 30s\n      timeout: 10s\n      retries: 10"
        },
        {
            "location": "./../../dockers/CVE-2020-9402/custom_no_tool/app/Dockerfile",
            "content": "FROM python:3.9-slim\nWORKDIR /app\n# Install system dependencies required by Django GIS and Oracle Instant Client\nRUN apt-get update && apt-get install -y \\\n    libaio1 \\\n    libaio-dev \\\n    unzip \\\n    zip \\\n    libgeos-dev \\\n    libproj-dev \\\n    gdal-bin \\\n    libgdal-dev \\\n    wget \\\n    gcc \\\n    g++ \\\n    make \\\n    python3-dev \\\n    libncurses5-dev \\\n    libssl-dev \\\n    netcat-openbsd \\\n && rm -rf /var/lib/apt/lists/*\n# Install Oracle Instant Client (Basic and SDK) with license acceptance cookie\nENV ORACLE_INSTANT_CLIENT_VERSION=19.12.0.0.0\nRUN mkdir -p /opt/oracle && cd /opt/oracle && \\\n    wget --no-check-certificate --header \"Cookie: oraclelicense=accept-securedownload\" \\\n        https://download.oracle.com/otn_software/linux/instantclient/instantclient-basic-linux.x64-${ORACLE_INSTANT_CLIENT_VERSION}.zip && \\\n    wget --no-check-certificate --header \"Cookie: oraclelicense=accept-securedownload\" \\\n        https://download.oracle.com/otn_software/linux/instantclient/instantclient-sdk-linux.x64-${ORACLE_INSTANT_CLIENT_VERSION}.zip && \\\n    unzip instantclient-basic-linux.x64-${ORACLE_INSTANT_CLIENT_VERSION}.zip && \\\n    unzip instantclient-sdk-linux.x64-${ORACLE_INSTANT_CLIENT_VERSION}.zip && \\\n    rm *.zip && \\\n    ln -s /opt/oracle/instantclient_19_12 /opt/oracle/instantclient && \\\n    echo \"/opt/oracle/instantclient\" > /etc/ld.so.conf.d/oracle-instantclient.conf && ldconfig\nENV LD_LIBRARY_PATH=/opt/oracle/instantclient\n# Install Python dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt && \\\n    pip install --no-cache-dir --upgrade --force-reinstall oracledb\n# Copy application code\nCOPY . .\nCOPY entrypoint.sh /app/entrypoint.sh\nRUN chmod +x /app/entrypoint.sh\nEXPOSE 8000\nENTRYPOINT [\"/app/entrypoint.sh\"]"
        },
        {
            "location": "./../../dockers/CVE-2020-9402/custom_no_tool/app/requirements.txt",
            "content": "django==2.2.11\noracledb\npytz\nsqlparse\nasgiref"
        },
        {
            "location": "./../../dockers/CVE-2020-9402/custom_no_tool/app/entrypoint.sh",
            "content": "#!/bin/bash\nset -e\n# Wait for Oracle DB to become reachable using Python oracle driver\nuntil python -c \"import oracledb, sys;\\\ntry:\\\n    conn = oracledb.connect(user='system', password='oracle', dsn='db:1521/XE');\\\n    conn.close();\\\n    sys.exit(0)\\\nexcept Exception:\\\n    sys.exit(1)\"; do\n  echo \"Waiting for Oracle DB...\"\n  sleep 5\ndone\n# Run migrations and load initial data\npython manage.py migrate --noinput\npython manage.py loaddata initial_data.json || true\n# Start the Django development server\nexec python manage.py runserver 0.0.0.0:8000"
        },
        {
            "location": "./../../dockers/CVE-2020-9402/custom_no_tool/app/myapp/fixtures/initial_data.json",
            "content": "[\n  {\n    \"model\": \"myapp.location\",\n    \"pk\": 1,\n    \"fields\": {\n      \"name\": \"Test Location\",\n      \"geom\": \"SRID=4326;POINT (0 0)\"\n    }\n  }\n]"
        }
    ],
    "directory_tree": "./../../dockers/CVE-2020-9402/custom_no_tool"
}