#!/bin/sh
# Wait for PostgreSQL to become reachable before starting the Flask app
HOST="${POSTGRES_HOST:-db}"
PORT="${POSTGRES_PORT:-5432}"

while ! nc -z "$HOST" "$PORT"; do
  echo "Waiting for PostgreSQL at $HOST:$PORT..."
  sleep 2
done

exec "$@"