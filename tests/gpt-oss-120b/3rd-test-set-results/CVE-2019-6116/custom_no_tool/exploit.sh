#!/bin/sh
# Example script that launches a container inside the DIND service and calls the vulnerable Ghostscript binary.
# It demonstrates that the interpreter is present and can be invoked.

# Connect to the nested daemon
export DOCKER_HOST=tcp://localhost:2376

# Pull a tiny image and run gs on the sample PDF
docker run --rm -v $(pwd)/pdfs:/pdfs alpine:3.14 sh -c "\
    apk add --no-cache ghostscript && \
    gs -dNOPAUSE -dBATCH -sDEVICE=png16m -r72 -sOutputFile=/dev/null /pdfs/sample.pdf"
