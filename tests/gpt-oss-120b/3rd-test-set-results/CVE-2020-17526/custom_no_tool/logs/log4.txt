time="2025-11-03T10:20:22+01:00" level=warning msg="/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2020-17526/custom_no_tool/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 1.36kB done
#1 DONE 0.0s

#2 [attacker internal] load build definition from Dockerfile.attacker
#2 transferring dockerfile: 115B done
#2 DONE 0.0s

#3 [vulnerable internal] load build definition from Dockerfile.vuln
#3 transferring dockerfile: 362B done
#3 DONE 0.0s

#4 [vulnerable internal] load metadata for docker.io/apache/airflow:1.10.14-python3.8
#4 DONE 0.4s

#5 [attacker internal] load metadata for docker.io/library/alpine:3.12
#5 ...

#6 [vulnerable internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [vulnerable internal] load build context
#7 transferring context: 725B done
#7 DONE 0.0s

#8 [vulnerable 1/4] FROM docker.io/apache/airflow:1.10.14-python3.8@sha256:c8c91029b1ec28c5de9906127b1cfcaae99b428b62d3c174ebf74e1616275c32
#8 resolve docker.io/apache/airflow:1.10.14-python3.8@sha256:c8c91029b1ec28c5de9906127b1cfcaae99b428b62d3c174ebf74e1616275c32 0.0s done
#8 CACHED

#9 [vulnerable 2/4] COPY airflow.cfg /opt/airflow/airflow.cfg
#9 DONE 0.0s

#10 [vulnerable 3/4] COPY entrypoint.sh /entrypoint.sh
#10 DONE 0.0s

#11 [vulnerable 4/4] RUN apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh
#11 0.185 + apt-get update
#11 ...

#6 [attacker internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#5 [attacker internal] load metadata for docker.io/library/alpine:3.12
#5 DONE 0.7s

#12 [attacker 1/3] FROM docker.io/library/alpine:3.12@sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69
#12 resolve docker.io/library/alpine:3.12@sha256:c75ac27b49326926b803b9ed43bf088bc220d22556de1bc5f72d742c91398f69 0.0s done
#12 DONE 0.0s

#13 [attacker internal] load build context
#13 transferring context: 184B done
#13 DONE 0.0s

#14 [attacker 2/3] COPY exploit.sh /exploit.sh
#14 CACHED

#15 [attacker 3/3] RUN chmod +x /exploit.sh
#15 CACHED

#11 [vulnerable 4/4] RUN apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh
#11 0.269 Ign:1 http://security.debian.org/debian-security buster/updates InRelease
#11 0.280 Err:2 http://security.debian.org/debian-security buster/updates Release
#11 0.280   404  Not Found [IP: 151.101.242.132 80]
#11 0.282 Ign:3 http://deb.debian.org/debian buster InRelease
#11 ...

#16 [attacker] exporting to image
#16 exporting layers done
#16 exporting manifest sha256:9212c10cc8faaca958d17b6f0725c4600e89d82a70a2725a542851c34d6f0601 done
#16 exporting config sha256:9f719847b6cac31478e023e75b66cdb2e274b371e5c268b30e1143d4d9fc16f7 done
#16 exporting attestation manifest sha256:671e37c67b0a7487ad818a8c537543d3f203f4b3a8bf42b56ba5271e6d46534c 0.0s done
#16 exporting manifest list sha256:bbb5b4d7c33f1a78984fda48c911d0f67aa1879fec4e76ea93dc7a25499544d3 done
#16 naming to docker.io/library/custom_no_tool-attacker:latest done
#16 unpacking to docker.io/library/custom_no_tool-attacker:latest done
#16 DONE 0.1s

#11 [vulnerable 4/4] RUN apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh
#11 0.296 Ign:4 http://deb.debian.org/debian buster-updates InRelease
#11 0.309 Err:5 http://deb.debian.org/debian buster Release
#11 0.309   404  Not Found [IP: 151.101.242.132 80]
#11 0.323 Err:6 http://deb.debian.org/debian buster-updates Release
#11 0.323   404  Not Found [IP: 151.101.242.132 80]
#11 0.387 Get:7 http://repo.mysql.com/apt/debian buster InRelease [22.1 kB]
#11 0.509 Err:7 http://repo.mysql.com/apt/debian buster InRelease
#11 0.509   The following signatures couldn't be verified because the public key is not available: NO_PUBKEY B7B3B788A8D3785C
#11 0.515 Reading package lists...
#11 0.523 E: The repository 'http://security.debian.org/debian-security buster/updates Release' does not have a Release file.
#11 0.523 E: The repository 'http://deb.debian.org/debian buster Release' does not have a Release file.
#11 0.523 E: The repository 'http://deb.debian.org/debian buster-updates Release' does not have a Release file.
#11 0.523 W: GPG error: http://repo.mysql.com/apt/debian buster InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY B7B3B788A8D3785C
#11 0.523 E: The repository 'http://repo.mysql.com/apt/debian buster InRelease' is not signed.
#11 ERROR: process "/bin/bash -o pipefail -e -u -x -c apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh" did not complete successfully: exit code: 100

#17 [attacker] resolving provenance for metadata file
#17 DONE 0.0s
------
 > [vulnerable 4/4] RUN apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh:
0.323   404  Not Found [IP: 151.101.242.132 80]
0.387 Get:7 http://repo.mysql.com/apt/debian buster InRelease [22.1 kB]
0.509 Err:7 http://repo.mysql.com/apt/debian buster InRelease
0.509   The following signatures couldn't be verified because the public key is not available: NO_PUBKEY B7B3B788A8D3785C
0.515 Reading package lists...
0.523 E: The repository 'http://security.debian.org/debian-security buster/updates Release' does not have a Release file.
0.523 E: The repository 'http://deb.debian.org/debian buster Release' does not have a Release file.
0.523 E: The repository 'http://deb.debian.org/debian buster-updates Release' does not have a Release file.
0.523 W: GPG error: http://repo.mysql.com/apt/debian buster InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY B7B3B788A8D3785C
0.523 E: The repository 'http://repo.mysql.com/apt/debian buster InRelease' is not signed.
------
Dockerfile.vuln:6

--------------------

   5 |     COPY entrypoint.sh /entrypoint.sh

   6 | >>> RUN apt-get update && \

   7 | >>>     apt-get install -y postgresql-client && \

   8 | >>>     rm -rf /var/lib/apt/lists/* && \

   9 | >>>     chmod +x /entrypoint.sh

  10 |     USER airflow

--------------------

target vulnerable: failed to solve: process "/bin/bash -o pipefail -e -u -x -c apt-get update &&     apt-get install -y postgresql-client &&     rm -rf /var/lib/apt/lists/* &&     chmod +x /entrypoint.sh" did not complete successfully: exit code: 100

