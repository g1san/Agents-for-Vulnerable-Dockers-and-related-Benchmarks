FROM openjdk:8-jdk-alpine
WORKDIR /app
# Install wget and CA certificates
RUN apk add --no-cache wget ca-certificates && update-ca-certificates
# Copy source code
COPY Main.java .
# Download vulnerable Fastjson JAR, ignore TLS verification and follow redirects
RUN wget --no-check-certificate -O fastjson.jar https://repo1.maven.org/maven2/com/alibaba/fastjson/fastjson/1.2.24/fastjson-1.2.24.jar
# Compile the Java source against the downloaded JAR
RUN javac -cp ".:fastjson.jar" Main.java
EXPOSE 8080
# Run the application with proper classpath
CMD ["java","-cp",".:fastjson.jar","Main"]