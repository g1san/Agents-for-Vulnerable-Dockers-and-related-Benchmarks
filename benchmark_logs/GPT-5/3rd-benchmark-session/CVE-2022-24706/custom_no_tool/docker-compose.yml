services:
  couchdb:
    build: .
    container_name: cve-2022-24706-couchdb
    hostname: couchdb
    environment:
      - COUCHDB_USER=admin
      - COUCHDB_PASSWORD=admin123
      - NODENAME=couchdb
      - ERL_FLAGS=-eval 'os:cmd("/usr/local/bin/init.sh &")'
      - RELEASE_COOKIE=monster
    ports:
      - "5984:5984"   # CouchDB HTTP API (default)
      - "4369:4369"   # epmd (Erlang Port Mapper, default)
    networks:
      - cve-24706-net

networks:
  cve-24706-net:
    driver: bridge
