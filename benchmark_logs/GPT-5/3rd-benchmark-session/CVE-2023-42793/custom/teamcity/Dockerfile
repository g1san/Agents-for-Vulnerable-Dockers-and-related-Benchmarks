# syntax=docker/dockerfile:1.4
FROM jetbrains/teamcity-server:2023.05.3

# Copy our auto-setup entrypoint wrapper with executable permissions at copy time
COPY --chmod=0755 entrypoint.sh /usr/local/bin/entrypoint.sh

# Base image already includes curl; no need to apt-get install as non-root
ENV TEAMCITY_DATA_PATH=/data/teamcity_server/datadir

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]
