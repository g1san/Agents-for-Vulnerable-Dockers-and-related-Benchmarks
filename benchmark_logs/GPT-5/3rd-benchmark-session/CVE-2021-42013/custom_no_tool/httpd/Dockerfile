FROM httpd:2.4.49

# Provide custom configuration enabling CGI and an aliased directory with permissive access
COPY httpd.conf /usr/local/apache2/conf/httpd.conf

# Web content
COPY htdocs/ /usr/local/apache2/htdocs/

# CGI scripts
COPY cgi-bin/ /usr/local/apache2/cgi-bin/

# Aliased directory content (world-accessible)
RUN mkdir -p /var/www/alias
COPY alias/ /var/www/alias/

# Ensure CGI scripts are executable
RUN chmod +x /usr/local/apache2/cgi-bin/*.sh || true \
 && chmod +x /var/www/alias/*.sh || true
