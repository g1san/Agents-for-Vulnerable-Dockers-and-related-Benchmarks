#1 [internal] load local bake definitions
#1 reading from stdin 716B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 1.91kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/alpine:3.19
#3 DONE 1.5s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 1.91kB done
#5 DONE 0.0s

#6 [ 1/15] FROM docker.io/library/alpine:3.19@sha256:6baf43584bcb78f2e5847d1de515f23499913ac9f12bdf834811a3145eb11ca1
#6 resolve docker.io/library/alpine:3.19@sha256:6baf43584bcb78f2e5847d1de515f23499913ac9f12bdf834811a3145eb11ca1 0.0s done
#6 sha256:17a39c0ba978cc27001e9c56a480f98106e1ab74bd56eb302f9fd4cf758ea43f 0B / 3.42MB 0.2s
#6 sha256:17a39c0ba978cc27001e9c56a480f98106e1ab74bd56eb302f9fd4cf758ea43f 1.05MB / 3.42MB 0.6s
#6 sha256:17a39c0ba978cc27001e9c56a480f98106e1ab74bd56eb302f9fd4cf758ea43f 3.15MB / 3.42MB 0.8s
#6 sha256:17a39c0ba978cc27001e9c56a480f98106e1ab74bd56eb302f9fd4cf758ea43f 3.42MB / 3.42MB 0.8s done
#6 extracting sha256:17a39c0ba978cc27001e9c56a480f98106e1ab74bd56eb302f9fd4cf758ea43f 0.1s done
#6 DONE 1.0s

#7 [ 2/15] RUN apk add --no-cache     build-base     openssl-dev     libevent-dev     zlib-dev     linux-headers     bison     flex     automake     autoconf     libtool     pkgconfig     curl     ca-certificates     bash
#7 0.182 fetch https://dl-cdn.alpinelinux.org/alpine/v3.19/main/x86_64/APKINDEX.tar.gz
#7 0.362 fetch https://dl-cdn.alpinelinux.org/alpine/v3.19/community/x86_64/APKINDEX.tar.gz
#7 0.733 (1/61) Installing m4 (1.4.19-r3)
#7 0.763 (2/61) Installing libbz2 (1.0.8-r6)
#7 0.783 (3/61) Installing perl (5.38.5-r0)
#7 2.305 (4/61) Installing autoconf (2.71-r2)
#7 2.405 (5/61) Installing automake (1.16.5-r2)
#7 2.480 (6/61) Installing ncurses-terminfo-base (6.4_p20231125-r0)
#7 2.500 (7/61) Installing libncursesw (6.4_p20231125-r0)
#7 2.536 (8/61) Installing readline (8.2.1-r2)
#7 2.568 (9/61) Installing bash (5.2.21-r0)
#7 2.651 Executing bash-5.2.21-r0.post-install
#7 2.654 (10/61) Installing bison (3.8.2-r1)
#7 2.755 (11/61) Installing libgcc (13.2.1_git20231014-r0)
#7 2.778 (12/61) Installing jansson (2.14-r4)
#7 2.794 (13/61) Installing libstdc++ (13.2.1_git20231014-r0)
#7 2.939 (14/61) Installing zstd-libs (1.5.5-r8)
#7 3.006 (15/61) Installing binutils (2.41-r1)
#7 3.697 (16/61) Installing libmagic (5.45-r1)
#7 3.786 (17/61) Installing file (5.45-r1)
#7 3.801 (18/61) Installing libgomp (13.2.1_git20231014-r0)
#7 3.837 (19/61) Installing libatomic (13.2.1_git20231014-r0)
#7 3.852 (20/61) Installing gmp (6.3.0-r0)
#7 3.898 (21/61) Installing isl26 (0.26-r1)
#7 4.040 (22/61) Installing mpfr4 (4.2.1-r0)
#7 4.097 (23/61) Installing mpc1 (1.3.1-r1)
#7 4.118 (24/61) Installing gcc (13.2.1_git20231014-r0)
#7 11.60 (25/61) Installing libstdc++-dev (13.2.1_git20231014-r0)
#7 12.14 (26/61) Installing musl-dev (1.2.4_git20230717-r5)
#7 12.67 (27/61) Installing libc-dev (0.7.2-r5)
#7 12.70 (28/61) Installing g++ (13.2.1_git20231014-r0)
#7 14.80 (29/61) Installing make (4.4.1-r2)
#7 14.85 (30/61) Installing fortify-headers (1.1-r3)
#7 14.86 (31/61) Installing patch (2.7.6-r10)
#7 14.89 (32/61) Installing build-base (0.5-r3)
#7 14.90 (33/61) Installing ca-certificates (20250911-r0)
#7 14.95 (34/61) Installing brotli-libs (1.1.0-r1)
#7 15.04 (35/61) Installing c-ares (1.27.0-r0)
#7 15.07 (36/61) Installing libunistring (1.1-r2)
#7 15.18 (37/61) Installing libidn2 (2.3.4-r4)
#7 15.21 (38/61) Installing nghttp2-libs (1.58.0-r0)
#7 15.24 (39/61) Installing libpsl (0.21.5-r0)
#7 15.27 (40/61) Installing libcurl (8.14.1-r2)
#7 15.35 (41/61) Installing curl (8.14.1-r2)
#7 15.39 (42/61) Installing flex (2.6.4-r6)
#7 15.50 (43/61) Installing libexpat (2.7.3-r0)
#7 15.52 (44/61) Installing libffi (3.4.4-r3)
#7 15.54 (45/61) Installing gdbm (1.23-r1)
#7 15.56 (46/61) Installing xz-libs (5.4.5-r1)
#7 15.60 (47/61) Installing mpdecimal (2.5.1-r2)
#7 15.63 (48/61) Installing libpanelw (6.4_p20231125-r0)
#7 15.64 (49/61) Installing sqlite-libs (3.44.2-r1)
#7 15.79 (50/61) Installing python3 (3.11.13-r0)
#7 17.14 (51/61) Installing python3-pycache-pyc0 (3.11.13-r0)
#7 17.82 (52/61) Installing pyc (3.11.13-r0)
#7 17.83 (53/61) Installing python3-pyc (3.11.13-r0)
#7 17.85 (54/61) Installing libevent (2.1.12-r7)
#7 17.90 (55/61) Installing pkgconf (2.1.0-r0)
#7 17.92 (56/61) Installing libevent-dev (2.1.12-r7)
#7 17.96 (57/61) Installing libltdl (2.4.7-r3)
#7 17.97 (58/61) Installing libtool (2.4.7-r3)
#7 18.07 (59/61) Installing linux-headers (6.5-r0)
#7 18.35 (60/61) Installing openssl-dev (3.1.8-r1)
#7 18.42 (61/61) Installing zlib-dev (1.3.1-r0)
#7 18.44 Executing busybox-1.36.1-r20.trigger
#7 18.45 Executing ca-certificates-20250911-r0.trigger
#7 18.50 OK: 331 MiB in 76 packages
#7 DONE 18.7s

#8 [ 3/15] RUN addgroup -S _smtpd && adduser -S -D -G _smtpd _smtpd  && addgroup -S _smtpq && adduser -S -D -G _smtpq _smtpq
#8 DONE 0.3s

#9 [ 4/15] WORKDIR /tmp/build
#9 DONE 0.1s

#10 [ 5/15] RUN curl -fsSL https://www.opensmtpd.org/archives/opensmtpd-6.6.1p1.tar.gz -o opensmtpd.tar.gz  && tar xzf opensmtpd.tar.gz  && cd opensmtpd-6.6.1p1  && ./configure       --prefix=/usr       --sysconfdir=/etc/opensmtpd       --with-user=_smtpd       --with-queue-user=_smtpq  && make -j"$(nproc)"  && make install  && cd /  && rm -rf /tmp/build
#10 0.671 configure: WARNING: unrecognized options: --with-user, --with-queue-user
#10 0.695 checking for a BSD-compatible install... /usr/bin/install -c
#10 0.799 checking whether build environment is sane... yes
#10 0.805 checking for a thread-safe mkdir -p... ./install-sh -c -d
#10 0.809 checking for gawk... no
#10 0.809 checking for mawk... no
#10 0.809 checking for nawk... no
#10 0.809 checking for awk... awk
#10 0.810 checking whether make sets $(MAKE)... yes
#10 0.816 checking whether make supports nested variables... yes
#10 0.827 checking build system type... x86_64-pc-linux-gnu
#10 0.860 checking host system type... x86_64-pc-linux-gnu
#10 0.861 checking how to print strings... printf
#10 0.862 checking for gcc... gcc
#10 0.878 checking whether the C compiler works... yes
#10 0.904 checking for C compiler default output file name... a.out
#10 0.904 checking for suffix of executables... 
#10 0.932 checking whether we are cross compiling... no
#10 0.961 checking for suffix of object files... o
#10 0.980 checking whether we are using the GNU C compiler... yes
#10 0.998 checking whether gcc accepts -g... yes
#10 1.016 checking for gcc option to accept ISO C89... none needed
#10 1.051 checking whether gcc understands -c and -o together... yes
#10 1.085 checking for a sed that does not truncate output... /bin/sed
#10 1.088 checking for grep that handles long lines and -e... /bin/grep
#10 1.126 checking for egrep... /bin/grep -E
#10 1.128 checking for fgrep... /bin/grep -F
#10 1.129 checking for ld used by gcc... /usr/x86_64-alpine-linux-musl/bin/ld
#10 1.138 checking if the linker (/usr/x86_64-alpine-linux-musl/bin/ld) is GNU ld... yes
#10 1.140 checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
#10 1.142 checking the name lister (/usr/bin/nm -B) interface... BSD nm
#10 1.161 checking whether ln -s works... yes
#10 1.161 checking the maximum length of command line arguments... 98304
#10 1.163 checking whether the shell understands some XSI constructs... yes
#10 1.163 checking whether the shell understands "+="... no
#10 1.166 checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop
#10 1.166 checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
#10 1.166 checking for /usr/x86_64-alpine-linux-musl/bin/ld option to reload object files... -r
#10 1.166 checking for objdump... objdump
#10 1.166 checking how to recognize dependent libraries... pass_all
#10 1.167 checking for dlltool... no
#10 1.167 checking how to associate runtime and link libraries... printf %s\n
#10 1.167 checking for ar... ar
#10 1.168 checking for archiver @FILE support... @
#10 1.193 checking for strip... strip
#10 1.193 checking for ranlib... ranlib
#10 1.194 checking command to parse /usr/bin/nm -B output from gcc object... ok
#10 1.248 checking for sysroot... no
#10 1.263 checking for mt... no
#10 1.263 checking if : is a manifest tool... no
#10 1.266 checking how to run the C preprocessor... gcc -E
#10 1.313 checking for ANSI C header files... yes
#10 1.400 checking for sys/types.h... yes
#10 1.427 checking for sys/stat.h... yes
#10 1.452 checking for stdlib.h... yes
#10 1.477 checking for string.h... yes
#10 1.505 checking for memory.h... yes
#10 1.534 checking for strings.h... yes
#10 1.562 checking for inttypes.h... yes
#10 1.591 checking for stdint.h... yes
#10 1.620 checking for unistd.h... yes
#10 1.650 checking for dlfcn.h... yes
#10 1.679 checking for objdir... .libs
#10 1.728 checking if gcc supports -fno-rtti -fno-exceptions... no
#10 1.746 checking for gcc option to produce PIC... -fPIC -DPIC
#10 1.746 checking if gcc PIC flag -fPIC -DPIC works... yes
#10 1.762 checking if gcc static flag -static works... yes
#10 1.790 checking if gcc supports -c -o file.o... yes
#10 1.813 checking if gcc supports -c -o file.o... (cached) yes
#10 1.813 checking whether the gcc linker (/usr/x86_64-alpine-linux-musl/bin/ld -m elf_x86_64) supports shared libraries... yes
#10 1.823 checking whether -lc should be explicitly linked in... no
#10 1.845 checking dynamic linker characteristics... GNU/Linux ld.so
#10 1.881 checking how to hardcode library paths into programs... immediate
#10 1.881 checking whether stripping libraries is possible... yes
#10 1.883 checking if libtool supports shared libraries... yes
#10 1.883 checking whether to build shared libraries... yes
#10 1.883 checking whether to build static libraries... yes
#10 1.884 checking for gcc... (cached) gcc
#10 1.899 checking whether we are using the GNU C compiler... (cached) yes
#10 1.899 checking whether gcc accepts -g... (cached) yes
#10 1.899 checking for gcc option to accept ISO C89... (cached) none needed
#10 1.899 checking whether gcc understands -c and -o together... (cached) yes
#10 1.899 checking whether byte ordering is bigendian... no
#10 1.954 checking how to run the C preprocessor... gcc -E
#10 1.977 checking for ar... /usr/bin/ar
#10 1.977 checking for cat... /bin/cat
#10 1.977 checking for chmod... /bin/chmod
#10 1.977 checking for chown... /bin/chown
#10 1.978 checking for zcat... /bin/zcat
#10 1.979 checking for sed... (cached) /bin/sed
#10 1.979 checking for bash... /bin/bash
#10 1.979 checking for ksh... (cached) /bin/bash
#10 1.979 checking for sh... (cached) /bin/bash
#10 1.979 checking for sh... /bin/sh
#10 1.979 checking for groff... no
#10 1.979 checking for nroff... no
#10 1.980 checking for mandoc... no
#10 1.980 checking for bison... bison -y
#10 1.980 configure: WARNING: no manpage formatted found
#10 1.982 checking arpa/nameser_compat.h usability... yes
#10 2.010 checking arpa/nameser_compat.h presence... yes
#10 2.022 checking for arpa/nameser_compat.h... yes
#10 2.026 checking crypt.h usability... yes
#10 2.054 checking crypt.h presence... yes
#10 2.064 checking for crypt.h... yes
#10 2.068 checking dirent.h usability... yes
#10 2.096 checking dirent.h presence... yes
#10 2.107 checking for dirent.h... yes
#10 2.111 checking err.h usability... yes
#10 2.142 checking err.h presence... yes
#10 2.153 checking for err.h... yes
#10 2.157 checking fcntl.h usability... yes
#10 2.185 checking fcntl.h presence... yes
#10 2.196 checking for fcntl.h... yes
#10 2.200 checking getopt.h usability... yes
#10 2.228 checking getopt.h presence... yes
#10 2.239 checking for getopt.h... yes
#10 2.242 checking grp.h usability... yes
#10 2.270 checking grp.h presence... yes
#10 2.281 checking for grp.h... yes
#10 2.286 checking libgen.h usability... yes
#10 2.314 checking libgen.h presence... yes
#10 2.325 checking for libgen.h... yes
#10 2.329 checking limits.h usability... yes
#10 2.357 checking limits.h presence... yes
#10 2.368 checking for limits.h... yes
#10 2.372 checking maillock.h usability... no
#10 2.401 checking maillock.h presence... no
#10 2.414 checking for maillock.h... no
#10 2.416 checking mach/mach_time.h usability... no
#10 2.447 checking mach/mach_time.h presence... no
#10 2.461 checking for mach/mach_time.h... no
#10 2.464 checking ndir.h usability... no
#10 2.495 checking ndir.h presence... no
#10 2.511 checking for ndir.h... no
#10 2.513 checking netdb.h usability... yes
#10 2.543 checking netdb.h presence... yes
#10 2.556 checking for netdb.h... yes
#10 2.560 checking pam/pam_appl.h usability... no
#10 2.588 checking pam/pam_appl.h presence... no
#10 2.601 checking for pam/pam_appl.h... no
#10 2.603 checking paths.h usability... yes
#10 2.632 checking paths.h presence... yes
#10 2.643 checking for paths.h... yes
#10 2.647 checking security/pam_appl.h usability... no
#10 2.675 checking security/pam_appl.h presence... no
#10 2.688 checking for security/pam_appl.h... no
#10 2.689 checking shadow.h usability... yes
#10 2.717 checking shadow.h presence... yes
#10 2.728 checking for shadow.h... yes
#10 2.732 checking sys/cdefs.h usability... no
#10 2.759 checking sys/cdefs.h presence... no
#10 2.772 checking for sys/cdefs.h... no
#10 2.774 checking sys/dir.h usability... yes
#10 2.801 checking sys/dir.h presence... yes
#10 2.812 checking for sys/dir.h... yes
#10 2.816 checking sys/file.h usability... yes
#10 2.844 checking sys/file.h presence... yes
#10 2.854 checking for sys/file.h... yes
#10 2.858 checking sys/mount.h usability... yes
#10 2.887 checking sys/mount.h presence... yes
#10 2.898 checking for sys/mount.h... yes
#10 2.902 checking sys/ndir.h usability... no
#10 2.930 checking sys/ndir.h presence... no
#10 2.943 checking for sys/ndir.h... no
#10 2.945 checking sys/pstat.h usability... no
#10 2.974 checking sys/pstat.h presence... no
#10 2.987 checking for sys/pstat.h... no
#10 2.989 checking sys/statfs.h usability... yes
#10 3.018 checking sys/statfs.h presence... yes
#10 3.030 checking for sys/statfs.h... yes
#10 3.035 checking sys/time.h usability... yes
#10 3.062 checking sys/time.h presence... yes
#10 3.075 checking for sys/time.h... yes
#10 3.079 checking sys/un.h usability... yes
#10 3.109 checking sys/un.h presence... yes
#10 3.120 checking for sys/un.h... yes
#10 3.124 checking time.h usability... yes
#10 3.153 checking time.h presence... yes
#10 3.164 checking for time.h... yes
#10 3.168 checking ucred.h usability... no
#10 3.197 checking ucred.h presence... no
#10 3.210 checking for ucred.h... no
#10 3.211 checking util.h usability... no
#10 3.239 checking util.h presence... no
#10 3.252 checking for util.h... no
#10 3.254 checking utime.h usability... yes
#10 3.283 checking utime.h presence... yes
#10 3.294 checking for utime.h... yes
#10 3.297 checking vis.h usability... no
#10 3.325 checking vis.h presence... no
#10 3.338 checking for vis.h... no
#10 3.338 checking for login_cap.h... no
#10 3.355 checking for sys/mount.h... (cached) yes
#10 3.358 checking bsd/libutil.h usability... no
#10 3.387 checking bsd/libutil.h presence... no
#10 3.401 checking for bsd/libutil.h... no
#10 3.403 checking libutil.h usability... no
#10 3.432 checking libutil.h presence... no
#10 3.445 checking for libutil.h... no
#10 3.445 checking for fts.h... no
#10 3.462 configure: error: *** fts.h missing - please install fts library ***
#10 ERROR: process "/bin/sh -c curl -fsSL https://www.opensmtpd.org/archives/opensmtpd-${OSMTPD_VER}.tar.gz -o opensmtpd.tar.gz  && tar xzf opensmtpd.tar.gz  && cd opensmtpd-${OSMTPD_VER}  && ./configure       --prefix=/usr       --sysconfdir=/etc/opensmtpd       --with-user=_smtpd       --with-queue-user=_smtpq  && make -j\"$(nproc)\"  && make install  && cd /  && rm -rf /tmp/build" did not complete successfully: exit code: 1
------
 > [ 5/15] RUN curl -fsSL https://www.opensmtpd.org/archives/opensmtpd-6.6.1p1.tar.gz -o opensmtpd.tar.gz  && tar xzf opensmtpd.tar.gz  && cd opensmtpd-6.6.1p1  && ./configure       --prefix=/usr       --sysconfdir=/etc/opensmtpd       --with-user=_smtpd       --with-queue-user=_smtpq  && make -j"$(nproc)"  && make install  && cd /  && rm -rf /tmp/build:
2.416 checking mach/mach_time.h usability... no
2.447 checking mach/mach_time.h presence... no
2.461 checking for mach/mach_time.h... no
2.464 checking ndir.h usability... no
2.495 checking ndir.h presence... no
2.511 checking for ndir.h... no
no
3.445 checking for libutil.h... no
3.445 checking for fts.h... no
3.462 configure: error: *** fts.h missing - please install fts library ***
------
Dockerfile:28

--------------------

  27 |     WORKDIR /tmp/build

  28 | >>> RUN curl -fsSL https://www.opensmtpd.org/archives/opensmtpd-${OSMTPD_VER}.tar.gz -o opensmtpd.tar.gz \

  29 | >>>  && tar xzf opensmtpd.tar.gz \

  30 | >>>  && cd opensmtpd-${OSMTPD_VER} \

  31 | >>>  && ./configure \

  32 | >>>       --prefix=/usr \

  33 | >>>       --sysconfdir=/etc/opensmtpd \

  34 | >>>       --with-user=_smtpd \

  35 | >>>       --with-queue-user=_smtpq \

  36 | >>>  && make -j"$(nproc)" \

  37 | >>>  && make install \

  38 | >>>  && cd / \

  39 | >>>  && rm -rf /tmp/build

  40 |     

--------------------

failed to solve: process "/bin/sh -c curl -fsSL https://www.opensmtpd.org/archives/opensmtpd-${OSMTPD_VER}.tar.gz -o opensmtpd.tar.gz  && tar xzf opensmtpd.tar.gz  && cd opensmtpd-${OSMTPD_VER}  && ./configure       --prefix=/usr       --sysconfdir=/etc/opensmtpd       --with-user=_smtpd       --with-queue-user=_smtpq  && make -j\"$(nproc)\"  && make install  && cd /  && rm -rf /tmp/build" did not complete successfully: exit code: 1

