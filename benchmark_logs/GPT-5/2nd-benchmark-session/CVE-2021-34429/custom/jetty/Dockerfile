FROM jetty:9.4.42-jre11

# Copy an exploded vulnerable webapp as the root context
COPY webapps/root /var/lib/jetty/webapps/root

# Provide a realm for BASIC auth via a custom LoginService XML (no module dependency)
COPY etc/realm.properties /var/lib/jetty/etc/realm.properties
COPY etc/loginservice.xml /var/lib/jetty/etc/loginservice.xml

# Load the login service XML via start.d without referencing non-existent modules
COPY start.d/loginservice.ini /var/lib/jetty/start.d/loginservice.ini
