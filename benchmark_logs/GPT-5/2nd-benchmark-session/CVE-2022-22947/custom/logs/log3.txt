#1 [internal] load local bake definitions
#1 reading from stdin 693B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 389B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/eclipse-temurin:17-jre
#3 DONE 1.7s

#4 [internal] load metadata for docker.io/library/maven:3.9.6-eclipse-temurin-17
#4 DONE 1.8s

#5 [internal] load .dockerignore
#5 transferring context: 2B done
#5 DONE 0.0s

#6 [builder 1/6] FROM docker.io/library/maven:3.9.6-eclipse-temurin-17@sha256:29a1658b1f3078e07c2b17f7b519b45eb47f65d9628e887eac45a8c5c8f939d4
#6 resolve docker.io/library/maven:3.9.6-eclipse-temurin-17@sha256:29a1658b1f3078e07c2b17f7b519b45eb47f65d9628e887eac45a8c5c8f939d4 0.0s done
#6 DONE 0.0s

#7 [stage-1 1/3] FROM docker.io/library/eclipse-temurin:17-jre@sha256:e63288cbcc5de259866761281980afe4ac8de8e208d389bc858b049d6d240ebd
#7 resolve docker.io/library/eclipse-temurin:17-jre@sha256:e63288cbcc5de259866761281980afe4ac8de8e208d389bc858b049d6d240ebd 0.0s done
#7 DONE 0.0s

#8 [internal] load build context
#8 transferring context: 4.32kB done
#8 DONE 0.0s

#9 [builder 2/6] WORKDIR /src
#9 CACHED

#10 [builder 3/6] COPY pom.xml .
#10 DONE 0.0s

#11 [builder 4/6] RUN mvn -q -e -U -DskipTests=true dependency:go-offline
#11 DONE 45.9s

#12 [builder 5/6] COPY src ./src
#12 DONE 0.1s

#13 [builder 6/6] RUN mvn -q -DskipTests=true package
#13 DONE 6.4s

#14 [stage-1 2/3] WORKDIR /app
#14 CACHED

#15 [stage-1 3/3] COPY --from=builder /src/target/gateway-0.0.1-SNAPSHOT.jar /app/app.jar
#15 DONE 0.1s

#16 exporting to image
#16 exporting layers
#16 exporting layers 1.1s done
#16 exporting manifest sha256:755473219918ac76f594bef42b80aaae8f6833b5eaaec3593fee00cf89742220 0.0s done
#16 exporting config sha256:bdecc41fbd6fde4b347eecc3d24db76d97def0ac715e467224814b551f26a39c 0.0s done
#16 exporting attestation manifest sha256:2fad92e93debe50a0015d02b952e49e441d64370480361f4713c477bf4caf003 0.0s done
#16 exporting manifest list sha256:6e603f817bab0577a15a5b74cab274ebe5dedb9ed66986c27477d55dfabd2c2b 0.0s done
#16 naming to docker.io/library/cve-2022-22947-gateway:local done
#16 unpacking to docker.io/library/cve-2022-22947-gateway:local
#16 unpacking to docker.io/library/cve-2022-22947-gateway:local 0.2s done
#16 DONE 1.4s

#17 resolving provenance for metadata file
#17 DONE 0.0s
 cve-2022-22947-gateway:local  Built
 Network custom_default  Creating
 Network custom_default  Created
 Container cve-2022-22947-gateway  Creating
 Container cve-2022-22947-gateway  Created
 Container cve-2022-22947-gateway  Starting
 Container cve-2022-22947-gateway  Started


sudo docker logs 3280ba0e15d63245a519db677d24e765e74229880c27a61e986acb2badf048fe --details
STDOUT:  
   .   ____          _            __ _ _
  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
 ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
   '  |____| .__|_| |_|_| |_\__, | / / / /
  =========|_|==============|___/=/_/_/_/
  :: Spring Boot ::                (v2.6.7)
 
 2025-10-01 11:43:17.384  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : Starting GatewayApplication using Java 17.0.16 on 3280ba0e15d6 with PID 1 (/app/app.jar started by root in /app)
 2025-10-01 11:43:17.387  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : No active profile set, falling back to 1 default profile: "default"
 2025-10-01 11:43:18.256  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ca58cd44-b990-3ed6-add5-d2783c6f6d1a
 2025-10-01 11:43:18.523  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
 2025-10-01 11:43:18.532  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
 2025-10-01 11:43:18.532  INFO 1 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.62]
 2025-10-01 11:43:18.601  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
 2025-10-01 11:43:18.601  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1173 ms
 2025-10-01 11:43:18.817  WARN 1 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
 2025-10-01 11:43:18.820  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
 2025-10-01 11:43:18.837  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener : 
 
 Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
 2025-10-01 11:43:18.874 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 
 
 ***************************
 APPLICATION FAILED TO START
 ***************************
 
 Description:
 
 Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.
 
 Action:
 
 Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.
 
 
   .   ____          _            __ _ _
  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
 ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
   '  |____| .__|_| |_|_| |_\__, | / / / /
  =========|_|==============|___/=/_/_/_/
  :: Spring Boot ::                (v2.6.7)
 
 2025-10-01 11:43:20.320  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : Starting GatewayApplication using Java 17.0.16 on 3280ba0e15d6 with PID 1 (/app/app.jar started by root in /app)
 2025-10-01 11:43:20.323  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : No active profile set, falling back to 1 default profile: "default"
 2025-10-01 11:43:21.340  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ca58cd44-b990-3ed6-add5-d2783c6f6d1a
 2025-10-01 11:43:21.643  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
 2025-10-01 11:43:21.653  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
 2025-10-01 11:43:21.653  INFO 1 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.62]
 2025-10-01 11:43:21.713  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
 2025-10-01 11:43:21.714  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1336 ms
 2025-10-01 11:43:21.905  WARN 1 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
 2025-10-01 11:43:21.908  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
 2025-10-01 11:43:21.923  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener : 
 
 Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
 2025-10-01 11:43:21.956 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 
 
 ***************************
 APPLICATION FAILED TO START
 ***************************
 
 Description:
 
 Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.
 
 Action:
 
 Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.
 
 
   .   ____          _            __ _ _
  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
 ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
   '  |____| .__|_| |_|_| |_\__, | / / / /
  =========|_|==============|___/=/_/_/_/
  :: Spring Boot ::                (v2.6.7)
 
 2025-10-01 11:43:24.107  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : Starting GatewayApplication using Java 17.0.16 on 3280ba0e15d6 with PID 1 (/app/app.jar started by root in /app)
 2025-10-01 11:43:24.109  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : No active profile set, falling back to 1 default profile: "default"
 2025-10-01 11:43:24.979  INFO 1 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ca58cd44-b990-3ed6-add5-d2783c6f6d1a
 2025-10-01 11:43:25.199  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
 2025-10-01 11:43:25.206  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
 2025-10-01 11:43:25.207  INFO 1 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.62]
 2025-10-01 11:43:25.266  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
 2025-10-01 11:43:25.266  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1118 ms
 2025-10-01 11:43:25.453  WARN 1 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
 2025-10-01 11:43:25.456  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
 2025-10-01 11:43:25.471  INFO 1 --- [           main] ConditionEvaluationReportLoggingListener : 
 
 Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
 2025-10-01 11:43:25.503 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 
 
 ***************************
 APPLICATION FAILED TO START
 ***************************
 
 Description:
 
 Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.
 
 Action:
 
 Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.
 
 
   .   ____          _            __ _ _
  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
 ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
   '  |____| .__|_| |_|_| |_\__, | / / / /
  =========|_|==============|___/=/_/_/_/
  :: Spring Boot ::                (v2.6.7)
 
 2025-10-01 11:43:27.009  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : Starting GatewayApplication using Java 17.0.16 on 3280ba0e15d6 with PID 1 (/app/app.jar started by root in /app)
 2025-10-01 11:43:27.012  INFO 1 --- [           main] com.example.gateway.GatewayApplication   : No active profile set, falling back to 1 default profile: "default"

STDERR:  Picked up JAVA_TOOL_OPTIONS: -XX:+UseContainerSupport -Xms256m -Xmx512m
 Picked up JAVA_TOOL_OPTIONS: -XX:+UseContainerSupport -Xms256m -Xmx512m
 Picked up JAVA_TOOL_OPTIONS: -XX:+UseContainerSupport -Xms256m -Xmx512m
 Picked up JAVA_TOOL_OPTIONS: -XX:+UseContainerSupport -Xms256m -Xmx512m


