FROM openjdk:11-jre-slim

# Install wget to download Jetty
RUN apt-get update && apt-get install -y wget && rm -rf /var/lib/apt/lists/*

# Download and set up Jetty
RUN wget -q https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/9.4.42.v20210604/jetty-distribution-9.4.42.v20210604.tar.gz \
    && tar xzf jetty-distribution-9.4.42.v20210604.tar.gz -C /opt/ \
    && mv /opt/jetty-distribution-9.4.42.v20210604 /opt/jetty \
    && rm jetty-distribution-9.4.42.v20210604.tar.gz

# Set Jetty home
ENV JETTY_HOME /opt/jetty

# Copy the web application files
COPY ./webapps $JETTY_HOME/webapps

# Expose the Jetty port
EXPOSE 8080

# Run Jetty
CMD ["/opt/jetty/bin/jetty.sh", "run"]
