version: '3.8'

services:
  opensmtpd:
    build:
      context: .
      dockerfile: Dockerfile.opensmtpd
    image: opensmtpd:6.6-CVE-2020-7247
    container_name: opensmtpd_vulnerable
    ports:
      - "25:25"

  python:
    build:
      context: .
      dockerfile: Dockerfile.python
    image: python:3.8-CVE-2020-7247
    container_name: python_client
    depends_on:
      - opensmtpd
    command: python3 -c "import time; time.sleep(3600)"
