#1 [internal] load local bake definitions
#1 reading from stdin 699B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 477B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/debian:10.0
#3 DONE 0.2s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 374B done
#5 DONE 0.0s

#6 [1/3] FROM docker.io/library/debian:10.0@sha256:2f04d3d33b6027bb74ecc81397abe780649ec89f1a2af18d7022737d0482cefe
#6 resolve docker.io/library/debian:10.0@sha256:2f04d3d33b6027bb74ecc81397abe780649ec89f1a2af18d7022737d0482cefe 0.0s done
#6 CACHED

#7 [2/3] RUN sed -i 's|http://deb.debian.org/debian|http://archive.debian.org/debian|g' /etc/apt/sources.list &&     sed -i 's|http://security.debian.org/debian-security|http://archive.debian.org/debian-security|g' /etc/apt/sources.list &&     apt-get update &&     apt-get install -y opensmtpd &&     apt-get clean && rm -rf /var/lib/apt/lists/*
#7 0.270 Get:1 http://archive.debian.org/debian buster InRelease [122 kB]
#7 0.393 Get:2 http://archive.debian.org/debian-security buster/updates InRelease [34.8 kB]
#7 0.446 Get:3 http://archive.debian.org/debian buster-updates InRelease [56.6 kB]
#7 0.500 Get:4 http://archive.debian.org/debian buster/main amd64 Packages [7909 kB]
#7 2.732 Get:5 http://archive.debian.org/debian-security buster/updates/main amd64 Packages [610 kB]
#7 2.876 Get:6 http://archive.debian.org/debian buster-updates/main amd64 Packages [8788 B]
#7 3.636 Fetched 8741 kB in 3s (2546 kB/s)
#7 3.636 Reading package lists...
#7 4.167 Reading package lists...
#7 4.659 Building dependency tree...
#7 4.759 Reading state information...
#7 4.857 The following additional packages will be installed:
#7 4.857   ed krb5-locales libasr0 libevent-2.1-6 libgssapi-krb5-2 libhiredis0.14
#7 4.857   libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
#7 4.857   libldap-common libmariadb3 libpq5 libsasl2-2 libsasl2-modules
#7 4.858   libsasl2-modules-db libsqlite3-0 libssl1.1 lsb-base mariadb-common
#7 4.858   mysql-common opensmtpd-extras
#7 4.860 Suggested packages:
#7 4.860   krb5-doc krb5-user libsasl2-modules-gssapi-mit
#7 4.860   | libsasl2-modules-gssapi-heimdal libsasl2-modules-ldap libsasl2-modules-otp
#7 4.860   libsasl2-modules-sql ca-certificates
#7 4.953 The following NEW packages will be installed:
#7 4.953   ed krb5-locales libasr0 libevent-2.1-6 libgssapi-krb5-2 libhiredis0.14
#7 4.953   libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 libldap-2.4-2
#7 4.953   libldap-common libmariadb3 libpq5 libsasl2-2 libsasl2-modules
#7 4.954   libsasl2-modules-db libsqlite3-0 libssl1.1 lsb-base mariadb-common
#7 4.954   mysql-common opensmtpd opensmtpd-extras
#7 5.042 0 upgraded, 24 newly installed, 0 to remove and 48 not upgraded.
#7 5.042 Need to get 4651 kB of archives.
#7 5.042 After this operation, 12.6 MB of additional disk space will be used.
#7 5.042 Get:1 http://archive.debian.org/debian-security buster/updates/main amd64 libssl1.1 amd64 1.1.1n-0+deb10u6 [1552 kB]
#7 5.832 Get:2 http://archive.debian.org/debian-security buster/updates/main amd64 krb5-locales all 1.17-3+deb10u6 [95.8 kB]
#7 5.882 Get:3 http://archive.debian.org/debian buster/main amd64 libkeyutils1 amd64 1.6-6 [15.0 kB]
#7 5.889 Get:4 http://archive.debian.org/debian-security buster/updates/main amd64 libkrb5support0 amd64 1.17-3+deb10u6 [66.1 kB]
#7 5.919 Get:5 http://archive.debian.org/debian-security buster/updates/main amd64 libk5crypto3 amd64 1.17-3+deb10u6 [122 kB]
#7 5.979 Get:6 http://archive.debian.org/debian-security buster/updates/main amd64 libkrb5-3 amd64 1.17-3+deb10u6 [369 kB]
#7 6.096 Get:7 http://archive.debian.org/debian-security buster/updates/main amd64 libgssapi-krb5-2 amd64 1.17-3+deb10u6 [159 kB]
#7 6.136 Get:8 http://archive.debian.org/debian-security buster/updates/main amd64 libsqlite3-0 amd64 3.27.2-3+deb10u2 [641 kB]
#7 6.296 Get:9 http://archive.debian.org/debian buster/main amd64 ed amd64 1.15-1 [59.7 kB]
#7 6.312 Get:10 http://archive.debian.org/debian buster/main amd64 libasr0 amd64 1.0.2-2 [27.3 kB]
#7 6.319 Get:11 http://archive.debian.org/debian buster/main amd64 libevent-2.1-6 amd64 2.1.8-stable-4 [177 kB]
#7 6.367 Get:12 http://archive.debian.org/debian buster/main amd64 libhiredis0.14 amd64 0.14.0-3 [33.8 kB]
#7 6.371 Get:13 http://archive.debian.org/debian buster/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-1+deb10u2 [69.2 kB]
#7 6.388 Get:14 http://archive.debian.org/debian buster/main amd64 libsasl2-2 amd64 2.1.27+dfsg-1+deb10u2 [106 kB]
#7 6.414 Get:15 http://archive.debian.org/debian buster/main amd64 libldap-common all 2.4.47+dfsg-3+deb10u7 [90.1 kB]
#7 6.444 Get:16 http://archive.debian.org/debian buster/main amd64 libldap-2.4-2 amd64 2.4.47+dfsg-3+deb10u7 [224 kB]
#7 6.487 Get:17 http://archive.debian.org/debian buster/main amd64 mysql-common all 5.8+1.0.5 [7324 B]
#7 6.488 Get:18 http://archive.debian.org/debian-security buster/updates/main amd64 mariadb-common all 1:10.3.39-0+deb10u2 [33.6 kB]
#7 6.496 Get:19 http://archive.debian.org/debian-security buster/updates/main amd64 libmariadb3 amd64 1:10.3.39-0+deb10u2 [173 kB]
#7 6.588 Get:20 http://archive.debian.org/debian-security buster/updates/main amd64 libpq5 amd64 11.22-0+deb10u2 [175 kB]
#7 6.627 Get:21 http://archive.debian.org/debian buster/main amd64 libsasl2-modules amd64 2.1.27+dfsg-1+deb10u2 [104 kB]
#7 6.665 Get:22 http://archive.debian.org/debian buster/main amd64 lsb-base all 10.2019051400 [28.4 kB]
#7 6.766 Get:23 http://archive.debian.org/debian buster/main amd64 opensmtpd amd64 6.0.3p1-5+deb10u4 [261 kB]
#7 6.845 Get:24 http://archive.debian.org/debian buster/main amd64 opensmtpd-extras amd64 5.7.1-4+b2 [60.1 kB]
#7 6.997 debconf: delaying package configuration, since apt-utils is not installed
#7 7.014 Fetched 4651 kB in 2s (2460 kB/s)
#7 7.049 Selecting previously unselected package libssl1.1:amd64.
#7 7.049 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 6674 files and directories currently installed.)
#7 7.079 Preparing to unpack .../00-libssl1.1_1.1.1n-0+deb10u6_amd64.deb ...
#7 7.086 Unpacking libssl1.1:amd64 (1.1.1n-0+deb10u6) ...
#7 7.098 Selecting previously unselected package krb5-locales.
#7 7.099 Preparing to unpack .../01-krb5-locales_1.17-3+deb10u6_all.deb ...
#7 7.103 Unpacking krb5-locales (1.17-3+deb10u6) ...
#7 7.143 Selecting previously unselected package libkeyutils1:amd64.
#7 7.143 Preparing to unpack .../02-libkeyutils1_1.6-6_amd64.deb ...
#7 7.147 Unpacking libkeyutils1:amd64 (1.6-6) ...
#7 7.179 Selecting previously unselected package libkrb5support0:amd64.
#7 7.179 Preparing to unpack .../03-libkrb5support0_1.17-3+deb10u6_amd64.deb ...
#7 7.183 Unpacking libkrb5support0:amd64 (1.17-3+deb10u6) ...
#7 7.218 Selecting previously unselected package libk5crypto3:amd64.
#7 7.219 Preparing to unpack .../04-libk5crypto3_1.17-3+deb10u6_amd64.deb ...
#7 7.223 Unpacking libk5crypto3:amd64 (1.17-3+deb10u6) ...
#7 7.262 Selecting previously unselected package libkrb5-3:amd64.
#7 7.263 Preparing to unpack .../05-libkrb5-3_1.17-3+deb10u6_amd64.deb ...
#7 7.268 Unpacking libkrb5-3:amd64 (1.17-3+deb10u6) ...
#7 7.331 Selecting previously unselected package libgssapi-krb5-2:amd64.
#7 7.331 Preparing to unpack .../06-libgssapi-krb5-2_1.17-3+deb10u6_amd64.deb ...
#7 7.335 Unpacking libgssapi-krb5-2:amd64 (1.17-3+deb10u6) ...
#7 7.377 Selecting previously unselected package libsqlite3-0:amd64.
#7 7.378 Preparing to unpack .../07-libsqlite3-0_3.27.2-3+deb10u2_amd64.deb ...
#7 7.382 Unpacking libsqlite3-0:amd64 (3.27.2-3+deb10u2) ...
#7 7.453 Selecting previously unselected package ed.
#7 7.454 Preparing to unpack .../08-ed_1.15-1_amd64.deb ...
#7 7.458 Unpacking ed (1.15-1) ...
#7 7.491 Selecting previously unselected package libasr0.
#7 7.492 Preparing to unpack .../09-libasr0_1.0.2-2_amd64.deb ...
#7 7.496 Unpacking libasr0 (1.0.2-2) ...
#7 7.530 Selecting previously unselected package libevent-2.1-6:amd64.
#7 7.531 Preparing to unpack .../10-libevent-2.1-6_2.1.8-stable-4_amd64.deb ...
#7 7.535 Unpacking libevent-2.1-6:amd64 (2.1.8-stable-4) ...
#7 7.578 Selecting previously unselected package libhiredis0.14:amd64.
#7 7.579 Preparing to unpack .../11-libhiredis0.14_0.14.0-3_amd64.deb ...
#7 7.583 Unpacking libhiredis0.14:amd64 (0.14.0-3) ...
#7 7.610 Selecting previously unselected package libsasl2-modules-db:amd64.
#7 7.611 Preparing to unpack .../12-libsasl2-modules-db_2.1.27+dfsg-1+deb10u2_amd64.deb ...
#7 7.615 Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 7.648 Selecting previously unselected package libsasl2-2:amd64.
#7 7.649 Preparing to unpack .../13-libsasl2-2_2.1.27+dfsg-1+deb10u2_amd64.deb ...
#7 7.653 Unpacking libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 7.686 Selecting previously unselected package libldap-common.
#7 7.687 Preparing to unpack .../14-libldap-common_2.4.47+dfsg-3+deb10u7_all.deb ...
#7 7.690 Unpacking libldap-common (2.4.47+dfsg-3+deb10u7) ...
#7 7.727 Selecting previously unselected package libldap-2.4-2:amd64.
#7 7.728 Preparing to unpack .../15-libldap-2.4-2_2.4.47+dfsg-3+deb10u7_amd64.deb ...
#7 7.732 Unpacking libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u7) ...
#7 7.783 Selecting previously unselected package mysql-common.
#7 7.784 Preparing to unpack .../16-mysql-common_5.8+1.0.5_all.deb ...
#7 7.799 Unpacking mysql-common (5.8+1.0.5) ...
#7 7.831 Selecting previously unselected package mariadb-common.
#7 7.832 Preparing to unpack .../17-mariadb-common_1%3a10.3.39-0+deb10u2_all.deb ...
#7 7.839 Unpacking mariadb-common (1:10.3.39-0+deb10u2) ...
#7 7.872 Selecting previously unselected package libmariadb3:amd64.
#7 7.873 Preparing to unpack .../18-libmariadb3_1%3a10.3.39-0+deb10u2_amd64.deb ...
#7 7.877 Unpacking libmariadb3:amd64 (1:10.3.39-0+deb10u2) ...
#7 7.921 Selecting previously unselected package libpq5:amd64.
#7 7.922 Preparing to unpack .../19-libpq5_11.22-0+deb10u2_amd64.deb ...
#7 7.926 Unpacking libpq5:amd64 (11.22-0+deb10u2) ...
#7 7.974 Selecting previously unselected package libsasl2-modules:amd64.
#7 7.975 Preparing to unpack .../20-libsasl2-modules_2.1.27+dfsg-1+deb10u2_amd64.deb ...
#7 7.980 Unpacking libsasl2-modules:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 8.011 Selecting previously unselected package lsb-base.
#7 8.012 Preparing to unpack .../21-lsb-base_10.2019051400_all.deb ...
#7 8.016 Unpacking lsb-base (10.2019051400) ...
#7 8.054 Selecting previously unselected package opensmtpd.
#7 8.055 Preparing to unpack .../22-opensmtpd_6.0.3p1-5+deb10u4_amd64.deb ...
#7 8.060 Unpacking opensmtpd (6.0.3p1-5+deb10u4) ...
#7 8.111 Selecting previously unselected package opensmtpd-extras.
#7 8.112 Preparing to unpack .../23-opensmtpd-extras_5.7.1-4+b2_amd64.deb ...
#7 8.117 Unpacking opensmtpd-extras (5.7.1-4+b2) ...
#7 8.154 Setting up lsb-base (10.2019051400) ...
#7 8.164 Setting up mysql-common (5.8+1.0.5) ...
#7 8.191 update-alternatives: using /etc/mysql/my.cnf.fallback to provide /etc/mysql/my.cnf (my.cnf) in auto mode
#7 8.198 Setting up libkeyutils1:amd64 (1.6-6) ...
#7 8.208 Setting up libssl1.1:amd64 (1.1.1n-0+deb10u6) ...
#7 8.277 debconf: unable to initialize frontend: Dialog
#7 8.277 debconf: (TERM is not set, so the dialog frontend is not usable.)
#7 8.277 debconf: falling back to frontend: Readline
#7 8.278 debconf: unable to initialize frontend: Readline
#7 8.278 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#7 8.278 debconf: falling back to frontend: Teletype
#7 8.302 Setting up libsqlite3-0:amd64 (3.27.2-3+deb10u2) ...
#7 8.312 Setting up libsasl2-modules:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 8.328 Setting up krb5-locales (1.17-3+deb10u6) ...
#7 8.339 Setting up libldap-common (2.4.47+dfsg-3+deb10u7) ...
#7 8.352 Setting up libkrb5support0:amd64 (1.17-3+deb10u6) ...
#7 8.362 Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 8.371 Setting up mariadb-common (1:10.3.39-0+deb10u2) ...
#7 8.385 update-alternatives: using /etc/mysql/mariadb.cnf to provide /etc/mysql/my.cnf (my.cnf) in auto mode
#7 8.390 Setting up libasr0 (1.0.2-2) ...
#7 8.401 Setting up ed (1.15-1) ...
#7 8.415 Setting up libmariadb3:amd64 (1:10.3.39-0+deb10u2) ...
#7 8.426 Setting up libk5crypto3:amd64 (1.17-3+deb10u6) ...
#7 8.436 Setting up libsasl2-2:amd64 (2.1.27+dfsg-1+deb10u2) ...
#7 8.445 Setting up libevent-2.1-6:amd64 (2.1.8-stable-4) ...
#7 8.455 Setting up opensmtpd (6.0.3p1-5+deb10u4) ...
#7 8.522 debconf: unable to initialize frontend: Dialog
#7 8.522 debconf: (TERM is not set, so the dialog frontend is not usable.)
#7 8.522 debconf: falling back to frontend: Readline
#7 8.522 debconf: unable to initialize frontend: Readline
#7 8.522 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#7 8.522 debconf: falling back to frontend: Teletype
#7 8.537 Configuring opensmtpd
#7 8.537 ---------------------
#7 8.537 
#7 8.537 The "mail name" is used as the domain name in the email address for messages
#7 8.537 that only have a "local part" (such as <jrandomuser> or <root>). It should be a
#7 8.537 fully qualified domain name (FQDN) that you are entitled to use.
#7 8.537 
#7 8.537 For instance, to allow the local host to generate mail with addresses such as
#7 8.537 <jrandomuser@example.org>, set the system mail name to "example.org".
#7 8.537 
#7 8.537 This mail name is used as the hostname in the SMTP greeting banner, and will
#7 8.537 also be used by other programs.
#7 8.537 
#7 8.537 System mail name: 
#7 8.537 Use of uninitialized value $_[1] in join or string at /usr/share/perl5/Debconf/DbDriver/Stack.pm line 111.
#7 8.539 Mail for the "postmaster", "root", and other system accounts should be
#7 8.539 redirected to the user account(s) of the actual system administrator(s).
#7 8.539 
#7 8.539 Please enter a comma-separated list of the usernames of the intended
#7 8.539 recipients. Leave this field blank to not create an alias for "root"; in this
#7 8.539 case, the root account will receive mail addressed to "postmaster" and other
#7 8.539 system accounts, assuming aliases for these accounts do not already exist.
#7 8.539 
#7 8.540 Root and postmaster mail recipient: 
#7 8.540 Use of uninitialized value $_[1] in join or string at /usr/share/perl5/Debconf/DbDriver/Stack.pm line 111.
#7 8.589 Adding group `opensmtpd' (GID 101) ...
#7 8.605 Done.
#7 8.641 Adding group `opensmtpq' (GID 102) ...
#7 8.653 Done.
#7 8.675 Adding system user `opensmtpd' (UID 101) ...
#7 8.675 Adding new user `opensmtpd' (UID 101) with group `opensmtpd' ...
#7 8.736 Not creating home directory `/var/lib/opensmtpd/empty'.
#7 8.758 Adding system user `opensmtpq' (UID 102) ...
#7 8.758 Adding new user `opensmtpq' (UID 102) with group `opensmtpq' ...
#7 8.801 Not creating home directory `/var/lib/opensmtpd/empty'.
#7 8.823 invoke-rc.d: could not determine current runlevel
#7 8.826 invoke-rc.d: policy-rc.d denied execution of start.
#7 8.919 Use of uninitialized value $val in substitution (s///) at /usr/share/perl5/Debconf/Format/822.pm line 83, <GEN6> line 9.
#7 8.919 Use of uninitialized value $val in concatenation (.) or string at /usr/share/perl5/Debconf/Format/822.pm line 84, <GEN6> line 9.
#7 8.919 Use of uninitialized value $val in substitution (s///) at /usr/share/perl5/Debconf/Format/822.pm line 83, <GEN6> line 9.
#7 8.919 Use of uninitialized value $val in concatenation (.) or string at /usr/share/perl5/Debconf/Format/822.pm line 84, <GEN6> line 9.
#7 8.934 Setting up libkrb5-3:amd64 (1.17-3+deb10u6) ...
#7 8.945 Setting up libhiredis0.14:amd64 (0.14.0-3) ...
#7 8.955 Setting up libldap-2.4-2:amd64 (2.4.47+dfsg-3+deb10u7) ...
#7 8.964 Setting up libgssapi-krb5-2:amd64 (1.17-3+deb10u6) ...
#7 8.977 Setting up libpq5:amd64 (11.22-0+deb10u2) ...
#7 8.988 Setting up opensmtpd-extras (5.7.1-4+b2) ...
#7 8.998 Processing triggers for libc-bin (2.28-10) ...
#7 DONE 9.1s

#8 [3/3] COPY opensmtpd.conf /etc/mail/smtpd.conf
#8 DONE 0.0s

#9 exporting to image
#9 exporting layers
#9 exporting layers 0.6s done
#9 exporting manifest sha256:8135fcd681c1e92a4f458a13fd2d8546acb555a71cac6b60f08a360140803512 0.0s done
#9 exporting config sha256:9bda06001a2d4da58d3819be0c27ef73e64b2c8003dc78c1edec4902beb42019 0.0s done
#9 exporting attestation manifest sha256:57d251d2885297138982459ff0df4c220ef37b2105d20deb08e51601d29e6e86 0.0s done
#9 exporting manifest list sha256:8928c487881faca59b1446e4597cb9fa2fef31bc46892df2db543ee5630ff7ef 0.0s done
#9 naming to docker.io/library/opensmtpd:latest-CVE-2020-7247 done
#9 unpacking to docker.io/library/opensmtpd:latest-CVE-2020-7247
#9 unpacking to docker.io/library/opensmtpd:latest-CVE-2020-7247 0.2s done
#9 DONE 0.9s

#10 resolving provenance for metadata file
#10 DONE 0.0s
 opensmtpd:latest-CVE-2020-7247  Built
 Network openai_smtp_net  Creating
 Network openai_smtp_net  Created
 Container openai-opensmtpd-1  Creating
 Container openai-opensmtpd-1  Created
 Container openai-opensmtpd-1  Starting
 Container openai-opensmtpd-1  Started
