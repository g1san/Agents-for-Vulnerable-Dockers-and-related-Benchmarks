FROM openjdk:11-jdk-slim

RUN apt-get update && apt-get install -y curl gnupg && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# Install Jenkins
RUN curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key -o /usr/share/keyrings/jenkins-keyring.asc && \
    echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/" > /etc/apt/sources.list.d/jenkins.list && \
    apt-get update && apt-get install -y jenkins && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# Switch to Jenkins user
USER jenkins

# Expose Jenkins ports
EXPOSE 8080 50000
