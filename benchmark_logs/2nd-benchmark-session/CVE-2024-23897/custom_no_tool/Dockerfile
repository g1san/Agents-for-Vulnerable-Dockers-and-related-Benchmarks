FROM jenkins/jenkins:2.441

USER root

RUN apt-get update && \
    apt-get install -y openjdk-17-jdk && \
    rm -rf /var/lib/apt/lists/*

USER jenkins

# Set up Jenkins environment
ENV JENKINS_OPTS "--httpPort=8080"

# Expose necessary ports
EXPOSE 8080 50000

# Start Jenkins
CMD ["/usr/bin/java", "-jar", "/usr/share/jenkins/jenkins.war"]
