FROM alpine:3.18
RUN apk add --no-cache opensmtpd && \
    mkdir -p /etc/opensmtpd && \
    echo "listen on *" > /etc/opensmtpd/opensmtpd.conf && \
    chmod 644 /etc/opensmtpd/opensmtpd.conf && \
    mkdir -p /var/spool/opensmtpd /var/run/opensmtpd && \
    chmod 755 /var/spool/opensmtpd /var/run/opensmtpd
EXPOSE 25
CMD ["/usr/sbin/opensmtpd", "-d", "-f", "/etc/opensmtpd/opensmtpd.conf"]