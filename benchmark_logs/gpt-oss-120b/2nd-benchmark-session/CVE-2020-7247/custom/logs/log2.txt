#1 [internal] load local bake definitions
#1 reading from stdin 1.29kB done
#1 DONE 0.0s

#2 [vulnerable internal] load build definition from Dockerfile
#2 transferring dockerfile: 153B done
#2 DONE 0.0s

#3 [smtp internal] load build definition from Dockerfile
#3 transferring dockerfile: 110B done
#3 DONE 0.0s

#4 [smtp internal] load metadata for docker.io/library/alpine:3.18
#4 ...

#5 [vulnerable internal] load metadata for docker.io/library/python:3.9-slim
#5 DONE 0.4s

#6 [vulnerable internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [vulnerable 1/4] FROM docker.io/library/python:3.9-slim@sha256:545badebace9a958b98d3e272f0f0d46c0a1a389ac77e24c33f2e7b548ce1b6b
#7 resolve docker.io/library/python:3.9-slim@sha256:545badebace9a958b98d3e272f0f0d46c0a1a389ac77e24c33f2e7b548ce1b6b 0.0s done
#7 DONE 0.0s

#8 [vulnerable internal] load build context
#8 transferring context: 494B done
#8 DONE 0.0s

#9 [vulnerable 2/4] WORKDIR /app
#9 CACHED

#10 [vulnerable 3/4] COPY app.py .
#10 DONE 0.0s

#11 [vulnerable 4/4] RUN pip install --no-cache-dir flask docker
#11 ...

#4 [smtp internal] load metadata for docker.io/library/alpine:3.18
#4 DONE 2.2s

#12 [smtp internal] load .dockerignore
#12 transferring context: 2B done
#12 DONE 0.0s

#13 [smtp 1/2] FROM docker.io/library/alpine:3.18@sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f
#13 resolve docker.io/library/alpine:3.18@sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f 0.0s done
#13 sha256:44cf07d57ee4424189f012074a59110ee2065adfdde9c7d9826bebdffce0a885 0B / 3.42MB 0.2s
#13 sha256:44cf07d57ee4424189f012074a59110ee2065adfdde9c7d9826bebdffce0a885 2.10MB / 3.42MB 0.6s
#13 sha256:44cf07d57ee4424189f012074a59110ee2065adfdde9c7d9826bebdffce0a885 3.42MB / 3.42MB 1.0s done
#13 extracting sha256:44cf07d57ee4424189f012074a59110ee2065adfdde9c7d9826bebdffce0a885 0.1s done
#13 DONE 1.2s

#11 [vulnerable 4/4] RUN pip install --no-cache-dir flask docker
#11 1.695 Collecting flask
#11 2.090   Downloading flask-3.1.2-py3-none-any.whl (103 kB)
#11 2.571      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.3/103.3 kB 441.2 kB/s eta 0:00:00
#11 2.630 Collecting docker
#11 2.651   Downloading docker-7.1.0-py3-none-any.whl (147 kB)
#11 3.425      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 147.8/147.8 kB 187.7 kB/s eta 0:00:00
#11 3.597 Collecting importlib-metadata>=3.6.0
#11 3.635   Downloading importlib_metadata-8.7.0-py3-none-any.whl (27 kB)
#11 3.752 Collecting blinker>=1.9.0
#11 3.781   Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
#11 3.850 Collecting click>=8.1.3
#11 3.873   Downloading click-8.1.8-py3-none-any.whl (98 kB)
#11 4.468      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.2/98.2 kB 165.9 kB/s eta 0:00:00
#11 4.560 Collecting werkzeug>=3.1.0
#11 4.581   Downloading werkzeug-3.1.3-py3-none-any.whl (224 kB)
#11 5.206      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 224.5/224.5 kB 395.6 kB/s eta 0:00:00
#11 5.243 Collecting itsdangerous>=2.2.0
#11 5.263   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
#11 5.573 Collecting jinja2>=3.1.2
#11 5.592   Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
#11 5.847      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 134.9/134.9 kB 561.4 kB/s eta 0:00:00
#11 6.284 Collecting markupsafe>=2.1.1
#11 6.313   Downloading markupsafe-3.0.3-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (20 kB)
#11 6.349 Collecting requests>=2.26.0
#11 6.368   Downloading requests-2.32.5-py3-none-any.whl (64 kB)
#11 6.499      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 64.7/64.7 kB 571.3 kB/s eta 0:00:00
#11 6.696 Collecting urllib3>=1.26.0
#11 6.719   Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
#11 7.006      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 129.8/129.8 kB 482.5 kB/s eta 0:00:00
#11 7.157 Collecting zipp>=3.20
#11 7.176   Downloading zipp-3.23.0-py3-none-any.whl (10 kB)
#11 7.534 Collecting certifi>=2017.4.17
#11 7.552   Downloading certifi-2025.10.5-py3-none-any.whl (163 kB)
#11 8.280      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 163.3/163.3 kB 235.2 kB/s eta 0:00:00
#11 8.356 Collecting idna<4,>=2.5
#11 8.374   Downloading idna-3.11-py3-none-any.whl (71 kB)
#11 8.559      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 71.0/71.0 kB 409.3 kB/s eta 0:00:00
#11 9.327 Collecting charset_normalizer<4,>=2
#11 9.350   Downloading charset_normalizer-3.4.4-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (153 kB)
#11 9.885      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 154.0/154.0 kB 292.3 kB/s eta 0:00:00
#11 10.11 Installing collected packages: zipp, urllib3, markupsafe, itsdangerous, idna, click, charset_normalizer, certifi, blinker, werkzeug, requests, jinja2, importlib-metadata, flask, docker
#11 10.86 Successfully installed blinker-1.9.0 certifi-2025.10.5 charset_normalizer-3.4.4 click-8.1.8 docker-7.1.0 flask-3.1.2 idna-3.11 importlib-metadata-8.7.0 itsdangerous-2.2.0 jinja2-3.1.6 markupsafe-3.0.3 requests-2.32.5 urllib3-2.5.0 werkzeug-3.1.3 zipp-3.23.0
#11 10.86 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#11 11.01 
#11 11.01 [notice] A new release of pip is available: 23.0.1 -> 25.2
#11 11.01 [notice] To update, run: pip install --upgrade pip
#11 DONE 11.2s

#14 [smtp 2/2] RUN apk add --no-cache opensmtpd
#14 0.174 fetch https://dl-cdn.alpinelinux.org/alpine/v3.18/main/x86_64/APKINDEX.tar.gz
#14 0.494 fetch https://dl-cdn.alpinelinux.org/alpine/v3.18/community/x86_64/APKINDEX.tar.gz
#14 5.174 (1/10) Installing ca-certificates (20241121-r1)
#14 6.234 (2/10) Installing libressl3.7-libcrypto (3.7.3-r0)
#14 ...

#15 [vulnerable] exporting to image
#15 exporting layers
#15 exporting layers 0.7s done
#15 exporting manifest sha256:09af9839354c6eb6738c8619068e3aa8f8b75e4f014a8721b1da82a391886e10 0.0s done
#15 exporting config sha256:0cc1b3f579a5c279aa2e43c5ca88e646f94cce49aa9f9c8926ce6c2a5282dda0 0.0s done
#15 exporting attestation manifest sha256:d7f3032f402382d217bf14f243fd4d1911fb628a683458404f91f3463386f116 0.0s done
#15 exporting manifest list sha256:c2a376ff59e7151d06edd76bed56e58e1c7b7c0d10879bc6e50d063391f4fb1c 0.0s done
#15 naming to docker.io/library/custom-vulnerable:latest done
#15 unpacking to docker.io/library/custom-vulnerable:latest
#15 unpacking to docker.io/library/custom-vulnerable:latest 0.3s done
#15 DONE 1.1s

#16 [vulnerable] resolving provenance for metadata file
#16 DONE 0.0s

#14 [smtp 2/2] RUN apk add --no-cache opensmtpd
#14 9.471 (3/10) Installing libressl3.7-libssl (3.7.3-r0)
#14 9.770 (4/10) Installing libmd (1.0.4-r2)
#14 9.827 (5/10) Installing libbsd (0.11.7-r1)
#14 9.909 (6/10) Installing libasr (1.0.4-r4)
#14 9.995 (7/10) Installing db (5.3.28-r4)
#14 12.12 (8/10) Installing libevent (2.1.12-r6)
#14 12.63 (9/10) Installing musl-fts (1.2.7-r5)
#14 12.65 (10/10) Installing opensmtpd (6.8.0p2-r7)
#14 13.29 Executing opensmtpd-6.8.0p2-r7.pre-install
#14 13.92 Executing busybox-1.36.1-r7.trigger
#14 13.93 Executing ca-certificates-20241121-r1.trigger
#14 13.97 OK: 13 MiB in 25 packages
#14 DONE 14.1s

#17 [smtp] exporting to image
#17 exporting layers
#17 exporting layers 0.3s done
#17 exporting manifest sha256:71c4e11be14d8c327099dd2004f9fc05e596adfe0e40adf445eced0757815958 0.0s done
#17 exporting config sha256:8688d5522ddc0d2052e7088eb094b0dab35a768d042cff57c4b5a1628893c62a 0.0s done
#17 exporting attestation manifest sha256:761c3ad6ab5271e2366530f431fd2a490e5ac7690fcdf056c8a3494a1ca8e4e8 0.0s done
#17 exporting manifest list sha256:20d6fdaeec8f0941db62dc863f428fce3597902d7ff0256c2f4d77b3fedb5ed2 0.0s done
#17 naming to docker.io/library/custom-smtp:latest done
#17 unpacking to docker.io/library/custom-smtp:latest 0.1s done
#17 DONE 0.5s

#18 [smtp] resolving provenance for metadata file
#18 DONE 0.0s
 custom-smtp  Built
 custom-vulnerable  Built
 Network custom_default  Creating
 Network custom_default  Created
 Container custom-smtp-1  Creating
 Container custom-smtp-1  Created
 Container custom-vulnerable-1  Creating
 Container custom-vulnerable-1  Created
 Container custom-smtp-1  Starting
Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: exec: "opensmtpd": executable file not found in $PATH: unknown
