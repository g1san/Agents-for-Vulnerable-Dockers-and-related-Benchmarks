#1 [internal] load local bake definitions
#1 reading from stdin 1.29kB done
#1 DONE 0.0s

#2 [vulnerable internal] load build definition from Dockerfile
#2 transferring dockerfile: 146B done
#2 DONE 0.0s

#3 [smtp internal] load build definition from Dockerfile
#3 transferring dockerfile: 313B done
#3 DONE 0.0s

#4 [smtp internal] load metadata for docker.io/library/alpine:3.18
#4 DONE 0.5s

#5 [vulnerable internal] load metadata for docker.io/library/python:3.9-slim
#5 ...

#6 [smtp internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [smtp 1/2] FROM docker.io/library/alpine:3.18@sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f
#7 resolve docker.io/library/alpine:3.18@sha256:de0eb0b3f2a47ba1eb89389859a9bd88b28e82f5826b6969ad604979713c2d4f 0.0s done
#7 CACHED

#8 [smtp 2/2] RUN apk add --no-cache opensmtpd &&     mkdir -p /etc/opensmtpd &&     echo "listen on *" > /etc/opensmtpd/opensmtpd.conf &&     chmod 644 /etc/opensmtpd/opensmtpd.conf
#8 0.178 fetch https://dl-cdn.alpinelinux.org/alpine/v3.18/main/x86_64/APKINDEX.tar.gz
#8 0.416 fetch https://dl-cdn.alpinelinux.org/alpine/v3.18/community/x86_64/APKINDEX.tar.gz
#8 ...

#5 [vulnerable internal] load metadata for docker.io/library/python:3.9-slim
#5 DONE 1.0s

#9 [vulnerable internal] load .dockerignore
#9 transferring context: 2B done
#9 DONE 0.0s

#10 [vulnerable 1/4] FROM docker.io/library/python:3.9-slim@sha256:545badebace9a958b98d3e272f0f0d46c0a1a389ac77e24c33f2e7b548ce1b6b
#10 resolve docker.io/library/python:3.9-slim@sha256:545badebace9a958b98d3e272f0f0d46c0a1a389ac77e24c33f2e7b548ce1b6b 0.0s done
#10 DONE 0.0s

#11 [vulnerable internal] load build context
#11 transferring context: 229B done
#11 DONE 0.0s

#12 [vulnerable 2/4] WORKDIR /app
#12 CACHED

#13 [vulnerable 3/4] COPY app.py .
#13 DONE 0.0s

#14 [vulnerable 4/4] RUN pip install --no-cache-dir flask
#14 2.138 Collecting flask
#14 2.200   Downloading flask-3.1.2-py3-none-any.whl (103 kB)
#14 2.259      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.3/103.3 kB 5.0 MB/s eta 0:00:00
#14 2.303 Collecting blinker>=1.9.0
#14 2.359   Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
#14 2.404 Collecting jinja2>=3.1.2
#14 2.423   Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
#14 2.926      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 134.9/134.9 kB 263.6 kB/s eta 0:00:00
#14 2.960 Collecting itsdangerous>=2.2.0
#14 2.979   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
#14 3.230 Collecting markupsafe>=2.1.1
#14 3.250   Downloading markupsafe-3.0.3-cp39-cp39-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (20 kB)
#14 3.380 Collecting werkzeug>=3.1.0
#14 3.400   Downloading werkzeug-3.1.3-py3-none-any.whl (224 kB)
#14 6.144      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 224.5/224.5 kB 87.8 kB/s eta 0:00:00
#14 6.309 Collecting importlib-metadata>=3.6.0
#14 6.333   Downloading importlib_metadata-8.7.0-py3-none-any.whl (27 kB)
#14 6.709 Collecting click>=8.1.3
#14 6.730   Downloading click-8.1.8-py3-none-any.whl (98 kB)
#14 7.239      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.2/98.2 kB 196.8 kB/s eta 0:00:00
#14 7.341 Collecting zipp>=3.20
#14 7.410   Downloading zipp-3.23.0-py3-none-any.whl (10 kB)
#14 7.566 Installing collected packages: zipp, markupsafe, itsdangerous, click, blinker, werkzeug, jinja2, importlib-metadata, flask
#14 7.831 Successfully installed blinker-1.9.0 click-8.1.8 flask-3.1.2 importlib-metadata-8.7.0 itsdangerous-2.2.0 jinja2-3.1.6 markupsafe-3.0.3 werkzeug-3.1.3 zipp-3.23.0
#14 7.832 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#14 8.016 
#14 8.016 [notice] A new release of pip is available: 23.0.1 -> 25.2
#14 8.016 [notice] To update, run: pip install --upgrade pip
#14 DONE 8.1s

#8 [smtp 2/2] RUN apk add --no-cache opensmtpd &&     mkdir -p /etc/opensmtpd &&     echo "listen on *" > /etc/opensmtpd/opensmtpd.conf &&     chmod 644 /etc/opensmtpd/opensmtpd.conf
#8 2.173 (1/10) Installing ca-certificates (20241121-r1)
#8 3.323 (2/10) Installing libressl3.7-libcrypto (3.7.3-r0)
#8 8.043 (3/10) Installing libressl3.7-libssl (3.7.3-r0)
#8 ...

#15 [vulnerable] exporting to image
#15 exporting layers
#15 exporting layers 0.6s done
#15 exporting manifest sha256:f8b870729249c03f7e36a05626e52f0f0cacaec1d3f17c29359faf5e2e9eac94 0.0s done
#15 exporting config sha256:64f533e3e8dab7e4ebda0be0299453fb246616c163ea18b3a7aecf240f31e3f0 0.0s done
#15 exporting attestation manifest sha256:cc81ea9ad35607002502d58415e649dcd21cc48a361b24f71628e48bb48d46f1 0.0s done
#15 exporting manifest list sha256:64ac7df5ea310ef9ccbed7efca8b501e03176cd4d4ddc7c172959f88e6ff36a8 0.0s done
#15 naming to docker.io/library/custom-vulnerable:latest done
#15 unpacking to docker.io/library/custom-vulnerable:latest
#15 unpacking to docker.io/library/custom-vulnerable:latest 0.3s done
#15 DONE 0.9s

#16 [vulnerable] resolving provenance for metadata file
#16 DONE 0.0s

#8 [smtp 2/2] RUN apk add --no-cache opensmtpd &&     mkdir -p /etc/opensmtpd &&     echo "listen on *" > /etc/opensmtpd/opensmtpd.conf &&     chmod 644 /etc/opensmtpd/opensmtpd.conf
#8 8.910 (4/10) Installing libmd (1.0.4-r2)
#8 9.016 (5/10) Installing libbsd (0.11.7-r1)
#8 9.247 (6/10) Installing libasr (1.0.4-r4)
#8 9.341 (7/10) Installing db (5.3.28-r4)
#8 11.45 (8/10) Installing libevent (2.1.12-r6)
#8 12.12 (9/10) Installing musl-fts (1.2.7-r5)
#8 12.14 (10/10) Installing opensmtpd (6.8.0p2-r7)
#8 12.31 Executing opensmtpd-6.8.0p2-r7.pre-install
#8 12.56 Executing busybox-1.36.1-r7.trigger
#8 12.56 Executing ca-certificates-20241121-r1.trigger
#8 12.61 OK: 13 MiB in 25 packages
#8 DONE 12.8s

#17 [smtp] exporting to image
#17 exporting layers 0.3s done
#17 exporting manifest sha256:df86fb1d6b39468a15aaf36ff82a69be58b4282e9a4c13205f2789225ca4025f 0.0s done
#17 exporting config sha256:db6941883b8dedadb0916e09016fb3a1f3edbdbacb8aac9c7101939faecebed9 0.0s done
#17 exporting attestation manifest sha256:031cc30ae4c53e6be3554bb53e49bd098e8459d8ecd2e7da2b8c33edfa6f047e 0.0s done
#17 exporting manifest list sha256:dc5f05dcc1cec20b8c952e300139862d8114fa05a97b5ae80063a2782018d4a8 0.0s done
#17 naming to docker.io/library/custom-smtp:latest done
#17 unpacking to docker.io/library/custom-smtp:latest 0.1s done
#17 DONE 0.5s

#18 [smtp] resolving provenance for metadata file
#18 DONE 0.0s
 custom-smtp  Built
 custom-vulnerable  Built
 Network custom_default  Creating
 Network custom_default  Created
 Container custom-smtp-1  Creating
 Container custom-smtp-1  Created
 Container custom-vulnerable-1  Creating
 Container custom-vulnerable-1  Created
 Container custom-smtp-1  Starting
Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: exec: "/usr/sbin/opensmtpd": stat /usr/sbin/opensmtpd: no such file or directory: unknown
