import os
import time
import subprocess

def docker_ps():
    try:
        result = subprocess.check_output(["docker", "ps"], stderr=subprocess.STDOUT)
        print(result.decode())
        return True
    except Exception as e:
        print(f"Docker command failed: {e}")
        return False

max_wait = 60
start = time.time()
while time.time() - start < max_wait:
    if docker_ps():
        break
    time.sleep(2)
else:
    print("Failed to communicate with Docker daemon within timeout.")
