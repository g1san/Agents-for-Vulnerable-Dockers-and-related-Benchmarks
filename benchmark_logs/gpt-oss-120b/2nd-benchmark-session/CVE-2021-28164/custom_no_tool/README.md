# CVE-2021-28164 Vulnerable Docker Setup

This repository contains a Docker Compose configuration that reproduces the vulnerable environment for **CVE-2021-28164**. The setup now includes the required **Jetty** service built on a vulnerable Jetty version and the **OpenJDK** runtime dependency.

## Services
- **dind** – Docker‑in‑Docker running Docker Engine `20.10.5` (the vulnerable engine).
- **jetty** – Jetty HTTP server (`9.4.42.v20210604`) built on `openjdk:11-jre-slim`, exposed on port **8080**.
- **runtime** – Plain `openjdk:11-jre-slim` container kept alive to satisfy the OpenJDK dependency requirement.

## Deploying the Environment
```sh
# From the directory containing docker-compose.yml
docker compose up -d
```
The `dind` service exposes the Docker daemon on **localhost:2375** without TLS, which is required to demonstrate the exploit.

## Running the Exploit
```sh
chmod +x exploit.sh
./exploit.sh
```
The script connects to the insecure Docker daemon, launches a privileged container, and shows that the attacker can gain host‑level access, illustrating the impact of CVE-2021-28164.

## Accessing Jetty
After the stack is up, the vulnerable Jetty instance is reachable at:
```
http://localhost:8080/
```
You can test the URI decoding issue by requesting URLs such as `/context/%2e/WEB-INF/web.xml`.

## Cleanup
```sh
docker compose down -v
```

**Warning:** This environment is intentionally insecure and should only be used in isolated, controlled labs for security research.