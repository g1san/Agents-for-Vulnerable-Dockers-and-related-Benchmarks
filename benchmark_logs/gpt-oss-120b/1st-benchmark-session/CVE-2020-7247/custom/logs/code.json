{
    "files": [
        {
            "location": "./../../dockers/CVE-2020-7247/custom/docker-compose.yml",
            "content": "version: \"3.8\"\n\nservices:\n  opensmtpd:\n    build: ./opensmtpd\n    ports:\n      - \"25:25\"\n    volumes:\n      - ./smtp.conf:/etc/opensmtpd/opensmtpd.conf:ro\n    restart: unless-stopped\n\n  webapp:\n    build: ./webapp\n    ports:\n      - \"8080:80\"\n    depends_on:\n      - db\n      - opensmtpd\n    restart: unless-stopped\n\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: example\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: tester\n      MYSQL_PASSWORD: testpass\n    volumes:\n      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql:ro\n    tmpfs:\n      - /var/lib/mysql\n    ports:\n      - \"3306:3306\"\n    restart: unless-stopped"
        },
        {
            "location": "./../../dockers/CVE-2020-7247/custom/opensmtpd/Dockerfile",
            "content": "FROM alpine:3.14\nRUN apk update && apk add --no-cache opensmtpd\nEXPOSE 25\nCMD [\"smtpd\", \"-d\", \"-f\", \"/etc/opensmtpd/opensmtpd.conf\"]"
        },
        {
            "location": "./../../dockers/CVE-2020-7247/custom/webapp/Dockerfile",
            "content": "FROM php:7.2-apache\nCOPY src/ /var/www/html/\nRUN docker-php-ext-install mysqli"
        },
        {
            "location": "./../../dockers/CVE-2020-7247/custom/webapp/src/index.php",
            "content": "<?php\n$mysqli = new mysqli('db', 'tester', 'testpass', 'testdb');\nif ($mysqli->connect_error) {\n    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);\n}\n$result = $mysqli->query('SELECT * FROM users');\nwhile ($row = $result->fetch_assoc()) {\n    echo '<p>' . htmlspecialchars($row['id']) . ': ' . htmlspecialchars($row['name']) . '</p>';\n}\n?>"
        },
        {
            "location": "./../../dockers/CVE-2020-7247/custom/db/init.sql",
            "content": "CREATE TABLE IF NOT EXISTS users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL\n);\nINSERT INTO users (name) VALUES ('Alice'), ('Bob'), ('Charlie');"
        },
        {
            "location": "./../../dockers/CVE-2020-7247/custom/smtp.conf",
            "content": "# Minimal OpenSMTPD configuration\nlisten on 0.0.0.0\naccept"
        }
    ],
    "directory_tree": "CVE-2020-7247/"
}