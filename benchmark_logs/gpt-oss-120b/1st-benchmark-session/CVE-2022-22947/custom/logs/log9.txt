#1 [internal] load local bake definitions
#1 reading from stdin 1.32kB done
#1 DONE 0.0s

#2 [gateway internal] load build definition from Dockerfile
#2 transferring dockerfile: 30B
#2 transferring dockerfile: 387B done
#2 DONE 0.0s

#3 [downstream internal] load build definition from Dockerfile
#3 transferring dockerfile: 346B done
#3 DONE 0.0s

#4 [downstream internal] load metadata for docker.io/library/maven:3.9.6-amazoncorretto-17
#4 DONE 1.1s

#5 [gateway internal] load metadata for docker.io/library/amazoncorretto:17-alpine
#5 DONE 1.2s

#6 [gateway internal] load .dockerignore
#6 transferring context: 81B done
#6 DONE 0.0s

#7 [downstream internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [gateway internal] load build context
#8 DONE 0.0s

#9 [downstream internal] load build context
#9 DONE 0.0s

#10 [gateway runtime 1/4] FROM docker.io/library/amazoncorretto:17-alpine@sha256:b4e5ae2a0de33454f70392d7dc0cf765cf07d9b5026cdc30f66195f5f3a3248c
#10 resolve docker.io/library/amazoncorretto:17-alpine@sha256:b4e5ae2a0de33454f70392d7dc0cf765cf07d9b5026cdc30f66195f5f3a3248c 0.0s done
#10 resolve docker.io/library/amazoncorretto:17-alpine@sha256:b4e5ae2a0de33454f70392d7dc0cf765cf07d9b5026cdc30f66195f5f3a3248c 0.0s done
#10 DONE 0.0s

#11 [gateway build 1/4] FROM docker.io/library/maven:3.9.6-amazoncorretto-17@sha256:153db9abd054e21cbf5bb0c192bf1aa5c9e592114aa9dd336053b4d1f3bec818
#11 resolve docker.io/library/maven:3.9.6-amazoncorretto-17@sha256:153db9abd054e21cbf5bb0c192bf1aa5c9e592114aa9dd336053b4d1f3bec818 0.0s done
#11 DONE 0.0s

#9 [downstream internal] load build context
#9 transferring context: 2.95kB done
#9 DONE 0.0s

#8 [gateway internal] load build context
#8 transferring context: 3.60kB done
#8 DONE 0.0s

#12 [downstream build 3/4] COPY . /app
#12 CACHED

#13 [downstream build 4/4] RUN mvn -B -DskipTests package
#13 CACHED

#14 [downstream stage-1 4/4] COPY --from=build /app/target/downstream-0.0.1-SNAPSHOT.jar app.jar
#14 CACHED

#15 [gateway build 4/4] RUN mvn -B -DskipTests package
#15 CACHED

#16 [gateway build 3/4] COPY . /app
#16 CACHED

#17 [gateway build 2/4] WORKDIR /app
#17 CACHED

#18 [gateway runtime 2/4] WORKDIR /app
#18 CACHED

#19 [gateway runtime 3/4] RUN apk add --no-cache curl
#19 CACHED

#20 [gateway runtime 4/4] COPY --from=build /app/target/gateway-0.0.1-SNAPSHOT.jar app.jar
#20 CACHED

#21 [downstream] exporting to image
#21 exporting layers done
#21 exporting manifest sha256:b29e8637f8799a4ada531c967edd64322912efefa0f1f363e59aaecbbf65819a done
#21 exporting config sha256:7db9a1194a88124d0dfee7843d07d09d6a2dd3c3255807ada32be86be94dd6ce done
#21 exporting attestation manifest sha256:fb695c169b76f9d8eec0dbffcf16c68915b9f0c0a4b28f382da0a299d4243cf3 0.0s done
#21 exporting manifest list sha256:efadce8ba924b985379246d7a63e33e46c0ebdeaa09297429f5bf014c09c2141 0.0s done
#21 naming to docker.io/library/custom-downstream:latest
#21 naming to docker.io/library/custom-downstream:latest done
#21 unpacking to docker.io/library/custom-downstream:latest done
#21 DONE 0.1s

#22 [gateway] exporting to image
#22 exporting layers done
#22 exporting manifest sha256:fd850a790efdf6b4cd6dfea242c4a551a814ba5377f58b4d9ff55336a64ea461 done
#22 exporting config sha256:21cde80247af50e213086b5a611bc45cb14f108951cb3c880f7988c120d3317a done
#22 exporting attestation manifest sha256:7d43016d1f9c7382d5d15d83ae327fdce4abb13c6c45bdf08c7a6de20de77978 0.0s done
#22 exporting manifest list sha256:f101e9b55e8a4283eb4c9b70b7152676c5a6503ea8673007590cbb4954f8d73f 0.0s done
#22 naming to docker.io/library/custom-gateway:latest done
#22 unpacking to docker.io/library/custom-gateway:latest done
#22 DONE 0.1s

#23 [gateway] resolving provenance for metadata file
#23 DONE 0.0s

#24 [downstream] resolving provenance for metadata file
#24 DONE 0.0s
 custom-downstream  Built
 custom-gateway  Built
 Network custom_default  Creating
 Network custom_default  Created
 Container downstream  Creating
 Container downstream  Created
 Container gateway  Creating
 Container gateway  Created
 Container downstream  Starting
 Container downstream  Started
 Container downstream  Waiting
 Container downstream  Healthy
 Container gateway  Starting
Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint gateway (ce2688390eebdfb4cb6c8f3367ecb7c2ecee1cab8913464298f5981c4ef23495): Bind for 0.0.0.0:8080 failed: port is already allocated
