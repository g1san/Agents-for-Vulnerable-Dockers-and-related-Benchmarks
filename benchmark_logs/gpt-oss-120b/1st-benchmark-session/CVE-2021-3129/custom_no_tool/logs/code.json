{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/docker-compose.yml",
            "content": "version: '3.8'\nservices:\n  laravel:\n    build: ./laravel\n    container_name: laravel_app\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      - db\n    environment:\n      - APP_DEBUG=true\n      - COMPOSER_ALLOW_SUPERUSER=1\n    # No host volume is mounted to keep the project directory empty for composer\n  db:\n    image: mysql:5.7\n    container_name: db\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpassword\n      MYSQL_DATABASE: testdb\n      MYSQL_USER: testuser\n      MYSQL_PASSWORD: testpass\n    ports:\n      - \"3306:3306\"\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./init.sql:/docker-entrypoint-initdb.d/init.sql\nvolumes:\n  db_data:"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/init.sql",
            "content": "CREATE TABLE users (id INT AUTO_INCREMENT PRIMARY KEY, username VARCHAR(50), password VARCHAR(255));\nINSERT INTO users (username, password) VALUES ('alice','password1'),('bob','password2');"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/laravel/Dockerfile",
            "content": "FROM php:8.1-apache\n\n# Install system dependencies required for Composer and Laravel\nRUN apt-get update && apt-get install -y \\\n        git \\\n        unzip \\\n        libzip-dev \\\n    && docker-php-ext-install zip\n\n# Install Composer globally\nRUN php -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\" \\\n    && php composer-setup.php --install-dir=/usr/local/bin --filename=composer \\\n    && rm composer-setup.php\n\n# Set working directory\nWORKDIR /var/www/html\n\nENV COMPOSER_ALLOW_SUPERUSER=1\nENV APP_DEBUG=true\n\n# Create the vulnerable Laravel project (exact version 8.4.0) on container start\n# No files are copied into the workdir before project creation, ensuring the directory is empty.\nCMD [\"sh\", \"-c\", \"composer create-project --prefer-dist laravel/laravel=8.4.0 . && apache2-foreground\"]"
        }
    ],
    "directory_tree": "CVE-2021-3129/custom_no_tool"
}