FROM ubuntu:20.04

RUN apt-get update && \
    apt-get install -y python3-pip wget curl gnupg && \
    echo 'deb http://repo.saltstack.com/py3/ubuntu/20.04/amd64/latest focal main' > /etc/apt/sources.list.d/saltstack.list && \
    wget -O - https://repo.saltstack.com/py3/ubuntu/20.04/amd64/latest/SALTSTACK-GPG-KEY.pub | apt-key add - && \
    apt-get update && \
    apt-get install -y salt-master=3000.1

COPY requirements.txt /requirements.txt
RUN pip3 install -r /requirements.txt

COPY salt-master.conf /etc/salt/master
