#1 [internal] load local bake definitions
#1 reading from stdin 679B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 226B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/couchdb:3.2.1
#3 DONE 0.0s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 297B done
#5 DONE 0.0s

#6 [1/3] FROM docker.io/library/couchdb:3.2.1@sha256:37a7a9aab050c8c376b012d9c52da58e2c94d221b0eb5567edb88d8ceca096ee
#6 resolve docker.io/library/couchdb:3.2.1@sha256:37a7a9aab050c8c376b012d9c52da58e2c94d221b0eb5567edb88d8ceca096ee 0.0s done
#6 DONE 0.1s

#7 [2/3] COPY couchdb-entrypoint.sh /usr/local/bin/couchdb-entrypoint.sh
#7 DONE 0.0s

#8 [3/3] RUN chmod +x /usr/local/bin/couchdb-entrypoint.sh
#8 DONE 0.2s

#9 exporting to image
#9 exporting layers 0.1s done
#9 exporting manifest sha256:361f9f1625c6b5107191cf1747f1a38239d7ab793577c140d5d67b3109eb6daf 0.0s done
#9 exporting config sha256:48f1de1a8a4bf740a5dd5c1f0ec4a4c46deb704223c05542481bde3986ec443d 0.0s done
#9 exporting attestation manifest sha256:349070f96df2a1069bba9fad6325c7beaa337cbc7f517ac964637bffe3ef875a 0.0s done
#9 exporting manifest list sha256:0befa925a9fb363e083ce3fe4af93abd4b1f983c38c6a5e8a9f7c5ab3ec97b44 0.0s done
#9 naming to docker.io/library/openai-couchdb:latest done
#9 unpacking to docker.io/library/openai-couchdb:latest 0.0s done
#9 DONE 0.3s

#10 resolving provenance for metadata file
#10 DONE 0.0s
 openai-couchdb  Built
 Network openai_default  Creating
 Network openai_default  Created
 Volume openai_couchdb_data  Creating
 Volume openai_couchdb_data  Created
 Container openai-nginx-1  Creating
 Container openai-couchdb-1  Creating
 Container openai-nginx-1  Created
 Container openai-couchdb-1  Created
 Container openai-couchdb-1  Starting
 Container openai-nginx-1  Starting
 Container openai-couchdb-1  Started
 Container openai-nginx-1  Started


sudo docker logs be5ce919ef5cf503b0f160b55c2e4967d1ee34e7a1e8c9ef5876b9db286f809e --details
STDOUT:  {"ok":true}

STDERR:  [info] 2025-09-28T10:15:36.738248Z nonode@nohost <0.250.0> -------- Preflight check: Asserting Admin Account
 
 [info] 2025-09-28T10:15:36.740181Z nonode@nohost <0.250.0> -------- Apache CouchDB 3.2.1 is starting.
 
 [info] 2025-09-28T10:15:36.740285Z nonode@nohost <0.251.0> -------- Starting couch_sup
 [notice] 2025-09-28T10:15:36.749033Z nonode@nohost <0.104.0> -------- config: [admins] admin set to '****' for reason nil
 [info] 2025-09-28T10:15:36.789153Z nonode@nohost <0.250.0> -------- Apache CouchDB has started. Time to relax.
 
 [notice] 2025-09-28T10:15:36.795247Z nonode@nohost <0.304.0> -------- rexi_server : started servers
 [notice] 2025-09-28T10:15:36.796739Z nonode@nohost <0.308.0> -------- rexi_buffer : started servers
 [warning] 2025-09-28T10:15:36.809227Z nonode@nohost <0.316.0> -------- creating missing database: _nodes
 [info] 2025-09-28T10:15:36.809341Z nonode@nohost <0.317.0> -------- open_result error {not_found,no_db_file} for _nodes
 [warning] 2025-09-28T10:15:36.855831Z nonode@nohost <0.332.0> -------- creating missing database: _dbs
 [warning] 2025-09-28T10:15:36.855833Z nonode@nohost <0.331.0> -------- creating missing database: _dbs
 [info] 2025-09-28T10:15:36.855870Z nonode@nohost <0.334.0> -------- open_result error {not_found,no_db_file} for _dbs
 [notice] 2025-09-28T10:15:36.869932Z nonode@nohost <0.346.0> -------- mem3_reshard_dbdoc start init()
 [notice] 2025-09-28T10:15:36.872932Z nonode@nohost <0.348.0> -------- mem3_reshard start init()
 [notice] 2025-09-28T10:15:36.873006Z nonode@nohost <0.349.0> -------- mem3_reshard db monitor <0.349.0> starting
 [notice] 2025-09-28T10:15:36.875835Z nonode@nohost <0.348.0> -------- mem3_reshard starting reloading jobs
 [notice] 2025-09-28T10:15:36.875962Z nonode@nohost <0.348.0> -------- mem3_reshard finished reloading jobs
 [info] 2025-09-28T10:15:36.892706Z nonode@nohost <0.355.0> -------- Apache CouchDB has started. Time to relax.
 
 [info] 2025-09-28T10:15:36.892786Z nonode@nohost <0.355.0> -------- Apache CouchDB has started on http://any:5984/
 [notice] 2025-09-28T10:15:36.901089Z nonode@nohost <0.378.0> -------- chttpd_auth_cache changes listener died because the _users database does not exist. Create the database to silence this notice.
 [error] 2025-09-28T10:15:36.901303Z nonode@nohost emulator -------- Error in process <0.379.0> with exit value:
 {database_does_not_exist,[{mem3_shards,load_shards_from_db,"_users",[{file,"src/mem3_shards.erl"},{line,400}]},{mem3_shards,load_shards_from_disk,1,[{file,"src/mem3_shards.erl"},{line,375}]},{mem3_shards,load_shards_from_disk,2,[{file,"src/mem3_shards.erl"},{line,404}]},{mem3_shards,for_docid,3,[{file,"src/mem3_shards.erl"},{line,97}]},{fabric_doc_open,go,3,[{file,"src/fabric_doc_open.erl"},{line,39}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,"src/chttpd_auth_cache.erl"},{line,198}]},{chttpd_auth_cache,listen_for_changes,1,[{file,"src/chttpd_auth_cache.erl"},{line,145}]}]}
 
 [error] 2025-09-28T10:15:36.901416Z nonode@nohost emulator -------- Error in process <0.379.0> with exit value:
 {database_does_not_exist,[{mem3_shards,load_shards_from_db,"_users",[{file,"src/mem3_shards.erl"},{line,400}]},{mem3_shards,load_shards_from_disk,1,[{file,"src/mem3_shards.erl"},{line,375}]},{mem3_shards,load_shards_from_disk,2,[{file,"src/mem3_shards.erl"},{line,404}]},{mem3_shards,for_docid,3,[{file,"src/mem3_shards.erl"},{line,97}]},{fabric_doc_open,go,3,[{file,"src/fabric_doc_open.erl"},{line,39}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,"src/chttpd_auth_cache.erl"},{line,198}]},{chttpd_auth_cache,listen_for_changes,1,[{file,"src/chttpd_auth_cache.erl"},{line,145}]}]}
 
 [notice] 2025-09-28T10:15:36.926360Z nonode@nohost <0.426.0> -------- Missing system database _users
 [notice] 2025-09-28T10:15:41.905921Z nonode@nohost <0.378.0> -------- chttpd_auth_cache changes listener died because the _users database does not exist. Create the database to silence this notice.
 [error] 2025-09-28T10:15:41.906443Z nonode@nohost emulator -------- Error in process <0.528.0> with exit value:
 {database_does_not_exist,[{mem3_shards,load_shards_from_db,"_users",[{file,"src/mem3_shards.erl"},{line,400}]},{mem3_shards,load_shards_from_disk,1,[{file,"src/mem3_shards.erl"},{line,375}]},{mem3_shards,load_shards_from_disk,2,[{file,"src/mem3_shards.erl"},{line,404}]},{mem3_shards,for_docid,3,[{file,"src/mem3_shards.erl"},{line,97}]},{fabric_doc_open,go,3,[{file,"src/fabric_doc_open.erl"},{line,39}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,"src/chttpd_auth_cache.erl"},{line,198}]},{chttpd_auth_cache,listen_for_changes,1,[{file,"src/chttpd_auth_cache.erl"},{line,145}]}]}
 
 [error] 2025-09-28T10:15:41.906620Z nonode@nohost emulator -------- Error in process <0.528.0> with exit value:
 {database_does_not_exist,[{mem3_shards,load_shards_from_db,"_users",[{file,"src/mem3_shards.erl"},{line,400}]},{mem3_shards,load_shards_from_disk,1,[{file,"src/mem3_shards.erl"},{line,375}]},{mem3_shards,load_shards_from_disk,2,[{file,"src/mem3_shards.erl"},{line,404}]},{mem3_shards,for_docid,3,[{file,"src/mem3_shards.erl"},{line,97}]},{fabric_doc_open,go,3,[{file,"src/fabric_doc_open.erl"},{line,39}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,"src/chttpd_auth_cache.erl"},{line,198}]},{chttpd_auth_cache,listen_for_changes,1,[{file,"src/chttpd_auth_cache.erl"},{line,145}]}]}
 
 [notice] 2025-09-28T10:15:41.910590Z nonode@nohost <0.400.0> -------- couch_replicator_clustering : cluster stable
 [notice] 2025-09-28T10:15:41.913052Z nonode@nohost <0.410.0> -------- Started replicator db changes listener <0.529.0>
 [info] 2025-09-28T10:15:41.913717Z nonode@nohost <0.531.0> -------- open_result error {not_found,no_db_file} for _replicator
   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                  Dload  Upload   Total   Spent    Left  Speed
 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[error] 2025-09-28T10:15:46.204874Z nonode@nohost <0.551.0> dbfaa22e4e Request to create N=3 DB but only 1 node(s)
 
100    12  100    12    0     0    210      0 --:--:-- --:--:-- --:--:--   210
 [notice] 2025-09-28T10:15:46.242261Z nonode@nohost <0.551.0> dbfaa22e4e localhost:5984 127.0.0.1 admin PUT /_users 201 ok 52




sudo docker logs 8af78fb2ea4e9e371ffcc9d03e2b7ddcfd74d2ec599c07665dfeab99a26dd410 --details
STDOUT:  /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
 /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
 /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
 10-listen-on-ipv6-by-default.sh: Getting the checksum of /etc/nginx/conf.d/default.conf
 10-listen-on-ipv6-by-default.sh: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
 /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
 /docker-entrypoint.sh: Configuration complete; ready for start up

STDERR:  2025/09/28 10:15:36 [emerg] 1#1: no "events" section in configuration
 nginx: [emerg] no "events" section in configuration


