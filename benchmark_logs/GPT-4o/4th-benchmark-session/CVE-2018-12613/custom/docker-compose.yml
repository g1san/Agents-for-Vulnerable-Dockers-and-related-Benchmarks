services:
  phpmyadmin:
    build: ./phpmyadmin
    ports:
      - "8080:80"
    volumes:
      - php-sessions:/var/lib/php/sessions
    environment:
      PMA_ARBITRARY: "1"

  mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_ALLOW_EMPTY_PASSWORD: "no"
      MYSQL_INITDB_SKIP_TZINFO: "no"
    volumes:
      - mysql-data:/var/lib/mysql
      - ./mysql-ssl:/etc/mysql/ssl
    command: --ssl-ca=/etc/mysql/ssl/ca.pem --ssl-cert=/etc/mysql/ssl/server-cert.pem --ssl-key=/etc/mysql/ssl/server-key.pem --default-authentication-plugin=mysql_native_password --explicit_defaults_for_timestamp --default-time-zone='+00:00'

volumes:
  php-sessions:
  mysql-data:
