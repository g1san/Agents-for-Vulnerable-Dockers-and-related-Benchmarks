{
    "file_name": [
        "./../../dockers/CVE-2022-24706/custom_no_tool/docker-compose.yml",
        "./../../dockers/CVE-2022-24706/custom_no_tool/Dockerfile",
        "./../../dockers/CVE-2022-24706/custom_no_tool/init.sh"
    ],
    "file_code": [
        "services:\n  couchdb:\n    build: .\n    ports:\n      - \"5984:5984\"\n    environment:\n      COUCHDB_USER: admin\n      COUCHDB_PASSWORD: admin\n    volumes:\n      - couchdb_data:/opt/couchdb/data\n\nvolumes:\n  couchdb_data:\n    driver: local\n",
        "FROM apache/couchdb:3.2.1\n\nCOPY init.sh /usr/local/bin/init.sh\nRUN chmod +x /usr/local/bin/init.sh\n\nENTRYPOINT [\"/usr/local/bin/init.sh\"]\n",
        "#!/bin/bash\n\n# Set the admin user in the local.ini file\ncat <<EOL >> /opt/couchdb/etc/local.ini\n[admins]\nadmin = admin\nEOL\n\n# Start CouchDB in the background to perform initial setup\n/opt/couchdb/bin/couchdb -b\n\n# Wait for CouchDB to start by checking its availability\nuntil curl -s http://admin:admin@localhost:5984/; do\n    echo \"Waiting for CouchDB to start...\"\n    sleep 5\ndone\n\n# Create necessary system databases\ncurl -X PUT http://admin:admin@localhost:5984/_users\ncurl -X PUT http://admin:admin@localhost:5984/_replicator\ncurl -X PUT http://admin:admin@localhost:5984/_global_changes\ncurl -X PUT http://admin:admin@localhost:5984/_nodes\ncurl -X PUT http://admin:admin@localhost:5984/_dbs\n\n# Set the Erlang cookie to a secure value\necho \"secure_cookie_value\" > /opt/couchdb/.erlang.cookie\nchmod 400 /opt/couchdb/.erlang.cookie\n\n# Stop CouchDB to restart it properly\n/opt/couchdb/bin/couchdb -d\n\n# Start CouchDB using the service command\nexec /opt/couchdb/bin/couchdb\n"
    ],
    "directory_tree": "./../../dockers/CVE-2022-24706/custom_no_tool"
}