#!/bin/bash

# This script sets up the default Erlang cookie for CouchDB
# to simulate the vulnerable scenario.

# Set the default cookie to 'monster'
echo "monster" > /opt/couchdb/.erlang.cookie

# Set the correct permissions for the cookie file
chmod 400 /opt/couchdb/.erlang.cookie
chown couchdb:couchdb /opt/couchdb/.erlang.cookie

# Create the '_users' database if it does not exist
curl -X PUT http://admin:password@localhost:5984/_users || true
