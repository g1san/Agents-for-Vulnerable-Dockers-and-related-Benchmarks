{
    "file_name": [
        "docker-compose.yml",
        "Dockerfile",
        "init.sh"
    ],
    "file_code": [
        "version: '3.8'\n\nservices:\n  couchdb:\n    build: .\n    ports:\n      - '5984:5984'\n      - '4369:4369'  # Erlang Port Mapper Daemon (epmd) port\n    environment:\n      COUCHDB_USER: admin\n      COUCHDB_PASSWORD: password\n    volumes:\n      - couchdb_data:/opt/couchdb/data\n    command: '/opt/couchdb/init.sh'\n\nvolumes:\n  couchdb_data:\n",
        "FROM apache/couchdb:3.2.2\n\n# Set a secure Erlang cookie\nRUN echo \"a_secure_random_cookie_value\" > /opt/couchdb/.erlang.cookie && \\\n    chmod 400 /opt/couchdb/.erlang.cookie\n\n# Add initialization script\nCOPY init.sh /opt/couchdb/init.sh\nRUN chmod +x /opt/couchdb/init.sh\n\n# Expose the epmd port for communication\nEXPOSE 4369\n",
        "#!/bin/bash\n\n# Start CouchDB in the background\n/opt/couchdb/bin/couchdb &\nCOUCHDB_PID=$!\n\n# Wait for CouchDB to start\nuntil curl -s -u admin:password http://localhost:5984/_up; do\n  echo \"Waiting for CouchDB to be available...\"\n  sleep 5\ndone\n\n# Create system databases if they do not exist\ncurl -u admin:password -X PUT http://localhost:5984/_users\ncurl -u admin:password -X PUT http://localhost:5984/_nodes\ncurl -u admin:password -X PUT http://localhost:5984/_dbs\n\n# Wait for CouchDB process to finish\nwait $COUCHDB_PID\n"
    ],
    "directory_tree": "./../../dockers/CVE-2022-24706/custom_no_tool"
}