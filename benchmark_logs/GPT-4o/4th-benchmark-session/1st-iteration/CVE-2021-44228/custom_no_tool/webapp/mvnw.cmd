@echo off

rem ----------------------------------------------------------------------------
rem Licensed to the Apache Software Foundation (ASF) under one or more
rem contributor license agreements.  See the NOTICE file distributed with
rem this work for additional information regarding copyright ownership.
rem The ASF licenses this file to You under the Apache License, Version 2.0
rem (the "License"); you may not use this file except in compliance with
rem the License.  You may obtain a copy of the License at
rem
rem     http://www.apache.org/licenses/LICENSE-2.0
rem
rem Unless required by applicable law or agreed to in writing, software
rem distributed under the License is distributed on an "AS IS" BASIS,
rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
rem See the License for the specific language governing permissions and
rem limitations under the License.
rem ----------------------------------------------------------------------------

rem ----------------------------------------------------------------------------
rem Maven Start Up Batch script
rem
rem Required ENV vars:
rem
rem   JAVA_HOME - location of a JDK home dir
rem
rem Optional ENV vars
rem
rem   M2_HOME - location of maven2's installed home dir
rem   MAVEN_OPTS - parameters passed to the Java VM when running Maven
rem     e.g. to debug Maven itself, use
rem       set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
rem   MAVEN_SKIP_RC - flag to disable loading of mavenrc files
rem ----------------------------------------------------------------------------

if not "%MAVEN_SKIP_RC%" == "" goto skipRc
if exist "%HOME%\.mavenrc" call "%HOME%\.mavenrc"
if exist "%M2_HOME%\conf\mavenrc_pre.bat" call "%M2_HOME%\conf\mavenrc_pre.bat"
if exist "%M2_HOME%\conf\mavenrc_post.bat" call "%M2_HOME%\conf\mavenrc_post.bat"
:skipRc

setlocal
set MAVEN_JAVA_EXE=%JAVA_HOME%\bin\java.exe
if not exist "%MAVEN_JAVA_EXE%" goto errorJava

set PRG=%~f0
set SAVED_DIR=%CD%
cd "%PRG%\.."
set M2_HOME=%CD%
cd "%SAVED_DIR%"

set CLASSPATH=%M2_HOME%\boot\*

%MAVEN_JAVA_EXE% %MAVEN_OPTS% -classpath "%CLASSPATH%" org.apache.maven.wrapper.MavenWrapperMain %*
if "%ERRORLEVEL%" == "" set ERRORLEVEL=0
goto end

:errorJava
@echo Error: JAVA_HOME is not defined correctly.
@echo  We cannot execute %JAVA_HOME%\bin\java.exe
set ERRORLEVEL=1

:end
if "%OS%"=="Windows_NT" endlocal
