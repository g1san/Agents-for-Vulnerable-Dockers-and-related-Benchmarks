FROM openjdk:8-jdk-alpine

# Install Maven
RUN apk add --no-cache maven

COPY . /usr/src/myapp
WORKDIR /usr/src/myapp

# Build the application using Maven
RUN mvn package

# Ensure the target directory exists
RUN mkdir -p target

# Copy the generated JAR file
RUN cp target/log4shell-demo-1.0-SNAPSHOT.jar target/app.jar

CMD ["java", "-jar", "target/app.jar"]
