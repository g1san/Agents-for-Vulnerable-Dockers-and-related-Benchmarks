========== Generated Code (First Version) ==========
Directory tree:
./../../dockers/CVE-2023-42793/custom/
    ├── docker-compose.yml
    └── init.sql


---------- docker-compose.yml ----------
version: '3.8'

services:
  teamcity-server:
    image: jetbrains/teamcity-server:2023.05.3-CVE-2023-42793
    container_name: teamcity-server
    environment:
      TEAMCITY_SERVER_MEM_OPTS: -Xmx2g
    ports:
      - "8111:8111"
    volumes:
      - teamcity_data:/data/teamcity_server/datadir
      - teamcity_logs:/opt/teamcity/logs
    depends_on:
      - db

  db:
    image: mysql:8.0
    container_name: teamcity-db
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: teamcity
      MYSQL_USER: teamcity
      MYSQL_PASSWORD: teamcitypassword
    ports:
      - "3306:3306"
    volumes:
      - db_data:/var/lib/mysql
    command: --default-authentication-plugin=mysql_native_password
    healthcheck:
      test: "exit 0"

volumes:
  teamcity_data:
  teamcity_logs:
  db_data:


---------- init.sql ----------
-- SQL script to initialize the MySQL database for TeamCity
CREATE DATABASE IF NOT EXISTS teamcity;
CREATE USER IF NOT EXISTS 'teamcity'@'%' IDENTIFIED BY 'teamcitypassword';
GRANT ALL PRIVILEGES ON teamcity.* TO 'teamcity'@'%';
FLUSH PRIVILEGES;





Test iteration #0 failed!
	Error: The error indicates that the Docker image 'jetbrains/teamcity-server:2023.05.3-CVE-2023-42793' could not be found on Docker Hub. This is likely because the image tag does not exist or is not correctly specified.
	Fix: To fix this, we need to ensure that the image tag used in the docker-compose.yml file is correct and available on Docker Hub. Since the specific CVE tag '2023.05.3-CVE-2023-42793' does not exist, we will use the available version '2023.05.3' and ensure the CVE is mentioned in the comments or documentation.========== Test Passed! Generated Code (Final Version) ==========
Directory tree:
./../../dockers/CVE-2023-42793/custom
├── docker-compose.yml
└── init.sql


---------- docker-compose.yml ----------
services:
  teamcity-server:
    image: jetbrains/teamcity-server:2023.05.3 # CVE-2023-42793
    container_name: teamcity-server
    environment:
      TEAMCITY_SERVER_MEM_OPTS: -Xmx2g
    ports:
      - "8111:8111"
    volumes:
      - teamcity_data:/data/teamcity_server/datadir
      - teamcity_logs:/opt/teamcity/logs
    depends_on:
      - db

  db:
    image: mysql:8.0
    container_name: teamcity-db
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: teamcity
      MYSQL_USER: teamcity
      MYSQL_PASSWORD: teamcitypassword
    ports:
      - "3306:3306"
    volumes:
      - db_data:/var/lib/mysql
    command: --default-authentication-plugin=mysql_native_password
    healthcheck:
      test: "exit 0"

volumes:
  teamcity_data:
  teamcity_logs:
  db_data:


---------- init.sql ----------
-- SQL script to initialize the MySQL database for TeamCity
CREATE DATABASE IF NOT EXISTS teamcity;
CREATE USER IF NOT EXISTS 'teamcity'@'%' IDENTIFIED BY 'teamcitypassword';
GRANT ALL PRIVILEGES ON teamcity.* TO 'teamcity'@'%';
FLUSH PRIVILEGES;


