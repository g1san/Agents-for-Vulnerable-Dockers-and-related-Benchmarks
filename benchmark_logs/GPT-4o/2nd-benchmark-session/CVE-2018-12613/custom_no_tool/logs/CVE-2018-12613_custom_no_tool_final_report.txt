========== Generated Code (First Version) ==========
Directory tree:
./../../dockers/CVE-2018-12613/custom_no_tool
├── docker-compose.yml
├── phpmyadmin
│   └── config.user.inc.php
└── mysql
    ├── Dockerfile
    └── init.sql


---------- docker-compose.yml ----------
version: '3.7'

services:
  phpmyadmin:
    image: phpmyadmin/phpmyadmin:4.8.1-CVE-2018-12613
    restart: always
    ports:
      - "8080:80"
    environment:
      PMA_HOST: mysql
      PMA_USER: root
      PMA_PASSWORD: root_password
    volumes:
      - ./phpmyadmin/config.user.inc.php:/etc/phpmyadmin/config.user.inc.php

  mysql:
    build: ./mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root_password
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
    driver: local


---------- phpmyadmin/config.user.inc.php ----------
<?php
$cfg['blowfish_secret'] = 'random_blowfish_secret';

$i = 0;
$i++;

$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['host'] = 'mysql';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'root_password';
$cfg['Servers'][$i]['AllowNoPassword'] = true;


---------- mysql/Dockerfile ----------
FROM mysql:5.7

COPY init.sql /docker-entrypoint-initdb.d/


---------- mysql/init.sql ----------
CREATE DATABASE IF NOT EXISTS test_db;

USE test_db;

CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  password VARCHAR(255) NOT NULL
);

INSERT INTO users (username, password) VALUES ('admin', 'admin_password');





Test iteration #0 failed!
	Error: The error indicates that the Docker image 'phpmyadmin/phpmyadmin:4.8.1-CVE-2018-12613' cannot be found in the Docker registry. This is likely because the tag '4.8.1-CVE-2018-12613' does not exist in the Docker Hub for the phpMyAdmin image.
	Fix: To fix this, we will modify the Docker Compose file to use a valid phpMyAdmin image version within the specified range ('4.8.0---4.8.1'). We'll use 'phpmyadmin/phpmyadmin:4.8.1', which is a valid tag available on Docker Hub. Additionally, we'll remove the obsolete 'version' attribute from the Docker Compose file as per the warning message.========== Test Passed! Generated Code (Final Version) ==========
Directory tree:
./../../dockers/CVE-2018-12613/custom_no_tool


---------- docker-compose.yml ----------
services:
  phpmyadmin:
    image: phpmyadmin/phpmyadmin:4.8.1
    restart: always
    ports:
      - "8080:80"
    environment:
      PMA_HOST: mysql
      PMA_USER: root
      PMA_PASSWORD: root_password
    volumes:
      - ./phpmyadmin/config.user.inc.php:/etc/phpmyadmin/config.user.inc.php

  mysql:
    build: ./mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root_password
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
    driver: local


---------- phpmyadmin/config.user.inc.php ----------
<?php
$cfg['blowfish_secret'] = 'random_blowfish_secret';

$i = 0;
$i++;

$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['host'] = 'mysql';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'root_password';
$cfg['Servers'][$i]['AllowNoPassword'] = true;


---------- mysql/Dockerfile ----------
FROM mysql:5.7

COPY init.sql /docker-entrypoint-initdb.d/


---------- mysql/init.sql ----------
CREATE DATABASE IF NOT EXISTS test_db;

USE test_db;

CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  password VARCHAR(255) NOT NULL
);

INSERT INTO users (username, password) VALUES ('admin', 'admin_password');


