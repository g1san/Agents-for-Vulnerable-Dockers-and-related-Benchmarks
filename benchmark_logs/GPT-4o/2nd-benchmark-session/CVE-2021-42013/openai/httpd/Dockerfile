FROM httpd:2.4.50

RUN mkdir -p /usr/local/apache2/htdocs/cgi-bin
COPY httpd.conf /usr/local/apache2/conf/httpd.conf
COPY www /usr/local/apache2/htdocs/
RUN chmod +x /usr/local/apache2/htdocs/cgi-bin/test.cgi

# Ensure all necessary modules are loaded
RUN echo 'LoadModule mpm_event_module modules/mod_mpm_event.so' >> /usr/local/apache2/conf/httpd.conf
RUN echo 'LoadModule cgi_module modules/mod_cgi.so' >> /usr/local/apache2/conf/httpd.conf
