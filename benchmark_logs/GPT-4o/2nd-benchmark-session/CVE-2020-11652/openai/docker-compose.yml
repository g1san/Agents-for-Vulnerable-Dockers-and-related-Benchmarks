version: '3.7'
services:
  salt-master:
    image: saltstack/salt:2019.2.3-CVE-2020-11652
    container_name: salt-master
    ports:
      - "4505:4505"
      - "4506:4506"
    volumes:
      - salt-master-config:/etc/salt
    networks:
      - salt-network
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

  salt-minion:
    image: saltstack/salt:2019.2.3-CVE-2020-11652
    container_name: salt-minion
    depends_on:
      - salt-master
    volumes:
      - salt-minion-config:/etc/salt
    environment:
      - SALT_MASTER=salt-master
    networks:
      - salt-network
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  salt-master-config:
    driver: local
  salt-minion-config:
    driver: local

networks:
  salt-network:
    driver: bridge
