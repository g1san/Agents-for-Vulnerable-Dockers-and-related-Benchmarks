========== Generated Code (First Version) ==========
Directory tree:
./../../dockers/CVE-2021-43798/openai/
|-- docker-compose.yml
|-- grafana
    |-- Dockerfile
    |-- datasource.yaml
    |-- dashboards.yaml

---------- docker-compose.yml ----------
version: '3.7'

services:
  grafana:
    build: ./grafana
    container_name: grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    depends_on:
      - mysql

  mysql:
    image: mysql:5.7.34
    container_name: mysql
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: grafana
    ports:
      - "3306:3306"


---------- grafana/Dockerfile ----------
FROM grafana/grafana:8.1.7

COPY datasource.yaml /etc/grafana/provisioning/datasources/
COPY dashboards.yaml /etc/grafana/provisioning/dashboards/

---------- grafana/datasource.yaml ----------
apiVersion: 1

datasources:
  - name: MySQL
    type: mysql
    access: proxy
    url: mysql:3306
    database: grafana
    user: root
    secureJsonData:
      password: rootpass
    isDefault: true


---------- grafana/dashboards.yaml ----------
apiVersion: 1

providers:
  - name: 'default'
    orgId: 1
    folder: ''
    type: 'file'
    disableDeletion: false
    editable: true
    options:
      path: /var/lib/grafana/dashboards



========== Test Passed! Generated Code (Final Version) ==========
Directory tree:
./../../dockers/CVE-2021-43798/openai/
|-- docker-compose.yml
|-- grafana
    |-- Dockerfile
    |-- datasource.yaml
    |-- dashboards.yaml

---------- docker-compose.yml ----------
version: '3.7'

services:
  grafana:
    build: ./grafana
    container_name: grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    depends_on:
      - mysql

  mysql:
    image: mysql:5.7.34
    container_name: mysql
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: grafana
    ports:
      - "3306:3306"


---------- grafana/Dockerfile ----------
FROM grafana/grafana:8.1.7

COPY datasource.yaml /etc/grafana/provisioning/datasources/
COPY dashboards.yaml /etc/grafana/provisioning/dashboards/

---------- grafana/datasource.yaml ----------
apiVersion: 1

datasources:
  - name: MySQL
    type: mysql
    access: proxy
    url: mysql:3306
    database: grafana
    user: root
    secureJsonData:
      password: rootpass
    isDefault: true


---------- grafana/dashboards.yaml ----------
apiVersion: 1

providers:
  - name: 'default'
    orgId: 1
    folder: ''
    type: 'file'
    disableDeletion: false
    editable: true
    options:
      path: /var/lib/grafana/dashboards

