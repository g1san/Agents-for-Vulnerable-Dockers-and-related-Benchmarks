{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/docker-compose.yml",
            "content": "services:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: laravel_app\n    volumes:\n      - ./:/var/www/html\n    working_dir: /var/www/html\n    environment:\n      - DB_HOST=db\n      - DB_DATABASE=laravel\n      - DB_USERNAME=root\n      - DB_PASSWORD=root\n    networks:\n      - laravel\n    depends_on:\n      - db\n\n  web:\n    image: nginx:1.19\n    container_name: nginx_web\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./fastcgi-php.conf:/etc/nginx/snippets/fastcgi-php.conf\n      - ./:/var/www/html\n    ports:\n      - \"8080:80\"\n    networks:\n      - laravel\n    depends_on:\n      - app\n\n  db:\n    image: mysql:5.7\n    container_name: mysql_db\n    environment:\n      MYSQL_ROOT_PASSWORD: root\n      MYSQL_DATABASE: laravel\n    volumes:\n      - db_data:/var/lib/mysql\n    networks:\n      - laravel\n\nnetworks:\n  laravel:\n    driver: bridge\n\nvolumes:\n  db_data:\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/nginx.conf",
            "content": "events {}\nhttp {\n    server {\n        listen 80;\n        server_name localhost;\n\n        root /var/www/html/public;\n        index index.php index.html index.htm;\n\n        location / {\n            try_files $uri $uri/ /index.php?$query_string;\n        }\n\n        location ~ \\.php$ {\n            include snippets/fastcgi-php.conf;\n            fastcgi_pass app:9000;\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n            include fastcgi_params;\n        }\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/fastcgi-php.conf",
            "content": "# PHP FastCGI configuration\nfastcgi_split_path_info ^(.+\\.php)(/.+)$;\nfastcgi_index index.php;\ninclude fastcgi_params;\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/Dockerfile",
            "content": "FROM php:7.4-fpm\n\n# Install system dependencies\nRUN apt-get update && apt-get install -y \\\n    git \\\n    unzip \\\n    libpng-dev \\\n    libjpeg-dev \\\n    libfreetype6-dev \\\n    default-mysql-client \\\n    && docker-php-ext-configure gd --with-freetype --with-jpeg \\\n    && docker-php-ext-install gd \\\n    && docker-php-ext-install pdo pdo_mysql\n\n# Install Composer\nCOPY --from=composer:latest /usr/bin/composer /usr/bin/composer\n\n# Set working directory\nWORKDIR /var/www/html\n\n# Install Laravel and specific packages\nRUN composer create-project --no-cache --prefer-dist laravel/laravel /var/www/html \"8.4.2\" && \\\n    cd /var/www/html && \\\n    composer require facade/ignition \"2.5.1\"\n\n# Copy the entrypoint script\nCOPY entrypoint.sh /usr/local/bin/\nRUN chmod +x /usr/local/bin/entrypoint.sh\n\nENTRYPOINT [\"/usr/local/bin/entrypoint.sh\"]\nCMD [\"php-fpm\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/entrypoint.sh",
            "content": "#!/bin/bash\n\n# Wait for MySQL to be ready\nuntil mysql -h\"$DB_HOST\" -u\"$DB_USERNAME\" -p\"$DB_PASSWORD\" -e \"SHOW DATABASES;\"; do\n  >&2 echo \"MySQL is unavailable - sleeping\"\n  sleep 1\ndone\n\n# Run database migrations and seed\nphp artisan migrate --seed\n\n# Start PHP-FPM\nexec php-fpm\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/.env",
            "content": "APP_NAME=Laravel\nAPP_ENV=local\nAPP_KEY=base64:0N3R5v7L9cJ9K3R5v7L9cJ9K3R5v7L9cJ9K3R5v7L9cJ9=\nAPP_DEBUG=false\nAPP_URL=http://localhost\n\nLOG_CHANNEL=stack\n\nDB_CONNECTION=mysql\nDB_HOST=db\nDB_PORT=3306\nDB_DATABASE=laravel\nDB_USERNAME=root\nDB_PASSWORD=root\n\nBROADCAST_DRIVER=log\nCACHE_DRIVER=file\nQUEUE_CONNECTION=sync\nSESSION_DRIVER=file\nSESSION_LIFETIME=120\n\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n\nMAIL_MAILER=smtp\nMAIL_HOST=mailhog\nMAIL_PORT=1025\nMAIL_USERNAME=null\nMAIL_PASSWORD=null\nMAIL_ENCRYPTION=null\nMAIL_FROM_ADDRESS=null\nMAIL_FROM_NAME=\"${APP_NAME}\"\n\nAWS_ACCESS_KEY_ID=\nAWS_SECRET_ACCESS_KEY=\nAWS_DEFAULT_REGION=us-east-1\nAWS_BUCKET=\n\nPUSHER_APP_ID=\nPUSHER_APP_KEY=\nPUSHER_APP_SECRET=\nPUSHER_APP_CLUSTER=mt1\n\nMIX_PUSHER_APP_KEY=\"${PUSHER_APP_KEY}\"\nMIX_PUSHER_APP_CLUSTER=\"${PUSHER_APP_CLUSTER}\"\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/custom_no_tool/database/seeders/DatabaseSeeder.php",
            "content": "<?php\n\nnamespace Database\\Seeders;\n\nuse Illuminate\\Database\\Seeder;\nuse Illuminate\\Support\\Facades\\DB;\n\nclass DatabaseSeeder extends Seeder\n{\n    /**\n     * Seed the application's database.\n     *\n     * @return void\n     */\n    public function run()\n    {\n        DB::table('users')->insert([\n            'name' => 'Test User',\n            'email' => 'test@example.com',\n            'password' => bcrypt('password'),\n        ]);\n    }\n}\n"
        }
    ],
    "directory_tree": "CVE-2021-3129/\n\u2514\u2500\u2500 custom_no_tool\n    \u251c\u2500\u2500 Dockerfile\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 entrypoint.sh\n    \u251c\u2500\u2500 fastcgi-php.conf\n    \u251c\u2500\u2500 nginx.conf\n    \u251c\u2500\u2500 .env\n    \u2514\u2500\u2500 database\n        \u2514\u2500\u2500 seeders\n            \u2514\u2500\u2500 DatabaseSeeder.php\n"
}