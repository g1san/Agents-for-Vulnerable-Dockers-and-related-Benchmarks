FROM debian:bullseye-slim

RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    opensmtpd && \
    rm -rf /var/lib/apt/lists/*

COPY smtpd.conf /etc/smtpd/smtpd.conf

# Set the hostname in the container
RUN echo "mail.example.com" > /etc/hostname

CMD ["/usr/sbin/smtpd", "-d"]