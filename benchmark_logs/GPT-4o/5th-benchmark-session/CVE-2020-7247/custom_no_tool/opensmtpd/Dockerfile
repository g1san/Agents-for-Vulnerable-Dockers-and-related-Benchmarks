FROM alpine:3.12

# Install necessary packages
RUN apk add --no-cache opensmtpd

# Copy configuration file
COPY smtpd.conf /etc/smtpd/smtpd.conf

# Create necessary directories and files
RUN mkdir -p /var/mail && touch /etc/aliases

# Expose SMTP port
EXPOSE 25

# Start OpenSMTPD
CMD ["/usr/sbin/smtpd", "-dv"]
