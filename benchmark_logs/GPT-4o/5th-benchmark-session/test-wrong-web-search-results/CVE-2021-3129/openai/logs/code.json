{
    "files": [
        {
            "location": "./../../dockers/CVE-2021-3129/openai/docker-compose.yml",
            "content": "version: '3.8'\n\nservices:\n  app:\n    build: ./app\n    volumes:\n      - ./app:/var/www/html\n    depends_on:\n      - db\n    networks:\n      - app-network\n\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpassword\n      MYSQL_DATABASE: laravel\n      MYSQL_USER: laravel\n      MYSQL_PASSWORD: laravelpassword\n    volumes:\n      - db_data:/var/lib/mysql\n    networks:\n      - app-network\n\n  nginx:\n    image: nginx:1.18\n    ports:\n      - \"8000:80\"\n    volumes:\n      - ./app:/var/www/html\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf\n      - ./nginx/snippets/fastcgi-php.conf:/etc/nginx/snippets/fastcgi-php.conf\n    depends_on:\n      - app\n    networks:\n      - app-network\n\nvolumes:\n  db_data:\n\nnetworks:\n  app-network:\n    driver: bridge\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/app/Dockerfile",
            "content": "FROM php:7.4-fpm\n\nRUN apt-get update && apt-get install -y \\\n    libpng-dev \\\n    libjpeg-dev \\\n    libfreetype6-dev \\\n    zip \\\n    unzip \\\n    git \\\n    && docker-php-ext-configure gd --with-freetype --with-jpeg \\\n    && docker-php-ext-install gd\n\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\n\nWORKDIR /var/www/html\n\nCOPY . .\n\nRUN composer install\n\nRUN mkdir -p /var/www/html/storage \\\n    && chown -R www-data:www-data /var/www/html \\\n    && chmod -R 755 /var/www/html/storage\n\nEXPOSE 9000\n\nCMD [\"php-fpm\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/app/composer.json",
            "content": "{\n    \"require\": {\n        \"laravel/framework\": \"^8.12\",\n        \"facade/ignition\": \"^2.5.2\"\n    },\n    \"repositories\": [\n        {\n            \"type\": \"composer\",\n            \"url\": \"https://repo.packagist.org\"\n        }\n    ]\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/app/.env",
            "content": "APP_NAME=Laravel\nAPP_ENV=local\nAPP_KEY=base64:WzE2RzVtQjN0dW5rZ2h3V2VtT1N5c0h2bGJxS1V4eFQ=\nAPP_DEBUG=true\nAPP_URL=http://localhost\n\nLOG_CHANNEL=stack\n\nDB_CONNECTION=mysql\nDB_HOST=db\nDB_PORT=3306\nDB_DATABASE=laravel\nDB_USERNAME=laravel\nDB_PASSWORD=laravelpassword\n\nBROADCAST_DRIVER=log\nCACHE_DRIVER=file\nQUEUE_CONNECTION=sync\nSESSION_DRIVER=file\nSESSION_LIFETIME=120\n\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n\nMAIL_MAILER=smtp\nMAIL_HOST=mailhog\nMAIL_PORT=1025\nMAIL_USERNAME=null\nMAIL_PASSWORD=null\nMAIL_ENCRYPTION=null\n\nAWS_ACCESS_KEY_ID=\nAWS_SECRET_ACCESS_KEY=\nAWS_DEFAULT_REGION=us-east-1\nAWS_BUCKET=\n\nPUSHER_APP_ID=\nPUSHER_APP_KEY=\nPUSHER_APP_SECRET=\nPUSHER_APP_CLUSTER=mt1\n\nMIX_PUSHER_APP_KEY=\"${PUSHER_APP_KEY}\"\nMIX_PUSHER_APP_CLUSTER=\"${PUSHER_APP_CLUSTER}\"\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/app/database/seeds/DatabaseSeeder.php",
            "content": "<?php\n\nuse Illuminate\\Database\\Seeder;\nuse Illuminate\\Support\\Facades\\DB;\n\nclass DatabaseSeeder extends Seeder\n{\n    public function run()\n    {\n        DB::table('users')->insert([\n            'name' => 'Test User',\n            'email' => 'test@example.com',\n            'password' => bcrypt('password'),\n        ]);\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/app/database/migrations/2021_01_01_000000_create_users_table.php",
            "content": "<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass CreateUsersTable extends Migration\n{\n    public function up()\n    {\n        Schema::create('users', function (Blueprint $table) {\n            $table->id();\n            $table->string('name');\n            $table->string('email')->unique();\n            $table->string('password');\n            $table->timestamps();\n        });\n    }\n\n    public function down()\n    {\n        Schema::dropIfExists('users');\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/nginx/nginx.conf",
            "content": "events {}\n\nhttp {\n    server {\n        listen 80;\n        index index.php index.html;\n        server_name localhost;\n\n        root /var/www/html/public;\n\n        location / {\n            try_files $uri $uri/ /index.php?$query_string;\n        }\n\n        location ~ \\.php$ {\n            include snippets/fastcgi-php.conf;\n            fastcgi_pass app:9000;\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n            include fastcgi_params;\n        }\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2021-3129/openai/nginx/snippets/fastcgi-php.conf",
            "content": "# FastCGI configuration for PHP\nfastcgi_split_path_info ^(.+\\.php)(/.+)$;\nfastcgi_param PATH_INFO $fastcgi_path_info;\nfastcgi_index index.php;\ninclude fastcgi_params;\n"
        }
    ],
    "directory_tree": "CVE-2021-3129/\n|-- docker-compose.yml\n|-- app\n|   |-- Dockerfile\n|   |-- composer.json\n|   |-- .env\n|   |-- database\n|   |   |-- seeds\n|   |   |   |-- DatabaseSeeder.php\n|   |   |-- migrations\n|   |       |-- 2021_01_01_000000_create_users_table.php\n|-- nginx\n|   |-- nginx.conf\n|   |-- snippets\n|       |-- fastcgi-php.conf\n"
}