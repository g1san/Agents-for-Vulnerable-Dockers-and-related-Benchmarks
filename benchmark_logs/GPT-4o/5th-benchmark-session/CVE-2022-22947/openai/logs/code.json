{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-22947/openai/docker-compose.yml",
            "content": "services:\n  spring-cloud-gateway:\n    build:\n      context: ./spring-cloud-gateway\n      dockerfile: Dockerfile\n    ports:\n      - \"8080:8080\"\n    environment:\n      SPRING_PROFILES_ACTIVE: \"default\"\n    depends_on:\n      - mysql\n      - redis\n    networks:\n      - cve-network\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8080/actuator/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  mysql:\n    image: mysql:8.0.27\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpassword\n      MYSQL_DATABASE: testdb\n    ports:\n      - \"3306:3306\"\n    networks:\n      - cve-network\n\n  redis:\n    image: redis:6.2.6\n    ports:\n      - \"6379:6379\"\n    networks:\n      - cve-network\n\n  nginx:\n    image: nginx:1.21.3\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n    depends_on:\n      spring-cloud-gateway:\n        condition: service_healthy\n    networks:\n      - cve-network\n\nnetworks:\n  cve-network:\n    driver: bridge\n"
        },
        {
            "location": "./../../dockers/CVE-2022-22947/openai/nginx.conf",
            "content": "events {}\nhttp {\n    server {\n        listen 80;\n\n        location / {\n            proxy_pass http://spring-cloud-gateway:8080;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2022-22947/openai/spring-cloud-gateway/Dockerfile",
            "content": "# Use Maven to build the application\nFROM maven:3.8.4-openjdk-8 AS build\n\n# Set the working directory\nWORKDIR /app\n\n# Copy the Maven project descriptor and source files\nCOPY pom.xml /app/\nCOPY src /app/src\n\n# Build the application\nRUN mvn -f /app/pom.xml clean package\n\n# Use a minimal OpenJDK image to run the application\nFROM openjdk:8u312-jre\n\n# Set the working directory\nWORKDIR /app\n\n# Copy the built application from the build stage\nCOPY --from=build /app/target/spring-cloud-gateway-1.0-SNAPSHOT.jar /app/spring-cloud-gateway.jar\n\n# Run the Spring Cloud Gateway application\nCMD [\"java\", \"-jar\", \"/app/spring-cloud-gateway.jar\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2022-22947/openai/spring-cloud-gateway/pom.xml",
            "content": "<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.example</groupId>\n    <artifactId>spring-cloud-gateway</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <properties>\n        <java.version>1.8</java.version>\n        <spring-cloud.version>2021.0.3</spring-cloud.version>\n        <spring-boot.version>2.6.3</spring-boot.version>\n    </properties>\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-webflux</artifactId>\n            <version>${spring-boot.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.cloud</groupId>\n            <artifactId>spring-cloud-starter-gateway</artifactId>\n        </dependency>\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <version>${spring-boot.version}</version>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n"
        },
        {
            "location": "./../../dockers/CVE-2022-22947/openai/spring-cloud-gateway/src/main/resources/application.yml",
            "content": "server:\n  port: 8080\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info\n  endpoint:\n    health:\n      show-details: always\n\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: test_route\n        uri: http://example.org\n        predicates:\n        - Path=/test\n"
        }
    ],
    "directory_tree": "CVE-2022-22947/\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 nginx.conf\n\u2514\u2500\u2500 spring-cloud-gateway\n    \u251c\u2500\u2500 Dockerfile\n    \u251c\u2500\u2500 pom.xml\n    \u2514\u2500\u2500 src\n        \u2514\u2500\u2500 main\n            \u2514\u2500\u2500 resources\n                \u2514\u2500\u2500 application.yml\n"
}