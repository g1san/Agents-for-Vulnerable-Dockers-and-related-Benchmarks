FROM python:3.7-slim

# Install build-essential to provide gcc
RUN apt-get update && apt-get install -y build-essential && rm -rf /var/lib/apt/lists/*

# Install a compatible version of jinja2
RUN pip install jinja2==2.11.3

# Install markupsafe compatible version
RUN pip install markupsafe==2.0.1

# Install pyzmq compatible version
RUN pip install pyzmq==19.0.2

RUN pip install salt==3000.1

COPY master.conf /etc/salt/master

CMD ["salt-master", "-l", "debug"]
