FROM debian:11.0

RUN apt-get update && \
    apt-get install -y apache2 apache2-bin && \
    apt-get install -y bash=5.1-2+deb11u1 && \
    apt-get install -y coreutils

RUN mkdir -p /var/run/apache2 && \
    chown -R www-data:www-data /var/run/apache2 && \
    chown -R www-data:www-data /var/log/apache2

COPY httpd.conf /etc/apache2/apache2.conf

# Run Apache as www-data user
USER www-data

CMD ["/usr/sbin/apache2ctl", "-D", "FOREGROUND"]
