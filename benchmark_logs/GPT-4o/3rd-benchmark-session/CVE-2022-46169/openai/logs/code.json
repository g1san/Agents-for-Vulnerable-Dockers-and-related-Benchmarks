{
    "file_name": [
        "docker-compose.yml",
        "cacti/Dockerfile",
        "cacti/config.php",
        "cacti/init.sql"
    ],
    "file_code": [
        "version: '3.8'\n\nservices:\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpassword\n    volumes:\n      - db_data:/var/lib/mysql\n      - ./cacti/init.sql:/docker-entrypoint-initdb.d/init.sql\n    command: ['mysqld']\n    healthcheck:\n      test: [\"CMD\", \"mysqladmin\", \"ping\", \"-h\", \"localhost\"]\n      interval: 10s\n      retries: 5\n      start_period: 30s\n      timeout: 10s\n\n  cacti:\n    build: ./cacti\n    ports:\n      - \"8080:80\"\n    environment:\n      - DB_HOST=db\n      - DB_NAME=cacti\n      - DB_USER=cactiuser\n      - DB_PASS=cactipassword\n    depends_on:\n      - db\n    volumes:\n      - cacti_data:/var/www/html\n\nvolumes:\n  db_data:\n  cacti_data:\n",
        "FROM php:7.4-apache\n\nRUN apt-get update \\\n    && apt-get install -y \\\n       librrd-dev \\\n       rrdtool \\\n       git \\\n       unzip \\\n    && docker-php-ext-install mysqli \\\n    && a2enmod rewrite\n\n# Set working directory\nWORKDIR /var/www/html\n\n# Clone Cacti repository\nRUN git clone --branch release/1.2.22 https://github.com/Cacti/cacti.git .\n\n# Copy Cacti configuration\nCOPY config.php include/config.php\n\n# Set permissions\nRUN chown -R www-data:www-data /var/www/html\n",
        "<?php\n$database_type = \"mysql\";\n$database_default = \"cacti\";\n$database_hostname = getenv('DB_HOST');\n$database_username = getenv('DB_USER');\n$database_password = getenv('DB_PASS');\n$database_port = \"3306\";\n$database_ssl = false;\n$database_ssl_key = \"\";\n$database_ssl_cert = \"\";\n$database_ssl_ca = \"\";\n$url_path = \"/\";\n",
        "CREATE DATABASE IF NOT EXISTS cacti;\nCREATE USER IF NOT EXISTS 'cactiuser'@'%' IDENTIFIED BY 'cactipassword';\nGRANT ALL PRIVILEGES ON cacti.* TO 'cactiuser'@'%';\nFLUSH PRIVILEGES;\n"
    ],
    "directory_tree": "./../../dockers/CVE-2022-46169/openai\n|-- docker-compose.yml\n|-- cacti\n|   |-- Dockerfile\n|   |-- config.php\n|   |-- init.sql\n"
}