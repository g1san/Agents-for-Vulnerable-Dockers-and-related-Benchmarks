services:
  salt-master:
    image: saltstack/salt:3000.1
    container_name: salt-master
    ports:
      - "4505:4505"
      - "4506:4506"
    volumes:
      - ./salt-master/config:/etc/salt
    command: ["/bin/sh", "-c", "pip install pyzmq==19.0.0 msgpack==1.0.0 && salt-master"]

  python:
    image: python:3.8
    container_name: python-env
    volumes:
      - ./scripts:/scripts
    command: ["sleep", "infinity"]

networks:
  default:
    name: salt-network
