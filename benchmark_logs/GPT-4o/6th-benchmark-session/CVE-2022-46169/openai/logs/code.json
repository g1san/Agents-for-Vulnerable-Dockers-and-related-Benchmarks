{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-46169/openai/docker-compose.yml",
            "content": "services:\n  cacti:\n    build: ./cacti\n    ports:\n      - \"80:80\"\n    environment:\n      - DB_HOST=db\n      - DB_NAME=cacti\n      - DB_USER=cactiuser\n      - DB_PASS=cacti\n    depends_on:\n      - db\n    networks:\n      - cacti_net\n\n  db:\n    image: mysql:5.7\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: cacti\n      MYSQL_USER: cactiuser\n      MYSQL_PASSWORD: cacti\n    networks:\n      - cacti_net\n    volumes:\n      - db_data:/var/lib/mysql\n\n  web:\n    image: nginx:1.18\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf\n    depends_on:\n      - cacti\n    networks:\n      - cacti_net\n\nnetworks:\n  cacti_net:\n    driver: bridge\n\nvolumes:\n  db_data:\n    driver: local\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/nginx/default.conf",
            "content": "server {\n    listen 80;\n\n    location / {\n        proxy_pass http://cacti:80;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/db/init.sql",
            "content": "CREATE DATABASE IF NOT EXISTS cacti;\nCREATE USER 'cactiuser'@'%' IDENTIFIED BY 'cacti';\nGRANT ALL PRIVILEGES ON cacti.* TO 'cactiuser'@'%';\nFLUSH PRIVILEGES;\n\nUSE cacti;\n\n-- Insert test data\nINSERT INTO poller (id, hostname) VALUES (1, 'localhost');\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/cacti/Dockerfile",
            "content": "FROM php:7.4-apache\n\nRUN apt-get update && \\\n    apt-get install -y librrd-dev libpng-dev libsnmp-dev snmp libmariadb-dev-compat libmariadb-dev libjpeg-dev libfreetype6-dev && \\\n    docker-php-ext-install mysqli && \\\n    docker-php-ext-configure gd --with-jpeg=/usr/include/ --with-freetype=/usr/include/ && \\\n    docker-php-ext-install gd && \\\n    docker-php-ext-install snmp\n\nRUN curl -o /tmp/cacti-1.2.22.tar.gz -L https://www.cacti.net/downloads/cacti-1.2.22.tar.gz && \\\n    tar -zxvf /tmp/cacti-1.2.22.tar.gz -C /var/www/html --strip-components=1 && \\\n    rm /tmp/cacti-1.2.22.tar.gz\n\nCOPY ./config.php /var/www/html/include/config.php\n\nRUN chown -R www-data:www-data /var/www/html/rra /var/www/html/log\n\nEXPOSE 80\n\nCMD [\"apache2-foreground\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/cacti/config.php",
            "content": "<?php\n$database_type = 'mysql';\n$database_default = 'cacti';\n$database_hostname = getenv('DB_HOST');\n$database_username = getenv('DB_USER');\n$database_password = getenv('DB_PASS');\n$database_port = '3306';\n$database_ssl = false;\n?>\n"
        }
    ],
    "directory_tree": "CVE-2022-46169/\n|-- openai/\n|   |-- cacti/\n|   |   |-- Dockerfile\n|   |   |-- config.php\n|   |-- db/\n|   |   |-- init.sql\n|   |-- docker-compose.yml\n|   |-- nginx/\n|   |   |-- default.conf"
}