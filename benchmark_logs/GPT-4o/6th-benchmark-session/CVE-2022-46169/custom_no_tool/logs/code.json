{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-46169/custom_no_tool/docker-compose.yml",
            "content": "services:\n  cacti:\n    build: ./cacti\n    container_name: cacti_app\n    ports:\n      - \"8080:80\"\n    environment:\n      - DB_HOST=db\n      - DB_NAME=cacti\n      - DB_USER=cactiuser\n      - DB_PASS=cacti123\n    depends_on:\n      - db\n    networks:\n      - cacti_network\n\n  db:\n    image: mysql:5.7\n    container_name: cacti_db\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpass\n      MYSQL_DATABASE: cacti\n      MYSQL_USER: cactiuser\n      MYSQL_PASSWORD: cacti123\n    volumes:\n      - db_data:/var/lib/mysql\n    networks:\n      - cacti_network\n\n  web:\n    image: nginx:1.21\n    container_name: cacti_nginx\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf\n    depends_on:\n      - cacti\n    networks:\n      - cacti_network\n\nnetworks:\n  cacti_network:\n    driver: bridge\n\nvolumes:\n  db_data:\n    driver: local\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/custom_no_tool/nginx/default.conf",
            "content": "server {\n    listen 80;\n    server_name localhost;\n\n    location / {\n        proxy_pass http://cacti_app;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/custom_no_tool/init.sql",
            "content": "CREATE DATABASE IF NOT EXISTS cacti;\nCREATE USER 'cactiuser'@'%' IDENTIFIED BY 'cacti123';\nGRANT ALL PRIVILEGES ON cacti.* TO 'cactiuser'@'%';\nFLUSH PRIVILEGES;\n\nUSE cacti;\n\n-- Sample data for testing\nCREATE TABLE IF NOT EXISTS test_table (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    data VARCHAR(255) NOT NULL\n);\n\nINSERT INTO test_table (data) VALUES ('Sample Data 1'), ('Sample Data 2');\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/custom_no_tool/cacti/Dockerfile",
            "content": "FROM php:7.4-apache\n\n# Install dependencies\nRUN apt-get update && apt-get install -y \\\n    libpng-dev \\\n    libjpeg-dev \\\n    libfreetype6-dev \\\n    libxml2-dev \\\n    libsnmp-dev \\\n    rrdtool \\\n    snmp \\\n    snmpd \\\n    git \\\n    unzip \\\n    && docker-php-ext-configure gd --with-freetype --with-jpeg \\\n    && docker-php-ext-install gd mysqli pdo pdo_mysql xml snmp\n\n# Download and setup Cacti\nWORKDIR /var/www/html\nRUN git config --global --add safe.directory /var/www/html \\\n    && git clone https://github.com/Cacti/cacti.git . \\\n    && git checkout tags/release/1.2.22 -b 1.2.22\n\n# Set permissions\nRUN chown -R www-data:www-data /var/www/html && \\\n    chmod -R 755 /var/www/html\n\n# Copy configuration files\nCOPY ./config.php /var/www/html/include/config.php\n\n# Expose port\nEXPOSE 80\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/custom_no_tool/cacti/config.php",
            "content": "<?php\n// Sample config.php for Cacti\n$database_type = 'mysql';\n$database_default = 'cacti';\n$database_hostname = 'db';\n$database_username = 'cactiuser';\n$database_password = 'cacti123';\n$database_port = '3306';\n$database_ssl = false;\n\n$url_path = '/';\n?>\n"
        }
    ],
    "directory_tree": "CVE-2022-46169/\n\u2514\u2500\u2500 custom_no_tool/\n    \u251c\u2500\u2500 docker-compose.yml\n    \u251c\u2500\u2500 nginx/\n    \u2502   \u2514\u2500\u2500 default.conf\n    \u251c\u2500\u2500 init.sql\n    \u2514\u2500\u2500 cacti/\n        \u251c\u2500\u2500 Dockerfile\n        \u2514\u2500\u2500 config.php"
}