# Use OpenJDK 8 as the base image
FROM openjdk:8-jdk-alpine

# Set the working directory
WORKDIR /app

# Copy the Maven project files
COPY pom.xml .
COPY mvnw .
# Removed COPY .mvn .mvn as it is not necessary
COPY src ./src

# Ensure the Maven wrapper is executable
RUN chmod +x ./mvnw

# Run the Maven build to create the JAR file
RUN ./mvnw clean package -DskipTests

# Copy the generated JAR file to the working directory
COPY target/spring-cloud-function-app-1.0-SNAPSHOT.jar ./spring-cloud-function-app.jar

# Command to run the application
CMD ["java", "-jar", "spring-cloud-function-app.jar"]
