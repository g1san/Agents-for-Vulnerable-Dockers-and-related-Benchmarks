#!/bin/bash
# Wait for CouchDB to start
until curl -s http://admin:password@localhost:5984/_utils; do
    echo "Waiting for CouchDB to start..."
    sleep 2
    done

# Create the '_users' database
curl -X PUT http://admin:password@localhost:5984/_users

# Create a test database and add some data
curl -X PUT http://admin:password@localhost:5984/testdb
curl -X POST http://admin:password@localhost:5984/testdb -H "Content-Type: application/json" -d '{"name": "test", "type": "example"}'

# Indicate that the initialization is complete
echo "CouchDB initialization complete."
