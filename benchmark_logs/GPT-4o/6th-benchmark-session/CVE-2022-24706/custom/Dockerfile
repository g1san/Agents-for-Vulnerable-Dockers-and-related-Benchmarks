# Base image for CouchDB
FROM apache/couchdb:3.2.1

# Copy the init script into the container
COPY init-couchdb.sh /docker-entrypoint-initdb.d/init-couchdb.sh
RUN chmod +x /docker-entrypoint-initdb.d/init-couchdb.sh

# Expose CouchDB and EPMD ports
EXPOSE 5984 4369

# The default command from the CouchDB image will be used
# No need to specify CMD as the CouchDB image already handles it

# We rely on the official CouchDB image's entrypoint to start CouchDB
# and execute scripts in /docker-entrypoint-initdb.d/