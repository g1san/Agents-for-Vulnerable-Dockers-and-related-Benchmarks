#!/bin/bash
# This script sets up the CouchDB database with test data.

# Wait for CouchDB to start
until curl -s http://admin:password@localhost:5984/_up; do
  echo "Waiting for CouchDB..."
  sleep 2
done

# Create system databases
curl -X PUT http://admin:password@localhost:5984/_users
curl -X PUT http://admin:password@localhost:5984/_nodes

# Create a test database
curl -X PUT http://admin:password@localhost:5984/testdb

# Insert test data
curl -X POST http://admin:password@localhost:5984/testdb -H "Content-Type: application/json" -d '{"name": "test", "type": "example"}'