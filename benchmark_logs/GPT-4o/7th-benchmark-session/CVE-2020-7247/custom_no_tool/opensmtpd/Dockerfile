# Use Alpine 3.11 as the base image
FROM alpine:3.11

# Install the specific secure version of OpenSMTPD that addresses CVE-2020-7247
RUN apk add --no-cache opensmtpd=6.6.4p1-r1

# Copy the OpenSMTPD configuration file
COPY smtpd.conf /etc/smtpd/smtpd.conf

# Expose SMTP port
EXPOSE 25

# Start OpenSMTPD
CMD ["/usr/sbin/smtpd", "-d"]
