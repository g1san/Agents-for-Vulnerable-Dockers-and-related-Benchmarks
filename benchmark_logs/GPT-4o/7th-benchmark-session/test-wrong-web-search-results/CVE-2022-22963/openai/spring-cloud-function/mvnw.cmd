@echo off

setlocal

set MAVEN_HOME=%~dp0

if "%MAVEN_SKIP_RC%"=="" (
  if exist "%USERPROFILE%\.mavenrc" call "%USERPROFILE%\.mavenrc"
  if exist "%MAVEN_HOME%\mavenrc_pre.bat" call "%MAVEN_HOME%\mavenrc_pre.bat"
  if exist "%MAVEN_HOME%\mavenrc_post.bat" call "%MAVEN_HOME%\mavenrc_post.bat"
)

set MAVEN_PROJECTBASEDIR=%MAVEN_HOME%

if exist "%MAVEN_PROJECTBASEDIR%\.mvn\maven.config" (
  set MAVEN_CONFIG=-Dmaven.multiModuleProjectDirectory="%MAVEN_PROJECTBASEDIR%" -Dmaven.home="%MAVEN_HOME%" @%MAVEN_PROJECTBASEDIR%\.mvn\maven.config
) else (
  set MAVEN_CONFIG=-Dmaven.multiModuleProjectDirectory="%MAVEN_PROJECTBASEDIR%" -Dmaven.home="%MAVEN_HOME%"
)

"%JAVA_HOME%\bin\java" %MAVEN_CONFIG% -jar "%MAVEN_HOME%\.mvn\wrapper\maven-wrapper.jar" %*
