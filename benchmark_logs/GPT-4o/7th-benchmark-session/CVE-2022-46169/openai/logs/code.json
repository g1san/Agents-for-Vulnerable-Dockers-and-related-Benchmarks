{
    "files": [
        {
            "location": "./../../dockers/CVE-2022-46169/openai/docker-compose.yml",
            "content": "services:\n  cacti:\n    build: \n      context: ./cacti\n    container_name: cacti\n    environment:\n      - DB_HOST=db\n      - DB_NAME=cacti\n      - DB_USER=cactiuser\n      - DB_PASS=cactipassword\n    ports:\n      - \"8080:80\"\n    depends_on:\n      - db\n\n  db:\n    image: mariadb:10.5.8\n    container_name: mariadb\n    environment:\n      MYSQL_ROOT_PASSWORD: rootpassword\n      MYSQL_DATABASE: cacti\n      MYSQL_USER: cactiuser\n      MYSQL_PASSWORD: cactipassword\n    volumes:\n      - db_data:/var/lib/mysql\n\nvolumes:\n  db_data:\n    driver: local\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/cacti/Dockerfile",
            "content": "FROM php:7.4-apache\n\nRUN apt-get update && \\\n    apt-get install -y \\\n    libpng-dev \\\n    libjpeg-dev \\\n    libfreetype6-dev \\\n    rrdtool \\\n    librrds-perl \\\n    mariadb-client \\\n    git \\\n    unzip && \\\n    docker-php-ext-configure gd --with-freetype --with-jpeg && \\\n    docker-php-ext-install gd mysqli && \\\n    a2enmod rewrite\n\n# Download and install Cacti\nRUN git clone --branch release/1.2.22 https://github.com/Cacti/cacti.git /var/www/html && \\\n    chown -R www-data:www-data /var/www/html && \\\n    chmod -R 755 /var/www/html\n\n# Add configuration\nCOPY cacti.sql /docker-entrypoint-initdb.d/\n\nEXPOSE 80\nCMD [\"apache2-foreground\"]\n"
        },
        {
            "location": "./../../dockers/CVE-2022-46169/openai/cacti/cacti.sql",
            "content": "CREATE TABLE IF NOT EXISTS `host` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `hostname` varchar(255) NOT NULL,\n  PRIMARY KEY (`id`)\n);\n\nINSERT INTO `host` (hostname) VALUES ('localhost');\n\nCREATE TABLE IF NOT EXISTS `poller_item` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `host_id` int(11) NOT NULL,\n  `local_data_id` int(11) NOT NULL,\n  `action` varchar(255) NOT NULL,\n  PRIMARY KEY (`id`)\n);\n\nINSERT INTO `poller_item` (host_id, local_data_id, action) VALUES (1, 1, 'POLLER_ACTION_SCRIPT_PHP');\n"
        }
    ],
    "directory_tree": "CVE-2022-46169/\n\u251c\u2500\u2500 docker-compose.yml\n\u2514\u2500\u2500 cacti/\n    \u251c\u2500\u2500 Dockerfile\n    \u2514\u2500\u2500 cacti.sql"
}