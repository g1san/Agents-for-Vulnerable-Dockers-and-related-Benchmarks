#1 [internal] load local bake definitions
#1 reading from stdin 685B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 218B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/debian:11
#3 DONE 0.5s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 142B done
#5 DONE 0.0s

#6 [1/3] FROM docker.io/library/debian:11@sha256:25c0cab214b810db1b3c8adef5a12a92596979abddf86bb364e8d9c9d111df9f
#6 resolve docker.io/library/debian:11@sha256:25c0cab214b810db1b3c8adef5a12a92596979abddf86bb364e8d9c9d111df9f 0.0s done
#6 CACHED

#7 [2/3] RUN apt-get update &&     apt-get install -y opensmtpd &&     rm -rf /var/lib/apt/lists/*
#7 0.288 Get:1 http://deb.debian.org/debian bullseye InRelease [75.1 kB]
#7 0.378 Get:2 http://deb.debian.org/debian-security bullseye-security InRelease [27.2 kB]
#7 0.424 Get:3 http://deb.debian.org/debian bullseye-updates InRelease [44.0 kB]
#7 0.474 Get:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8066 kB]
#7 2.244 Get:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [390 kB]
#7 2.334 Get:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [18.8 kB]
#7 3.006 Fetched 8621 kB in 3s (3080 kB/s)
#7 3.006 Reading package lists...
#7 3.420 Reading package lists...
#7 3.805 Building dependency tree...
#7 3.904 Reading state information...
#7 4.010 The following additional packages will be installed:
#7 4.011   ed libevent-2.1-7 libhiredis0.14 libldap-2.4-2 libldap-common libmariadb3
#7 4.011   libpq5 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0
#7 4.012   mariadb-common mysql-common opensmtpd-extras
#7 4.014 Suggested packages:
#7 4.014   libsasl2-modules-gssapi-mit | libsasl2-modules-gssapi-heimdal
#7 4.014   libsasl2-modules-ldap libsasl2-modules-otp libsasl2-modules-sql
#7 4.014   ca-certificates
#7 4.083 The following NEW packages will be installed:
#7 4.083   ed libevent-2.1-7 libhiredis0.14 libldap-2.4-2 libldap-common libmariadb3
#7 4.083   libpq5 libsasl2-2 libsasl2-modules libsasl2-modules-db libsqlite3-0
#7 4.084   mariadb-common mysql-common opensmtpd opensmtpd-extras
#7 4.175 0 upgraded, 15 newly installed, 0 to remove and 3 not upgraded.
#7 4.175 Need to get 2489 kB of archives.
#7 4.175 After this operation, 6475 kB of additional disk space will be used.
#7 4.175 Get:1 http://deb.debian.org/debian bullseye/main amd64 libevent-2.1-7 amd64 2.1.12-stable-1 [188 kB]
#7 4.306 Get:2 http://deb.debian.org/debian bullseye/main amd64 ed amd64 1.17-1 [60.7 kB]
#7 4.360 Get:3 http://deb.debian.org/debian bullseye/main amd64 opensmtpd amd64 6.8.0p2-3 [329 kB]
#7 4.467 Get:4 http://deb.debian.org/debian bullseye/main amd64 libhiredis0.14 amd64 0.14.1-1 [35.5 kB]
#7 4.478 Get:5 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules-db amd64 2.1.27+dfsg-2.1+deb11u1 [69.1 kB]
#7 4.488 Get:6 http://deb.debian.org/debian bullseye/main amd64 libsasl2-2 amd64 2.1.27+dfsg-2.1+deb11u1 [106 kB]
#7 4.511 Get:7 http://deb.debian.org/debian bullseye/main amd64 libldap-2.4-2 amd64 2.4.57+dfsg-3+deb11u1 [232 kB]
#7 4.564 Get:8 http://deb.debian.org/debian bullseye/main amd64 libldap-common all 2.4.57+dfsg-3+deb11u1 [95.8 kB]
#7 4.587 Get:9 http://deb.debian.org/debian bullseye/main amd64 mysql-common all 5.8+1.0.7 [7464 B]
#7 4.588 Get:10 http://deb.debian.org/debian-security bullseye-security/main amd64 mariadb-common all 1:10.5.29-0+deb11u1 [38.5 kB]
#7 4.596 Get:11 http://deb.debian.org/debian-security bullseye-security/main amd64 libmariadb3 amd64 1:10.5.29-0+deb11u1 [179 kB]
#7 4.635 Get:12 http://deb.debian.org/debian-security bullseye-security/main amd64 libpq5 amd64 13.21-0+deb11u1 [185 kB]
#7 4.673 Get:13 http://deb.debian.org/debian bullseye/main amd64 libsasl2-modules amd64 2.1.27+dfsg-2.1+deb11u1 [104 kB]
#7 4.701 Get:14 http://deb.debian.org/debian-security bullseye-security/main amd64 libsqlite3-0 amd64 3.34.1-3+deb11u1 [797 kB]
#7 5.025 Get:15 http://deb.debian.org/debian bullseye/main amd64 opensmtpd-extras amd64 6.7.1-2 [62.3 kB]
#7 5.198 debconf: delaying package configuration, since apt-utils is not installed
#7 5.218 Fetched 2489 kB in 1s (2454 kB/s)
#7 5.239 Selecting previously unselected package libevent-2.1-7:amd64.
#7 5.239 (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 6673 files and directories currently installed.)
#7 5.245 Preparing to unpack .../00-libevent-2.1-7_2.1.12-stable-1_amd64.deb ...
#7 5.252 Unpacking libevent-2.1-7:amd64 (2.1.12-stable-1) ...
#7 5.294 Selecting previously unselected package ed.
#7 5.294 Preparing to unpack .../01-ed_1.17-1_amd64.deb ...
#7 5.299 Unpacking ed (1.17-1) ...
#7 5.338 Selecting previously unselected package opensmtpd.
#7 5.339 Preparing to unpack .../02-opensmtpd_6.8.0p2-3_amd64.deb ...
#7 5.344 Unpacking opensmtpd (6.8.0p2-3) ...
#7 5.399 Selecting previously unselected package libhiredis0.14:amd64.
#7 5.399 Preparing to unpack .../03-libhiredis0.14_0.14.1-1_amd64.deb ...
#7 5.403 Unpacking libhiredis0.14:amd64 (0.14.1-1) ...
#7 5.430 Selecting previously unselected package libsasl2-modules-db:amd64.
#7 5.431 Preparing to unpack .../04-libsasl2-modules-db_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...
#7 5.435 Unpacking libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 5.467 Selecting previously unselected package libsasl2-2:amd64.
#7 5.468 Preparing to unpack .../05-libsasl2-2_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...
#7 5.472 Unpacking libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 5.509 Selecting previously unselected package libldap-2.4-2:amd64.
#7 5.510 Preparing to unpack .../06-libldap-2.4-2_2.4.57+dfsg-3+deb11u1_amd64.deb ...
#7 5.514 Unpacking libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...
#7 5.556 Selecting previously unselected package libldap-common.
#7 5.557 Preparing to unpack .../07-libldap-common_2.4.57+dfsg-3+deb11u1_all.deb ...
#7 5.561 Unpacking libldap-common (2.4.57+dfsg-3+deb11u1) ...
#7 5.600 Selecting previously unselected package mysql-common.
#7 5.601 Preparing to unpack .../08-mysql-common_5.8+1.0.7_all.deb ...
#7 5.612 Unpacking mysql-common (5.8+1.0.7) ...
#7 5.648 Selecting previously unselected package mariadb-common.
#7 5.649 Preparing to unpack .../09-mariadb-common_1%3a10.5.29-0+deb11u1_all.deb ...
#7 5.657 Unpacking mariadb-common (1:10.5.29-0+deb11u1) ...
#7 5.688 Selecting previously unselected package libmariadb3:amd64.
#7 5.689 Preparing to unpack .../10-libmariadb3_1%3a10.5.29-0+deb11u1_amd64.deb ...
#7 5.693 Unpacking libmariadb3:amd64 (1:10.5.29-0+deb11u1) ...
#7 5.737 Selecting previously unselected package libpq5:amd64.
#7 5.738 Preparing to unpack .../11-libpq5_13.21-0+deb11u1_amd64.deb ...
#7 5.742 Unpacking libpq5:amd64 (13.21-0+deb11u1) ...
#7 5.787 Selecting previously unselected package libsasl2-modules:amd64.
#7 5.788 Preparing to unpack .../12-libsasl2-modules_2.1.27+dfsg-2.1+deb11u1_amd64.deb ...
#7 5.792 Unpacking libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 5.829 Selecting previously unselected package libsqlite3-0:amd64.
#7 5.830 Preparing to unpack .../13-libsqlite3-0_3.34.1-3+deb11u1_amd64.deb ...
#7 5.834 Unpacking libsqlite3-0:amd64 (3.34.1-3+deb11u1) ...
#7 5.910 Selecting previously unselected package opensmtpd-extras.
#7 5.910 Preparing to unpack .../14-opensmtpd-extras_6.7.1-2_amd64.deb ...
#7 5.914 Unpacking opensmtpd-extras (6.7.1-2) ...
#7 5.949 Setting up mysql-common (5.8+1.0.7) ...
#7 5.974 update-alternatives: using /etc/mysql/my.cnf.fallback to provide /etc/mysql/my.cnf (my.cnf) in auto mode
#7 5.980 Setting up libsqlite3-0:amd64 (3.34.1-3+deb11u1) ...
#7 5.990 Setting up libsasl2-modules:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 6.005 Setting up libldap-common (2.4.57+dfsg-3+deb11u1) ...
#7 6.020 Setting up libsasl2-modules-db:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 6.030 Setting up mariadb-common (1:10.5.29-0+deb11u1) ...
#7 6.041 update-alternatives: using /etc/mysql/mariadb.cnf to provide /etc/mysql/my.cnf (my.cnf) in auto mode
#7 6.048 Setting up ed (1.17-1) ...
#7 6.063 Setting up libevent-2.1-7:amd64 (2.1.12-stable-1) ...
#7 6.073 Setting up libmariadb3:amd64 (1:10.5.29-0+deb11u1) ...
#7 6.082 Setting up libsasl2-2:amd64 (2.1.27+dfsg-2.1+deb11u1) ...
#7 6.092 Setting up opensmtpd (6.8.0p2-3) ...
#7 6.163 debconf: unable to initialize frontend: Dialog
#7 6.163 debconf: (TERM is not set, so the dialog frontend is not usable.)
#7 6.163 debconf: falling back to frontend: Readline
#7 6.163 debconf: unable to initialize frontend: Readline
#7 6.163 debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.32.1 /usr/local/share/perl/5.32.1 /usr/lib/x86_64-linux-gnu/perl5/5.32 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.32 /usr/share/perl/5.32 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
#7 6.163 debconf: falling back to frontend: Teletype
#7 6.175 Configuring opensmtpd
#7 6.175 ---------------------
#7 6.175 
#7 6.175 The "mail name" is used as the domain name in the email address for messages
#7 6.175 that only have a "local part" (such as <jrandomuser> or <root>). It should be a
#7 6.175 fully qualified domain name (FQDN) that you are entitled to use.
#7 6.175 
#7 6.175 For instance, to allow the local host to generate mail with addresses such as
#7 6.175 <jrandomuser@example.org>, set the system mail name to "example.org".
#7 6.175 
#7 6.175 This mail name is used as the hostname in the SMTP greeting banner, and will
#7 6.175 also be used by other programs.
#7 6.175 
#7 6.175 System mail name: 
#7 6.175 Use of uninitialized value $_[1] in join or string at /usr/share/perl5/Debconf/DbDriver/Stack.pm line 111.
#7 6.177 Mail for the "postmaster", "root", and other system accounts should be
#7 6.177 redirected to the user account(s) of the actual system administrator(s).
#7 6.177 
#7 6.177 Please enter a comma-separated list of the usernames of the intended
#7 6.177 recipients. Leave this field blank to not create an alias for "root"; in this
#7 6.177 case, the root account will receive mail addressed to "postmaster" and other
#7 6.177 system accounts, assuming aliases for these accounts do not already exist.
#7 6.177 
#7 6.177 Root and postmaster mail recipient: 
#7 6.177 Use of uninitialized value $_[1] in join or string at /usr/share/perl5/Debconf/DbDriver/Stack.pm line 111.
#7 6.204 Adding group `opensmtpd' (GID 101) ...
#7 6.220 Done.
#7 6.242 Adding group `opensmtpq' (GID 102) ...
#7 6.254 Done.
#7 6.277 Adding system user `opensmtpd' (UID 101) ...
#7 6.277 Adding new user `opensmtpd' (UID 101) with group `opensmtpd' ...
#7 6.332 Not creating home directory `/var/lib/opensmtpd/empty'.
#7 6.357 Adding system user `opensmtpq' (UID 102) ...
#7 6.357 Adding new user `opensmtpq' (UID 102) with group `opensmtpq' ...
#7 6.403 Not creating home directory `/var/lib/opensmtpd/empty'.
#7 6.419 invoke-rc.d: could not determine current runlevel
#7 6.423 invoke-rc.d: policy-rc.d denied execution of start.
#7 6.507 Use of uninitialized value $val in substitution (s///) at /usr/share/perl5/Debconf/Format/822.pm line 83, <GEN6> line 9.
#7 6.507 Use of uninitialized value $val in concatenation (.) or string at /usr/share/perl5/Debconf/Format/822.pm line 84, <GEN6> line 9.
#7 6.507 Use of uninitialized value $val in substitution (s///) at /usr/share/perl5/Debconf/Format/822.pm line 83, <GEN6> line 9.
#7 6.507 Use of uninitialized value $val in concatenation (.) or string at /usr/share/perl5/Debconf/Format/822.pm line 84, <GEN6> line 9.
#7 6.524 Setting up libhiredis0.14:amd64 (0.14.1-1) ...
#7 6.534 Setting up libldap-2.4-2:amd64 (2.4.57+dfsg-3+deb11u1) ...
#7 6.545 Setting up libpq5:amd64 (13.21-0+deb11u1) ...
#7 6.554 Setting up opensmtpd-extras (6.7.1-2) ...
#7 6.564 Processing triggers for libc-bin (2.31-13+deb11u13) ...
#7 DONE 6.6s

#8 [3/3] COPY smtp.conf /etc/smtpd/smtpd.conf
#8 DONE 0.0s

#9 exporting to image
#9 exporting layers
#9 exporting layers 0.4s done
#9 exporting manifest sha256:84f57401215baefd3d2563501cd8cd8ed28e8490afc0241162b9652a8c91c551 0.0s done
#9 exporting config sha256:104f68ea685a4c83f0c5a2f43269b7c2fdd077f1424cee7f44b8768844a5805d 0.0s done
#9 exporting attestation manifest sha256:a0dd4ca3b22c48cc5566d00e09c919e5127a6c6abfa4c76de8775436fb46ebe4 0.0s done
#9 exporting manifest list sha256:91d2e2a576ce9c9f1078685506d25b2e9adbd760b4312e535aecd5344a666f2c 0.0s done
#9 naming to docker.io/library/openai-opensmtpd:latest done
#9 unpacking to docker.io/library/openai-opensmtpd:latest 0.1s done
#9 DONE 0.6s

#10 resolving provenance for metadata file
#10 DONE 0.0s
 openai-opensmtpd  Built
 Network openai_smtp_network  Creating
 Network openai_smtp_network  Created
 Container openai-opensmtpd-1  Creating
 Container openai-opensmtpd-1  Created
 Container openai-opensmtpd-1  Starting
 Container openai-opensmtpd-1  Started
