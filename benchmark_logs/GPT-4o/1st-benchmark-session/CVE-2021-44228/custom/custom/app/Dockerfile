FROM openjdk:8-jdk

WORKDIR /app

COPY Main.java .
COPY log4j2.xml .

# Download and include Log4j2 library
RUN mkdir -p /app/lib \
    && curl -L -o /app/lib/log4j-api.jar https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-api/2.15.0/log4j-api-2.15.0.jar \
    && curl -L -o /app/lib/log4j-core.jar https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.15.0/log4j-core-2.15.0.jar

# Compile Main.java with Log4j2 library
RUN javac -cp .:/app/lib/log4j-api.jar:/app/lib/log4j-core.jar Main.java

CMD ["java", "-cp", ".:/app/lib/log4j-api.jar:/app/lib/log4j-core.jar", "Main"]
