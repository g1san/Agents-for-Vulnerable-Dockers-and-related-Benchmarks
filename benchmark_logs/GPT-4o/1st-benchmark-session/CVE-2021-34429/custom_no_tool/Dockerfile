FROM openjdk:11-jre

# Install Jetty
RUN apt-get update && \
    apt-get install -y wget apt-utils && \
    wget -qO jetty-distribution-11.0.5.tar.gz https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/11.0.5/jetty-distribution-11.0.5.tar.gz && \
    echo "d7a1b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3  jetty-distribution-11.0.5.tar.gz" | sha1sum -c - && \
    tar xz -C /opt -f jetty-distribution-11.0.5.tar.gz && \
    mv /opt/jetty-distribution-11.0.5 /opt/jetty && \
    rm -rf /var/lib/apt/lists/* jetty-distribution-11.0.5.tar.gz

# Set environment variables
ENV JETTY_HOME /opt/jetty
ENV PATH $JETTY_HOME/bin:$PATH

# Copy the web application files to the Jetty webapps directory
COPY ./webapps /opt/jetty/webapps

# Expose the Jetty port
EXPOSE 8080

# Start Jetty
CMD ["java", "-jar", "/opt/jetty/start.jar"]
