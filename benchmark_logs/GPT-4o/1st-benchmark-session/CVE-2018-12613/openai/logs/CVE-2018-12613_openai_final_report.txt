========== Generated Code (First Version) ==========
Directory tree:
./../../dockers/CVE-2018-12613/openai
├── docker-compose.yml
├── phpmyadmin
│   └── config.inc.php
└── apache
    ├── Dockerfile
    └── sites-available
        └── 000-default.conf


---------- docker-compose.yml ----------
version: '3.7'

services:
  db:
    image: mysql:5.7.22
    container_name: mysql_cve_2018_12613
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: testdb

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:4.8.1
    container_name: phpmyadmin_cve_2018_12613
    restart: always
    ports:
      - "8080:80"
    environment:
      PMA_HOST: db
      MYSQL_ROOT_PASSWORD: rootpassword
    volumes:
      - ./phpmyadmin/config.inc.php:/etc/phpmyadmin/config.inc.php

  web:
    build: ./apache
    container_name: apache_cve_2018_12613
    restart: always
    ports:
      - "8081:80"
    volumes:
      - ./phpmyadmin:/var/www/html


---------- phpmyadmin/config.inc.php ----------
<?php

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'db';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['AllowArbitraryServer'] = true;
$cfg['Servers'][$i]['AllowNoPassword'] = false;
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = 'pmapass';

/* End of servers configuration */

$cfg['ServerDefault'] = 0;


---------- apache/Dockerfile ----------
FROM php:7.2.6-apache

RUN a2enmod rewrite

COPY ./sites-available/000-default.conf /etc/apache2/sites-available/000-default.conf

RUN service apache2 restart


---------- apache/sites-available/000-default.conf ----------
<VirtualHost *:80>
    DocumentRoot /var/www/html
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>




========== Test Passed! Generated Code (Final Version) ==========
Directory tree:
./../../dockers/CVE-2018-12613/openai
├── docker-compose.yml
├── phpmyadmin
│   └── config.inc.php
└── apache
    ├── Dockerfile
    └── sites-available
        └── 000-default.conf


---------- docker-compose.yml ----------
version: '3.7'

services:
  db:
    image: mysql:5.7.22
    container_name: mysql_cve_2018_12613
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: testdb

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:4.8.1
    container_name: phpmyadmin_cve_2018_12613
    restart: always
    ports:
      - "8080:80"
    environment:
      PMA_HOST: db
      MYSQL_ROOT_PASSWORD: rootpassword
    volumes:
      - ./phpmyadmin/config.inc.php:/etc/phpmyadmin/config.inc.php

  web:
    build: ./apache
    container_name: apache_cve_2018_12613
    restart: always
    ports:
      - "8081:80"
    volumes:
      - ./phpmyadmin:/var/www/html


---------- phpmyadmin/config.inc.php ----------
<?php

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'db';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['AllowArbitraryServer'] = true;
$cfg['Servers'][$i]['AllowNoPassword'] = false;
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = 'pmapass';

/* End of servers configuration */

$cfg['ServerDefault'] = 0;


---------- apache/Dockerfile ----------
FROM php:7.2.6-apache

RUN a2enmod rewrite

COPY ./sites-available/000-default.conf /etc/apache2/sites-available/000-default.conf

RUN service apache2 restart


---------- apache/sites-available/000-default.conf ----------
<VirtualHost *:80>
    DocumentRoot /var/www/html
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>


