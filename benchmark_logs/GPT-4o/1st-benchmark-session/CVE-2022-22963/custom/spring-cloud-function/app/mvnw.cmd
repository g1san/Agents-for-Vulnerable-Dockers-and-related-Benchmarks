@ECHO OFF

SETLOCAL

REM ----------------------------------------------------------------------------
REM Licensed to the Apache Software Foundation (ASF) under one or more
REM contributor license agreements.  See the NOTICE file distributed with
REM this work for additional information regarding copyright ownership.
REM The ASF licenses this file to You under the Apache License, Version 2.0
REM (the "License"); you may not use this file except in compliance with
REM the License.  You may obtain a copy of the License at
REM
REM      http://www.apache.org/licenses/LICENSE-2.0
REM
REM Unless required by applicable law or agreed to in writing, software
REM distributed under the License is distributed on an "AS IS" BASIS,
REM WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
REM See the License for the specific language governing permissions and
REM limitations under the License.
REM ----------------------------------------------------------------------------

REM ----------------------------------------------------------------------------
REM Maven Start Up Batch script
REM
REM Required ENV vars:
REM
REM   JAVA_HOME - location of a JDK home dir
REM
REM Optional ENV vars
REM
REM   M2_HOME - location of maven2's installed home dir
REM   MAVEN_BATCH_ECHO - set to 'on' to enable the echoing of the batch commands
REM   MAVEN_BATCH_PAUSE - set to 'on' to wait for a key stroke before ending
REM   MAVEN_OPTS - parameters passed to the Java VM when running Maven
REM     e.g. to debug Maven itself, use
REM       set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
REM   MAVEN_SKIP_RC - flag to disable loading of mavenrc files
REM ----------------------------------------------------------------------------

@REM === START VALIDATION ===
IF NOT "%JAVA_HOME%"=="" (
  IF NOT EXIST "%JAVA_HOME%\bin\java.exe" (
    ECHO JAVA_HOME is set to an invalid directory: "%JAVA_HOME%"
    ECHO Please set the JAVA_HOME variable in your environment to match the
    ECHO location of your Java installation.
    EXIT /B 1
  )
) ELSE (
  ECHO JAVA_HOME environment variable is not set.
  EXIT /B 1
)

SET "M2_HOME=%~dp0.."

IF NOT EXIST "%M2_HOME%\bin\mvn" (
  ECHO M2_HOME is set to an invalid directory: "%M2_HOME%"
  ECHO Please set the M2_HOME variable in your environment to match the
  ECHO location of your Maven installation.
  EXIT /B 1
)

@REM === END VALIDATION ===

@REM === START MAVEN ===

@REM Enable echoing of batch commands if MAVEN_BATCH_ECHO is set to 'on'
IF "%MAVEN_BATCH_ECHO%"=="on" ECHO ON

@REM Execute Maven
"%M2_HOME%\bin\mvn" %*

@REM Pause the script if MAVEN_BATCH_PAUSE is set to 'on'
IF "%MAVEN_BATCH_PAUSE%"=="on" PAUSE

@REM End local scope
ENDLOCAL
