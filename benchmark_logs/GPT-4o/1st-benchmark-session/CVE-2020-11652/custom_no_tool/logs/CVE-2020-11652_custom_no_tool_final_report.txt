========== Generated Code (First Version) ==========
Directory tree:
CVE-2020-11652/
├── docker-compose.yml
├── salt-master/
│   ├── Dockerfile
│   └── master.conf
└── salt-minion/
    ├── Dockerfile
    └── minion.conf


---------- docker-compose.yml ----------
version: '3.8'

services:
  salt-master:
    build: ./salt-master
    ports:
      - "4505:4505"
      - "4506:4506"
    volumes:
      - salt-master-config:/etc/salt

  salt-minion:
    build: ./salt-minion
    depends_on:
      - salt-master
    volumes:
      - salt-minion-config:/etc/salt

volumes:
  salt-master-config:
  salt-minion-config:


---------- salt-master/Dockerfile ----------
FROM saltstack/salt:2019.2.3

COPY master.conf /etc/salt/master


---------- salt-master/master.conf ----------
file_roots:
  base:
    - /srv/salt

auth:
  pam:
    - username: password


---------- salt-minion/Dockerfile ----------
FROM saltstack/salt:2019.2.3

COPY minion.conf /etc/salt/minion


---------- salt-minion/minion.conf ----------
master: salt-master
id: vulnerable-minion




========== Test Passed! Generated Code (Final Version) ==========
Directory tree:
CVE-2020-11652/
├── docker-compose.yml
├── salt-master/
│   ├── Dockerfile
│   └── master.conf
└── salt-minion/
    ├── Dockerfile
    └── minion.conf


---------- docker-compose.yml ----------
version: '3.8'

services:
  salt-master:
    build: ./salt-master
    ports:
      - "4505:4505"
      - "4506:4506"
    volumes:
      - salt-master-config:/etc/salt

  salt-minion:
    build: ./salt-minion
    depends_on:
      - salt-master
    volumes:
      - salt-minion-config:/etc/salt

volumes:
  salt-master-config:
  salt-minion-config:


---------- salt-master/Dockerfile ----------
FROM saltstack/salt:2019.2.3

COPY master.conf /etc/salt/master


---------- salt-master/master.conf ----------
file_roots:
  base:
    - /srv/salt

auth:
  pam:
    - username: password


---------- salt-minion/Dockerfile ----------
FROM saltstack/salt:2019.2.3

COPY minion.conf /etc/salt/minion


---------- salt-minion/minion.conf ----------
master: salt-master
id: vulnerable-minion


