#!/bin/sh
# Simple script to wait for MySQL to become reachable before starting the Flask app
set -e
HOST=${DB_HOST:-db}
PORT=3306
echo "Waiting for MySQL at $HOST:$PORT..."
while ! mysqladmin ping -h "$HOST" -P "$PORT" --silent; do
  sleep 2
  echo "still waiting..."
done
echo "MySQL is up - starting Flask app"
exec python app.py