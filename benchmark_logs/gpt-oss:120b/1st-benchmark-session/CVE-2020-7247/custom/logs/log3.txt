time="2025-10-16T18:40:52+02:00" level=warning msg="/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2020-7247/custom/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 669B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 311B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.8-slim
#3 DONE 0.7s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 2.24kB done
#5 DONE 0.0s

#6 [1/7] FROM docker.io/library/python:3.8-slim@sha256:1d52838af602b4b5a831beb13a0e4d073280665ea7be7f69ce2382f29c5a613f
#6 resolve docker.io/library/python:3.8-slim@sha256:1d52838af602b4b5a831beb13a0e4d073280665ea7be7f69ce2382f29c5a613f 0.0s done
#6 DONE 0.0s

#7 [2/7] WORKDIR /app
#7 CACHED

#8 [3/7] COPY requirements.txt .
#8 DONE 0.0s

#9 [4/7] RUN pip install --no-cache-dir -r requirements.txt
#9 1.490 Collecting Flask==1.1.2
#9 1.643   Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)
#9 1.703      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.6/94.6 kB 1.9 MB/s eta 0:00:00
#9 1.750 Collecting Jinja2==2.11.3
#9 1.781   Downloading Jinja2-2.11.3-py2.py3-none-any.whl (125 kB)
#9 1.824      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 125.7/125.7 kB 2.9 MB/s eta 0:00:00
#9 1.936 Collecting pymysql==0.9.3
#9 1.969   Downloading PyMySQL-0.9.3-py2.py3-none-any.whl (47 kB)
#9 1.979      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 47.7/47.7 kB 4.8 MB/s eta 0:00:00
#9 2.161 Collecting markupsafe==2.0.1
#9 2.195   Downloading MarkupSafe-2.0.1-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (30 kB)
#9 2.278 Collecting Werkzeug>=0.15
#9 2.312   Downloading werkzeug-3.0.6-py3-none-any.whl (227 kB)
#9 2.383      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 228.0/228.0 kB 3.2 MB/s eta 0:00:00
#9 2.423 Collecting itsdangerous>=0.24
#9 2.450   Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
#9 2.502 Collecting click>=5.1
#9 2.530   Downloading click-8.1.8-py3-none-any.whl (98 kB)
#9 2.558      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.2/98.2 kB 3.8 MB/s eta 0:00:00
#9 2.584 Collecting Werkzeug>=0.15
#9 2.724   Downloading werkzeug-3.0.5-py3-none-any.whl (227 kB)
#9 2.779      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 227.7/227.7 kB 4.2 MB/s eta 0:00:00
#9 2.818   Downloading werkzeug-3.0.4-py3-none-any.whl (227 kB)
#9 2.870      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 227.6/227.6 kB 4.4 MB/s eta 0:00:00
#9 2.911   Downloading werkzeug-3.0.3-py3-none-any.whl (227 kB)
#9 2.952      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 227.3/227.3 kB 5.8 MB/s eta 0:00:00
#9 2.992   Downloading werkzeug-3.0.2-py3-none-any.whl (226 kB)
#9 3.033      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 226.8/226.8 kB 5.7 MB/s eta 0:00:00
#9 3.072   Downloading werkzeug-3.0.1-py3-none-any.whl (226 kB)
#9 3.112      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 226.7/226.7 kB 6.2 MB/s eta 0:00:00
#9 3.150   Downloading werkzeug-3.0.0-py3-none-any.whl (226 kB)
#9 3.187      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 226.6/226.6 kB 6.4 MB/s eta 0:00:00
#9 3.227   Downloading werkzeug-2.3.8-py3-none-any.whl (242 kB)
#9 3.263      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.3/242.3 kB 7.4 MB/s eta 0:00:00
#9 3.302   Downloading werkzeug-2.3.7-py3-none-any.whl (242 kB)
#9 3.334      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.2/242.2 kB 8.1 MB/s eta 0:00:00
#9 3.375   Downloading Werkzeug-2.3.6-py3-none-any.whl (242 kB)
#9 3.406      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.5/242.5 kB 8.5 MB/s eta 0:00:00
#9 3.446   Downloading Werkzeug-2.3.5-py3-none-any.whl (242 kB)
#9 3.481      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.9/242.9 kB 7.2 MB/s eta 0:00:00
#9 3.522   Downloading Werkzeug-2.3.4-py3-none-any.whl (242 kB)
#9 3.556      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.5/242.5 kB 7.3 MB/s eta 0:00:00
#9 3.596   Downloading Werkzeug-2.3.3-py3-none-any.whl (242 kB)
#9 3.628      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.3/242.3 kB 8.5 MB/s eta 0:00:00
#9 3.770   Downloading Werkzeug-2.3.2-py3-none-any.whl (242 kB)
#9 3.795      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.2/242.2 kB 10.4 MB/s eta 0:00:00
#9 3.936   Downloading Werkzeug-2.3.1-py3-none-any.whl (242 kB)
#9 3.961      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.0/242.0 kB 10.4 MB/s eta 0:00:00
#9 3.999   Downloading Werkzeug-2.3.0-py3-none-any.whl (233 kB)
#9 4.023      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 233.7/233.7 kB 11.6 MB/s eta 0:00:00
#9 4.065   Downloading Werkzeug-2.2.3-py3-none-any.whl (233 kB)
#9 4.083      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 233.6/233.6 kB 15.6 MB/s eta 0:00:00
#9 4.123   Downloading Werkzeug-2.2.2-py3-none-any.whl (232 kB)
#9 4.142      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.7/232.7 kB 14.0 MB/s eta 0:00:00
#9 4.181   Downloading Werkzeug-2.2.1-py3-none-any.whl (232 kB)
#9 4.202      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.4/232.4 kB 12.0 MB/s eta 0:00:00
#9 4.242   Downloading Werkzeug-2.2.0-py3-none-any.whl (232 kB)
#9 4.261      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.2/232.2 kB 13.9 MB/s eta 0:00:00
#9 4.301   Downloading Werkzeug-2.1.2-py3-none-any.whl (224 kB)
#9 4.321      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 224.9/224.9 kB 13.0 MB/s eta 0:00:00
#9 4.366 Installing collected packages: pymysql, Werkzeug, markupsafe, itsdangerous, click, Jinja2, Flask
#9 4.679 Successfully installed Flask-1.1.2 Jinja2-2.11.3 Werkzeug-2.1.2 click-8.1.8 itsdangerous-2.2.0 markupsafe-2.0.1 pymysql-0.9.3
#9 4.680 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#9 4.826 
#9 4.826 [notice] A new release of pip is available: 23.0.1 -> 25.0.1
#9 4.826 [notice] To update, run: pip install --upgrade pip
#9 DONE 4.9s

#10 [5/7] COPY wait-for-db.sh /usr/local/bin/wait-for-db.sh
#10 DONE 0.1s

#11 [6/7] RUN chmod +x /usr/local/bin/wait-for-db.sh
#11 DONE 0.3s

#12 [7/7] COPY app.py .
#12 DONE 0.0s

#13 exporting to image
#13 exporting layers
#13 exporting layers 0.6s done
#13 exporting manifest sha256:b12724c397db370dfd42b63b7f6340497e076ae6cea33347bea201f06240802c done
#13 exporting config sha256:e4e3c4787d088e667092aca60c076a780d3b7c15d7b2cf64b308725bc96ab122 0.0s done
#13 exporting attestation manifest sha256:16a89aeea90591aa60ad646ac08579c928118a20bcc08450cc6b56e8b38798e2 0.0s done
#13 exporting manifest list sha256:2aa7184251c1a650160ca48e643dbd5b531e8bdb437bf67475a4b50a11305b52 0.0s done
#13 naming to docker.io/library/custom-app:latest done
#13 unpacking to docker.io/library/custom-app:latest
#13 unpacking to docker.io/library/custom-app:latest 0.3s done
#13 DONE 1.0s

#14 resolving provenance for metadata file
#14 DONE 0.0s
 custom-app  Built
 Network custom_default  Creating
 Network custom_default  Created
 Volume custom_db_data  Creating
 Volume custom_db_data  Created
 Container custom-web-1  Creating
 Container custom-db-1  Creating
 Container custom-db-1  Created
 Container custom-app-1  Creating
 Container custom-web-1  Created
 Container custom-app-1  Created
 Container custom-db-1  Starting
 Container custom-web-1  Starting
 Container custom-db-1  Started
 Container custom-db-1  Waiting
 Container custom-web-1  Started
 Container custom-db-1  Healthy
 Container custom-app-1  Starting
 Container custom-app-1  Started


sudo docker logs 77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db --details
STDOUT:  Waiting for MySQL at db:3306...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...
 still waiting...

STDERR:  /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found
 /usr/local/bin/wait-for-db.sh: 7: mysqladmin: not found




sudo docker inspect 77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db[
    {
        "Id": "77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db",
        "Created": "2025-10-16T16:40:59.866008483Z",
        "Path": "/usr/local/bin/wait-for-db.sh",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 5667,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-10-16T16:41:05.889971754Z",
            "FinishedAt": "0001-01-01T00:00:00Z"
        },
        "Image": "sha256:2aa7184251c1a650160ca48e643dbd5b531e8bdb437bf67475a4b50a11305b52",
        "ResolvConfPath": "/var/lib/docker/containers/77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db/hostname",
        "HostsPath": "/var/lib/docker/containers/77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db/hosts",
        "LogPath": "/var/lib/docker/containers/77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db/77cce62b42043265dd26c25b9bcd90a4e16bde0c8ec68b5ba4306caa7e6165db-json.log",
        "Name": "/custom-app-1",
        "RestartCount": 0,
        "Driver": "overlayfs",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "custom_default",
            "PortBindings": {
                "5000/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "5000"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                0,
                0
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": null,
            "DnsOptions": null,
            "DnsSearch": null,
            "ExtraHosts": [],
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": null,
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": null,
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": null,
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/interrupts",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": null,
            "Name": "overlayfs"
        },
        "Mounts": [],
        "Config": {
            "Hostname": "77cce62b4204",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": true,
            "AttachStderr": true,
            "ExposedPorts": {
                "5000/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "DB_USER=user",
                "DB_PASSWORD=pass",
                "DB_NAME=vuln",
                "DB_HOST=db",
                "PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "LANG=C.UTF-8",
                "GPG_KEY=E3FF2839C048B25C084DEBE9B26995E310250568",
                "PYTHON_VERSION=3.8.20"
            ],
            "Cmd": null,
            "Image": "custom-app",
            "Volumes": null,
            "WorkingDir": "/app",
            "Entrypoint": [
                "/usr/local/bin/wait-for-db.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "com.docker.compose.config-hash": "e22142474f481e5c2d5f66c2ec0aa1f7f78bf593b630246429925bca052945d6",
                "com.docker.compose.container-number": "1",
                "com.docker.compose.depends_on": "db:service_healthy:false",
                "com.docker.compose.image": "sha256:2aa7184251c1a650160ca48e643dbd5b531e8bdb437bf67475a4b50a11305b52",
                "com.docker.compose.oneoff": "False",
                "com.docker.compose.project": "custom",
                "com.docker.compose.project.config_files": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2020-7247/custom/docker-compose.yml",
                "com.docker.compose.project.working_dir": "/home/gabriele/thesis-project/Agents-for-Vulnerable-Dockers-and-related-Benchmarks/dockers/CVE-2020-7247/custom",
                "com.docker.compose.service": "app",
                "com.docker.compose.version": "2.40.0",
                "desktop.docker.io/wsl-distro": "Ubuntu"
            },
            "StopTimeout": 1
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "5e1e84bebeefa9f6d121946346a0169b92c012b9542f2ee3a17edec93992015d",
            "SandboxKey": "/var/run/docker/netns/5e1e84bebeef",
            "Ports": {
                "5000/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "5000"
                    },
                    {
                        "HostIp": "::",
                        "HostPort": "5000"
                    }
                ]
            },
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "custom_default": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": [
                        "custom-app-1",
                        "app"
                    ],
                    "MacAddress": "66:ce:59:a1:6b:85",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "b6de6e3682654c03a081cd65b32c1616c93ee2fbf844c528a7b970dff8c51414",
                    "EndpointID": "830f6ca7c11478b08b7671deb49e652f5dcc13bf1b8761ef67966a8ec048fe7f",
                    "Gateway": "172.18.0.1",
                    "IPAddress": "172.18.0.4",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": [
                        "custom-app-1",
                        "app",
                        "77cce62b4204"
                    ]
                }
            }
        },
        "ImageManifestDescriptor": {
            "mediaType": "application/vnd.oci.image.manifest.v1+json",
            "digest": "sha256:b12724c397db370dfd42b63b7f6340497e076ae6cea33347bea201f06240802c",
            "size": 2186,
            "platform": {
                "architecture": "amd64",
                "os": "linux"
            }
        }
    }
]