FROM httpd:2.4.49

# Ensure CGI directory exists
RUN mkdir -p /usr/local/apache2/cgi-bin

# Copy custom configuration and web content
COPY httpd.conf /usr/local/apache2/conf/httpd.conf
COPY htdocs/ /usr/local/apache2/htdocs/
COPY htdocs/cgi-bin/hello.cgi /usr/local/apache2/cgi-bin/hello.cgi

# Make the CGI script executable
RUN chmod 755 /usr/local/apache2/cgi-bin/hello.cgi

EXPOSE 80