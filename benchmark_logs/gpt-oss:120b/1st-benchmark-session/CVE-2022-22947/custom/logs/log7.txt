#1 [internal] load local bake definitions
#1 reading from stdin 1.32kB done
#1 DONE 0.0s

#2 [downstream internal] load build definition from Dockerfile
#2 transferring dockerfile: 346B done
#2 DONE 0.0s

#3 [gateway internal] load build definition from Dockerfile
#3 transferring dockerfile: 387B done
#3 DONE 0.0s

#4 [downstream internal] load metadata for docker.io/library/maven:3.9.6-amazoncorretto-17
#4 DONE 0.8s

#5 [downstream internal] load metadata for docker.io/library/amazoncorretto:17-alpine
#5 DONE 0.8s

#6 [downstream internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [gateway internal] load .dockerignore
#7 transferring context: 81B done
#7 DONE 0.0s

#8 [downstream build 1/4] FROM docker.io/library/maven:3.9.6-amazoncorretto-17@sha256:153db9abd054e21cbf5bb0c192bf1aa5c9e592114aa9dd336053b4d1f3bec818
#8 resolve docker.io/library/maven:3.9.6-amazoncorretto-17@sha256:153db9abd054e21cbf5bb0c192bf1aa5c9e592114aa9dd336053b4d1f3bec818 0.0s done
#8 DONE 0.0s

#9 [downstream stage-1 1/4] FROM docker.io/library/amazoncorretto:17-alpine@sha256:b4e5ae2a0de33454f70392d7dc0cf765cf07d9b5026cdc30f66195f5f3a3248c
#9 resolve docker.io/library/amazoncorretto:17-alpine@sha256:b4e5ae2a0de33454f70392d7dc0cf765cf07d9b5026cdc30f66195f5f3a3248c 0.0s done
#9 DONE 0.0s

#10 [gateway internal] load build context
#10 transferring context: 3.60kB done
#10 DONE 0.0s

#11 [downstream internal] load build context
#11 transferring context: 2.95kB done
#11 DONE 0.0s

#12 [gateway build 3/4] COPY . /app
#12 CACHED

#13 [gateway build 4/4] RUN mvn -B -DskipTests package
#13 CACHED

#14 [gateway runtime 4/4] COPY --from=build /app/target/gateway-0.0.1-SNAPSHOT.jar app.jar
#14 CACHED

#15 [downstream stage-1 3/4] RUN apk add --no-cache curl
#15 CACHED

#16 [downstream build 3/4] COPY . /app
#16 CACHED

#17 [downstream build 4/4] RUN mvn -B -DskipTests package
#17 CACHED

#18 [downstream stage-1 2/4] WORKDIR /app
#18 CACHED

#19 [downstream build 2/4] WORKDIR /app
#19 CACHED

#20 [downstream stage-1 4/4] COPY --from=build /app/target/downstream-0.0.1-SNAPSHOT.jar app.jar
#20 CACHED

#21 [gateway] exporting to image
#21 exporting layers done
#21 exporting manifest sha256:fd850a790efdf6b4cd6dfea242c4a551a814ba5377f58b4d9ff55336a64ea461 done
#21 exporting config sha256:21cde80247af50e213086b5a611bc45cb14f108951cb3c880f7988c120d3317a done
#21 exporting attestation manifest sha256:806a07e4e3c8ceb5aa2008fb7c5344c806d3391a05fbe6cfacb5fe8446882d1d 0.0s done
#21 exporting manifest list sha256:a7305cbb24b497a2ec650bcb21cb846ff3ac2f775241fb7bf5be72fec928912d 0.0s done
#21 naming to docker.io/library/custom-gateway:latest 0.1s done
#21 unpacking to docker.io/library/custom-gateway:latest
#21 unpacking to docker.io/library/custom-gateway:latest done
#21 DONE 0.2s

#22 [downstream] exporting to image
#22 exporting layers done
#22 exporting manifest sha256:b29e8637f8799a4ada531c967edd64322912efefa0f1f363e59aaecbbf65819a done
#22 exporting config sha256:7db9a1194a88124d0dfee7843d07d09d6a2dd3c3255807ada32be86be94dd6ce done
#22 exporting attestation manifest sha256:1d112e4320fe5661f556cbb4fe31ac649d674d8156a2f8c20181ae6566849247 0.0s done
#22 exporting manifest list sha256:68234984d81abdf2eba365421b142d37f3ab7294a4221bed5779b8564f48bde9 0.1s done
#22 naming to docker.io/library/custom-downstream:latest done
#22 unpacking to docker.io/library/custom-downstream:latest 0.0s done
#22 DONE 0.2s

#23 [gateway] resolving provenance for metadata file
#23 DONE 0.0s

#24 [downstream] resolving provenance for metadata file
#24 DONE 0.0s
 custom-downstream  Built
 custom-gateway  Built
 Network custom_default  Creating
 Network custom_default  Created
 Container downstream  Creating
 Container downstream  Created
 Container gateway  Creating
 Container gateway  Created
 Container downstream  Starting
 Container downstream  Started
 Container downstream  Waiting
 Container downstream  Healthy
 Container gateway  Starting
Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint gateway (3f267fd0cfe53edc8c28a6b19d774517fe520669cf7cd2ddc4670084419be9a3): Bind for 0.0.0.0:8080 failed: port is already allocated
