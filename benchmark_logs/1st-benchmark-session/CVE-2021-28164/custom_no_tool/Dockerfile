FROM openjdk:8-jdk

# Install Jetty
RUN apt-get update && \
    apt-get install -y wget && \
    wget -qO- https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/9.4.37.v20210219/jetty-distribution-9.4.37.v20210219.tar.gz | tar xz -C /opt && \
    mv /opt/jetty-distribution-9.4.37.v20210219 /opt/jetty && \
    rm -rf /var/lib/apt/lists/*

# Set Jetty home
ENV JETTY_HOME /opt/jetty

# Copy the web application files to the Jetty webapps directory
COPY ./webapps $JETTY_HOME/webapps

# Expose the Jetty port
EXPOSE 8080

# Start Jetty
CMD ["/opt/jetty/bin/jetty.sh", "run"]
