FROM httpd:2.4.50

# Update to use the 'bullseye' release
RUN sed -i 's|http://security.debian.org/debian-security|http://security.debian.org/debian-security|g' /etc/apt/sources.list && \
    sed -i 's/buster/bullseye/g' /etc/apt/sources.list && \
    apt-get update && \
    apt-get install -y python3 && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

COPY httpd.conf /usr/local/apache2/conf/httpd.conf
COPY cgi-bin/ /usr/local/apache2/cgi-bin/
RUN chmod +x /usr/local/apache2/cgi-bin/test.cgi
