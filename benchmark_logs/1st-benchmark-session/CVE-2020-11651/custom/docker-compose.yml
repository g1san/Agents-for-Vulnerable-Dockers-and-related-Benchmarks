version: '3'
services:
  salt-master:
    build:
      context: .
      dockerfile: Dockerfile.master
    ports:
      - "4505:4505"
      - "4506:4506"
    volumes:
      - ./master:/etc/salt/master

  salt-minion:
    build:
      context: .
      dockerfile: Dockerfile.minion
    volumes:
      - ./minion:/etc/salt/minion
    depends_on:
      - salt-master
