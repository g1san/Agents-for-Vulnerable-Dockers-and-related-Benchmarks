FROM alpine:3.11

# Add a custom repository that contains the required version of opensmtpd
COPY opensmtpd-6.6.1-r0.apk /tmp/opensmtpd-6.6.1-r0.apk

# Manually download and install the specific version of opensmtpd
RUN apk add --no-cache /tmp/opensmtpd-6.6.1-r0.apk

COPY smtpd.conf /etc/smtpd/smtpd.conf

CMD ["/usr/sbin/smtpd", "-d"]
